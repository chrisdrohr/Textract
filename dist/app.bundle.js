!function(n){var r={};function i(t){if(r[t])return r[t].exports;var e=r[t]={i:t,l:!1,exports:{}};return n[t].call(e.exports,e,e.exports,i),e.l=!0,e.exports}i.m=n,i.c=r,i.d=function(t,e,n){i.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},i.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},i.t=function(e,t){if(1&t&&(e=i(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(i.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)i.d(n,r,function(t){return e[t]}.bind(null,r));return n},i.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return i.d(e,"a",e),e},i.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},i.p="",i(i.s=179)}([function(t,e,n){var v=n(3),y=n(20),g=n(12),m=n(13),_=n(21),b="prototype",w=function(t,e,n){var r,i,o,a,s=t&w.F,u=t&w.G,c=t&w.S,h=t&w.P,l=t&w.B,f=u?v:c?v[e]||(v[e]={}):(v[e]||{})[b],p=u?y:y[e]||(y[e]={}),d=p[b]||(p[b]={});for(r in u&&(n=e),n)o=((i=!s&&f&&void 0!==f[r])?f:n)[r],a=l&&i?_(o,v):h&&"function"==typeof o?_(Function.call,o):o,f&&m(f,r,o,t&w.U),p[r]!=o&&g(p,r,a),h&&d[r]!=o&&(d[r]=o)};v.core=y,w.F=1,w.G=2,w.S=4,w.P=8,w.B=16,w.W=32,w.U=64,w.R=128,t.exports=w},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var p=n(176),d=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},v="[DEFAULT]",r=[],y=function(){function t(t,e,n){this.firebase_=n,this.isDeleted_=!1,this.services_={},this.name_=e.name,this._automaticDataCollectionEnabled=e.automaticDataCollectionEnabled||!1,this.options_=p.deepCopy(t),this.INTERNAL={getUid:function(){return null},getToken:function(){return Promise.resolve(null)},addAuthTokenListener:function(t){r.push(t),setTimeout(function(){return t(null)},0)},removeAuthTokenListener:function(e){r=r.filter(function(t){return t!==e})}}}return Object.defineProperty(t.prototype,"automaticDataCollectionEnabled",{get:function(){return this.checkDestroyed_(),this._automaticDataCollectionEnabled},set:function(t){this.checkDestroyed_(),this._automaticDataCollectionEnabled=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"name",{get:function(){return this.checkDestroyed_(),this.name_},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"options",{get:function(){return this.checkDestroyed_(),this.options_},enumerable:!0,configurable:!0}),t.prototype.delete=function(){var r=this;return new Promise(function(t){r.checkDestroyed_(),t()}).then(function(){r.firebase_.INTERNAL.removeApp(r.name_);var n=[];return Object.keys(r.services_).forEach(function(e){Object.keys(r.services_[e]).forEach(function(t){n.push(r.services_[e][t])})}),Promise.all(n.map(function(t){return t.INTERNAL.delete()}))}).then(function(){r.isDeleted_=!0,r.services_={}})},t.prototype._getService=function(t,e){if(void 0===e&&(e=v),this.checkDestroyed_(),this.services_[t]||(this.services_[t]={}),!this.services_[t][e]){var n=e!==v?e:void 0,r=this.firebase_.INTERNAL.factories[t](this,this.extendApp.bind(this),n);this.services_[t][e]=r}return this.services_[t][e]},t.prototype.extendApp=function(t){var e=this;p.deepExtend(this,t),t.INTERNAL&&t.INTERNAL.addAuthTokenListener&&(r.forEach(function(t){e.INTERNAL.addAuthTokenListener(t)}),r=[])},t.prototype.checkDestroyed_=function(){this.isDeleted_&&g("app-deleted",{name:this.name_})},t}();function g(t,e){throw i.create(t,e)}y.prototype.name&&y.prototype.options||y.prototype.delete||console.log("dc");var i=new p.ErrorFactory("app","Firebase",{"no-app":"No Firebase App '{$name}' has been created - call Firebase App.initializeApp()","bad-app-name":"Illegal App name: '{$name}","duplicate-app":"Firebase App named '{$name}' already exists","app-deleted":"Firebase App named '{$name}' already deleted","duplicate-service":"Firebase service named '{$name}' already registered","sa-not-supported":"Initializing the Firebase SDK with a service account is only allowed in a Node.js environment. On client devices, you should instead initialize the SDK with an api key and auth domain","invalid-app-argument":"firebase.{$name}() takes either no argument or a Firebase App instance."}),o=function t(){var a={},s={},u={},c={__esModule:!0,initializeApp:function(t,e){if(void 0===e&&(e={}),"object"!=typeof e||null===e){var n=e;e={name:n}}var r=e;void 0===r.name&&(r.name=v);var i=r.name;"string"==typeof i&&i||g("bad-app-name",{name:i+""}),d(a,i)&&g("duplicate-app",{name:i});var o=new y(t,r,c);return f(a[i]=o,"create"),o},app:h,apps:null,Promise:Promise,SDK_VERSION:"5.7.3",INTERNAL:{registerService:function(n,t,e,r,i){s[n]&&g("duplicate-service",{name:n}),s[n]=t,r&&(u[n]=r,l().forEach(function(t){r("create",t)}));var o=function(t){return void 0===t&&(t=h()),"function"!=typeof t[n]&&g("invalid-app-argument",{name:n}),t[n]()};return void 0!==e&&p.deepExtend(o,e),c[n]=o,y.prototype[n]=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return this._getService.bind(this,n).apply(this,i?t:[])},o},createFirebaseNamespace:t,extendNamespace:function(t){p.deepExtend(c,t)},createSubscribe:p.createSubscribe,ErrorFactory:p.ErrorFactory,removeApp:function(t){f(a[t],"delete"),delete a[t]},factories:s,useAsService:i,Promise:Promise,deepExtend:p.deepExtend}};function h(t){return d(a,t=t||v)||g("no-app",{name:t}),a[t]}function l(){return Object.keys(a).map(function(t){return a[t]})}function f(n,r){Object.keys(s).forEach(function(t){var e=i(n,t);null!==e&&u[e]&&u[e](r,n)})}function i(t,e){if("serverAuth"===e)return null;var n=e;return t.options,n}return p.patchProperty(c,"default",c),Object.defineProperty(c,"apps",{get:l}),p.patchProperty(h,"App",y),c}();e.firebase=o,e.default=o},function(t,e,n){var r=n(5);t.exports=function(t){if(!r(t))throw TypeError(t+" is not an object!");return t}},function(t,e){var n=t.exports="undefined"!=typeof window&&window.Math==Math?window:"undefined"!=typeof self&&self.Math==Math?self:Function("return this")();"number"==typeof __g&&(__g=n)},function(t,e){t.exports=function(t){try{return!!t()}catch(t){return!0}}},function(t,e){t.exports=function(t){return"object"==typeof t?null!==t:"function"==typeof t}},function(t,e,n){var r=n(69)("wks"),i=n(37),o=n(3).Symbol,a="function"==typeof o;(t.exports=function(t){return r[t]||(r[t]=a&&o[t]||(a?o:i)("Symbol."+t))}).store=r},function(t,e,n){var r=n(23),i=Math.min;t.exports=function(t){return 0<t?i(r(t),9007199254740991):0}},function(t,e,n){t.exports=!n(4)(function(){return 7!=Object.defineProperty({},"a",{get:function(){return 7}}).a})},function(t,e,n){var r=n(2),i=n(130),o=n(25),a=Object.defineProperty;e.f=n(8)?Object.defineProperty:function(t,e,n){if(r(t),e=o(e,!0),r(n),i)try{return a(t,e,n)}catch(t){}if("get"in n||"set"in n)throw TypeError("Accessors not supported!");return"value"in n&&(t[e]=n.value),t}},function(t,e,n){var r=n(26);t.exports=function(t){return Object(r(t))}},function(t,e){t.exports=function(t){if("function"!=typeof t)throw TypeError(t+" is not a function!");return t}},function(t,e,n){var r=n(9),i=n(36);t.exports=n(8)?function(t,e,n){return r.f(t,e,i(1,n))}:function(t,e,n){return t[e]=n,t}},function(t,e,n){var o=n(3),a=n(12),s=n(15),u=n(37)("src"),r="toString",i=Function[r],c=(""+i).split(r);n(20).inspectSource=function(t){return i.call(t)},(t.exports=function(t,e,n,r){var i="function"==typeof n;i&&(s(n,"name")||a(n,"name",e)),t[e]!==n&&(i&&(s(n,u)||a(n,u,t[e]?""+t[e]:c.join(String(e)))),t===o?t[e]=n:r?t[e]?t[e]=n:a(t,e,n):(delete t[e],a(t,e,n)))})(Function.prototype,r,function(){return"function"==typeof this&&this[u]||i.call(this)})},function(t,e,n){var r=n(0),i=n(4),a=n(26),s=/"/g,o=function(t,e,n,r){var i=String(a(t)),o="<"+e;return""!==n&&(o+=" "+n+'="'+String(r).replace(s,"&quot;")+'"'),o+">"+i+"</"+e+">"};t.exports=function(e,t){var n={};n[e]=t(o),r(r.P+r.F*i(function(){var t=""[e]('"');return t!==t.toLowerCase()||3<t.split('"').length}),"String",n)}},function(t,e){var n={}.hasOwnProperty;t.exports=function(t,e){return n.call(t,e)}},function(t,e,n){var r=n(60),i=n(26);t.exports=function(t){return r(i(t))}},function(t,e,n){var r=n(61),i=n(36),o=n(16),a=n(25),s=n(15),u=n(130),c=Object.getOwnPropertyDescriptor;e.f=n(8)?c:function(t,e){if(t=o(t),e=a(e,!0),u)try{return c(t,e)}catch(t){}if(s(t,e))return i(!r.f.call(t,e),t[e])}},function(t,e,n){var r=n(15),i=n(10),o=n(91)("IE_PROTO"),a=Object.prototype;t.exports=Object.getPrototypeOf||function(t){return t=i(t),r(t,o)?t[o]:"function"==typeof t.constructor&&t instanceof t.constructor?t.constructor.prototype:t instanceof Object?a:null}},function(t,e,n){var r=n(120)("wks"),i=n(66),o=n(31).Symbol,a="function"==typeof o;(t.exports=function(t){return r[t]||(r[t]=a&&o[t]||(a?o:i)("Symbol."+t))}).store=r},function(t,e){var n=t.exports={version:"2.6.2"};"number"==typeof __e&&(__e=n)},function(t,e,n){var o=n(11);t.exports=function(r,i,t){if(o(r),void 0===i)return r;switch(t){case 1:return function(t){return r.call(i,t)};case 2:return function(t,e){return r.call(i,t,e)};case 3:return function(t,e,n){return r.call(i,t,e,n)}}return function(){return r.apply(i,arguments)}}},function(t,e){var n={}.toString;t.exports=function(t){return n.call(t).slice(8,-1)}},function(t,e){var n=Math.ceil,r=Math.floor;t.exports=function(t){return isNaN(t=+t)?0:(0<t?r:n)(t)}},function(t,e,n){"use strict";var r=n(4);t.exports=function(t,e){return!!t&&r(function(){e?t.call(null,function(){},1):t.call(null)})}},function(t,e,n){var i=n(5);t.exports=function(t,e){if(!i(t))return t;var n,r;if(e&&"function"==typeof(n=t.toString)&&!i(r=n.call(t)))return r;if("function"==typeof(n=t.valueOf)&&!i(r=n.call(t)))return r;if(!e&&"function"==typeof(n=t.toString)&&!i(r=n.call(t)))return r;throw TypeError("Can't convert object to primitive value")}},function(t,e){t.exports=function(t){if(null==t)throw TypeError("Can't call method on  "+t);return t}},function(t,e,n){var i=n(0),o=n(20),a=n(4);t.exports=function(t,e){var n=(o.Object||{})[t]||Object[t],r={};r[t]=e(n),i(i.S+i.F*a(function(){n(1)}),"Object",r)}},function(t,e,n){var _=n(21),b=n(60),w=n(10),E=n(7),r=n(107);t.exports=function(l,t){var f=1==l,p=2==l,d=3==l,v=4==l,y=6==l,g=5==l||y,m=t||r;return function(t,e,n){for(var r,i,o=w(t),a=b(o),s=_(e,n,3),u=E(a.length),c=0,h=f?m(t,u):p?m(t,0):void 0;c<u;c++)if((g||c in a)&&(i=s(r=a[c],c,o),l))if(f)h[c]=i;else if(i)switch(l){case 3:return!0;case 5:return r;case 6:return c;case 2:h.push(r)}else if(v)return!1;return y?-1:d||v?v:h}}},function(t,e,n){"use strict";if(n(8)){var g=n(34),m=n(3),_=n(4),b=n(0),w=n(80),r=n(115),f=n(21),E=n(43),i=n(36),S=n(12),o=n(45),a=n(23),T=n(7),C=n(158),s=n(39),u=n(25),c=n(15),I=n(52),x=n(5),p=n(10),d=n(104),A=n(40),N=n(18),k=n(41).f,v=n(106),h=n(37),l=n(6),y=n(28),R=n(70),O=n(63),P=n(109),D=n(54),L=n(75),M=n(42),F=n(108),j=n(147),U=n(9),W=n(17),B=U.f,V=W.f,q=m.RangeError,H=m.TypeError,K=m.Uint8Array,G="ArrayBuffer",Q="Shared"+G,z="BYTES_PER_ELEMENT",Y="prototype",X=Array[Y],J=r.ArrayBuffer,$=r.DataView,Z=y(0),tt=y(2),et=y(3),nt=y(4),rt=y(5),it=y(6),ot=R(!0),at=R(!1),st=P.values,ut=P.keys,ct=P.entries,ht=X.lastIndexOf,lt=X.reduce,ft=X.reduceRight,pt=X.join,dt=X.sort,vt=X.slice,yt=X.toString,gt=X.toLocaleString,mt=l("iterator"),_t=l("toStringTag"),bt=h("typed_constructor"),wt=h("def_constructor"),Et=w.CONSTR,St=w.TYPED,Tt=w.VIEW,Ct="Wrong length!",It=y(1,function(t,e){return Rt(O(t,t[wt]),e)}),xt=_(function(){return 1===new K(new Uint16Array([1]).buffer)[0]}),At=!!K&&!!K[Y].set&&_(function(){new K(1).set({})}),Nt=function(t,e){var n=a(t);if(n<0||n%e)throw q("Wrong offset!");return n},kt=function(t){if(x(t)&&St in t)return t;throw H(t+" is not a typed array!")},Rt=function(t,e){if(!(x(t)&&bt in t))throw H("It is not a typed array constructor!");return new t(e)},Ot=function(t,e){return Pt(O(t,t[wt]),e)},Pt=function(t,e){for(var n=0,r=e.length,i=Rt(t,r);n<r;)i[n]=e[n++];return i},Dt=function(t,e,n){B(t,e,{get:function(){return this._d[n]}})},Lt=function(t){var e,n,r,i,o,a,s=p(t),u=arguments.length,c=1<u?arguments[1]:void 0,h=void 0!==c,l=v(s);if(null!=l&&!d(l)){for(a=l.call(s),r=[],e=0;!(o=a.next()).done;e++)r.push(o.value);s=r}for(h&&2<u&&(c=f(c,arguments[2],2)),e=0,n=T(s.length),i=Rt(this,n);e<n;e++)i[e]=h?c(s[e],e):s[e];return i},Mt=function(){for(var t=0,e=arguments.length,n=Rt(this,e);t<e;)n[t]=arguments[t++];return n},Ft=!!K&&_(function(){gt.call(new K(1))}),jt=function(){return gt.apply(Ft?vt.call(kt(this)):kt(this),arguments)},Ut={copyWithin:function(t,e){return j.call(kt(this),t,e,2<arguments.length?arguments[2]:void 0)},every:function(t){return nt(kt(this),t,1<arguments.length?arguments[1]:void 0)},fill:function(t){return F.apply(kt(this),arguments)},filter:function(t){return Ot(this,tt(kt(this),t,1<arguments.length?arguments[1]:void 0))},find:function(t){return rt(kt(this),t,1<arguments.length?arguments[1]:void 0)},findIndex:function(t){return it(kt(this),t,1<arguments.length?arguments[1]:void 0)},forEach:function(t){Z(kt(this),t,1<arguments.length?arguments[1]:void 0)},indexOf:function(t){return at(kt(this),t,1<arguments.length?arguments[1]:void 0)},includes:function(t){return ot(kt(this),t,1<arguments.length?arguments[1]:void 0)},join:function(t){return pt.apply(kt(this),arguments)},lastIndexOf:function(t){return ht.apply(kt(this),arguments)},map:function(t){return It(kt(this),t,1<arguments.length?arguments[1]:void 0)},reduce:function(t){return lt.apply(kt(this),arguments)},reduceRight:function(t){return ft.apply(kt(this),arguments)},reverse:function(){for(var t,e=this,n=kt(e).length,r=Math.floor(n/2),i=0;i<r;)t=e[i],e[i++]=e[--n],e[n]=t;return e},some:function(t){return et(kt(this),t,1<arguments.length?arguments[1]:void 0)},sort:function(t){return dt.call(kt(this),t)},subarray:function(t,e){var n=kt(this),r=n.length,i=s(t,r);return new(O(n,n[wt]))(n.buffer,n.byteOffset+i*n.BYTES_PER_ELEMENT,T((void 0===e?r:s(e,r))-i))}},Wt=function(t,e){return Ot(this,vt.call(kt(this),t,e))},Bt=function(t){kt(this);var e=Nt(arguments[1],1),n=this.length,r=p(t),i=T(r.length),o=0;if(n<i+e)throw q(Ct);for(;o<i;)this[e+o]=r[o++]},Vt={entries:function(){return ct.call(kt(this))},keys:function(){return ut.call(kt(this))},values:function(){return st.call(kt(this))}},qt=function(t,e){return x(t)&&t[St]&&"symbol"!=typeof e&&e in t&&String(+e)==String(e)},Ht=function(t,e){return qt(t,e=u(e,!0))?i(2,t[e]):V(t,e)},Kt=function(t,e,n){return!(qt(t,e=u(e,!0))&&x(n)&&c(n,"value"))||c(n,"get")||c(n,"set")||n.configurable||c(n,"writable")&&!n.writable||c(n,"enumerable")&&!n.enumerable?B(t,e,n):(t[e]=n.value,t)};Et||(W.f=Ht,U.f=Kt),b(b.S+b.F*!Et,"Object",{getOwnPropertyDescriptor:Ht,defineProperty:Kt}),_(function(){yt.call({})})&&(yt=gt=function(){return pt.call(this)});var Gt=o({},Ut);o(Gt,Vt),S(Gt,mt,Vt.values),o(Gt,{slice:Wt,set:Bt,constructor:function(){},toString:yt,toLocaleString:jt}),Dt(Gt,"buffer","b"),Dt(Gt,"byteOffset","o"),Dt(Gt,"byteLength","l"),Dt(Gt,"length","e"),B(Gt,_t,{get:function(){return this[St]}}),t.exports=function(t,l,e,i){var f=t+((i=!!i)?"Clamped":"")+"Array",r="get"+t,o="set"+t,p=m[f],a=p||{},n=p&&N(p),s=!p||!w.ABV,u={},c=p&&p[Y],d=function(t,e){B(t,e,{get:function(){return function(t,e){var n=t._d;return n.v[r](e*l+n.o,xt)}(this,e)},set:function(t){return function(t,e,n){var r=t._d;i&&(n=(n=Math.round(n))<0?0:255<n?255:255&n),r.v[o](e*l+r.o,n,xt)}(this,e,t)},enumerable:!0})};s?(p=e(function(t,e,n,r){E(t,p,f,"_d");var i,o,a,s,u=0,c=0;if(x(e)){if(!(e instanceof J||(s=I(e))==G||s==Q))return St in e?Pt(p,e):Lt.call(p,e);i=e,c=Nt(n,l);var h=e.byteLength;if(void 0===r){if(h%l)throw q(Ct);if((o=h-c)<0)throw q(Ct)}else if(h<(o=T(r)*l)+c)throw q(Ct);a=o/l}else a=C(e),i=new J(o=a*l);for(S(t,"_d",{b:i,o:c,l:o,e:a,v:new $(i)});u<a;)d(t,u++)}),c=p[Y]=A(Gt),S(c,"constructor",p)):_(function(){p(1)})&&_(function(){new p(-1)})&&L(function(t){new p,new p(null),new p(1.5),new p(t)},!0)||(p=e(function(t,e,n,r){var i;return E(t,p,f),x(e)?e instanceof J||(i=I(e))==G||i==Q?void 0!==r?new a(e,Nt(n,l),r):void 0!==n?new a(e,Nt(n,l)):new a(e):St in e?Pt(p,e):Lt.call(p,e):new a(C(e))}),Z(n!==Function.prototype?k(a).concat(k(n)):k(a),function(t){t in p||S(p,t,a[t])}),p[Y]=c,g||(c.constructor=p));var h=c[mt],v=!!h&&("values"==h.name||null==h.name),y=Vt.values;S(p,bt,!0),S(c,St,f),S(c,Tt,!0),S(c,wt,p),(i?new p(1)[_t]==f:_t in c)||B(c,_t,{get:function(){return f}}),u[f]=p,b(b.G+b.W+b.F*(p!=a),u),b(b.S,f,{BYTES_PER_ELEMENT:l}),b(b.S+b.F*_(function(){a.of.call(p,1)}),f,{from:Lt,of:Mt}),z in c||S(c,z,l),b(b.P,f,Ut),M(f),b(b.P+b.F*At,f,{set:Bt}),b(b.P+b.F*!v,f,Vt),g||c.toString==yt||(c.toString=yt),b(b.P+b.F*_(function(){new p(1).slice()}),f,{slice:Wt}),b(b.P+b.F*(_(function(){return[1,2].toLocaleString()!=new p([1,2]).toLocaleString()})||!_(function(){c.toLocaleString.call([1,2])})),f,{toLocaleString:jt}),D[f]=v?h:y,g||v||S(c,mt,y)}}else t.exports=function(){}},function(t,e,n){var o=n(153),r=n(0),i=n(69)("metadata"),a=i.store||(i.store=new(n(156))),s=function(t,e,n){var r=a.get(t);if(!r){if(!n)return;a.set(t,r=new o)}var i=r.get(e);if(!i){if(!n)return;r.set(e,i=new o)}return i};t.exports={store:a,map:s,has:function(t,e,n){var r=s(e,n,!1);return void 0!==r&&r.has(t)},get:function(t,e,n){var r=s(e,n,!1);return void 0===r?void 0:r.get(t)},set:function(t,e,n,r){s(n,r,!0).set(t,e)},keys:function(t,e){var n=s(t,e,!1),r=[];return n&&n.forEach(function(t,e){r.push(e)}),r},key:function(t){return void 0===t||"symbol"==typeof t?t:String(t)},exp:function(t){r(r.S,"Reflect",t)}}},function(t,e){var n=t.exports="undefined"!=typeof window&&window.Math==Math?window:"undefined"!=typeof self&&self.Math==Math?self:Function("return this")();"number"==typeof __g&&(__g=n)},function(t,e){var n=t.exports={version:"2.5.5"};"number"==typeof __e&&(__e=n)},function(t,e,n){var r=n(37)("meta"),i=n(5),o=n(15),a=n(9).f,s=0,u=Object.isExtensible||function(){return!0},c=!n(4)(function(){return u(Object.preventExtensions({}))}),h=function(t){a(t,r,{value:{i:"O"+ ++s,w:{}}})},l=t.exports={KEY:r,NEED:!1,fastKey:function(t,e){if(!i(t))return"symbol"==typeof t?t:("string"==typeof t?"S":"P")+t;if(!o(t,r)){if(!u(t))return"F";if(!e)return"E";h(t)}return t[r].i},getWeak:function(t,e){if(!o(t,r)){if(!u(t))return!0;if(!e)return!1;h(t)}return t[r].w},onFreeze:function(t){return c&&l.NEED&&u(t)&&!o(t,r)&&h(t),t}}},function(t,e){t.exports=!1},function(t,e,n){var r=n(6)("unscopables"),i=Array.prototype;null==i[r]&&n(12)(i,r,{}),t.exports=function(t){i[r][t]=!0}},function(t,e){t.exports=function(t,e){return{enumerable:!(1&t),configurable:!(2&t),writable:!(4&t),value:e}}},function(t,e){var n=0,r=Math.random();t.exports=function(t){return"Symbol(".concat(void 0===t?"":t,")_",(++n+r).toString(36))}},function(t,e,n){var r=n(132),i=n(92);t.exports=Object.keys||function(t){return r(t,i)}},function(t,e,n){var r=n(23),i=Math.max,o=Math.min;t.exports=function(t,e){return(t=r(t))<0?i(t+e,0):o(t,e)}},function(t,e,r){var i=r(2),o=r(133),a=r(92),s=r(91)("IE_PROTO"),u=function(){},c="prototype",h=function(){var t,e=r(89)("iframe"),n=a.length;for(e.style.display="none",r(93).appendChild(e),e.src="javascript:",(t=e.contentWindow.document).open(),t.write("<script>document.F=Object<\/script>"),t.close(),h=t.F;n--;)delete h[c][a[n]];return h()};t.exports=Object.create||function(t,e){var n;return null!==t?(u[c]=i(t),n=new u,u[c]=null,n[s]=t):n=h(),void 0===e?n:o(n,e)}},function(t,e,n){var r=n(132),i=n(92).concat("length","prototype");e.f=Object.getOwnPropertyNames||function(t){return r(t,i)}},function(t,e,n){"use strict";var r=n(3),i=n(9),o=n(8),a=n(6)("species");t.exports=function(t){var e=r[t];o&&e&&!e[a]&&i.f(e,a,{configurable:!0,get:function(){return this}})}},function(t,e){t.exports=function(t,e,n,r){if(!(t instanceof e)||void 0!==r&&r in t)throw TypeError(n+": incorrect invocation!");return t}},function(t,e,n){var f=n(21),p=n(145),d=n(104),v=n(2),y=n(7),g=n(106),m={},_={};(e=t.exports=function(t,e,n,r,i){var o,a,s,u,c=i?function(){return t}:g(t),h=f(n,r,e?2:1),l=0;if("function"!=typeof c)throw TypeError(t+" is not iterable!");if(d(c)){for(o=y(t.length);l<o;l++)if((u=e?h(v(a=t[l])[0],a[1]):h(t[l]))===m||u===_)return u}else for(s=c.call(t);!(a=s.next()).done;)if((u=p(s,h,a.value,e))===m||u===_)return u}).BREAK=m,e.RETURN=_},function(t,e,n){var i=n(13);t.exports=function(t,e,n){for(var r in e)i(t,r,e[r],n);return t}},function(t,e,n){var v=n(31),y=n(32),g=n(47),m=n(65),_=n(169),b="prototype",w=function(t,e,n){var r,i,o,a,s=t&w.F,u=t&w.G,c=t&w.S,h=t&w.P,l=t&w.B,f=u?v:c?v[e]||(v[e]={}):(v[e]||{})[b],p=u?y:y[e]||(y[e]={}),d=p[b]||(p[b]={});for(r in u&&(n=e),n)o=((i=!s&&f&&void 0!==f[r])?f:n)[r],a=l&&i?_(o,v):h&&"function"==typeof o?_(Function.call,o):o,f&&m(f,r,o,t&w.U),p[r]!=o&&g(p,r,a),h&&d[r]!=o&&(d[r]=o)};v.core=y,w.F=1,w.G=2,w.S=4,w.P=8,w.B=16,w.W=32,w.U=64,w.R=128,t.exports=w},function(t,e,n){var r=n(56),i=n(85);t.exports=n(57)?function(t,e,n){return r.f(t,e,i(1,n))}:function(t,e,n){return t[e]=n,t}},function(t,e){t.exports=function(t){return"object"==typeof t?null!==t:"function"==typeof t}},function(t,e){var n={}.hasOwnProperty;t.exports=function(t,e){return n.call(t,e)}},function(t,e){var n;n=function(){return this}();try{n=n||new Function("return this")()}catch(t){"object"==typeof window&&(n=window)}t.exports=n},function(t,e,n){var r=n(9).f,i=n(15),o=n(6)("toStringTag");t.exports=function(t,e,n){t&&!i(t=n?t:t.prototype,o)&&r(t,o,{configurable:!0,value:e})}},function(t,e,n){var i=n(22),o=n(6)("toStringTag"),a="Arguments"==i(function(){return arguments}());t.exports=function(t){var e,n,r;return void 0===t?"Undefined":null===t?"Null":"string"==typeof(n=function(t,e){try{return t[e]}catch(t){}}(e=Object(t),o))?n:a?i(e):"Object"==(r=i(e))&&"function"==typeof e.callee?"Arguments":r}},function(t,e,n){var a=n(0),r=n(26),s=n(4),u=n(95),i="["+u+"]",o=RegExp("^"+i+i+"*"),c=RegExp(i+i+"*$"),h=function(t,e,n){var r={},i=s(function(){return!!u[t]()||"​"!="​"[t]()}),o=r[t]=i?e(l):u[t];n&&(r[n]=o),a(a.P+a.F*i,"String",r)},l=h.trim=function(t,e){return t=String(r(t)),1&e&&(t=t.replace(o,"")),2&e&&(t=t.replace(c,"")),t};t.exports=h},function(t,e){t.exports={}},function(t,e,n){var r=n(5);t.exports=function(t,e){if(!r(t)||t._t!==e)throw TypeError("Incompatible receiver, "+e+" required!");return t}},function(t,e,n){var r=n(84),i=n(167),o=n(116),a=Object.defineProperty;e.f=n(57)?Object.defineProperty:function(t,e,n){if(r(t),e=o(e,!0),r(n),i)try{return a(t,e,n)}catch(t){}if("get"in n||"set"in n)throw TypeError("Accessors not supported!");return"value"in n&&(t[e]=n.value),t}},function(t,e,n){t.exports=!n(64)(function(){return 7!=Object.defineProperty({},"a",{get:function(){return 7}}).a})},function(t,e,n){var r=n(117),i=n(67);t.exports=function(t){return r(i(t))}},function(t,e,n){"use strict";n(384);var r=function(t){return t&&"object"==typeof t&&"default"in t?t.default:t}(n(1));t.exports=r},function(t,e,n){var r=n(22);t.exports=Object("z").propertyIsEnumerable(0)?Object:function(t){return"String"==r(t)?t.split(""):Object(t)}},function(t,e){e.f={}.propertyIsEnumerable},function(t,e,n){"use strict";var r=n(2);t.exports=function(){var t=r(this),e="";return t.global&&(e+="g"),t.ignoreCase&&(e+="i"),t.multiline&&(e+="m"),t.unicode&&(e+="u"),t.sticky&&(e+="y"),e}},function(t,e,n){var i=n(2),o=n(11),a=n(6)("species");t.exports=function(t,e){var n,r=i(t).constructor;return void 0===r||null==(n=i(r)[a])?e:o(n)}},function(t,e){t.exports=function(t){try{return!!t()}catch(t){return!0}}},function(t,e,n){var o=n(31),a=n(47),s=n(49),u=n(66)("src"),r="toString",i=Function[r],c=(""+i).split(r);n(32).inspectSource=function(t){return i.call(t)},(t.exports=function(t,e,n,r){var i="function"==typeof n;i&&(s(n,"name")||a(n,"name",e)),t[e]!==n&&(i&&(s(n,u)||a(n,u,t[e]?""+t[e]:c.join(String(e)))),t===o?t[e]=n:r?t[e]?t[e]=n:a(t,e,n):(delete t[e],a(t,e,n)))})(Function.prototype,r,function(){return"function"==typeof this&&this[u]||i.call(this)})},function(t,e){var n=0,r=Math.random();t.exports=function(t){return"Symbol(".concat(void 0===t?"":t,")_",(++n+r).toString(36))}},function(t,e){t.exports=function(t){if(null==t)throw TypeError("Can't call method on  "+t);return t}},function(t,e,n){var r=n(172),i=n(123);t.exports=Object.keys||function(t){return r(t,i)}},function(t,e,n){var r=n(20),i=n(3),o="__core-js_shared__",a=i[o]||(i[o]={});(t.exports=function(t,e){return a[t]||(a[t]=void 0!==e?e:{})})("versions",[]).push({version:r.version,mode:n(34)?"pure":"global",copyright:"© 2019 Denis Pushkarev (zloirock.ru)"})},function(t,e,n){var u=n(16),c=n(7),h=n(39);t.exports=function(s){return function(t,e,n){var r,i=u(t),o=c(i.length),a=h(n,o);if(s&&e!=e){for(;a<o;)if((r=i[a++])!=r)return!0}else for(;a<o;a++)if((s||a in i)&&i[a]===e)return s||a||0;return!s&&-1}}},function(t,e){e.f=Object.getOwnPropertySymbols},function(t,e,n){var r=n(22);t.exports=Array.isArray||function(t){return"Array"==r(t)}},function(t,e,n){var u=n(23),c=n(26);t.exports=function(s){return function(t,e){var n,r,i=String(c(t)),o=u(e),a=i.length;return o<0||a<=o?s?"":void 0:(n=i.charCodeAt(o))<55296||56319<n||o+1===a||(r=i.charCodeAt(o+1))<56320||57343<r?s?i.charAt(o):n:s?i.slice(o,o+2):r-56320+(n-55296<<10)+65536}}},function(t,e,n){var r=n(5),i=n(22),o=n(6)("match");t.exports=function(t){var e;return r(t)&&(void 0!==(e=t[o])?!!e:"RegExp"==i(t))}},function(t,e,n){var o=n(6)("iterator"),a=!1;try{var r=[7][o]();r.return=function(){a=!0},Array.from(r,function(){throw 2})}catch(t){}t.exports=function(t,e){if(!e&&!a)return!1;var n=!1;try{var r=[7],i=r[o]();i.next=function(){return{done:n=!0}},r[o]=function(){return i},t(r)}catch(t){}return n}},function(t,e,n){"use strict";var i=n(52),o=RegExp.prototype.exec;t.exports=function(t,e){var n=t.exec;if("function"==typeof n){var r=n.call(t,e);if("object"!=typeof r)throw new TypeError("RegExp exec method returned something other than an Object or null");return r}if("RegExp"!==i(t))throw new TypeError("RegExp#exec called on incompatible receiver");return o.call(t,e)}},function(t,e,n){"use strict";n(149);var h=n(13),l=n(12),f=n(4),p=n(26),d=n(6),v=n(110),y=d("species"),g=!f(function(){var t=/./;return t.exec=function(){var t=[];return t.groups={a:"7"},t},"7"!=="".replace(t,"$<a>")}),m=function(){var t=/(?:)/,e=t.exec;t.exec=function(){return e.apply(this,arguments)};var n="ab".split(t);return 2===n.length&&"a"===n[0]&&"b"===n[1]}();t.exports=function(n,t,e){var r=d(n),o=!f(function(){var t={};return t[r]=function(){return 7},7!=""[n](t)}),i=o?!f(function(){var t=!1,e=/a/;return e.exec=function(){return t=!0,null},"split"===n&&(e.constructor={},e.constructor[y]=function(){return e}),e[r](""),!t}):void 0;if(!o||!i||"replace"===n&&!g||"split"===n&&!m){var a=/./[r],s=e(p,r,""[n],function(t,e,n,r,i){return e.exec===v?o&&!i?{done:!0,value:a.call(e,n,r)}:{done:!0,value:t.call(n,e,r)}:{done:!1}}),u=s[0],c=s[1];h(String.prototype,n,u),l(RegExp.prototype,r,2==t?function(t,e){return c.call(t,this,e)}:function(t){return c.call(t,this)})}}},function(t,e,n){var r=n(3).navigator;t.exports=r&&r.userAgent||""},function(t,e,n){"use strict";var g=n(3),m=n(0),_=n(13),b=n(45),w=n(33),E=n(44),S=n(43),T=n(5),C=n(4),I=n(75),x=n(51),A=n(96);t.exports=function(r,t,e,n,i,o){var a=g[r],s=a,u=i?"set":"add",c=s&&s.prototype,h={},l=function(t){var n=c[t];_(c,t,"delete"==t?function(t){return!(o&&!T(t))&&n.call(this,0===t?0:t)}:"has"==t?function(t){return!(o&&!T(t))&&n.call(this,0===t?0:t)}:"get"==t?function(t){return o&&!T(t)?void 0:n.call(this,0===t?0:t)}:"add"==t?function(t){return n.call(this,0===t?0:t),this}:function(t,e){return n.call(this,0===t?0:t,e),this})};if("function"==typeof s&&(o||c.forEach&&!C(function(){(new s).entries().next()}))){var f=new s,p=f[u](o?{}:-0,1)!=f,d=C(function(){f.has(1)}),v=I(function(t){new s(t)}),y=!o&&C(function(){for(var t=new s,e=5;e--;)t[u](e,e);return!t.has(-0)});v||(((s=t(function(t,e){S(t,s,r);var n=A(new a,t,s);return null!=e&&E(e,i,n[u],n),n})).prototype=c).constructor=s),(d||y)&&(l("delete"),l("has"),i&&l("get")),(y||p)&&l(u),o&&c.clear&&delete c.clear}else s=n.getConstructor(t,r,i,u),b(s.prototype,e),w.NEED=!0;return x(s,r),h[r]=s,m(m.G+m.W+m.F*(s!=a),h),o||n.setStrong(s,r,i),s}},function(t,e,n){for(var r,i=n(3),o=n(12),a=n(37),s=a("typed_array"),u=a("view"),c=!(!i.ArrayBuffer||!i.DataView),h=c,l=0,f="Int8Array,Uint8Array,Uint8ClampedArray,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array".split(",");l<9;)(r=i[f[l++]])?(o(r.prototype,s,!0),o(r.prototype,u,!0)):h=!1;t.exports={ABV:c,CONSTR:h,TYPED:s,VIEW:u}},function(t,e,n){"use strict";t.exports=n(34)||!n(4)(function(){var t=Math.random();__defineSetter__.call(null,t,function(){}),delete n(3)[t]})},function(t,e,n){"use strict";var r=n(0);t.exports=function(t){r(r.S,t,{of:function(){for(var t=arguments.length,e=new Array(t);t--;)e[t]=arguments[t];return new this(e)}})}},function(t,e,n){"use strict";var r=n(0),a=n(11),s=n(21),u=n(44);t.exports=function(t){r(r.S,t,{from:function(t){var e,n,r,i,o=arguments[1];return a(this),(e=void 0!==o)&&a(o),null==t?new this:(n=[],e?(r=0,i=s(o,arguments[2],2),u(t,!1,function(t){n.push(i(t,r++))})):u(t,!1,n.push,n),new this(n))}})}},function(t,e,n){var r=n(48);t.exports=function(t){if(!r(t))throw TypeError(t+" is not an object!");return t}},function(t,e){t.exports=function(t,e){return{enumerable:!(1&t),configurable:!(2&t),writable:!(4&t),value:e}}},function(t,e){var n={}.toString;t.exports=function(t){return n.call(t).slice(8,-1)}},function(t,e){var n=Math.ceil,r=Math.floor;t.exports=function(t){return isNaN(t=+t)?0:(0<t?r:n)(t)}},function(t,e){e.f={}.propertyIsEnumerable},function(t,e,n){var r=n(5),i=n(3).document,o=r(i)&&r(i.createElement);t.exports=function(t){return o?i.createElement(t):{}}},function(t,e,n){var r=n(3),i=n(20),o=n(34),a=n(131),s=n(9).f;t.exports=function(t){var e=i.Symbol||(i.Symbol=o?{}:r.Symbol||{});"_"==t.charAt(0)||t in e||s(e,t,{value:a.f(t)})}},function(t,e,n){var r=n(69)("keys"),i=n(37);t.exports=function(t){return r[t]||(r[t]=i(t))}},function(t,e){t.exports="constructor,hasOwnProperty,isPrototypeOf,propertyIsEnumerable,toLocaleString,toString,valueOf".split(",")},function(t,e,n){var r=n(3).document;t.exports=r&&r.documentElement},function(t,e,i){var n=i(5),r=i(2),o=function(t,e){if(r(t),!n(e)&&null!==e)throw TypeError(e+": can't set as prototype!")};t.exports={set:Object.setPrototypeOf||("__proto__"in{}?function(t,n,r){try{(r=i(21)(Function.call,i(17).f(Object.prototype,"__proto__").set,2))(t,[]),n=!(t instanceof Array)}catch(t){n=!0}return function(t,e){return o(t,e),n?t.__proto__=e:r(t,e),t}}({},!1):void 0),check:o}},function(t,e){t.exports="\t\n\v\f\r   ᠎             　\u2028\u2029\ufeff"},function(t,e,n){var o=n(5),a=n(94).set;t.exports=function(t,e,n){var r,i=e.constructor;return i!==n&&"function"==typeof i&&(r=i.prototype)!==n.prototype&&o(r)&&a&&a(t,r),t}},function(t,e,n){"use strict";var i=n(23),o=n(26);t.exports=function(t){var e=String(o(this)),n="",r=i(t);if(r<0||r==1/0)throw RangeError("Count can't be negative");for(;0<r;(r>>>=1)&&(e+=e))1&r&&(n+=e);return n}},function(t,e){t.exports=Math.sign||function(t){return 0==(t=+t)||t!=t?t:t<0?-1:1}},function(t,e){var n=Math.expm1;t.exports=!n||22025.465794806718<n(10)||n(10)<22025.465794806718||-2e-17!=n(-2e-17)?function(t){return 0==(t=+t)?t:-1e-6<t&&t<1e-6?t+t*t/2:Math.exp(t)-1}:n},function(t,e,n){"use strict";var _=n(34),b=n(0),w=n(13),E=n(12),S=n(54),T=n(101),C=n(51),I=n(18),x=n(6)("iterator"),A=!([].keys&&"next"in[].keys()),N="values",k=function(){return this};t.exports=function(t,e,n,r,i,o,a){T(n,e,r);var s,u,c,h=function(t){if(!A&&t in d)return d[t];switch(t){case"keys":case N:return function(){return new n(this,t)}}return function(){return new n(this,t)}},l=e+" Iterator",f=i==N,p=!1,d=t.prototype,v=d[x]||d["@@iterator"]||i&&d[i],y=v||h(i),g=i?f?h("entries"):y:void 0,m="Array"==e&&d.entries||v;if(m&&(c=I(m.call(new t)))!==Object.prototype&&c.next&&(C(c,l,!0),_||"function"==typeof c[x]||E(c,x,k)),f&&v&&v.name!==N&&(p=!0,y=function(){return v.call(this)}),_&&!a||!A&&!p&&d[x]||E(d,x,y),S[e]=y,S[l]=k,i)if(s={values:f?y:h(N),keys:o?y:h("keys"),entries:g},a)for(u in s)u in d||w(d,u,s[u]);else b(b.P+b.F*(A||p),e,s);return s}},function(t,e,n){"use strict";var r=n(40),i=n(36),o=n(51),a={};n(12)(a,n(6)("iterator"),function(){return this}),t.exports=function(t,e,n){t.prototype=r(a,{next:i(1,n)}),o(t,e+" Iterator")}},function(t,e,n){var r=n(74),i=n(26);t.exports=function(t,e,n){if(r(e))throw TypeError("String#"+n+" doesn't accept regex!");return String(i(t))}},function(t,e,n){var r=n(6)("match");t.exports=function(e){var n=/./;try{"/./"[e](n)}catch(t){try{return n[r]=!1,!"/./"[e](n)}catch(t){}}return!0}},function(t,e,n){var r=n(54),i=n(6)("iterator"),o=Array.prototype;t.exports=function(t){return void 0!==t&&(r.Array===t||o[i]===t)}},function(t,e,n){"use strict";var r=n(9),i=n(36);t.exports=function(t,e,n){e in t?r.f(t,e,i(0,n)):t[e]=n}},function(t,e,n){var r=n(52),i=n(6)("iterator"),o=n(54);t.exports=n(20).getIteratorMethod=function(t){if(null!=t)return t[i]||t["@@iterator"]||o[r(t)]}},function(t,e,n){var r=n(274);t.exports=function(t,e){return new(r(t))(e)}},function(t,e,n){"use strict";var s=n(10),u=n(39),c=n(7);t.exports=function(t){for(var e=s(this),n=c(e.length),r=arguments.length,i=u(1<r?arguments[1]:void 0,n),o=2<r?arguments[2]:void 0,a=void 0===o?n:u(o,n);i<a;)e[i++]=t;return e}},function(t,e,n){"use strict";var r=n(35),i=n(148),o=n(54),a=n(16);t.exports=n(100)(Array,"Array",function(t,e){this._t=a(t),this._i=0,this._k=e},function(){var t=this._t,e=this._k,n=this._i++;return!t||n>=t.length?(this._t=void 0,i(1)):i(0,"keys"==e?n:"values"==e?t[n]:[n,t[n]])},"values"),o.Arguments=o.Array,r("keys"),r("values"),r("entries")},function(t,e,n){"use strict";var a=n(62),s=RegExp.prototype.exec,u=String.prototype.replace,r=s,c="lastIndex",h=function(){var t=/a/,e=/b*/g;return s.call(t,"a"),s.call(e,"a"),0!==t[c]||0!==e[c]}(),l=void 0!==/()??/.exec("")[1];(h||l)&&(r=function(t){var e,n,r,i,o=this;return l&&(n=new RegExp("^"+o.source+"$(?!\\s)",a.call(o))),h&&(e=o[c]),r=s.call(o,t),h&&r&&(o[c]=o.global?r.index+r[0].length:e),l&&r&&1<r.length&&u.call(r[0],n,function(){for(i=1;i<arguments.length-2;i++)void 0===arguments[i]&&(r[i]=void 0)}),r}),t.exports=r},function(t,e,n){"use strict";var r=n(73)(!0);t.exports=function(t,e,n){return e+(n?r(t,e).length:1)}},function(t,e,n){var r,i,o,a=n(21),s=n(138),u=n(93),c=n(89),h=n(3),l=h.process,f=h.setImmediate,p=h.clearImmediate,d=h.MessageChannel,v=h.Dispatch,y=0,g={},m="onreadystatechange",_=function(){var t=+this;if(g.hasOwnProperty(t)){var e=g[t];delete g[t],e()}},b=function(t){_.call(t.data)};f&&p||(f=function(t){for(var e=[],n=1;arguments.length>n;)e.push(arguments[n++]);return g[++y]=function(){s("function"==typeof t?t:Function(t),e)},r(y),y},p=function(t){delete g[t]},"process"==n(22)(l)?r=function(t){l.nextTick(a(_,t,1))}:v&&v.now?r=function(t){v.now(a(_,t,1))}:d?(o=(i=new d).port2,i.port1.onmessage=b,r=a(o.postMessage,o,1)):h.addEventListener&&"function"==typeof postMessage&&!h.importScripts?(r=function(t){h.postMessage(t+"","*")},h.addEventListener("message",b,!1)):r=m in c("script")?function(t){u.appendChild(c("script"))[m]=function(){u.removeChild(this),_.call(t)}}:function(t){setTimeout(a(_,t,1),0)}),t.exports={set:f,clear:p}},function(t,e,n){var s=n(3),u=n(112).set,c=s.MutationObserver||s.WebKitMutationObserver,h=s.process,l=s.Promise,f="process"==n(22)(h);t.exports=function(){var n,r,i,t=function(){var t,e;for(f&&(t=h.domain)&&t.exit();n;){e=n.fn,n=n.next;try{e()}catch(t){throw n?i():r=void 0,t}}r=void 0,t&&t.enter()};if(f)i=function(){h.nextTick(t)};else if(!c||s.navigator&&s.navigator.standalone)if(l&&l.resolve){var e=l.resolve(void 0);i=function(){e.then(t)}}else i=function(){u.call(s,t)};else{var o=!0,a=document.createTextNode("");new c(t).observe(a,{characterData:!0}),i=function(){a.data=o=!o}}return function(t){var e={fn:t,next:void 0};r&&(r.next=e),n||(n=e,i()),r=e}}},function(t,e,n){"use strict";var i=n(11);function r(t){var n,r;this.promise=new t(function(t,e){if(void 0!==n||void 0!==r)throw TypeError("Bad Promise constructor");n=t,r=e}),this.resolve=i(n),this.reject=i(r)}t.exports.f=function(t){return new r(t)}},function(t,e,n){"use strict";var r=n(3),i=n(8),o=n(34),a=n(80),s=n(12),u=n(45),c=n(4),h=n(43),l=n(23),f=n(7),p=n(158),d=n(41).f,v=n(9).f,y=n(108),g=n(51),m="ArrayBuffer",_="DataView",b="prototype",w="Wrong index!",E=r[m],S=r[_],T=r.Math,C=r.RangeError,I=r.Infinity,x=E,A=T.abs,N=T.pow,k=T.floor,R=T.log,O=T.LN2,P="byteLength",D="byteOffset",L=i?"_b":"buffer",M=i?"_l":P,F=i?"_o":D;function j(t,e,n){var r,i,o,a=new Array(n),s=8*n-e-1,u=(1<<s)-1,c=u>>1,h=23===e?N(2,-24)-N(2,-77):0,l=0,f=t<0||0===t&&1/t<0?1:0;for((t=A(t))!=t||t===I?(i=t!=t?1:0,r=u):(r=k(R(t)/O),t*(o=N(2,-r))<1&&(r--,o*=2),2<=(t+=1<=r+c?h/o:h*N(2,1-c))*o&&(r++,o/=2),u<=r+c?(i=0,r=u):1<=r+c?(i=(t*o-1)*N(2,e),r+=c):(i=t*N(2,c-1)*N(2,e),r=0));8<=e;a[l++]=255&i,i/=256,e-=8);for(r=r<<e|i,s+=e;0<s;a[l++]=255&r,r/=256,s-=8);return a[--l]|=128*f,a}function U(t,e,n){var r,i=8*n-e-1,o=(1<<i)-1,a=o>>1,s=i-7,u=n-1,c=t[u--],h=127&c;for(c>>=7;0<s;h=256*h+t[u],u--,s-=8);for(r=h&(1<<-s)-1,h>>=-s,s+=e;0<s;r=256*r+t[u],u--,s-=8);if(0===h)h=1-a;else{if(h===o)return r?NaN:c?-I:I;r+=N(2,e),h-=a}return(c?-1:1)*r*N(2,h-e)}function W(t){return t[3]<<24|t[2]<<16|t[1]<<8|t[0]}function B(t){return[255&t]}function V(t){return[255&t,t>>8&255]}function q(t){return[255&t,t>>8&255,t>>16&255,t>>24&255]}function H(t){return j(t,52,8)}function K(t){return j(t,23,4)}function G(t,e,n){v(t[b],e,{get:function(){return this[n]}})}function Q(t,e,n,r){var i=p(+n);if(i+e>t[M])throw C(w);var o=t[L]._b,a=i+t[F],s=o.slice(a,a+e);return r?s:s.reverse()}function z(t,e,n,r,i,o){var a=p(+n);if(a+e>t[M])throw C(w);for(var s=t[L]._b,u=a+t[F],c=r(+i),h=0;h<e;h++)s[u+h]=c[o?h:e-h-1]}if(a.ABV){if(!c(function(){E(1)})||!c(function(){new E(-1)})||c(function(){return new E,new E(1.5),new E(NaN),E.name!=m})){for(var Y,X=(E=function(t){return h(this,E),new x(p(t))})[b]=x[b],J=d(x),$=0;J.length>$;)(Y=J[$++])in E||s(E,Y,x[Y]);o||(X.constructor=E)}var Z=new S(new E(2)),tt=S[b].setInt8;Z.setInt8(0,2147483648),Z.setInt8(1,2147483649),!Z.getInt8(0)&&Z.getInt8(1)||u(S[b],{setInt8:function(t,e){tt.call(this,t,e<<24>>24)},setUint8:function(t,e){tt.call(this,t,e<<24>>24)}},!0)}else E=function(t){h(this,E,m);var e=p(t);this._b=y.call(new Array(e),0),this[M]=e},S=function(t,e,n){h(this,S,_),h(t,E,_);var r=t[M],i=l(e);if(i<0||r<i)throw C("Wrong offset!");if(r<i+(n=void 0===n?r-i:f(n)))throw C("Wrong length!");this[L]=t,this[F]=i,this[M]=n},i&&(G(E,P,"_l"),G(S,"buffer","_b"),G(S,P,"_l"),G(S,D,"_o")),u(S[b],{getInt8:function(t){return Q(this,1,t)[0]<<24>>24},getUint8:function(t){return Q(this,1,t)[0]},getInt16:function(t){var e=Q(this,2,t,arguments[1]);return(e[1]<<8|e[0])<<16>>16},getUint16:function(t){var e=Q(this,2,t,arguments[1]);return e[1]<<8|e[0]},getInt32:function(t){return W(Q(this,4,t,arguments[1]))},getUint32:function(t){return W(Q(this,4,t,arguments[1]))>>>0},getFloat32:function(t){return U(Q(this,4,t,arguments[1]),23,4)},getFloat64:function(t){return U(Q(this,8,t,arguments[1]),52,8)},setInt8:function(t,e){z(this,1,t,B,e)},setUint8:function(t,e){z(this,1,t,B,e)},setInt16:function(t,e){z(this,2,t,V,e,arguments[2])},setUint16:function(t,e){z(this,2,t,V,e,arguments[2])},setInt32:function(t,e){z(this,4,t,q,e,arguments[2])},setUint32:function(t,e){z(this,4,t,q,e,arguments[2])},setFloat32:function(t,e){z(this,4,t,K,e,arguments[2])},setFloat64:function(t,e){z(this,8,t,H,e,arguments[2])}});g(E,m),g(S,_),s(S[b],a.VIEW,!0),e[m]=E,e[_]=S},function(t,e,n){var i=n(48);t.exports=function(t,e){if(!i(t))return t;var n,r;if(e&&"function"==typeof(n=t.toString)&&!i(r=n.call(t)))return r;if("function"==typeof(n=t.valueOf)&&!i(r=n.call(t)))return r;if(!e&&"function"==typeof(n=t.toString)&&!i(r=n.call(t)))return r;throw TypeError("Can't convert object to primitive value")}},function(t,e,n){var r=n(86);t.exports=Object("z").propertyIsEnumerable(0)?Object:function(t){return"String"==r(t)?t.split(""):Object(t)}},function(t,e,n){var r=n(67);t.exports=function(t){return Object(r(t))}},function(t,e,n){var r=n(87),i=Math.min;t.exports=function(t){return 0<t?i(r(t),9007199254740991):0}},function(t,e,n){var r=n(31),i="__core-js_shared__",o=r[i]||(r[i]={});t.exports=function(t){return o[t]||(o[t]={})}},function(t,e,n){var r=n(19)("unscopables"),i=Array.prototype;null==i[r]&&n(47)(i,r,{}),t.exports=function(t){i[r][t]=!0}},function(t,e,n){var r=n(120)("keys"),i=n(66);t.exports=function(t){return r[t]||(r[t]=i(t))}},function(t,e){t.exports="constructor,hasOwnProperty,isPrototypeOf,propertyIsEnumerable,toLocaleString,toString,valueOf".split(",")},function(t,e){e.f=Object.getOwnPropertySymbols},function(t,e,n){var r=n(56).f,i=n(49),o=n(19)("toStringTag");t.exports=function(t,e,n){t&&!i(t=n?t:t.prototype,o)&&r(t,o,{configurable:!0,value:e})}},function(t,e,n){e.f=n(19)},function(t,e,n){var r=n(31),i=n(32),o=n(128),a=n(126),s=n(56).f;t.exports=function(t){var e=i.Symbol||(i.Symbol=o?{}:r.Symbol||{});"_"==t.charAt(0)||t in e||s(e,t,{value:a.f(t)})}},function(t,e){t.exports=!1},function(t,e){t.exports={}},function(t,e,n){t.exports=!n(8)&&!n(4)(function(){return 7!=Object.defineProperty(n(89)("div"),"a",{get:function(){return 7}}).a})},function(t,e,n){e.f=n(6)},function(t,e,n){var a=n(15),s=n(16),u=n(70)(!1),c=n(91)("IE_PROTO");t.exports=function(t,e){var n,r=s(t),i=0,o=[];for(n in r)n!=c&&a(r,n)&&o.push(n);for(;e.length>i;)a(r,n=e[i++])&&(~u(o,n)||o.push(n));return o}},function(t,e,n){var a=n(9),s=n(2),u=n(38);t.exports=n(8)?Object.defineProperties:function(t,e){s(t);for(var n,r=u(e),i=r.length,o=0;o<i;)a.f(t,n=r[o++],e[n]);return t}},function(t,e,n){var r=n(16),i=n(41).f,o={}.toString,a="object"==typeof window&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[];t.exports.f=function(t){return a&&"[object Window]"==o.call(t)?function(t){try{return i(t)}catch(t){return a.slice()}}(t):i(r(t))}},function(t,e,n){"use strict";var f=n(38),p=n(71),d=n(61),v=n(10),y=n(60),i=Object.assign;t.exports=!i||n(4)(function(){var t={},e={},n=Symbol(),r="abcdefghijklmnopqrst";return t[n]=7,r.split("").forEach(function(t){e[t]=t}),7!=i({},t)[n]||Object.keys(i({},e)).join("")!=r})?function(t,e){for(var n=v(t),r=arguments.length,i=1,o=p.f,a=d.f;i<r;)for(var s,u=y(arguments[i++]),c=o?f(u).concat(o(u)):f(u),h=c.length,l=0;l<h;)a.call(u,s=c[l++])&&(n[s]=u[s]);return n}:i},function(t,e){t.exports=Object.is||function(t,e){return t===e?0!==t||1/t==1/e:t!=t&&e!=e}},function(t,e,n){"use strict";var o=n(11),a=n(5),s=n(138),u=[].slice,c={};t.exports=Function.bind||function(e){var n=o(this),r=u.call(arguments,1),i=function(){var t=r.concat(u.call(arguments));return this instanceof i?function(t,e,n){if(!(e in c)){for(var r=[],i=0;i<e;i++)r[i]="a["+i+"]";c[e]=Function("F,a","return new F("+r.join(",")+")")}return c[e](t,n)}(n,t.length,t):s(n,t,e)};return a(n.prototype)&&(i.prototype=n.prototype),i}},function(t,e){t.exports=function(t,e,n){var r=void 0===n;switch(e.length){case 0:return r?t():t.call(n);case 1:return r?t(e[0]):t.call(n,e[0]);case 2:return r?t(e[0],e[1]):t.call(n,e[0],e[1]);case 3:return r?t(e[0],e[1],e[2]):t.call(n,e[0],e[1],e[2]);case 4:return r?t(e[0],e[1],e[2],e[3]):t.call(n,e[0],e[1],e[2],e[3])}return t.apply(n,e)}},function(t,e,n){var r=n(3).parseInt,i=n(53).trim,o=n(95),a=/^[-+]?0[xX]/;t.exports=8!==r(o+"08")||22!==r(o+"0x16")?function(t,e){var n=i(String(t),3);return r(n,e>>>0||(a.test(n)?16:10))}:r},function(t,e,n){var r=n(3).parseFloat,i=n(53).trim;t.exports=1/r(n(95)+"-0")!=-1/0?function(t){var e=i(String(t),3),n=r(e);return 0===n&&"-"==e.charAt(0)?-0:n}:r},function(t,e,n){var r=n(22);t.exports=function(t,e){if("number"!=typeof t&&"Number"!=r(t))throw TypeError(e);return+t}},function(t,e,n){var r=n(5),i=Math.floor;t.exports=function(t){return!r(t)&&isFinite(t)&&i(t)===t}},function(t,e){t.exports=Math.log1p||function(t){return-1e-8<(t=+t)&&t<1e-8?t-t*t/2:Math.log(1+t)}},function(t,e,n){var o=n(98),r=Math.pow,a=r(2,-52),s=r(2,-23),u=r(2,127)*(2-s),c=r(2,-126);t.exports=Math.fround||function(t){var e,n,r=Math.abs(t),i=o(t);return r<c?i*function(t){return t+1/a-1/a}(r/c/s)*c*s:u<(n=(e=(1+s/a)*r)-(e-r))||n!=n?i*(1/0):i*n}},function(t,e,n){var o=n(2);t.exports=function(e,t,n,r){try{return r?t(o(n)[0],n[1]):t(n)}catch(t){var i=e.return;throw void 0!==i&&o(i.call(e)),t}}},function(t,e,n){var h=n(11),l=n(10),f=n(60),p=n(7);t.exports=function(t,e,n,r,i){h(e);var o=l(t),a=f(o),s=p(o.length),u=i?s-1:0,c=i?-1:1;if(n<2)for(;;){if(u in a){r=a[u],u+=c;break}if(u+=c,i?u<0:s<=u)throw TypeError("Reduce of empty array with no initial value")}for(;i?0<=u:u<s;u+=c)u in a&&(r=e(r,a[u],u,o));return r}},function(t,e,n){"use strict";var c=n(10),h=n(39),l=n(7);t.exports=[].copyWithin||function(t,e){var n=c(this),r=l(n.length),i=h(t,r),o=h(e,r),a=2<arguments.length?arguments[2]:void 0,s=Math.min((void 0===a?r:h(a,r))-o,r-i),u=1;for(o<i&&i<o+s&&(u=-1,o+=s-1,i+=s-1);0<s--;)o in n?n[i]=n[o]:delete n[i],i+=u,o+=u;return n}},function(t,e){t.exports=function(t,e){return{value:e,done:!!t}}},function(t,e,n){"use strict";var r=n(110);n(0)({target:"RegExp",proto:!0,forced:r!==/./.exec},{exec:r})},function(t,e,n){n(8)&&"g"!=/./g.flags&&n(9).f(RegExp.prototype,"flags",{configurable:!0,get:n(62)})},function(t,e){t.exports=function(t){try{return{e:!1,v:t()}}catch(t){return{e:!0,v:t}}}},function(t,e,n){var r=n(2),i=n(5),o=n(114);t.exports=function(t,e){if(r(t),i(e)&&e.constructor===t)return e;var n=o.f(t);return(0,n.resolve)(e),n.promise}},function(t,e,n){"use strict";var r=n(154),i=n(55);t.exports=n(79)("Map",function(t){return function(){return t(this,0<arguments.length?arguments[0]:void 0)}},{get:function(t){var e=r.getEntry(i(this,"Map"),t);return e&&e.v},set:function(t,e){return r.def(i(this,"Map"),0===t?0:t,e)}},r,!0)},function(t,e,n){"use strict";var a=n(9).f,s=n(40),u=n(45),c=n(21),h=n(43),l=n(44),r=n(100),i=n(148),o=n(42),f=n(8),p=n(33).fastKey,d=n(55),v=f?"_s":"size",y=function(t,e){var n,r=p(e);if("F"!==r)return t._i[r];for(n=t._f;n;n=n.n)if(n.k==e)return n};t.exports={getConstructor:function(t,o,n,r){var i=t(function(t,e){h(t,i,o,"_i"),t._t=o,t._i=s(null),t._f=void 0,t._l=void 0,t[v]=0,null!=e&&l(e,n,t[r],t)});return u(i.prototype,{clear:function(){for(var t=d(this,o),e=t._i,n=t._f;n;n=n.n)n.r=!0,n.p&&(n.p=n.p.n=void 0),delete e[n.i];t._f=t._l=void 0,t[v]=0},delete:function(t){var e=d(this,o),n=y(e,t);if(n){var r=n.n,i=n.p;delete e._i[n.i],n.r=!0,i&&(i.n=r),r&&(r.p=i),e._f==n&&(e._f=r),e._l==n&&(e._l=i),e[v]--}return!!n},forEach:function(t){d(this,o);for(var e,n=c(t,1<arguments.length?arguments[1]:void 0,3);e=e?e.n:this._f;)for(n(e.v,e.k,this);e&&e.r;)e=e.p},has:function(t){return!!y(d(this,o),t)}}),f&&a(i.prototype,"size",{get:function(){return d(this,o)[v]}}),i},def:function(t,e,n){var r,i,o=y(t,e);return o?o.v=n:(t._l=o={i:i=p(e,!0),k:e,v:n,p:r=t._l,n:void 0,r:!1},t._f||(t._f=o),r&&(r.n=o),t[v]++,"F"!==i&&(t._i[i]=o)),t},getEntry:y,setStrong:function(t,n,e){r(t,n,function(t,e){this._t=d(t,n),this._k=e,this._l=void 0},function(){for(var t=this,e=t._k,n=t._l;n&&n.r;)n=n.p;return t._t&&(t._l=n=n?n.n:t._t._f)?i(0,"keys"==e?n.k:"values"==e?n.v:[n.k,n.v]):(t._t=void 0,i(1))},e?"entries":"values",!e,!0),o(n)}}},function(t,e,n){"use strict";var r=n(154),i=n(55);t.exports=n(79)("Set",function(t){return function(){return t(this,0<arguments.length?arguments[0]:void 0)}},{add:function(t){return r.def(i(this,"Set"),t=0===t?0:t,t)}},r)},function(t,e,n){"use strict";var o,r=n(28)(0),a=n(13),i=n(33),s=n(135),u=n(157),c=n(5),h=n(4),l=n(55),f="WeakMap",p=i.getWeak,d=Object.isExtensible,v=u.ufstore,y={},g=function(t){return function(){return t(this,0<arguments.length?arguments[0]:void 0)}},m={get:function(t){if(c(t)){var e=p(t);return!0===e?v(l(this,f)).get(t):e?e[this._i]:void 0}},set:function(t,e){return u.def(l(this,f),t,e)}},_=t.exports=n(79)(f,g,m,u,!0,!0);h(function(){return 7!=(new _).set((Object.freeze||Object)(y),7).get(y)})&&(s((o=u.getConstructor(g,f)).prototype,m),i.NEED=!0,r(["delete","has","get","set"],function(r){var t=_.prototype,i=t[r];a(t,r,function(t,e){if(!c(t)||d(t))return i.call(this,t,e);this._f||(this._f=new o);var n=this._f[r](t,e);return"set"==r?this:n})}))},function(t,e,n){"use strict";var a=n(45),s=n(33).getWeak,i=n(2),u=n(5),c=n(43),h=n(44),r=n(28),l=n(15),f=n(55),o=r(5),p=r(6),d=0,v=function(t){return t._l||(t._l=new y)},y=function(){this.a=[]},g=function(t,e){return o(t.a,function(t){return t[0]===e})};y.prototype={get:function(t){var e=g(this,t);if(e)return e[1]},has:function(t){return!!g(this,t)},set:function(t,e){var n=g(this,t);n?n[1]=e:this.a.push([t,e])},delete:function(e){var t=p(this.a,function(t){return t[0]===e});return~t&&this.a.splice(t,1),!!~t}},t.exports={getConstructor:function(t,n,r,i){var o=t(function(t,e){c(t,o,n,"_i"),t._t=n,t._i=d++,t._l=void 0,null!=e&&h(e,r,t[i],t)});return a(o.prototype,{delete:function(t){if(!u(t))return!1;var e=s(t);return!0===e?v(f(this,n)).delete(t):e&&l(e,this._i)&&delete e[this._i]},has:function(t){if(!u(t))return!1;var e=s(t);return!0===e?v(f(this,n)).has(t):e&&l(e,this._i)}}),o},def:function(t,e,n){var r=s(i(e),!0);return!0===r?v(t).set(e,n):r[t._i]=n,t},ufstore:v}},function(t,e,n){var r=n(23),i=n(7);t.exports=function(t){if(void 0===t)return 0;var e=r(t),n=i(e);if(e!==n)throw RangeError("Wrong length!");return n}},function(t,e,n){var r=n(41),i=n(71),o=n(2),a=n(3).Reflect;t.exports=a&&a.ownKeys||function(t){var e=r.f(o(t)),n=i.f;return n?e.concat(n(t)):e}},function(t,e,n){"use strict";var d=n(72),v=n(5),y=n(7),g=n(21),m=n(6)("isConcatSpreadable");t.exports=function t(e,n,r,i,o,a,s,u){for(var c,h,l=o,f=0,p=!!s&&g(s,u,3);f<i;){if(f in r){if(c=p?p(r[f],f,n):r[f],h=!1,v(c)&&(h=void 0!==(h=c[m])?!!h:d(c)),h&&0<a)l=t(e,n,c,y(c.length),l,a-1)-1;else{if(9007199254740991<=l)throw TypeError();e[l]=c}l++}f++}return l}},function(t,e,n){var h=n(7),l=n(97),f=n(26);t.exports=function(t,e,n,r){var i=String(f(t)),o=i.length,a=void 0===n?" ":String(n),s=h(e);if(s<=o||""==a)return i;var u=s-o,c=l.call(a,Math.ceil(u/a.length));return c.length>u&&(c=c.slice(0,u)),r?c+i:i+c}},function(t,e,n){var u=n(38),c=n(16),h=n(61).f;t.exports=function(s){return function(t){for(var e,n=c(t),r=u(n),i=r.length,o=0,a=[];o<i;)h.call(n,e=r[o++])&&a.push(s?[e,n[e]]:n[e]);return a}}},function(t,e,n){var r=n(52),i=n(164);t.exports=function(t){return function(){if(r(this)!=t)throw TypeError(t+"#toJSON isn't generic");return i(this)}}},function(t,e,n){var r=n(44);t.exports=function(t,e){var n=[];return r(t,!1,n.push,n,e),n}},function(t,e){t.exports=Math.scale||function(t,e,n,r,i){return 0===arguments.length||t!=t||e!=e||n!=n||r!=r||i!=i?NaN:t===1/0||t===-1/0?t:(t-e)*(i-r)/(n-e)+r}},function(t,e){var n,r,i=t.exports={};function o(){throw new Error("setTimeout has not been defined")}function a(){throw new Error("clearTimeout has not been defined")}function s(e){if(n===setTimeout)return setTimeout(e,0);if((n===o||!n)&&setTimeout)return n=setTimeout,setTimeout(e,0);try{return n(e,0)}catch(t){try{return n.call(null,e,0)}catch(t){return n.call(this,e,0)}}}!function(){try{n="function"==typeof setTimeout?setTimeout:o}catch(t){n=o}try{r="function"==typeof clearTimeout?clearTimeout:a}catch(t){r=a}}();var u,c=[],h=!1,l=-1;function f(){h&&u&&(h=!1,u.length?c=u.concat(c):l=-1,c.length&&p())}function p(){if(!h){var t=s(f);h=!0;for(var e=c.length;e;){for(u=c,c=[];++l<e;)u&&u[l].run();l=-1,e=c.length}u=null,h=!1,function(e){if(r===clearTimeout)return clearTimeout(e);if((r===a||!r)&&clearTimeout)return r=clearTimeout,clearTimeout(e);try{r(e)}catch(t){try{return r.call(null,e)}catch(t){return r.call(this,e)}}}(t)}}function d(t,e){this.fun=t,this.array=e}function v(){}i.nextTick=function(t){var e=new Array(arguments.length-1);if(1<arguments.length)for(var n=1;n<arguments.length;n++)e[n-1]=arguments[n];c.push(new d(t,e)),1!==c.length||h||s(p)},d.prototype.run=function(){this.fun.apply(null,this.array)},i.title="browser",i.browser=!0,i.env={},i.argv=[],i.version="",i.versions={},i.on=v,i.addListener=v,i.once=v,i.off=v,i.removeListener=v,i.removeAllListeners=v,i.emit=v,i.prependListener=v,i.prependOnceListener=v,i.listeners=function(t){return[]},i.binding=function(t){throw new Error("process.binding is not supported")},i.cwd=function(){return"/"},i.chdir=function(t){throw new Error("process.chdir is not supported")},i.umask=function(){return 0}},function(t,e,n){t.exports=!n(57)&&!n(64)(function(){return 7!=Object.defineProperty(n(168)("div"),"a",{get:function(){return 7}}).a})},function(t,e,n){var r=n(48),i=n(31).document,o=r(i)&&r(i.createElement);t.exports=function(t){return o?i.createElement(t):{}}},function(t,e,n){var o=n(391);t.exports=function(r,i,t){if(o(r),void 0===i)return r;switch(t){case 1:return function(t){return r.call(i,t)};case 2:return function(t,e){return r.call(i,t,e)};case 3:return function(t,e,n){return r.call(i,t,e,n)}}return function(){return r.apply(i,arguments)}}},function(t,e,n){var _=n(169),b=n(117),w=n(118),E=n(119),r=n(392);t.exports=function(l,t){var f=1==l,p=2==l,d=3==l,v=4==l,y=6==l,g=5==l||y,m=t||r;return function(t,e,n){for(var r,i,o=w(t),a=b(o),s=_(e,n,3),u=E(a.length),c=0,h=f?m(t,u):p?m(t,0):void 0;c<u;c++)if((g||c in a)&&(i=s(r=a[c],c,o),l))if(f)h[c]=i;else if(i)switch(l){case 3:return!0;case 5:return r;case 6:return c;case 2:h.push(r)}else if(v)return!1;return y?-1:d||v?v:h}}},function(t,e,n){var r=n(86);t.exports=Array.isArray||function(t){return"Array"==r(t)}},function(t,e,n){var a=n(49),s=n(58),u=n(399)(!1),c=n(122)("IE_PROTO");t.exports=function(t,e){var n,r=s(t),i=0,o=[];for(n in r)n!=c&&a(r,n)&&o.push(n);for(;e.length>i;)a(r,n=e[i++])&&(~u(o,n)||o.push(n));return o}},function(t,e,r){var i=r(84),o=r(413),a=r(123),s=r(122)("IE_PROTO"),u=function(){},c="prototype",h=function(){var t,e=r(168)("iframe"),n=a.length;for(e.style.display="none",r(414).appendChild(e),e.src="javascript:",(t=e.contentWindow.document).open(),t.write("<script>document.F=Object<\/script>"),t.close(),h=t.F;n--;)delete h[c][a[n]];return h()};t.exports=Object.create||function(t,e){var n;return null!==t?(u[c]=i(t),n=new u,u[c]=null,n[s]=t):n=h(),void 0===e?n:o(n,e)}},function(t,e,n){var r=n(172),i=n(123).concat("length","prototype");e.f=Object.getOwnPropertyNames||function(t){return r(t,i)}},function(t,e,n){"use strict";var _=n(128),b=n(46),w=n(65),E=n(47),S=n(129),T=n(424),C=n(125),I=n(425),x=n(19)("iterator"),A=!([].keys&&"next"in[].keys()),N="values",k=function(){return this};t.exports=function(t,e,n,r,i,o,a){T(n,e,r);var s,u,c,h=function(t){if(!A&&t in d)return d[t];switch(t){case"keys":case N:return function(){return new n(this,t)}}return function(){return new n(this,t)}},l=e+" Iterator",f=i==N,p=!1,d=t.prototype,v=d[x]||d["@@iterator"]||i&&d[i],y=v||h(i),g=i?f?h("entries"):y:void 0,m="Array"==e&&d.entries||v;if(m&&(c=I(m.call(new t)))!==Object.prototype&&c.next&&(C(c,l,!0),_||"function"==typeof c[x]||E(c,x,k)),f&&v&&v.name!==N&&(p=!0,y=function(){return v.call(this)}),_&&!a||!A&&!p&&d[x]||E(d,x,y),S[e]=y,S[l]=k,i)if(s={values:f?y:h(N),keys:o?y:h("keys"),entries:g},a)for(u in s)u in d||w(d,u,s[u]);else b(b.P+b.F*(A||p),e,s);return s}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(177),i={NODE_CLIENT:!1,NODE_ADMIN:!1,SDK_VERSION:"${JSCORE_VERSION}"},a=function(t,e){if(!t)throw o(e)},o=function(t){return new Error("Firebase Database ("+i.SDK_VERSION+") INTERNAL ASSERT FAILED: "+t)},s=function(t){for(var e=[],n=0,r=0;r<t.length;r++){var i=t.charCodeAt(r);e[n++]=i<128?i:(e[n++]=i<2048?i>>6|192:(55296==(64512&i)&&r+1<t.length&&56320==(64512&t.charCodeAt(r+1))?(i=65536+((1023&i)<<10)+(1023&t.charCodeAt(++r)),e[n++]=i>>18|240,e[n++]=i>>12&63|128):e[n++]=i>>12|224,i>>6&63|128),63&i|128)}return e},u={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray:function(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();for(var n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[],i=0;i<t.length;i+=3){var o=t[i],a=i+1<t.length,s=a?t[i+1]:0,u=i+2<t.length,c=u?t[i+2]:0,h=o>>2,l=(3&o)<<4|s>>4,f=(15&s)<<2|c>>6,p=63&c;u||(p=64,a||(f=64)),r.push(n[h],n[l],n[f],n[p])}return r.join("")},encodeString:function(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(s(t),e)},decodeString:function(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):function(t){for(var e=[],n=0,r=0;n<t.length;){var i=t[n++];if(i<128)e[r++]=String.fromCharCode(i);else if(191<i&&i<224){var o=t[n++];e[r++]=String.fromCharCode((31&i)<<6|63&o)}else if(239<i&&i<365){var a=((7&i)<<18|(63&(o=t[n++]))<<12|(63&(s=t[n++]))<<6|63&t[n++])-65536;e[r++]=String.fromCharCode(55296+(a>>10)),e[r++]=String.fromCharCode(56320+(1023&a))}else{o=t[n++];var s=t[n++];e[r++]=String.fromCharCode((15&i)<<12|(63&o)<<6|63&s)}}return e.join("")}(this.decodeStringToByteArray(t,e))},decodeStringToByteArray:function(t,e){this.init_();for(var n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[],i=0;i<t.length;){var o=n[t.charAt(i++)],a=i<t.length?n[t.charAt(i)]:0,s=++i<t.length?n[t.charAt(i)]:64,u=++i<t.length?n[t.charAt(i)]:64;if(++i,null==o||null==a||null==s||null==u)throw Error();var c=o<<2|a>>4;if(r.push(c),64!=s){var h=a<<4&240|s>>2;if(r.push(h),64!=u){var l=s<<6&192|u;r.push(l)}}}return r},init_:function(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(var t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),(this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t)>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}},c=function(t){try{return u.decodeString(t,!0)}catch(t){console.error("base64Decode failed: ",t)}return null};function h(t,e){if(!(e instanceof Object))return e;switch(e.constructor){case Date:return new Date(e.getTime());case Object:void 0===t&&(t={});break;case Array:t=[];break;default:return e}for(var n in e)e.hasOwnProperty(n)&&(t[n]=h(t[n],e[n]));return t}var l=function(){function t(){var n=this;this.promise=new Promise(function(t,e){n.resolve=t,n.reject=e})}return t.prototype.wrapCallback=function(n){var r=this;return function(t,e){t?r.reject(t):r.resolve(e),"function"==typeof n&&(r.promise.catch(function(){}),1===n.length?n(t):n(t,e))}},t}(),f=function(){return"undefined"!=typeof navigator&&"string"==typeof navigator.userAgent?navigator.userAgent:""},p="FirebaseError",d=Error.captureStackTrace;var v=function(){return function(t,e){if(this.code=t,this.message=e,d)d(this,y.prototype.create);else try{throw Error.apply(this,arguments)}catch(t){this.name=p,Object.defineProperty(this,"stack",{get:function(){return t.stack}})}}}();v.prototype=Object.create(Error.prototype),(v.prototype.constructor=v).prototype.name=p;var y=function(){function t(t,e,n){this.service=t,this.serviceName=e,this.errors=n,this.pattern=/\{\$([^}]+)}/g}return t.prototype.create=function(t,r){void 0===r&&(r={});var e,n=this.errors[t],i=this.service+"/"+t;e=void 0===n?"Error":n.replace(this.pattern,function(t,e){var n=r[e];return void 0!==n?n.toString():"<"+e+"?>"}),e=this.serviceName+": "+e+" ("+i+").";var o=new v(i,e);for(var a in r)r.hasOwnProperty(a)&&"_"!==a.slice(-1)&&(o[a]=r[a]);return o},t}();function g(t){return JSON.parse(t)}var m=function(t){var e={},n={},r={},i="";try{var o=t.split(".");e=g(c(o[0])||""),n=g(c(o[1])||""),i=o[2],r=n.d||{},delete n.d}catch(t){}return{header:e,claims:n,data:r,signature:i}},_=function(t,e){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])},b=function(n,t){return _(t,function(t,e){n[t]=e}),n},w=function(t,e,n){for(var r in t)if(e.call(n,t[r],r,t))return r},E=function(n){function t(){var t=n.call(this)||this;t.chain_=[],t.buf_=[],t.W_=[],t.pad_=[],t.inbuf_=0,t.total_=0,t.blockSize=64,t.pad_[0]=128;for(var e=1;e<t.blockSize;++e)t.pad_[e]=0;return t.reset(),t}return r.__extends(t,n),t.prototype.reset=function(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0},t.prototype.compress_=function(t,e){e||(e=0);var n=this.W_;if("string"==typeof t)for(var r=0;r<16;r++)n[r]=t.charCodeAt(e)<<24|t.charCodeAt(e+1)<<16|t.charCodeAt(e+2)<<8|t.charCodeAt(e+3),e+=4;else for(r=0;r<16;r++)n[r]=t[e]<<24|t[e+1]<<16|t[e+2]<<8|t[e+3],e+=4;for(r=16;r<80;r++){var i=n[r-3]^n[r-8]^n[r-14]^n[r-16];n[r]=4294967295&(i<<1|i>>>31)}var o,a,s=this.chain_[0],u=this.chain_[1],c=this.chain_[2],h=this.chain_[3],l=this.chain_[4];for(r=0;r<80;r++){a=r<40?r<20?(o=h^u&(c^h),1518500249):(o=u^c^h,1859775393):r<60?(o=u&c|h&(u|c),2400959708):(o=u^c^h,3395469782);i=(s<<5|s>>>27)+o+l+a+n[r]&4294967295;l=h,h=c,c=4294967295&(u<<30|u>>>2),u=s,s=i}this.chain_[0]=this.chain_[0]+s&4294967295,this.chain_[1]=this.chain_[1]+u&4294967295,this.chain_[2]=this.chain_[2]+c&4294967295,this.chain_[3]=this.chain_[3]+h&4294967295,this.chain_[4]=this.chain_[4]+l&4294967295},t.prototype.update=function(t,e){if(null!=t){void 0===e&&(e=t.length);for(var n=e-this.blockSize,r=0,i=this.buf_,o=this.inbuf_;r<e;){if(0==o)for(;r<=n;)this.compress_(t,r),r+=this.blockSize;if("string"==typeof t){for(;r<e;)if(i[o]=t.charCodeAt(r),++r,++o==this.blockSize){this.compress_(i),o=0;break}}else for(;r<e;)if(i[o]=t[r],++r,++o==this.blockSize){this.compress_(i),o=0;break}}this.inbuf_=o,this.total_+=e}},t.prototype.digest=function(){var t=[],e=8*this.total_;this.inbuf_<56?this.update(this.pad_,56-this.inbuf_):this.update(this.pad_,this.blockSize-(this.inbuf_-56));for(var n=this.blockSize-1;56<=n;n--)this.buf_[n]=255&e,e/=256;this.compress_(this.buf_);var r=0;for(n=0;n<5;n++)for(var i=24;0<=i;i-=8)t[r]=this.chain_[n]>>i&255,++r;return t},t}(function(){return function(){this.blockSize=-1}}());var S=function(){function t(t,e){var n=this;this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=e,this.task.then(function(){t(n)}).catch(function(t){n.error(t)})}return t.prototype.next=function(e){this.forEachObserver(function(t){t.next(e)})},t.prototype.error=function(e){this.forEachObserver(function(t){t.error(e)}),this.close(e)},t.prototype.complete=function(){this.forEachObserver(function(t){t.complete()}),this.close()},t.prototype.subscribe=function(t,e,n){var r,i=this;if(void 0===t&&void 0===e&&void 0===n)throw new Error("Missing Observer.");void 0===(r=function(t,e){if("object"!=typeof t||null===t)return!1;for(var n=0,r=e;n<r.length;n++){var i=r[n];if(i in t&&"function"==typeof t[i])return!0}return!1}(t,["next","error","complete"])?t:{next:t,error:e,complete:n}).next&&(r.next=T),void 0===r.error&&(r.error=T),void 0===r.complete&&(r.complete=T);var o=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(function(){try{i.finalError?r.error(i.finalError):r.complete()}catch(t){}}),this.observers.push(r),o},t.prototype.unsubscribeOne=function(t){void 0!==this.observers&&void 0!==this.observers[t]&&(delete this.observers[t],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))},t.prototype.forEachObserver=function(t){if(!this.finalized)for(var e=0;e<this.observers.length;e++)this.sendOne(e,t)},t.prototype.sendOne=function(t,e){var n=this;this.task.then(function(){if(void 0!==n.observers&&void 0!==n.observers[t])try{e(n.observers[t])}catch(t){"undefined"!=typeof console&&console.error&&console.error(t)}})},t.prototype.close=function(t){var e=this;this.finalized||(this.finalized=!0,void 0!==t&&(this.finalError=t),this.task.then(function(){e.observers=void 0,e.onNoObservers=void 0}))},t}();function T(){}function C(t,e,n){var r="";switch(e){case 1:r=n?"first":"First";break;case 2:r=n?"second":"Second";break;case 3:r=n?"third":"Third";break;case 4:r=n?"fourth":"Fourth";break;default:throw new Error("errorPrefix called with argumentNumber > 4.  Need to update it?")}var i=t+" failed: ";return i+=r+" argument "}e.assert=a,e.assertionError=o,e.base64=u,e.base64Decode=c,e.base64Encode=function(t){var e=s(t);return u.encodeByteArray(e,!0)},e.CONSTANTS=i,e.deepCopy=function(t){return h(void 0,t)},e.deepExtend=h,e.patchProperty=function(t,e,n){t[e]=n},e.Deferred=l,e.getUA=f,e.isMobileCordova=function(){return"undefined"!=typeof window&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(f())},e.isNodeSdk=function(){return!0===i.NODE_CLIENT||!0===i.NODE_ADMIN},e.isReactNative=function(){return"object"==typeof navigator&&"ReactNative"===navigator.product},e.ErrorFactory=y,e.FirebaseError=v,e.patchCapture=function(t){var e=d;return d=t,e},e.jsonEval=g,e.stringify=function(t){return JSON.stringify(t)},e.decode=m,e.isAdmin=function(t){var e=m(t).claims;return"object"==typeof e&&!0===e.admin},e.issuedAtTime=function(t){var e=m(t).claims;return"object"==typeof e&&e.hasOwnProperty("iat")?e.iat:null},e.isValidFormat=function(t){var e=m(t).claims;return!!e&&"object"==typeof e&&e.hasOwnProperty("iat")},e.isValidTimestamp=function(t){var e,n,r=m(t).claims,i=Math.floor((new Date).getTime()/1e3);return"object"==typeof r&&(r.hasOwnProperty("nbf")?e=r.nbf:r.hasOwnProperty("iat")&&(e=r.iat),n=r.hasOwnProperty("exp")?r.exp:e+86400),i&&e&&n&&e<=i&&i<=n},e.clone=function(t){return b({},t)},e.contains=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},e.every=function(t,e){for(var n in t)if(Object.prototype.hasOwnProperty.call(t,n)&&!e(n,t[n]))return!1;return!0},e.extend=b,e.findKey=w,e.findValue=function(t,e,n){var r=w(t,e,n);return r&&t[r]},e.forEach=_,e.getAnyKey=function(t){for(var e in t)return e},e.getCount=function(t){var e=0;for(var n in t)e++;return e},e.getValues=function(t){var e=[],n=0;for(var r in t)e[n++]=t[r];return e},e.isEmpty=function(t){for(var e in t)return!1;return!0},e.isNonNullObject=function(t){return"object"==typeof t&&null!==t},e.map=function(t,e,n){var r={};for(var i in t)r[i]=e.call(n,t[i],i,t);return r},e.safeGet=function(t,e){if(Object.prototype.hasOwnProperty.call(t,e))return t[e]},e.querystring=function(t){var n=[];return _(t,function(e,t){Array.isArray(t)?t.forEach(function(t){n.push(encodeURIComponent(e)+"="+encodeURIComponent(t))}):n.push(encodeURIComponent(e)+"="+encodeURIComponent(t))}),n.length?"&"+n.join("&"):""},e.querystringDecode=function(t){var n={};return t.replace(/^\?/,"").split("&").forEach(function(t){if(t){var e=t.split("=");n[e[0]]=e[1]}}),n},e.Sha1=E,e.async=function(n,r){return function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];Promise.resolve(!0).then(function(){n.apply(void 0,t)}).catch(function(t){r&&r(t)})}},e.createSubscribe=function(t,e){var n=new S(t,e);return n.subscribe.bind(n)},e.errorPrefix=C,e.validateArgCount=function(t,e,n,r){var i;if(r<e?i="at least "+e:n<r&&(i=0===n?"none":"no more than "+n),i)throw new Error(t+" failed: Was called with "+r+(1===r?" argument.":" arguments.")+" Expects "+i+".")},e.validateCallback=function(t,e,n,r){if((!r||n)&&"function"!=typeof n)throw new Error(C(t,e,r)+"must be a valid function.")},e.validateContextObject=function(t,e,n,r){if((!r||n)&&("object"!=typeof n||null===n))throw new Error(C(t,e,r)+"must be a valid context object.")},e.validateNamespace=function(t,e,n,r){if((!r||n)&&"string"!=typeof n)throw new Error(C(t,e,r)+"must be a valid firebase namespace.")},e.stringLength=function(t){for(var e=0,n=0;n<t.length;n++){var r=t.charCodeAt(n);r<128?e++:r<2048?e+=2:55296<=r&&r<=56319?(e+=4,n++):e+=3}return e},e.stringToByteArray=function(t){for(var e=[],n=0,r=0;r<t.length;r++){var i=t.charCodeAt(r);if(55296<=i&&i<=56319){var o=i-55296;a(++r<t.length,"Surrogate pair missing trail surrogate."),i=65536+(o<<10)+(t.charCodeAt(r)-56320)}e[n++]=i<128?i:(e[n++]=i<2048?i>>6|192:(e[n++]=i<65536?i>>12|224:(e[n++]=i>>18|240,i>>12&63|128),i>>6&63|128),63&i|128)}return e}},function(t,e,n){"use strict";n.r(e),n.d(e,"__extends",function(){return i}),n.d(e,"__assign",function(){return o}),n.d(e,"__rest",function(){return a}),n.d(e,"__decorate",function(){return s}),n.d(e,"__param",function(){return u}),n.d(e,"__metadata",function(){return c}),n.d(e,"__awaiter",function(){return h}),n.d(e,"__generator",function(){return l}),n.d(e,"__exportStar",function(){return f}),n.d(e,"__values",function(){return p}),n.d(e,"__read",function(){return d}),n.d(e,"__spread",function(){return v}),n.d(e,"__await",function(){return y}),n.d(e,"__asyncGenerator",function(){return g}),n.d(e,"__asyncDelegator",function(){return m}),n.d(e,"__asyncValues",function(){return _}),n.d(e,"__makeTemplateObject",function(){return b}),n.d(e,"__importStar",function(){return w}),n.d(e,"__importDefault",function(){return E});
/*! *****************************************************************************
Copyright (c) Microsoft Corporation. All rights reserved.
Licensed under the Apache License, Version 2.0 (the "License"); you may not use
this file except in compliance with the License. You may obtain a copy of the
License at http://www.apache.org/licenses/LICENSE-2.0

THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
MERCHANTABLITY OR NON-INFRINGEMENT.

See the Apache Version 2.0 License for specific language governing permissions
and limitations under the License.
***************************************************************************** */
var r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};function i(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}var o=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t};function a(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&(n[r[i]]=t[r[i]])}return n}function s(t,e,n,r){var i,o=arguments.length,a=o<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,r);else for(var s=t.length-1;0<=s;s--)(i=t[s])&&(a=(o<3?i(a):3<o?i(e,n,a):i(e,n))||a);return 3<o&&a&&Object.defineProperty(e,n,a),a}function u(n,r){return function(t,e){r(t,e,n)}}function c(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)}function h(o,a,s,u){return new(s||(s=Promise))(function(t,e){function n(t){try{i(u.next(t))}catch(t){e(t)}}function r(t){try{i(u.throw(t))}catch(t){e(t)}}function i(e){e.done?t(e.value):new s(function(t){t(e.value)}).then(n,r)}i((u=u.apply(o,a||[])).next())})}function l(n,r){var i,o,a,t,s={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return t={next:e(0),throw:e(1),return:e(2)},"function"==typeof Symbol&&(t[Symbol.iterator]=function(){return this}),t;function e(e){return function(t){return function(e){if(i)throw new TypeError("Generator is already executing.");for(;s;)try{if(i=1,o&&(a=o[2&e[0]?"return":e[0]?"throw":"next"])&&!(a=a.call(o,e[1])).done)return a;switch(o=0,a&&(e=[0,a.value]),e[0]){case 0:case 1:a=e;break;case 4:return s.label++,{value:e[1],done:!1};case 5:s.label++,o=e[1],e=[0];continue;case 7:e=s.ops.pop(),s.trys.pop();continue;default:if(!(a=0<(a=s.trys).length&&a[a.length-1])&&(6===e[0]||2===e[0])){s=0;continue}if(3===e[0]&&(!a||e[1]>a[0]&&e[1]<a[3])){s.label=e[1];break}if(6===e[0]&&s.label<a[1]){s.label=a[1],a=e;break}if(a&&s.label<a[2]){s.label=a[2],s.ops.push(e);break}a[2]&&s.ops.pop(),s.trys.pop();continue}e=r.call(n,s)}catch(t){e=[6,t],o=0}finally{i=a=0}if(5&e[0])throw e[1];return{value:e[0]?e[1]:void 0,done:!0}}([e,t])}}}function f(t,e){for(var n in t)e.hasOwnProperty(n)||(e[n]=t[n])}function p(t){var e="function"==typeof Symbol&&t[Symbol.iterator],n=0;return e?e.call(t):{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}}}function d(t,e){var n="function"==typeof Symbol&&t[Symbol.iterator];if(!n)return t;var r,i,o=n.call(t),a=[];try{for(;(void 0===e||0<e--)&&!(r=o.next()).done;)a.push(r.value)}catch(t){i={error:t}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(i)throw i.error}}return a}function v(){for(var t=[],e=0;e<arguments.length;e++)t=t.concat(d(arguments[e]));return t}function y(t){return this instanceof y?(this.v=t,this):new y(t)}function g(t,e,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var i,o=n.apply(t,e||[]),a=[];return i={},r("next"),r("throw"),r("return"),i[Symbol.asyncIterator]=function(){return this},i;function r(r){o[r]&&(i[r]=function(n){return new Promise(function(t,e){1<a.push([r,n,t,e])||s(r,n)})})}function s(t,e){try{!function(t){t.value instanceof y?Promise.resolve(t.value.v).then(u,c):h(a[0][2],t)}(o[t](e))}catch(t){h(a[0][3],t)}}function u(t){s("next",t)}function c(t){s("throw",t)}function h(t,e){t(e),a.shift(),a.length&&s(a[0][0],a[0][1])}}function m(r){var t,i;return t={},e("next"),e("throw",function(t){throw t}),e("return"),t[Symbol.iterator]=function(){return this},t;function e(e,n){r[e]&&(t[e]=function(t){return(i=!i)?{value:y(r[e](t)),done:"return"===e}:n?n(t):t})}}function _(t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=t[Symbol.asyncIterator];return e?e.call(t):p(t)}function b(t,e){return Object.defineProperty?Object.defineProperty(t,"raw",{value:e}):t.raw=e,t}function w(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e}function E(t){return t&&t.__esModule?t:{default:t}}},function(p,t,e){"use strict";!function(){function a(n){return new Promise(function(t,e){n.onsuccess=function(){t(n.result)},n.onerror=function(){e(n.error)}})}function o(n,r,i){var o,t=new Promise(function(t,e){a(o=n[r].apply(n,i)).then(t,e)});return t.request=o,t}function t(t,n,e){e.forEach(function(e){Object.defineProperty(t.prototype,e,{get:function(){return this[n][e]},set:function(t){this[n][e]=t}})})}function e(e,n,r,t){t.forEach(function(t){t in r.prototype&&(e.prototype[t]=function(){return o(this[n],t,arguments)})})}function n(e,n,r,t){t.forEach(function(t){t in r.prototype&&(e.prototype[t]=function(){return this[n][t].apply(this[n],arguments)})})}function r(e,n,r,t){t.forEach(function(t){t in r.prototype&&(e.prototype[t]=function(){return function(t,e,n){var r=o(t,e,n);return r.then(function(t){if(t)return new i(t,r.request)})}(this[n],t,arguments)})})}function s(t){this._index=t}function i(t,e){this._cursor=t,this._request=e}function u(t){this._store=t}function c(n){this._tx=n,this.complete=new Promise(function(t,e){n.oncomplete=function(){t()},n.onerror=function(){e(n.error)},n.onabort=function(){e(n.error)}})}function h(t,e,n){this._db=t,this.oldVersion=e,this.transaction=new c(n)}function l(t){this._db=t}t(s,"_index",["name","keyPath","multiEntry","unique"]),e(s,"_index",IDBIndex,["get","getKey","getAll","getAllKeys","count"]),r(s,"_index",IDBIndex,["openCursor","openKeyCursor"]),t(i,"_cursor",["direction","key","primaryKey","value"]),e(i,"_cursor",IDBCursor,["update","delete"]),["advance","continue","continuePrimaryKey"].forEach(function(n){n in IDBCursor.prototype&&(i.prototype[n]=function(){var e=this,t=arguments;return Promise.resolve().then(function(){return e._cursor[n].apply(e._cursor,t),a(e._request).then(function(t){if(t)return new i(t,e._request)})})})}),u.prototype.createIndex=function(){return new s(this._store.createIndex.apply(this._store,arguments))},u.prototype.index=function(){return new s(this._store.index.apply(this._store,arguments))},t(u,"_store",["name","keyPath","indexNames","autoIncrement"]),e(u,"_store",IDBObjectStore,["put","add","delete","clear","get","getAll","getKey","getAllKeys","count"]),r(u,"_store",IDBObjectStore,["openCursor","openKeyCursor"]),n(u,"_store",IDBObjectStore,["deleteIndex"]),c.prototype.objectStore=function(){return new u(this._tx.objectStore.apply(this._tx,arguments))},t(c,"_tx",["objectStoreNames","mode"]),n(c,"_tx",IDBTransaction,["abort"]),h.prototype.createObjectStore=function(){return new u(this._db.createObjectStore.apply(this._db,arguments))},t(h,"_db",["name","version","objectStoreNames"]),n(h,"_db",IDBDatabase,["deleteObjectStore","close"]),l.prototype.transaction=function(){return new c(this._db.transaction.apply(this._db,arguments))},t(l,"_db",["name","version","objectStoreNames"]),n(l,"_db",IDBDatabase,["close"]),["openCursor","openKeyCursor"].forEach(function(i){[u,s].forEach(function(t){i in t.prototype&&(t.prototype[i.replace("open","iterate")]=function(){var t=function(t){return Array.prototype.slice.call(t)}(arguments),e=t[t.length-1],n=this._store||this._index,r=n[i].apply(n,t.slice(0,-1));r.onsuccess=function(){e(r.result)}})})}),[s,u].forEach(function(t){t.prototype.getAll||(t.prototype.getAll=function(t,n){var r=this,i=[];return new Promise(function(e){r.iterateCursor(t,function(t){t?(i.push(t.value),void 0===n||i.length!=n?t.continue():e(i)):e(i)})})})});var f={open:function(t,e,n){var r=o(indexedDB,"open",[t,e]),i=r.request;return i&&(i.onupgradeneeded=function(t){n&&n(new h(i.result,t.oldVersion,i.transaction))}),r.then(function(t){return new l(t)})},delete:function(t){return o(indexedDB,"deleteDatabase",[t])}};p.exports=f,p.exports.default=p.exports}()},function(t,e,n){n(180),n(436),n(432),t.exports=n(433)},function(t,e,n){t.exports='<!doctype html>\n<html lang=en>\n<head>\n  <meta charset=utf-8>\n  <meta http-equiv=X-UA-Compatible content="IE=edge">\n  <meta name=viewport content="width=device-width,initial-scale=1">\n  <title>Textract</title>\n  <meta name=Description content="A Progressive Web App for extracting text from images">\n  <meta name=theme-color content=#0D47A1>\n</head>\n<body class=background>\n\n  <header class="header primary">\n    <img alt=logo id=logo src='+n(181)+'>\n    <h1 class=header_title>Textract</h1>\n    <div class=header_buttons>\n      <button aria-label=add_to_home_screen id=addToHomeScreen class="iconButton ripple-icon">\n        Add to home screen\n      </button>\n      <button aria_label=share id=share class="iconButton ripple-icon">\n          share\n      </button>\n    </div>\n  </header>\n\n  <main class=main>\n      <div class=actions>\n          <input accept=jpg,jpeg,JPG,JPEG,png style=display:none onchange=window.uploadImage(this) id=file type=file>\n          <label htmlfor=file>\n              <span>\n                  <button aria-label="select an image" id=fileButton class="mdl-fab primary">\n                      <img src='+n(182)+' alt="Add a Photo">\n                  </button>\n              </span>\n            </label>\n        \n      </div>\n\n    <div class="card display primary ripple empty-state">\n      <img alt=image class=image>\n      <svg class=scanner width=100% height=100%>\n          <rect id=scanner1 height=100% width=3 fill=black></rect>\n          <rect id=scanner2 height=3 width=100% fill=black></rect>\n        </svg>\n    </div>\n    <div class="card ripple text" onclick=window.copyText(this)>\n     <h2 id=textTitle></h2>\n     <p id=text></p>\n      </div>\n  </main>\n\n  <div class=snackBar>\n      <div class=snackBar-text></div>\n      <div class=snackBar-buttonContainer>\n        <button role=button aria-label=refresh_page alt="refresh page" class="snackBar-button mdl-button primary" tabindex=0 type=button>\n        </button>\n      </div>\n    </div>\n  \n\n  <div class=loader>\n    <svg viewBox="0 0 32 32" width=32 height=32>\n      <circle id=spinner cx=16 cy=16 r=14 fill=none></circle>\n    </svg>\n  </div>\n\n</body>\n\n</html>\n'},function(t,e,n){t.exports=n.p+"6e206337851c2ca5ad6bc15b5b1b1e5b.png"},function(t,e,n){t.exports=n.p+"b2479073290880e64faa5532d35bfb94.svg"},function(t,e,n){"use strict";(function(t){if(n(184),n(380),n(381),t._babelPolyfill)throw new Error("only one instance of babel-polyfill is allowed");t._babelPolyfill=!0;function e(t,e,n){t[e]||Object.defineProperty(t,e,{writable:!0,configurable:!0,value:n})}e(String.prototype,"padLeft","".padStart),e(String.prototype,"padRight","".padEnd),"pop,reverse,shift,keys,values,entries,indexOf,every,some,forEach,map,filter,find,findIndex,includes,join,slice,concat,push,splice,unshift,sort,lastIndexOf,reduce,reduceRight,copyWithin,fill".split(",").forEach(function(t){[][t]&&e(Array,t,Function.call.bind([][t]))})}).call(this,n(50))},function(t,e,n){n(185),n(187),n(188),n(189),n(190),n(191),n(192),n(193),n(194),n(195),n(196),n(197),n(198),n(199),n(200),n(201),n(202),n(203),n(204),n(205),n(206),n(207),n(208),n(209),n(210),n(211),n(212),n(213),n(214),n(215),n(216),n(217),n(218),n(219),n(220),n(221),n(222),n(223),n(224),n(225),n(226),n(227),n(228),n(229),n(230),n(231),n(232),n(233),n(234),n(235),n(236),n(237),n(238),n(239),n(240),n(241),n(242),n(243),n(244),n(245),n(246),n(247),n(248),n(249),n(250),n(251),n(252),n(253),n(254),n(255),n(256),n(257),n(258),n(259),n(260),n(261),n(262),n(264),n(265),n(267),n(268),n(269),n(270),n(271),n(272),n(273),n(275),n(276),n(277),n(278),n(279),n(280),n(281),n(282),n(283),n(284),n(285),n(286),n(287),n(109),n(288),n(149),n(289),n(150),n(290),n(291),n(292),n(293),n(294),n(153),n(155),n(156),n(295),n(296),n(297),n(298),n(299),n(300),n(301),n(302),n(303),n(304),n(305),n(306),n(307),n(308),n(309),n(310),n(311),n(312),n(313),n(314),n(315),n(316),n(317),n(318),n(319),n(320),n(321),n(322),n(323),n(324),n(325),n(326),n(327),n(328),n(329),n(330),n(331),n(332),n(333),n(334),n(335),n(336),n(337),n(338),n(339),n(340),n(341),n(342),n(343),n(344),n(345),n(346),n(347),n(348),n(349),n(350),n(351),n(352),n(353),n(354),n(355),n(356),n(357),n(358),n(359),n(360),n(361),n(362),n(363),n(364),n(365),n(366),n(367),n(368),n(369),n(370),n(371),n(372),n(373),n(374),n(375),n(376),n(377),n(378),n(379),t.exports=n(20)},function(t,e,n){"use strict";var r=n(3),a=n(15),i=n(8),o=n(0),s=n(13),u=n(33).KEY,c=n(4),h=n(69),l=n(51),f=n(37),p=n(6),d=n(131),v=n(90),y=n(186),g=n(72),m=n(2),_=n(5),b=n(16),w=n(25),E=n(36),S=n(40),T=n(134),C=n(17),I=n(9),x=n(38),A=C.f,N=I.f,k=T.f,R=r.Symbol,O=r.JSON,P=O&&O.stringify,D="prototype",L=p("_hidden"),M=p("toPrimitive"),F={}.propertyIsEnumerable,j=h("symbol-registry"),U=h("symbols"),W=h("op-symbols"),B=Object[D],V="function"==typeof R,q=r.QObject,H=!q||!q[D]||!q[D].findChild,K=i&&c(function(){return 7!=S(N({},"a",{get:function(){return N(this,"a",{value:7}).a}})).a})?function(t,e,n){var r=A(B,e);r&&delete B[e],N(t,e,n),r&&t!==B&&N(B,e,r)}:N,G=function(t){var e=U[t]=S(R[D]);return e._k=t,e},Q=V&&"symbol"==typeof R.iterator?function(t){return"symbol"==typeof t}:function(t){return t instanceof R},z=function(t,e,n){return t===B&&z(W,e,n),m(t),e=w(e,!0),m(n),a(U,e)?(n.enumerable?(a(t,L)&&t[L][e]&&(t[L][e]=!1),n=S(n,{enumerable:E(0,!1)})):(a(t,L)||N(t,L,E(1,{})),t[L][e]=!0),K(t,e,n)):N(t,e,n)},Y=function(t,e){m(t);for(var n,r=y(e=b(e)),i=0,o=r.length;i<o;)z(t,n=r[i++],e[n]);return t},X=function(t){var e=F.call(this,t=w(t,!0));return!(this===B&&a(U,t)&&!a(W,t))&&(!(e||!a(this,t)||!a(U,t)||a(this,L)&&this[L][t])||e)},J=function(t,e){if(t=b(t),e=w(e,!0),t!==B||!a(U,e)||a(W,e)){var n=A(t,e);return!n||!a(U,e)||a(t,L)&&t[L][e]||(n.enumerable=!0),n}},$=function(t){for(var e,n=k(b(t)),r=[],i=0;n.length>i;)a(U,e=n[i++])||e==L||e==u||r.push(e);return r},Z=function(t){for(var e,n=t===B,r=k(n?W:b(t)),i=[],o=0;r.length>o;)!a(U,e=r[o++])||n&&!a(B,e)||i.push(U[e]);return i};V||(s((R=function(){if(this instanceof R)throw TypeError("Symbol is not a constructor!");var e=f(0<arguments.length?arguments[0]:void 0),n=function(t){this===B&&n.call(W,t),a(this,L)&&a(this[L],e)&&(this[L][e]=!1),K(this,e,E(1,t))};return i&&H&&K(B,e,{configurable:!0,set:n}),G(e)})[D],"toString",function(){return this._k}),C.f=J,I.f=z,n(41).f=T.f=$,n(61).f=X,n(71).f=Z,i&&!n(34)&&s(B,"propertyIsEnumerable",X,!0),d.f=function(t){return G(p(t))}),o(o.G+o.W+o.F*!V,{Symbol:R});for(var tt="hasInstance,isConcatSpreadable,iterator,match,replace,search,species,split,toPrimitive,toStringTag,unscopables".split(","),et=0;tt.length>et;)p(tt[et++]);for(var nt=x(p.store),rt=0;nt.length>rt;)v(nt[rt++]);o(o.S+o.F*!V,"Symbol",{for:function(t){return a(j,t+="")?j[t]:j[t]=R(t)},keyFor:function(t){if(!Q(t))throw TypeError(t+" is not a symbol!");for(var e in j)if(j[e]===t)return e},useSetter:function(){H=!0},useSimple:function(){H=!1}}),o(o.S+o.F*!V,"Object",{create:function(t,e){return void 0===e?S(t):Y(S(t),e)},defineProperty:z,defineProperties:Y,getOwnPropertyDescriptor:J,getOwnPropertyNames:$,getOwnPropertySymbols:Z}),O&&o(o.S+o.F*(!V||c(function(){var t=R();return"[null]"!=P([t])||"{}"!=P({a:t})||"{}"!=P(Object(t))})),"JSON",{stringify:function(t){for(var e,n,r=[t],i=1;arguments.length>i;)r.push(arguments[i++]);if(n=e=r[1],(_(e)||void 0!==t)&&!Q(t))return g(e)||(e=function(t,e){if("function"==typeof n&&(e=n.call(this,t,e)),!Q(e))return e}),r[1]=e,P.apply(O,r)}}),R[D][M]||n(12)(R[D],M,R[D].valueOf),l(R,"Symbol"),l(Math,"Math",!0),l(r.JSON,"JSON",!0)},function(t,e,n){var s=n(38),u=n(71),c=n(61);t.exports=function(t){var e=s(t),n=u.f;if(n)for(var r,i=n(t),o=c.f,a=0;i.length>a;)o.call(t,r=i[a++])&&e.push(r);return e}},function(t,e,n){var r=n(0);r(r.S,"Object",{create:n(40)})},function(t,e,n){var r=n(0);r(r.S+r.F*!n(8),"Object",{defineProperty:n(9).f})},function(t,e,n){var r=n(0);r(r.S+r.F*!n(8),"Object",{defineProperties:n(133)})},function(t,e,n){var r=n(16),i=n(17).f;n(27)("getOwnPropertyDescriptor",function(){return function(t,e){return i(r(t),e)}})},function(t,e,n){var r=n(10),i=n(18);n(27)("getPrototypeOf",function(){return function(t){return i(r(t))}})},function(t,e,n){var r=n(10),i=n(38);n(27)("keys",function(){return function(t){return i(r(t))}})},function(t,e,n){n(27)("getOwnPropertyNames",function(){return n(134).f})},function(t,e,n){var r=n(5),i=n(33).onFreeze;n(27)("freeze",function(e){return function(t){return e&&r(t)?e(i(t)):t}})},function(t,e,n){var r=n(5),i=n(33).onFreeze;n(27)("seal",function(e){return function(t){return e&&r(t)?e(i(t)):t}})},function(t,e,n){var r=n(5),i=n(33).onFreeze;n(27)("preventExtensions",function(e){return function(t){return e&&r(t)?e(i(t)):t}})},function(t,e,n){var r=n(5);n(27)("isFrozen",function(e){return function(t){return!r(t)||!!e&&e(t)}})},function(t,e,n){var r=n(5);n(27)("isSealed",function(e){return function(t){return!r(t)||!!e&&e(t)}})},function(t,e,n){var r=n(5);n(27)("isExtensible",function(e){return function(t){return!!r(t)&&(!e||e(t))}})},function(t,e,n){var r=n(0);r(r.S+r.F,"Object",{assign:n(135)})},function(t,e,n){var r=n(0);r(r.S,"Object",{is:n(136)})},function(t,e,n){var r=n(0);r(r.S,"Object",{setPrototypeOf:n(94).set})},function(t,e,n){"use strict";var r=n(52),i={};i[n(6)("toStringTag")]="z",i+""!="[object z]"&&n(13)(Object.prototype,"toString",function(){return"[object "+r(this)+"]"},!0)},function(t,e,n){var r=n(0);r(r.P,"Function",{bind:n(137)})},function(t,e,n){var r=n(9).f,i=Function.prototype,o=/^\s*function ([^ (]*)/;"name"in i||n(8)&&r(i,"name",{configurable:!0,get:function(){try{return(""+this).match(o)[1]}catch(t){return""}}})},function(t,e,n){"use strict";var r=n(5),i=n(18),o=n(6)("hasInstance"),a=Function.prototype;o in a||n(9).f(a,o,{value:function(t){if("function"!=typeof this||!r(t))return!1;if(!r(this.prototype))return t instanceof this;for(;t=i(t);)if(this.prototype===t)return!0;return!1}})},function(t,e,n){var r=n(0),i=n(139);r(r.G+r.F*(parseInt!=i),{parseInt:i})},function(t,e,n){var r=n(0),i=n(140);r(r.G+r.F*(parseFloat!=i),{parseFloat:i})},function(t,e,n){"use strict";var r=n(3),i=n(15),o=n(22),a=n(96),h=n(25),s=n(4),u=n(41).f,c=n(17).f,l=n(9).f,f=n(53).trim,p="Number",d=r[p],v=d,y=d.prototype,g=o(n(40)(y))==p,m="trim"in String.prototype,_=function(t){var e=h(t,!1);if("string"==typeof e&&2<e.length){var n,r,i,o=(e=m?e.trim():f(e,3)).charCodeAt(0);if(43===o||45===o){if(88===(n=e.charCodeAt(2))||120===n)return NaN}else if(48===o){switch(e.charCodeAt(1)){case 66:case 98:r=2,i=49;break;case 79:case 111:r=8,i=55;break;default:return+e}for(var a,s=e.slice(2),u=0,c=s.length;u<c;u++)if((a=s.charCodeAt(u))<48||i<a)return NaN;return parseInt(s,r)}}return+e};if(!d(" 0o1")||!d("0b1")||d("+0x1")){d=function(t){var e=arguments.length<1?0:t,n=this;return n instanceof d&&(g?s(function(){y.valueOf.call(n)}):o(n)!=p)?a(new v(_(e)),n,d):_(e)};for(var b,w=n(8)?u(v):"MAX_VALUE,MIN_VALUE,NaN,NEGATIVE_INFINITY,POSITIVE_INFINITY,EPSILON,isFinite,isInteger,isNaN,isSafeInteger,MAX_SAFE_INTEGER,MIN_SAFE_INTEGER,parseFloat,parseInt,isInteger".split(","),E=0;w.length>E;E++)i(v,b=w[E])&&!i(d,b)&&l(d,b,c(v,b));(d.prototype=y).constructor=d,n(13)(r,p,d)}},function(t,e,n){"use strict";var r=n(0),c=n(23),h=n(141),l=n(97),i=1..toFixed,o=Math.floor,a=[0,0,0,0,0,0],f="Number.toFixed: incorrect invocation!",p=function(t,e){for(var n=-1,r=e;++n<6;)r+=t*a[n],a[n]=r%1e7,r=o(r/1e7)},d=function(t){for(var e=6,n=0;0<=--e;)n+=a[e],a[e]=o(n/t),n=n%t*1e7},v=function(){for(var t=6,e="";0<=--t;)if(""!==e||0===t||0!==a[t]){var n=String(a[t]);e=""===e?n:e+l.call("0",7-n.length)+n}return e},y=function(t,e,n){return 0===e?n:e%2==1?y(t,e-1,n*t):y(t*t,e/2,n)};r(r.P+r.F*(!!i&&("0.000"!==8e-5.toFixed(3)||"1"!==.9.toFixed(0)||"1.25"!==1.255.toFixed(2)||"1000000000000000128"!==(0xde0b6b3a7640080).toFixed(0))||!n(4)(function(){i.call({})})),"Number",{toFixed:function(t){var e,n,r,i,o=h(this,f),a=c(t),s="",u="0";if(a<0||20<a)throw RangeError(f);if(o!=o)return"NaN";if(o<=-1e21||1e21<=o)return String(o);if(o<0&&(s="-",o=-o),1e-21<o)if(n=(e=function(t){for(var e=0,n=t;4096<=n;)e+=12,n/=4096;for(;2<=n;)e+=1,n/=2;return e}(o*y(2,69,1))-69)<0?o*y(2,-e,1):o/y(2,e,1),n*=4503599627370496,0<(e=52-e)){for(p(0,n),r=a;7<=r;)p(1e7,0),r-=7;for(p(y(10,r,1),0),r=e-1;23<=r;)d(1<<23),r-=23;d(1<<r),p(1,1),d(2),u=v()}else p(0,n),p(1<<-e,0),u=v()+l.call("0",a);return u=0<a?s+((i=u.length)<=a?"0."+l.call("0",a-i)+u:u.slice(0,i-a)+"."+u.slice(i-a)):s+u}})},function(t,e,n){"use strict";var r=n(0),i=n(4),o=n(141),a=1..toPrecision;r(r.P+r.F*(i(function(){return"1"!==a.call(1,void 0)})||!i(function(){a.call({})})),"Number",{toPrecision:function(t){var e=o(this,"Number#toPrecision: incorrect invocation!");return void 0===t?a.call(e):a.call(e,t)}})},function(t,e,n){var r=n(0);r(r.S,"Number",{EPSILON:Math.pow(2,-52)})},function(t,e,n){var r=n(0),i=n(3).isFinite;r(r.S,"Number",{isFinite:function(t){return"number"==typeof t&&i(t)}})},function(t,e,n){var r=n(0);r(r.S,"Number",{isInteger:n(142)})},function(t,e,n){var r=n(0);r(r.S,"Number",{isNaN:function(t){return t!=t}})},function(t,e,n){var r=n(0),i=n(142),o=Math.abs;r(r.S,"Number",{isSafeInteger:function(t){return i(t)&&o(t)<=9007199254740991}})},function(t,e,n){var r=n(0);r(r.S,"Number",{MAX_SAFE_INTEGER:9007199254740991})},function(t,e,n){var r=n(0);r(r.S,"Number",{MIN_SAFE_INTEGER:-9007199254740991})},function(t,e,n){var r=n(0),i=n(140);r(r.S+r.F*(Number.parseFloat!=i),"Number",{parseFloat:i})},function(t,e,n){var r=n(0),i=n(139);r(r.S+r.F*(Number.parseInt!=i),"Number",{parseInt:i})},function(t,e,n){var r=n(0),i=n(143),o=Math.sqrt,a=Math.acosh;r(r.S+r.F*!(a&&710==Math.floor(a(Number.MAX_VALUE))&&a(1/0)==1/0),"Math",{acosh:function(t){return(t=+t)<1?NaN:94906265.62425156<t?Math.log(t)+Math.LN2:i(t-1+o(t-1)*o(t+1))}})},function(t,e,n){var r=n(0),i=Math.asinh;r(r.S+r.F*!(i&&0<1/i(0)),"Math",{asinh:function t(e){return isFinite(e=+e)&&0!=e?e<0?-t(-e):Math.log(e+Math.sqrt(e*e+1)):e}})},function(t,e,n){var r=n(0),i=Math.atanh;r(r.S+r.F*!(i&&1/i(-0)<0),"Math",{atanh:function(t){return 0==(t=+t)?t:Math.log((1+t)/(1-t))/2}})},function(t,e,n){var r=n(0),i=n(98);r(r.S,"Math",{cbrt:function(t){return i(t=+t)*Math.pow(Math.abs(t),1/3)}})},function(t,e,n){var r=n(0);r(r.S,"Math",{clz32:function(t){return(t>>>=0)?31-Math.floor(Math.log(t+.5)*Math.LOG2E):32}})},function(t,e,n){var r=n(0),i=Math.exp;r(r.S,"Math",{cosh:function(t){return(i(t=+t)+i(-t))/2}})},function(t,e,n){var r=n(0),i=n(99);r(r.S+r.F*(i!=Math.expm1),"Math",{expm1:i})},function(t,e,n){var r=n(0);r(r.S,"Math",{fround:n(144)})},function(t,e,n){var r=n(0),u=Math.abs;r(r.S,"Math",{hypot:function(t,e){for(var n,r,i=0,o=0,a=arguments.length,s=0;o<a;)s<(n=u(arguments[o++]))?(i=i*(r=s/n)*r+1,s=n):i+=0<n?(r=n/s)*r:n;return s===1/0?1/0:s*Math.sqrt(i)}})},function(t,e,n){var r=n(0),i=Math.imul;r(r.S+r.F*n(4)(function(){return-5!=i(4294967295,5)||2!=i.length}),"Math",{imul:function(t,e){var n=65535,r=+t,i=+e,o=n&r,a=n&i;return 0|o*a+((n&r>>>16)*a+o*(n&i>>>16)<<16>>>0)}})},function(t,e,n){var r=n(0);r(r.S,"Math",{log10:function(t){return Math.log(t)*Math.LOG10E}})},function(t,e,n){var r=n(0);r(r.S,"Math",{log1p:n(143)})},function(t,e,n){var r=n(0);r(r.S,"Math",{log2:function(t){return Math.log(t)/Math.LN2}})},function(t,e,n){var r=n(0);r(r.S,"Math",{sign:n(98)})},function(t,e,n){var r=n(0),i=n(99),o=Math.exp;r(r.S+r.F*n(4)(function(){return-2e-17!=!Math.sinh(-2e-17)}),"Math",{sinh:function(t){return Math.abs(t=+t)<1?(i(t)-i(-t))/2:(o(t-1)-o(-t-1))*(Math.E/2)}})},function(t,e,n){var r=n(0),i=n(99),o=Math.exp;r(r.S,"Math",{tanh:function(t){var e=i(t=+t),n=i(-t);return e==1/0?1:n==1/0?-1:(e-n)/(o(t)+o(-t))}})},function(t,e,n){var r=n(0);r(r.S,"Math",{trunc:function(t){return(0<t?Math.floor:Math.ceil)(t)}})},function(t,e,n){var r=n(0),o=n(39),a=String.fromCharCode,i=String.fromCodePoint;r(r.S+r.F*(!!i&&1!=i.length),"String",{fromCodePoint:function(t){for(var e,n=[],r=arguments.length,i=0;i<r;){if(e=+arguments[i++],o(e,1114111)!==e)throw RangeError(e+" is not a valid code point");n.push(e<65536?a(e):a(55296+((e-=65536)>>10),e%1024+56320))}return n.join("")}})},function(t,e,n){var r=n(0),a=n(16),s=n(7);r(r.S,"String",{raw:function(t){for(var e=a(t.raw),n=s(e.length),r=arguments.length,i=[],o=0;o<n;)i.push(String(e[o++])),o<r&&i.push(String(arguments[o]));return i.join("")}})},function(t,e,n){"use strict";n(53)("trim",function(t){return function(){return t(this,3)}})},function(t,e,n){"use strict";var r=n(73)(!0);n(100)(String,"String",function(t){this._t=String(t),this._i=0},function(){var t,e=this._t,n=this._i;return n>=e.length?{value:void 0,done:!0}:(t=r(e,n),this._i+=t.length,{value:t,done:!1})})},function(t,e,n){"use strict";var r=n(0),i=n(73)(!1);r(r.P,"String",{codePointAt:function(t){return i(this,t)}})},function(t,e,n){"use strict";var r=n(0),a=n(7),s=n(102),u="endsWith",c=""[u];r(r.P+r.F*n(103)(u),"String",{endsWith:function(t){var e=s(this,t,u),n=1<arguments.length?arguments[1]:void 0,r=a(e.length),i=void 0===n?r:Math.min(a(n),r),o=String(t);return c?c.call(e,o,i):e.slice(i-o.length,i)===o}})},function(t,e,n){"use strict";var r=n(0),i=n(102);r(r.P+r.F*n(103)("includes"),"String",{includes:function(t){return!!~i(this,t,"includes").indexOf(t,1<arguments.length?arguments[1]:void 0)}})},function(t,e,n){var r=n(0);r(r.P,"String",{repeat:n(97)})},function(t,e,n){"use strict";var r=n(0),i=n(7),o=n(102),a="startsWith",s=""[a];r(r.P+r.F*n(103)(a),"String",{startsWith:function(t){var e=o(this,t,a),n=i(Math.min(1<arguments.length?arguments[1]:void 0,e.length)),r=String(t);return s?s.call(e,r,n):e.slice(n,n+r.length)===r}})},function(t,e,n){"use strict";n(14)("anchor",function(e){return function(t){return e(this,"a","name",t)}})},function(t,e,n){"use strict";n(14)("big",function(t){return function(){return t(this,"big","","")}})},function(t,e,n){"use strict";n(14)("blink",function(t){return function(){return t(this,"blink","","")}})},function(t,e,n){"use strict";n(14)("bold",function(t){return function(){return t(this,"b","","")}})},function(t,e,n){"use strict";n(14)("fixed",function(t){return function(){return t(this,"tt","","")}})},function(t,e,n){"use strict";n(14)("fontcolor",function(e){return function(t){return e(this,"font","color",t)}})},function(t,e,n){"use strict";n(14)("fontsize",function(e){return function(t){return e(this,"font","size",t)}})},function(t,e,n){"use strict";n(14)("italics",function(t){return function(){return t(this,"i","","")}})},function(t,e,n){"use strict";n(14)("link",function(e){return function(t){return e(this,"a","href",t)}})},function(t,e,n){"use strict";n(14)("small",function(t){return function(){return t(this,"small","","")}})},function(t,e,n){"use strict";n(14)("strike",function(t){return function(){return t(this,"strike","","")}})},function(t,e,n){"use strict";n(14)("sub",function(t){return function(){return t(this,"sub","","")}})},function(t,e,n){"use strict";n(14)("sup",function(t){return function(){return t(this,"sup","","")}})},function(t,e,n){var r=n(0);r(r.S,"Date",{now:function(){return(new Date).getTime()}})},function(t,e,n){"use strict";var r=n(0),i=n(10),o=n(25);r(r.P+r.F*n(4)(function(){return null!==new Date(NaN).toJSON()||1!==Date.prototype.toJSON.call({toISOString:function(){return 1}})}),"Date",{toJSON:function(t){var e=i(this),n=o(e);return"number"!=typeof n||isFinite(n)?e.toISOString():null}})},function(t,e,n){var r=n(0),i=n(263);r(r.P+r.F*(Date.prototype.toISOString!==i),"Date",{toISOString:i})},function(t,e,n){"use strict";var r=n(4),i=Date.prototype.getTime,o=Date.prototype.toISOString,a=function(t){return 9<t?t:"0"+t};t.exports=r(function(){return"0385-07-25T07:06:39.999Z"!=o.call(new Date(-5e13-1))})||!r(function(){o.call(new Date(NaN))})?function(){if(!isFinite(i.call(this)))throw RangeError("Invalid time value");var t=this.getUTCFullYear(),e=this.getUTCMilliseconds(),n=t<0?"-":9999<t?"+":"";return n+("00000"+Math.abs(t)).slice(n?-6:-4)+"-"+a(this.getUTCMonth()+1)+"-"+a(this.getUTCDate())+"T"+a(this.getUTCHours())+":"+a(this.getUTCMinutes())+":"+a(this.getUTCSeconds())+"."+(99<e?e:"0"+a(e))+"Z"}:o},function(t,e,n){var r=Date.prototype,i="Invalid Date",o=r.toString,a=r.getTime;new Date(NaN)+""!=i&&n(13)(r,"toString",function(){var t=a.call(this);return t==t?o.call(this):i})},function(t,e,n){var r=n(6)("toPrimitive"),i=Date.prototype;r in i||n(12)(i,r,n(266))},function(t,e,n){"use strict";var r=n(2),i=n(25);t.exports=function(t){if("string"!==t&&"number"!==t&&"default"!==t)throw TypeError("Incorrect hint");return i(r(this),"number"!=t)}},function(t,e,n){var r=n(0);r(r.S,"Array",{isArray:n(72)})},function(t,e,n){"use strict";var f=n(21),r=n(0),p=n(10),d=n(145),v=n(104),y=n(7),g=n(105),m=n(106);r(r.S+r.F*!n(75)(function(t){Array.from(t)}),"Array",{from:function(t){var e,n,r,i,o=p(t),a="function"==typeof this?this:Array,s=arguments.length,u=1<s?arguments[1]:void 0,c=void 0!==u,h=0,l=m(o);if(c&&(u=f(u,2<s?arguments[2]:void 0,2)),null==l||a==Array&&v(l))for(n=new a(e=y(o.length));h<e;h++)g(n,h,c?u(o[h],h):o[h]);else for(i=l.call(o),n=new a;!(r=i.next()).done;h++)g(n,h,c?d(i,u,[r.value,h],!0):r.value);return n.length=h,n}})},function(t,e,n){"use strict";var r=n(0),i=n(105);r(r.S+r.F*n(4)(function(){function t(){}return!(Array.of.call(t)instanceof t)}),"Array",{of:function(){for(var t=0,e=arguments.length,n=new("function"==typeof this?this:Array)(e);t<e;)i(n,t,arguments[t++]);return n.length=e,n}})},function(t,e,n){"use strict";var r=n(0),i=n(16),o=[].join;r(r.P+r.F*(n(60)!=Object||!n(24)(o)),"Array",{join:function(t){return o.call(i(this),void 0===t?",":t)}})},function(t,e,n){"use strict";var r=n(0),i=n(93),c=n(22),h=n(39),l=n(7),f=[].slice;r(r.P+r.F*n(4)(function(){i&&f.call(i)}),"Array",{slice:function(t,e){var n=l(this.length),r=c(this);if(e=void 0===e?n:e,"Array"==r)return f.call(this,t,e);for(var i=h(t,n),o=h(e,n),a=l(o-i),s=new Array(a),u=0;u<a;u++)s[u]="String"==r?this.charAt(i+u):this[i+u];return s}})},function(t,e,n){"use strict";var r=n(0),i=n(11),o=n(10),a=n(4),s=[].sort,u=[1,2,3];r(r.P+r.F*(a(function(){u.sort(void 0)})||!a(function(){u.sort(null)})||!n(24)(s)),"Array",{sort:function(t){return void 0===t?s.call(o(this)):s.call(o(this),i(t))}})},function(t,e,n){"use strict";var r=n(0),i=n(28)(0),o=n(24)([].forEach,!0);r(r.P+r.F*!o,"Array",{forEach:function(t){return i(this,t,arguments[1])}})},function(t,e,n){var r=n(5),i=n(72),o=n(6)("species");t.exports=function(t){var e;return i(t)&&("function"!=typeof(e=t.constructor)||e!==Array&&!i(e.prototype)||(e=void 0),r(e)&&null===(e=e[o])&&(e=void 0)),void 0===e?Array:e}},function(t,e,n){"use strict";var r=n(0),i=n(28)(1);r(r.P+r.F*!n(24)([].map,!0),"Array",{map:function(t){return i(this,t,arguments[1])}})},function(t,e,n){"use strict";var r=n(0),i=n(28)(2);r(r.P+r.F*!n(24)([].filter,!0),"Array",{filter:function(t){return i(this,t,arguments[1])}})},function(t,e,n){"use strict";var r=n(0),i=n(28)(3);r(r.P+r.F*!n(24)([].some,!0),"Array",{some:function(t){return i(this,t,arguments[1])}})},function(t,e,n){"use strict";var r=n(0),i=n(28)(4);r(r.P+r.F*!n(24)([].every,!0),"Array",{every:function(t){return i(this,t,arguments[1])}})},function(t,e,n){"use strict";var r=n(0),i=n(146);r(r.P+r.F*!n(24)([].reduce,!0),"Array",{reduce:function(t){return i(this,t,arguments.length,arguments[1],!1)}})},function(t,e,n){"use strict";var r=n(0),i=n(146);r(r.P+r.F*!n(24)([].reduceRight,!0),"Array",{reduceRight:function(t){return i(this,t,arguments.length,arguments[1],!0)}})},function(t,e,n){"use strict";var r=n(0),i=n(70)(!1),o=[].indexOf,a=!!o&&1/[1].indexOf(1,-0)<0;r(r.P+r.F*(a||!n(24)(o)),"Array",{indexOf:function(t){return a?o.apply(this,arguments)||0:i(this,t,arguments[1])}})},function(t,e,n){"use strict";var r=n(0),i=n(16),o=n(23),a=n(7),s=[].lastIndexOf,u=!!s&&1/[1].lastIndexOf(1,-0)<0;r(r.P+r.F*(u||!n(24)(s)),"Array",{lastIndexOf:function(t){if(u)return s.apply(this,arguments)||0;var e=i(this),n=a(e.length),r=n-1;for(1<arguments.length&&(r=Math.min(r,o(arguments[1]))),r<0&&(r=n+r);0<=r;r--)if(r in e&&e[r]===t)return r||0;return-1}})},function(t,e,n){var r=n(0);r(r.P,"Array",{copyWithin:n(147)}),n(35)("copyWithin")},function(t,e,n){var r=n(0);r(r.P,"Array",{fill:n(108)}),n(35)("fill")},function(t,e,n){"use strict";var r=n(0),i=n(28)(5),o=!0;"find"in[]&&Array(1).find(function(){o=!1}),r(r.P+r.F*o,"Array",{find:function(t){return i(this,t,1<arguments.length?arguments[1]:void 0)}}),n(35)("find")},function(t,e,n){"use strict";var r=n(0),i=n(28)(6),o="findIndex",a=!0;o in[]&&Array(1)[o](function(){a=!1}),r(r.P+r.F*a,"Array",{findIndex:function(t){return i(this,t,1<arguments.length?arguments[1]:void 0)}}),n(35)(o)},function(t,e,n){n(42)("Array")},function(t,e,n){var r=n(3),o=n(96),i=n(9).f,a=n(41).f,s=n(74),u=n(62),c=r.RegExp,h=c,l=c.prototype,f=/a/g,p=/a/g,d=new c(f)!==f;if(n(8)&&(!d||n(4)(function(){return p[n(6)("match")]=!1,c(f)!=f||c(p)==p||"/a/i"!=c(f,"i")}))){c=function(t,e){var n=this instanceof c,r=s(t),i=void 0===e;return!n&&r&&t.constructor===c&&i?t:o(d?new h(r&&!i?t.source:t,e):h((r=t instanceof c)?t.source:t,r&&i?u.call(t):e),n?this:l,c)};for(var v=function(e){e in c||i(c,e,{configurable:!0,get:function(){return h[e]},set:function(t){h[e]=t}})},y=a(h),g=0;y.length>g;)v(y[g++]);(l.constructor=c).prototype=l,n(13)(r,"RegExp",c)}n(42)("RegExp")},function(t,e,n){"use strict";n(150);var r=n(2),i=n(62),o=n(8),a="toString",s=/./[a],u=function(t){n(13)(RegExp.prototype,a,t,!0)};n(4)(function(){return"/a/b"!=s.call({source:"a",flags:"b"})})?u(function(){var t=r(this);return"/".concat(t.source,"/","flags"in t?t.flags:!o&&t instanceof RegExp?i.call(t):void 0)}):s.name!=a&&u(function(){return s.call(this)})},function(t,e,n){"use strict";var l=n(2),f=n(7),p=n(111),d=n(76);n(77)("match",1,function(r,i,c,h){return[function(t){var e=r(this),n=null==t?void 0:t[i];return void 0!==n?n.call(t,e):new RegExp(t)[i](String(e))},function(t){var e=h(c,t,this);if(e.done)return e.value;var n=l(t),r=String(this);if(!n.global)return d(n,r);for(var i,o=n.unicode,a=[],s=n.lastIndex=0;null!==(i=d(n,r));){var u=String(i[0]);""===(a[s]=u)&&(n.lastIndex=p(r,f(n.lastIndex),o)),s++}return 0===s?null:a}]})},function(t,e,n){"use strict";var S=n(2),r=n(10),T=n(7),C=n(23),I=n(111),x=n(76),A=Math.max,N=Math.min,f=Math.floor,p=/\$([$&`']|\d\d?|<[^>]*>)/g,d=/\$([$&`']|\d\d?)/g,k=function(t){return void 0===t?t:String(t)};n(77)("replace",2,function(i,o,b,w){return[function(t,e){var n=i(this),r=null==t?void 0:t[o];return void 0!==r?r.call(t,n,e):b.call(String(n),t,e)},function(t,e){var n=w(b,t,this,e);if(n.done)return n.value;var r=S(t),i=String(this),o="function"==typeof e;o||(e=String(e));var a=r.global;if(a){var s=r.unicode;r.lastIndex=0}for(var u=[];;){var c=x(r,i);if(null===c)break;if(u.push(c),!a)break;""===String(c[0])&&(r.lastIndex=I(i,T(r.lastIndex),s))}for(var h="",l=0,f=0;f<u.length;f++){c=u[f];for(var p=String(c[0]),d=A(N(C(c.index),i.length),0),v=[],y=1;y<c.length;y++)v.push(k(c[y]));var g=c.groups;if(o){var m=[p].concat(v,d,i);void 0!==g&&m.push(g);var _=String(e.apply(void 0,m))}else _=E(p,i,d,v,g,e);l<=d&&(h+=i.slice(l,d)+_,l=d+p.length)}return h+i.slice(l)}];function E(o,a,s,u,c,t){var h=s+o.length,l=u.length,e=d;return void 0!==c&&(c=r(c),e=p),b.call(t,e,function(t,e){var n;switch(e.charAt(0)){case"$":return"$";case"&":return o;case"`":return a.slice(0,s);case"'":return a.slice(h);case"<":n=c[e.slice(1,-1)];break;default:var r=+e;if(0===r)return t;if(l<r){var i=f(r/10);return 0===i?t:i<=l?void 0===u[i-1]?e.charAt(1):u[i-1]+e.charAt(1):t}n=u[r-1]}return void 0===n?"":n})}})},function(t,e,n){"use strict";var u=n(2),c=n(136),h=n(76);n(77)("search",1,function(r,i,a,s){return[function(t){var e=r(this),n=null==t?void 0:t[i];return void 0!==n?n.call(t,e):new RegExp(t)[i](String(e))},function(t){var e=s(a,t,this);if(e.done)return e.value;var n=u(t),r=String(this),i=n.lastIndex;c(i,0)||(n.lastIndex=0);var o=h(n,r);return c(n.lastIndex,i)||(n.lastIndex=i),null===o?-1:o.index}]})},function(t,e,n){"use strict";var l=n(74),_=n(2),b=n(63),w=n(111),E=n(7),S=n(76),f=n(110),T=Math.min,p=[].push,r="split",d="length",v="lastIndex",C=!!function(){try{return new RegExp("x","y")}catch(t){}}();n(77)("split",2,function(i,o,y,g){var m;return m="c"=="abbc"[r](/(b)*/)[1]||4!="test"[r](/(?:)/,-1)[d]||2!="ab"[r](/(?:ab)*/)[d]||4!="."[r](/(.?)(.?)/)[d]||1<"."[r](/()()/)[d]||""[r](/.?/)[d]?function(t,e){var n=String(this);if(void 0===t&&0===e)return[];if(!l(t))return y.call(n,t,e);for(var r,i,o,a=[],s=(t.ignoreCase?"i":"")+(t.multiline?"m":"")+(t.unicode?"u":"")+(t.sticky?"y":""),u=0,c=void 0===e?4294967295:e>>>0,h=new RegExp(t.source,s+"g");(r=f.call(h,n))&&!(u<(i=h[v])&&(a.push(n.slice(u,r.index)),1<r[d]&&r.index<n[d]&&p.apply(a,r.slice(1)),o=r[0][d],u=i,a[d]>=c));)h[v]===r.index&&h[v]++;return u===n[d]?!o&&h.test("")||a.push(""):a.push(n.slice(u)),a[d]>c?a.slice(0,c):a}:"0"[r](void 0,0)[d]?function(t,e){return void 0===t&&0===e?[]:y.call(this,t,e)}:y,[function(t,e){var n=i(this),r=null==t?void 0:t[o];return void 0!==r?r.call(t,n,e):m.call(String(n),t,e)},function(t,e){var n=g(m,t,this,e,m!==y);if(n.done)return n.value;var r=_(t),i=String(this),o=b(r,RegExp),a=r.unicode,s=(r.ignoreCase?"i":"")+(r.multiline?"m":"")+(r.unicode?"u":"")+(C?"y":"g"),u=new o(C?r:"^(?:"+r.source+")",s),c=void 0===e?4294967295:e>>>0;if(0===c)return[];if(0===i.length)return null===S(u,i)?[i]:[];for(var h=0,l=0,f=[];l<i.length;){u.lastIndex=C?l:0;var p,d=S(u,C?i:i.slice(l));if(null===d||(p=T(E(u.lastIndex+(C?0:l)),i.length))===h)l=w(i,l,a);else{if(f.push(i.slice(h,l)),f.length===c)return f;for(var v=1;v<=d.length-1;v++)if(f.push(d[v]),f.length===c)return f;l=h=p}}return f.push(i.slice(h)),f}]})},function(t,e,n){"use strict";var r,i,o,a,s=n(34),u=n(3),c=n(21),h=n(52),l=n(0),f=n(5),p=n(11),d=n(43),v=n(44),y=n(63),g=n(112).set,m=n(113)(),_=n(114),b=n(151),w=n(78),E=n(152),S="Promise",T=u.TypeError,C=u.process,I=C&&C.versions,x=I&&I.v8||"",A=u[S],N="process"==h(C),k=function(){},R=i=_.f,O=!!function(){try{var t=A.resolve(1),e=(t.constructor={})[n(6)("species")]=function(t){t(k,k)};return(N||"function"==typeof PromiseRejectionEvent)&&t.then(k)instanceof e&&0!==x.indexOf("6.6")&&-1===w.indexOf("Chrome/66")}catch(t){}}(),P=function(t){var e;return!(!f(t)||"function"!=typeof(e=t.then))&&e},D=function(h,n){if(!h._n){h._n=!0;var r=h._c;m(function(){for(var u=h._v,c=1==h._s,t=0,e=function(t){var e,n,r,i=c?t.ok:t.fail,o=t.resolve,a=t.reject,s=t.domain;try{i?(c||(2==h._h&&F(h),h._h=1),!0===i?e=u:(s&&s.enter(),e=i(u),s&&(s.exit(),r=!0)),e===t.promise?a(T("Promise-chain cycle")):(n=P(e))?n.call(e,o,a):o(e)):a(u)}catch(t){s&&!r&&s.exit(),a(t)}};r.length>t;)e(r[t++]);h._c=[],h._n=!1,n&&!h._h&&L(h)})}},L=function(o){g.call(u,function(){var t,e,n,r=o._v,i=M(o);if(i&&(t=b(function(){N?C.emit("unhandledRejection",r,o):(e=u.onunhandledrejection)?e({promise:o,reason:r}):(n=u.console)&&n.error&&n.error("Unhandled promise rejection",r)}),o._h=N||M(o)?2:1),o._a=void 0,i&&t.e)throw t.v})},M=function(t){return 1!==t._h&&0===(t._a||t._c).length},F=function(e){g.call(u,function(){var t;N?C.emit("rejectionHandled",e):(t=u.onrejectionhandled)&&t({promise:e,reason:e._v})})},j=function(t){var e=this;e._d||(e._d=!0,(e=e._w||e)._v=t,e._s=2,e._a||(e._a=e._c.slice()),D(e,!0))},U=function(t){var n,r=this;if(!r._d){r._d=!0,r=r._w||r;try{if(r===t)throw T("Promise can't be resolved itself");(n=P(t))?m(function(){var e={_w:r,_d:!1};try{n.call(t,c(U,e,1),c(j,e,1))}catch(t){j.call(e,t)}}):(r._v=t,r._s=1,D(r,!1))}catch(t){j.call({_w:r,_d:!1},t)}}};O||(A=function(t){d(this,A,S,"_h"),p(t),r.call(this);try{t(c(U,this,1),c(j,this,1))}catch(t){j.call(this,t)}},(r=function(t){this._c=[],this._a=void 0,this._s=0,this._d=!1,this._v=void 0,this._h=0,this._n=!1}).prototype=n(45)(A.prototype,{then:function(t,e){var n=R(y(this,A));return n.ok="function"!=typeof t||t,n.fail="function"==typeof e&&e,n.domain=N?C.domain:void 0,this._c.push(n),this._a&&this._a.push(n),this._s&&D(this,!1),n.promise},catch:function(t){return this.then(void 0,t)}}),o=function(){var t=new r;this.promise=t,this.resolve=c(U,t,1),this.reject=c(j,t,1)},_.f=R=function(t){return t===A||t===a?new o(t):i(t)}),l(l.G+l.W+l.F*!O,{Promise:A}),n(51)(A,S),n(42)(S),a=n(20)[S],l(l.S+l.F*!O,S,{reject:function(t){var e=R(this);return(0,e.reject)(t),e.promise}}),l(l.S+l.F*(s||!O),S,{resolve:function(t){return E(s&&this===a?A:this,t)}}),l(l.S+l.F*!(O&&n(75)(function(t){A.all(t).catch(k)})),S,{all:function(t){var a=this,e=R(a),s=e.resolve,u=e.reject,n=b(function(){var r=[],i=0,o=1;v(t,!1,function(t){var e=i++,n=!1;r.push(void 0),o++,a.resolve(t).then(function(t){n||(n=!0,r[e]=t,--o||s(r))},u)}),--o||s(r)});return n.e&&u(n.v),e.promise},race:function(t){var e=this,n=R(e),r=n.reject,i=b(function(){v(t,!1,function(t){e.resolve(t).then(n.resolve,r)})});return i.e&&r(i.v),n.promise}})},function(t,e,n){"use strict";var r=n(157),i=n(55);n(79)("WeakSet",function(t){return function(){return t(this,0<arguments.length?arguments[0]:void 0)}},{add:function(t){return r.def(i(this,"WeakSet"),t,!0)}},r,!1,!0)},function(t,e,n){"use strict";var r=n(0),i=n(80),o=n(115),c=n(2),h=n(39),l=n(7),a=n(5),s=n(3).ArrayBuffer,f=n(63),p=o.ArrayBuffer,d=o.DataView,u=i.ABV&&s.isView,v=p.prototype.slice,y=i.VIEW,g="ArrayBuffer";r(r.G+r.W+r.F*(s!==p),{ArrayBuffer:p}),r(r.S+r.F*!i.CONSTR,g,{isView:function(t){return u&&u(t)||a(t)&&y in t}}),r(r.P+r.U+r.F*n(4)(function(){return!new p(2).slice(1,void 0).byteLength}),g,{slice:function(t,e){if(void 0!==v&&void 0===e)return v.call(c(this),t);for(var n=c(this).byteLength,r=h(t,n),i=h(void 0===e?n:e,n),o=new(f(this,p))(l(i-r)),a=new d(this),s=new d(o),u=0;r<i;)s.setUint8(u++,a.getUint8(r++));return o}}),n(42)(g)},function(t,e,n){var r=n(0);r(r.G+r.W+r.F*!n(80).ABV,{DataView:n(115).DataView})},function(t,e,n){n(29)("Int8",1,function(r){return function(t,e,n){return r(this,t,e,n)}})},function(t,e,n){n(29)("Uint8",1,function(r){return function(t,e,n){return r(this,t,e,n)}})},function(t,e,n){n(29)("Uint8",1,function(r){return function(t,e,n){return r(this,t,e,n)}},!0)},function(t,e,n){n(29)("Int16",2,function(r){return function(t,e,n){return r(this,t,e,n)}})},function(t,e,n){n(29)("Uint16",2,function(r){return function(t,e,n){return r(this,t,e,n)}})},function(t,e,n){n(29)("Int32",4,function(r){return function(t,e,n){return r(this,t,e,n)}})},function(t,e,n){n(29)("Uint32",4,function(r){return function(t,e,n){return r(this,t,e,n)}})},function(t,e,n){n(29)("Float32",4,function(r){return function(t,e,n){return r(this,t,e,n)}})},function(t,e,n){n(29)("Float64",8,function(r){return function(t,e,n){return r(this,t,e,n)}})},function(t,e,n){var r=n(0),o=n(11),a=n(2),s=(n(3).Reflect||{}).apply,u=Function.apply;r(r.S+r.F*!n(4)(function(){s(function(){})}),"Reflect",{apply:function(t,e,n){var r=o(t),i=a(n);return s?s(r,e,i):u.call(r,e,i)}})},function(t,e,n){var r=n(0),s=n(40),u=n(11),c=n(2),h=n(5),i=n(4),l=n(137),f=(n(3).Reflect||{}).construct,p=i(function(){function t(){}return!(f(function(){},[],t)instanceof t)}),d=!i(function(){f(function(){})});r(r.S+r.F*(p||d),"Reflect",{construct:function(t,e){u(t),c(e);var n=arguments.length<3?t:u(arguments[2]);if(d&&!p)return f(t,e,n);if(t==n){switch(e.length){case 0:return new t;case 1:return new t(e[0]);case 2:return new t(e[0],e[1]);case 3:return new t(e[0],e[1],e[2]);case 4:return new t(e[0],e[1],e[2],e[3])}var r=[null];return r.push.apply(r,e),new(l.apply(t,r))}var i=n.prototype,o=s(h(i)?i:Object.prototype),a=Function.apply.call(t,o,e);return h(a)?a:o}})},function(t,e,n){var r=n(9),i=n(0),o=n(2),a=n(25);i(i.S+i.F*n(4)(function(){Reflect.defineProperty(r.f({},1,{value:1}),1,{value:2})}),"Reflect",{defineProperty:function(t,e,n){o(t),e=a(e,!0),o(n);try{return r.f(t,e,n),!0}catch(t){return!1}}})},function(t,e,n){var r=n(0),i=n(17).f,o=n(2);r(r.S,"Reflect",{deleteProperty:function(t,e){var n=i(o(t),e);return!(n&&!n.configurable)&&delete t[e]}})},function(t,e,n){"use strict";var r=n(0),i=n(2),o=function(t){this._t=i(t),this._i=0;var e,n=this._k=[];for(e in t)n.push(e)};n(101)(o,"Object",function(){var t,e=this._k;do{if(this._i>=e.length)return{value:void 0,done:!0}}while(!((t=e[this._i++])in this._t));return{value:t,done:!1}}),r(r.S,"Reflect",{enumerate:function(t){return new o(t)}})},function(t,e,n){var a=n(17),s=n(18),u=n(15),r=n(0),c=n(5),h=n(2);r(r.S,"Reflect",{get:function t(e,n){var r,i,o=arguments.length<3?e:arguments[2];return h(e)===o?e[n]:(r=a.f(e,n))?u(r,"value")?r.value:void 0!==r.get?r.get.call(o):void 0:c(i=s(e))?t(i,n,o):void 0}})},function(t,e,n){var r=n(17),i=n(0),o=n(2);i(i.S,"Reflect",{getOwnPropertyDescriptor:function(t,e){return r.f(o(t),e)}})},function(t,e,n){var r=n(0),i=n(18),o=n(2);r(r.S,"Reflect",{getPrototypeOf:function(t){return i(o(t))}})},function(t,e,n){var r=n(0);r(r.S,"Reflect",{has:function(t,e){return e in t}})},function(t,e,n){var r=n(0),i=n(2),o=Object.isExtensible;r(r.S,"Reflect",{isExtensible:function(t){return i(t),!o||o(t)}})},function(t,e,n){var r=n(0);r(r.S,"Reflect",{ownKeys:n(159)})},function(t,e,n){var r=n(0),i=n(2),o=Object.preventExtensions;r(r.S,"Reflect",{preventExtensions:function(t){i(t);try{return o&&o(t),!0}catch(t){return!1}}})},function(t,e,n){var u=n(9),c=n(17),h=n(18),l=n(15),r=n(0),f=n(36),p=n(2),d=n(5);r(r.S,"Reflect",{set:function t(e,n,r){var i,o,a=arguments.length<4?e:arguments[3],s=c.f(p(e),n);if(!s){if(d(o=h(e)))return t(o,n,r,a);s=f(0)}if(l(s,"value")){if(!1===s.writable||!d(a))return!1;if(i=c.f(a,n)){if(i.get||i.set||!1===i.writable)return!1;i.value=r,u.f(a,n,i)}else u.f(a,n,f(0,r));return!0}return void 0!==s.set&&(s.set.call(a,r),!0)}})},function(t,e,n){var r=n(0),i=n(94);i&&r(r.S,"Reflect",{setPrototypeOf:function(t,e){i.check(t,e);try{return i.set(t,e),!0}catch(t){return!1}}})},function(t,e,n){"use strict";var r=n(0),i=n(70)(!0);r(r.P,"Array",{includes:function(t){return i(this,t,1<arguments.length?arguments[1]:void 0)}}),n(35)("includes")},function(t,e,n){"use strict";var r=n(0),i=n(160),o=n(10),a=n(7),s=n(11),u=n(107);r(r.P,"Array",{flatMap:function(t){var e,n,r=o(this);return s(t),e=a(r.length),n=u(r,0),i(n,r,r,e,0,1,t,arguments[1]),n}}),n(35)("flatMap")},function(t,e,n){"use strict";var r=n(0),i=n(160),o=n(10),a=n(7),s=n(23),u=n(107);r(r.P,"Array",{flatten:function(){var t=arguments[0],e=o(this),n=a(e.length),r=u(e,0);return i(r,e,e,n,0,void 0===t?1:s(t)),r}}),n(35)("flatten")},function(t,e,n){"use strict";var r=n(0),i=n(73)(!0);r(r.P,"String",{at:function(t){return i(this,t)}})},function(t,e,n){"use strict";var r=n(0),i=n(161),o=n(78);r(r.P+r.F*/Version\/10\.\d+(\.\d+)? Safari\//.test(o),"String",{padStart:function(t){return i(this,t,1<arguments.length?arguments[1]:void 0,!0)}})},function(t,e,n){"use strict";var r=n(0),i=n(161),o=n(78);r(r.P+r.F*/Version\/10\.\d+(\.\d+)? Safari\//.test(o),"String",{padEnd:function(t){return i(this,t,1<arguments.length?arguments[1]:void 0,!1)}})},function(t,e,n){"use strict";n(53)("trimLeft",function(t){return function(){return t(this,1)}},"trimStart")},function(t,e,n){"use strict";n(53)("trimRight",function(t){return function(){return t(this,2)}},"trimEnd")},function(t,e,n){"use strict";var r=n(0),i=n(26),o=n(7),a=n(74),s=n(62),u=RegExp.prototype,c=function(t,e){this._r=t,this._s=e};n(101)(c,"RegExp String",function(){var t=this._r.exec(this._s);return{value:t,done:null===t}}),r(r.P,"String",{matchAll:function(t){if(i(this),!a(t))throw TypeError(t+" is not a regexp!");var e=String(this),n="flags"in u?String(t.flags):s.call(t),r=new RegExp(t.source,~n.indexOf("g")?n:"g"+n);return r.lastIndex=o(t.lastIndex),new c(r,e)}})},function(t,e,n){n(90)("asyncIterator")},function(t,e,n){n(90)("observable")},function(t,e,n){var r=n(0),u=n(159),c=n(16),h=n(17),l=n(105);r(r.S,"Object",{getOwnPropertyDescriptors:function(t){for(var e,n,r=c(t),i=h.f,o=u(r),a={},s=0;o.length>s;)void 0!==(n=i(r,e=o[s++]))&&l(a,e,n);return a}})},function(t,e,n){var r=n(0),i=n(162)(!1);r(r.S,"Object",{values:function(t){return i(t)}})},function(t,e,n){var r=n(0),i=n(162)(!0);r(r.S,"Object",{entries:function(t){return i(t)}})},function(t,e,n){"use strict";var r=n(0),i=n(10),o=n(11),a=n(9);n(8)&&r(r.P+n(81),"Object",{__defineGetter__:function(t,e){a.f(i(this),t,{get:o(e),enumerable:!0,configurable:!0})}})},function(t,e,n){"use strict";var r=n(0),i=n(10),o=n(11),a=n(9);n(8)&&r(r.P+n(81),"Object",{__defineSetter__:function(t,e){a.f(i(this),t,{set:o(e),enumerable:!0,configurable:!0})}})},function(t,e,n){"use strict";var r=n(0),i=n(10),o=n(25),a=n(18),s=n(17).f;n(8)&&r(r.P+n(81),"Object",{__lookupGetter__:function(t){var e,n=i(this),r=o(t,!0);do{if(e=s(n,r))return e.get}while(n=a(n))}})},function(t,e,n){"use strict";var r=n(0),i=n(10),o=n(25),a=n(18),s=n(17).f;n(8)&&r(r.P+n(81),"Object",{__lookupSetter__:function(t){var e,n=i(this),r=o(t,!0);do{if(e=s(n,r))return e.set}while(n=a(n))}})},function(t,e,n){var r=n(0);r(r.P+r.R,"Map",{toJSON:n(163)("Map")})},function(t,e,n){var r=n(0);r(r.P+r.R,"Set",{toJSON:n(163)("Set")})},function(t,e,n){n(82)("Map")},function(t,e,n){n(82)("Set")},function(t,e,n){n(82)("WeakMap")},function(t,e,n){n(82)("WeakSet")},function(t,e,n){n(83)("Map")},function(t,e,n){n(83)("Set")},function(t,e,n){n(83)("WeakMap")},function(t,e,n){n(83)("WeakSet")},function(t,e,n){var r=n(0);r(r.G,{global:n(3)})},function(t,e,n){var r=n(0);r(r.S,"System",{global:n(3)})},function(t,e,n){var r=n(0),i=n(22);r(r.S,"Error",{isError:function(t){return"Error"===i(t)}})},function(t,e,n){var r=n(0);r(r.S,"Math",{clamp:function(t,e,n){return Math.min(n,Math.max(e,t))}})},function(t,e,n){var r=n(0);r(r.S,"Math",{DEG_PER_RAD:Math.PI/180})},function(t,e,n){var r=n(0),i=180/Math.PI;r(r.S,"Math",{degrees:function(t){return t*i}})},function(t,e,n){var r=n(0),o=n(165),a=n(144);r(r.S,"Math",{fscale:function(t,e,n,r,i){return a(o(t,e,n,r,i))}})},function(t,e,n){var r=n(0);r(r.S,"Math",{iaddh:function(t,e,n,r){var i=t>>>0,o=n>>>0;return(e>>>0)+(r>>>0)+((i&o|(i|o)&~(i+o>>>0))>>>31)|0}})},function(t,e,n){var r=n(0);r(r.S,"Math",{isubh:function(t,e,n,r){var i=t>>>0,o=n>>>0;return(e>>>0)-(r>>>0)-((~i&o|~(i^o)&i-o>>>0)>>>31)|0}})},function(t,e,n){var r=n(0);r(r.S,"Math",{imulh:function(t,e){var n=+t,r=+e,i=65535&n,o=65535&r,a=n>>16,s=r>>16,u=(a*o>>>0)+(i*o>>>16);return a*s+(u>>16)+((i*s>>>0)+(65535&u)>>16)}})},function(t,e,n){var r=n(0);r(r.S,"Math",{RAD_PER_DEG:180/Math.PI})},function(t,e,n){var r=n(0),i=Math.PI/180;r(r.S,"Math",{radians:function(t){return t*i}})},function(t,e,n){var r=n(0);r(r.S,"Math",{scale:n(165)})},function(t,e,n){var r=n(0);r(r.S,"Math",{umulh:function(t,e){var n=+t,r=+e,i=65535&n,o=65535&r,a=n>>>16,s=r>>>16,u=(a*o>>>0)+(i*o>>>16);return a*s+(u>>>16)+((i*s>>>0)+(65535&u)>>>16)}})},function(t,e,n){var r=n(0);r(r.S,"Math",{signbit:function(t){return(t=+t)!=t?t:0==t?1/t==1/0:0<t}})},function(t,e,n){"use strict";var r=n(0),i=n(20),o=n(3),a=n(63),s=n(152);r(r.P+r.R,"Promise",{finally:function(e){var n=a(this,i.Promise||o.Promise),t="function"==typeof e;return this.then(t?function(t){return s(n,e()).then(function(){return t})}:e,t?function(t){return s(n,e()).then(function(){throw t})}:e)}})},function(t,e,n){"use strict";var r=n(0),i=n(114),o=n(151);r(r.S,"Promise",{try:function(t){var e=i.f(this),n=o(t);return(n.e?e.reject:e.resolve)(n.v),e.promise}})},function(t,e,n){var r=n(30),i=n(2),o=r.key,a=r.set;r.exp({defineMetadata:function(t,e,n,r){a(t,e,i(n),o(r))}})},function(t,e,n){var r=n(30),o=n(2),a=r.key,s=r.map,u=r.store;r.exp({deleteMetadata:function(t,e){var n=arguments.length<3?void 0:a(arguments[2]),r=s(o(e),n,!1);if(void 0===r||!r.delete(t))return!1;if(r.size)return!0;var i=u.get(e);return i.delete(n),!!i.size||u.delete(e)}})},function(t,e,n){var r=n(30),i=n(2),o=n(18),a=r.has,s=r.get,u=r.key,c=function(t,e,n){if(a(t,e,n))return s(t,e,n);var r=o(e);return null!==r?c(t,r,n):void 0};r.exp({getMetadata:function(t,e){return c(t,i(e),arguments.length<3?void 0:u(arguments[2]))}})},function(t,e,n){var o=n(155),a=n(164),r=n(30),i=n(2),s=n(18),u=r.keys,c=r.key,h=function(t,e){var n=u(t,e),r=s(t);if(null===r)return n;var i=h(r,e);return i.length?n.length?a(new o(n.concat(i))):i:n};r.exp({getMetadataKeys:function(t){return h(i(t),arguments.length<2?void 0:c(arguments[1]))}})},function(t,e,n){var r=n(30),i=n(2),o=r.get,a=r.key;r.exp({getOwnMetadata:function(t,e){return o(t,i(e),arguments.length<3?void 0:a(arguments[2]))}})},function(t,e,n){var r=n(30),i=n(2),o=r.keys,a=r.key;r.exp({getOwnMetadataKeys:function(t){return o(i(t),arguments.length<2?void 0:a(arguments[1]))}})},function(t,e,n){var r=n(30),i=n(2),o=n(18),a=r.has,s=r.key,u=function(t,e,n){if(a(t,e,n))return!0;var r=o(e);return null!==r&&u(t,r,n)};r.exp({hasMetadata:function(t,e){return u(t,i(e),arguments.length<3?void 0:s(arguments[2]))}})},function(t,e,n){var r=n(30),i=n(2),o=r.has,a=r.key;r.exp({hasOwnMetadata:function(t,e){return o(t,i(e),arguments.length<3?void 0:a(arguments[2]))}})},function(t,e,n){var r=n(30),i=n(2),o=n(11),a=r.key,s=r.set;r.exp({metadata:function(n,r){return function(t,e){s(n,r,(void 0!==e?i:o)(t),a(e))}}})},function(t,e,n){var r=n(0),i=n(113)(),o=n(3).process,a="process"==n(22)(o);r(r.G,{asap:function(t){var e=a&&o.domain;i(e?e.bind(t):t)}})},function(t,e,n){"use strict";var r=n(0),o=n(3),a=n(20),i=n(113)(),s=n(6)("observable"),u=n(11),c=n(2),h=n(43),l=n(45),f=n(12),p=n(44),d=p.RETURN,v=function(t){return null==t?void 0:u(t)},y=function(t){var e=t._c;e&&(t._c=void 0,e())},g=function(t){return void 0===t._o},m=function(t){g(t)||(t._o=void 0,y(t))},_=function(e,t){c(e),this._c=void 0,this._o=e,e=new b(this);try{var n=t(e),r=n;null!=n&&("function"==typeof n.unsubscribe?n=function(){r.unsubscribe()}:u(n),this._c=n)}catch(t){return void e.error(t)}g(this)&&y(this)};_.prototype=l({},{unsubscribe:function(){m(this)}});var b=function(t){this._s=t};b.prototype=l({},{next:function(t){var e=this._s;if(!g(e)){var n=e._o;try{var r=v(n.next);if(r)return r.call(n,t)}catch(t){try{m(e)}finally{throw t}}}},error:function(t){var e=this._s;if(g(e))throw t;var n=e._o;e._o=void 0;try{var r=v(n.error);if(!r)throw t;t=r.call(n,t)}catch(t){try{y(e)}finally{throw t}}return y(e),t},complete:function(t){var e=this._s;if(!g(e)){var n=e._o;e._o=void 0;try{var r=v(n.complete);t=r?r.call(n,t):void 0}catch(t){try{y(e)}finally{throw t}}return y(e),t}}});var w=function(t){h(this,w,"Observable","_f")._f=u(t)};l(w.prototype,{subscribe:function(t){return new _(t,this._f)},forEach:function(r){var i=this;return new(a.Promise||o.Promise)(function(t,e){u(r);var n=i.subscribe({next:function(t){try{return r(t)}catch(t){e(t),n.unsubscribe()}},error:e,complete:t})})}}),l(w,{from:function(t){var e="function"==typeof this?this:w,n=v(c(t)[s]);if(n){var r=c(n.call(t));return r.constructor===e?r:new e(function(t){return r.subscribe(t)})}return new e(function(e){var n=!1;return i(function(){if(!n){try{if(p(t,!1,function(t){if(e.next(t),n)return d})===d)return}catch(t){if(n)throw t;return void e.error(t)}e.complete()}}),function(){n=!0}})},of:function(){for(var t=0,e=arguments.length,r=new Array(e);t<e;)r[t]=arguments[t++];return new("function"==typeof this?this:w)(function(e){var n=!1;return i(function(){if(!n){for(var t=0;t<r.length;++t)if(e.next(r[t]),n)return;e.complete()}}),function(){n=!0}})}}),f(w.prototype,s,function(){return this}),r(r.G,{Observable:w}),n(42)("Observable")},function(t,e,n){var r=n(3),i=n(0),o=n(78),a=[].slice,s=/MSIE .\./.test(o),u=function(i){return function(t,e){var n=2<arguments.length,r=!!n&&a.call(arguments,2);return i(n?function(){("function"==typeof t?t:Function(t)).apply(this,r)}:t,e)}};i(i.G+i.B+i.F*s,{setTimeout:u(r.setTimeout),setInterval:u(r.setInterval)})},function(t,e,n){var r=n(0),i=n(112);r(r.G+r.B,{setImmediate:i.set,clearImmediate:i.clear})},function(t,e,n){for(var r=n(109),i=n(38),o=n(13),a=n(3),s=n(12),u=n(54),c=n(6),h=c("iterator"),l=c("toStringTag"),f=u.Array,p={CSSRuleList:!0,CSSStyleDeclaration:!1,CSSValueList:!1,ClientRectList:!1,DOMRectList:!1,DOMStringList:!1,DOMTokenList:!0,DataTransferItemList:!1,FileList:!1,HTMLAllCollection:!1,HTMLCollection:!1,HTMLFormElement:!1,HTMLSelectElement:!1,MediaList:!0,MimeTypeArray:!1,NamedNodeMap:!1,NodeList:!0,PaintRequestList:!1,Plugin:!1,PluginArray:!1,SVGLengthList:!1,SVGNumberList:!1,SVGPathSegList:!1,SVGPointList:!1,SVGStringList:!1,SVGTransformList:!1,SourceBufferList:!1,StyleSheetList:!0,TextTrackCueList:!1,TextTrackList:!1,TouchList:!1},d=i(p),v=0;v<d.length;v++){var y,g=d[v],m=p[g],_=a[g],b=_&&_.prototype;if(b&&(b[h]||s(b,h,f),b[l]||s(b,l,g),u[g]=f,m))for(y in r)b[y]||o(b,y,r[y],!0)}},function(O,t,e){(function(t){!function(t){"use strict";var u,e=Object.prototype,c=e.hasOwnProperty,n="function"==typeof Symbol?Symbol:{},i=n.iterator||"@@iterator",r=n.asyncIterator||"@@asyncIterator",o=n.toStringTag||"@@toStringTag",a="object"==typeof O,s=t.regeneratorRuntime;if(s)a&&(O.exports=s);else{(s=t.regeneratorRuntime=a?O.exports:{}).wrap=_;var h="suspendedStart",l="suspendedYield",f="executing",p="completed",d={},v={};v[i]=function(){return this};var y=Object.getPrototypeOf,g=y&&y(y(k([])));g&&g!==e&&c.call(g,i)&&(v=g);var m=S.prototype=w.prototype=Object.create(v);E.prototype=m.constructor=S,S.constructor=E,S[o]=E.displayName="GeneratorFunction",s.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===E||"GeneratorFunction"===(e.displayName||e.name))},s.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,S):(t.__proto__=S,o in t||(t[o]="GeneratorFunction")),t.prototype=Object.create(m),t},s.awrap=function(t){return{__await:t}},T(C.prototype),C.prototype[r]=function(){return this},s.AsyncIterator=C,s.async=function(t,e,n,r){var i=new C(_(t,e,n,r));return s.isGeneratorFunction(e)?i:i.next().then(function(t){return t.done?t.value:i.next()})},T(m),m[o]="Generator",m[i]=function(){return this},m.toString=function(){return"[object Generator]"},s.keys=function(n){var r=[];for(var t in n)r.push(t);return r.reverse(),function t(){for(;r.length;){var e=r.pop();if(e in n)return t.value=e,t.done=!1,t}return t.done=!0,t}},s.values=k,N.prototype={constructor:N,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=u,this.done=!1,this.delegate=null,this.method="next",this.arg=u,this.tryEntries.forEach(A),!t)for(var e in this)"t"===e.charAt(0)&&c.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=u)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(n){if(this.done)throw n;var r=this;function t(t,e){return o.type="throw",o.arg=n,r.next=t,e&&(r.method="next",r.arg=u),!!e}for(var e=this.tryEntries.length-1;0<=e;--e){var i=this.tryEntries[e],o=i.completion;if("root"===i.tryLoc)return t("end");if(i.tryLoc<=this.prev){var a=c.call(i,"catchLoc"),s=c.call(i,"finallyLoc");if(a&&s){if(this.prev<i.catchLoc)return t(i.catchLoc,!0);if(this.prev<i.finallyLoc)return t(i.finallyLoc)}else if(a){if(this.prev<i.catchLoc)return t(i.catchLoc,!0)}else{if(!s)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return t(i.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;0<=n;--n){var r=this.tryEntries[n];if(r.tryLoc<=this.prev&&c.call(r,"finallyLoc")&&this.prev<r.finallyLoc){var i=r;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var o=i?i.completion:{};return o.type=t,o.arg=e,i?(this.method="next",this.next=i.finallyLoc,d):this.complete(o)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),d},finish:function(t){for(var e=this.tryEntries.length-1;0<=e;--e){var n=this.tryEntries[e];if(n.finallyLoc===t)return this.complete(n.completion,n.afterLoc),A(n),d}},catch:function(t){for(var e=this.tryEntries.length-1;0<=e;--e){var n=this.tryEntries[e];if(n.tryLoc===t){var r=n.completion;if("throw"===r.type){var i=r.arg;A(n)}return i}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,n){return this.delegate={iterator:k(t),resultName:e,nextLoc:n},"next"===this.method&&(this.arg=u),d}}}function _(t,e,n,r){var i=e&&e.prototype instanceof w?e:w,o=Object.create(i.prototype),a=new N(r||[]);return o._invoke=function(o,a,s){var u=h;return function(t,e){if(u===f)throw new Error("Generator is already running");if(u===p){if("throw"===t)throw e;return R()}for(s.method=t,s.arg=e;;){var n=s.delegate;if(n){var r=I(n,s);if(r){if(r===d)continue;return r}}if("next"===s.method)s.sent=s._sent=s.arg;else if("throw"===s.method){if(u===h)throw u=p,s.arg;s.dispatchException(s.arg)}else"return"===s.method&&s.abrupt("return",s.arg);u=f;var i=b(o,a,s);if("normal"===i.type){if(u=s.done?p:l,i.arg===d)continue;return{value:i.arg,done:s.done}}"throw"===i.type&&(u=p,s.method="throw",s.arg=i.arg)}}}(t,n,a),o}function b(t,e,n){try{return{type:"normal",arg:t.call(e,n)}}catch(t){return{type:"throw",arg:t}}}function w(){}function E(){}function S(){}function T(t){["next","throw","return"].forEach(function(e){t[e]=function(t){return this._invoke(e,t)}})}function C(s){function u(t,e,n,r){var i=b(s[t],s,e);if("throw"!==i.type){var o=i.arg,a=o.value;return a&&"object"==typeof a&&c.call(a,"__await")?Promise.resolve(a.__await).then(function(t){u("next",t,n,r)},function(t){u("throw",t,n,r)}):Promise.resolve(a).then(function(t){o.value=t,n(o)},r)}r(i.arg)}var e;"object"==typeof t.process&&t.process.domain&&(u=t.process.domain.bind(u)),this._invoke=function(n,r){function t(){return new Promise(function(t,e){u(n,r,t,e)})}return e=e?e.then(t,t):t()}}function I(t,e){var n=t.iterator[e.method];if(n===u){if(e.delegate=null,"throw"===e.method){if(t.iterator.return&&(e.method="return",e.arg=u,I(t,e),"throw"===e.method))return d;e.method="throw",e.arg=new TypeError("The iterator does not provide a 'throw' method")}return d}var r=b(n,t.iterator,e.arg);if("throw"===r.type)return e.method="throw",e.arg=r.arg,e.delegate=null,d;var i=r.arg;return i?i.done?(e[t.resultName]=i.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=u),e.delegate=null,d):i:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,d)}function x(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function A(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function N(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(x,this),this.reset(!0)}function k(e){if(e){var t=e[i];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var n=-1,r=function t(){for(;++n<e.length;)if(c.call(e,n))return t.value=e[n],t.done=!1,t;return t.value=u,t.done=!0,t};return r.next=r}}return{next:R}}function R(){return{value:u,done:!0}}}("object"==typeof t?t:"object"==typeof window?window:"object"==typeof self?self:this)}).call(this,e(50))},function(t,e,n){n(382),t.exports=n(20).RegExp.escape},function(t,e,n){var r=n(0),i=n(383)(/[\\^$*+?.()|[\]{}]/g,"\\$&");r(r.S,"RegExp",{escape:function(t){return i(t)}})},function(t,e){t.exports=function(e,n){var r=n===Object(n)?function(t){return n[t]}:n;return function(t){return String(t).replace(e,r)}}},function(t,e,n){"use strict";n.r(e);n(385),n(386),n(389),n(394),n(396),n(401),n(406),n(409),n(421)},function(t,e){!function(t){"use strict";if(!t.fetch){var e="URLSearchParams"in t,n="Symbol"in t&&"iterator"in Symbol,a="FileReader"in t&&"Blob"in t&&function(){try{return new Blob,!0}catch(t){return!1}}(),r="FormData"in t,i="ArrayBuffer"in t;if(i)var o=["[object Int8Array]","[object Uint8Array]","[object Uint8ClampedArray]","[object Int16Array]","[object Uint16Array]","[object Int32Array]","[object Uint32Array]","[object Float32Array]","[object Float64Array]"],s=function(t){return t&&DataView.prototype.isPrototypeOf(t)},u=ArrayBuffer.isView||function(t){return t&&-1<o.indexOf(Object.prototype.toString.call(t))};d.prototype.append=function(t,e){t=l(t),e=f(e);var n=this.map[t];this.map[t]=n?n+","+e:e},d.prototype.delete=function(t){delete this.map[l(t)]},d.prototype.get=function(t){return t=l(t),this.has(t)?this.map[t]:null},d.prototype.has=function(t){return this.map.hasOwnProperty(l(t))},d.prototype.set=function(t,e){this.map[l(t)]=f(e)},d.prototype.forEach=function(t,e){for(var n in this.map)this.map.hasOwnProperty(n)&&t.call(e,this.map[n],n,this)},d.prototype.keys=function(){var n=[];return this.forEach(function(t,e){n.push(e)}),p(n)},d.prototype.values=function(){var e=[];return this.forEach(function(t){e.push(t)}),p(e)},d.prototype.entries=function(){var n=[];return this.forEach(function(t,e){n.push([e,t])}),p(n)},n&&(d.prototype[Symbol.iterator]=d.prototype.entries);var c=["DELETE","GET","HEAD","OPTIONS","POST","PUT"];b.prototype.clone=function(){return new b(this,{body:this._bodyInit})},_.call(b.prototype),_.call(E.prototype),E.prototype.clone=function(){return new E(this._bodyInit,{status:this.status,statusText:this.statusText,headers:new d(this.headers),url:this.url})},E.error=function(){var t=new E(null,{status:0,statusText:""});return t.type="error",t};var h=[301,302,303,307,308];E.redirect=function(t,e){if(-1===h.indexOf(e))throw new RangeError("Invalid status code");return new E(null,{status:e,headers:{location:t}})},t.Headers=d,t.Request=b,t.Response=E,t.fetch=function(i,o){return new Promise(function(n,t){var e=new b(i,o),r=new XMLHttpRequest;r.onload=function(){var t={status:r.status,statusText:r.statusText,headers:function(t){var i=new d;return t.replace(/\r?\n[\t ]+/g," ").split(/\r?\n/).forEach(function(t){var e=t.split(":"),n=e.shift().trim();if(n){var r=e.join(":").trim();i.append(n,r)}}),i}(r.getAllResponseHeaders()||"")};t.url="responseURL"in r?r.responseURL:t.headers.get("X-Request-URL");var e="response"in r?r.response:r.responseText;n(new E(e,t))},r.onerror=function(){t(new TypeError("Network request failed"))},r.ontimeout=function(){t(new TypeError("Network request failed"))},r.open(e.method,e.url,!0),"include"===e.credentials?r.withCredentials=!0:"omit"===e.credentials&&(r.withCredentials=!1),"responseType"in r&&a&&(r.responseType="blob"),e.headers.forEach(function(t,e){r.setRequestHeader(e,t)}),r.send(void 0===e._bodyInit?null:e._bodyInit)})},t.fetch.polyfill=!0}function l(t){if("string"!=typeof t&&(t=String(t)),/[^a-z0-9\-#$%&'*+.\^_`|~]/i.test(t))throw new TypeError("Invalid character in header field name");return t.toLowerCase()}function f(t){return"string"!=typeof t&&(t=String(t)),t}function p(e){var t={next:function(){var t=e.shift();return{done:void 0===t,value:t}}};return n&&(t[Symbol.iterator]=function(){return t}),t}function d(e){this.map={},e instanceof d?e.forEach(function(t,e){this.append(e,t)},this):Array.isArray(e)?e.forEach(function(t){this.append(t[0],t[1])},this):e&&Object.getOwnPropertyNames(e).forEach(function(t){this.append(t,e[t])},this)}function v(t){if(t.bodyUsed)return Promise.reject(new TypeError("Already read"));t.bodyUsed=!0}function y(n){return new Promise(function(t,e){n.onload=function(){t(n.result)},n.onerror=function(){e(n.error)}})}function g(t){var e=new FileReader,n=y(e);return e.readAsArrayBuffer(t),n}function m(t){if(t.slice)return t.slice(0);var e=new Uint8Array(t.byteLength);return e.set(new Uint8Array(t)),e.buffer}function _(){return this.bodyUsed=!1,this._initBody=function(t){if(this._bodyInit=t)if("string"==typeof t)this._bodyText=t;else if(a&&Blob.prototype.isPrototypeOf(t))this._bodyBlob=t;else if(r&&FormData.prototype.isPrototypeOf(t))this._bodyFormData=t;else if(e&&URLSearchParams.prototype.isPrototypeOf(t))this._bodyText=t.toString();else if(i&&a&&s(t))this._bodyArrayBuffer=m(t.buffer),this._bodyInit=new Blob([this._bodyArrayBuffer]);else{if(!i||!ArrayBuffer.prototype.isPrototypeOf(t)&&!u(t))throw new Error("unsupported BodyInit type");this._bodyArrayBuffer=m(t)}else this._bodyText="";this.headers.get("content-type")||("string"==typeof t?this.headers.set("content-type","text/plain;charset=UTF-8"):this._bodyBlob&&this._bodyBlob.type?this.headers.set("content-type",this._bodyBlob.type):e&&URLSearchParams.prototype.isPrototypeOf(t)&&this.headers.set("content-type","application/x-www-form-urlencoded;charset=UTF-8"))},a&&(this.blob=function(){var t=v(this);if(t)return t;if(this._bodyBlob)return Promise.resolve(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(new Blob([this._bodyArrayBuffer]));if(this._bodyFormData)throw new Error("could not read FormData body as blob");return Promise.resolve(new Blob([this._bodyText]))},this.arrayBuffer=function(){return this._bodyArrayBuffer?v(this)||Promise.resolve(this._bodyArrayBuffer):this.blob().then(g)}),this.text=function(){var t=v(this);if(t)return t;if(this._bodyBlob)return function(t){var e=new FileReader,n=y(e);return e.readAsText(t),n}(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(function(t){for(var e=new Uint8Array(t),n=new Array(e.length),r=0;r<e.length;r++)n[r]=String.fromCharCode(e[r]);return n.join("")}(this._bodyArrayBuffer));if(this._bodyFormData)throw new Error("could not read FormData body as text");return Promise.resolve(this._bodyText)},r&&(this.formData=function(){return this.text().then(w)}),this.json=function(){return this.text().then(JSON.parse)},this}function b(t,e){var n=(e=e||{}).body;if(t instanceof b){if(t.bodyUsed)throw new TypeError("Already read");this.url=t.url,this.credentials=t.credentials,e.headers||(this.headers=new d(t.headers)),this.method=t.method,this.mode=t.mode,n||null==t._bodyInit||(n=t._bodyInit,t.bodyUsed=!0)}else this.url=String(t);if(this.credentials=e.credentials||this.credentials||"omit",!e.headers&&this.headers||(this.headers=new d(e.headers)),this.method=function(t){var e=t.toUpperCase();return-1<c.indexOf(e)?e:t}(e.method||this.method||"GET"),this.mode=e.mode||this.mode||null,this.referrer=null,("GET"===this.method||"HEAD"===this.method)&&n)throw new TypeError("Body not allowed for GET or HEAD requests");this._initBody(n)}function w(t){var i=new FormData;return t.trim().split("&").forEach(function(t){if(t){var e=t.split("="),n=e.shift().replace(/\+/g," "),r=e.join("=").replace(/\+/g," ");i.append(decodeURIComponent(n),decodeURIComponent(r))}}),i}function E(t,e){e||(e={}),this.type="default",this.status=void 0===e.status?200:e.status,this.ok=200<=this.status&&this.status<300,this.statusText="statusText"in e?e.statusText:"OK",this.headers=new d(e.headers),this.url=e.url||"",this._initBody(t)}}("undefined"!=typeof self?self:this)},function(t,e,n){"use strict";(function(e,t){var n=setTimeout;function r(){}function o(t){if(!(this instanceof o))throw new TypeError("Promises must be constructed via new");if("function"!=typeof t)throw new TypeError("not a function");this._state=0,this._handled=!1,this._value=void 0,this._deferreds=[],h(t,this)}function i(n,r){for(;3===n._state;)n=n._value;0!==n._state?(n._handled=!0,o._immediateFn(function(){var t=1===n._state?r.onFulfilled:r.onRejected;if(null!==t){var e;try{e=t(n._value)}catch(t){return void s(r.promise,t)}a(r.promise,e)}else(1===n._state?a:s)(r.promise,n._value)})):n._deferreds.push(r)}function a(e,t){try{if(t===e)throw new TypeError("A promise cannot be resolved with itself.");if(t&&("object"==typeof t||"function"==typeof t)){var n=t.then;if(t instanceof o)return e._state=3,e._value=t,void u(e);if("function"==typeof n)return void h(function(t,e){return function(){t.apply(e,arguments)}}(n,t),e)}e._state=1,e._value=t,u(e)}catch(t){s(e,t)}}function s(t,e){t._state=2,t._value=e,u(t)}function u(t){2===t._state&&0===t._deferreds.length&&o._immediateFn(function(){t._handled||o._unhandledRejectionFn(t._value)});for(var e=0,n=t._deferreds.length;e<n;e++)i(t,t._deferreds[e]);t._deferreds=null}function c(t,e,n){this.onFulfilled="function"==typeof t?t:null,this.onRejected="function"==typeof e?e:null,this.promise=n}function h(t,e){var n=!1;try{t(function(t){n||(n=!0,a(e,t))},function(t){n||(n=!0,s(e,t))})}catch(t){if(n)return;n=!0,s(e,t)}}o.prototype.catch=function(t){return this.then(null,t)},o.prototype.then=function(t,e){var n=new this.constructor(r);return i(this,new c(t,e,n)),n},o.prototype.finally=function(e){var n=this.constructor;return this.then(function(t){return n.resolve(e()).then(function(){return t})},function(t){return n.resolve(e()).then(function(){return n.reject(t)})})},o.all=function(e){return new o(function(r,i){if(!e||void 0===e.length)throw new TypeError("Promise.all accepts an array");var o=Array.prototype.slice.call(e);if(0===o.length)return r([]);var a=o.length;function s(e,t){try{if(t&&("object"==typeof t||"function"==typeof t)){var n=t.then;if("function"==typeof n)return void n.call(t,function(t){s(e,t)},i)}o[e]=t,0==--a&&r(o)}catch(t){i(t)}}for(var t=0;t<o.length;t++)s(t,o[t])})},o.resolve=function(e){return e&&"object"==typeof e&&e.constructor===o?e:new o(function(t){t(e)})},o.reject=function(n){return new o(function(t,e){e(n)})},o.race=function(i){return new o(function(t,e){for(var n=0,r=i.length;n<r;n++)i[n].then(t,e)})},o._immediateFn="function"==typeof e&&function(t){e(t)}||function(t){n(t,0)},o._unhandledRejectionFn=function(t){"undefined"!=typeof console&&console&&console.warn("Possible Unhandled Promise Rejection:",t)};var l=function(){if("undefined"!=typeof self)return self;if("undefined"!=typeof window)return window;if(void 0!==t)return t;throw new Error("unable to locate global object")}();l.Promise||(l.Promise=o)}).call(this,n(387).setImmediate,n(50))},function(t,i,o){(function(t){var e=void 0!==t&&t||"undefined"!=typeof self&&self||window,n=Function.prototype.apply;function r(t,e){this._id=t,this._clearFn=e}i.setTimeout=function(){return new r(n.call(setTimeout,e,arguments),clearTimeout)},i.setInterval=function(){return new r(n.call(setInterval,e,arguments),clearInterval)},i.clearTimeout=i.clearInterval=function(t){t&&t.close()},r.prototype.unref=r.prototype.ref=function(){},r.prototype.close=function(){this._clearFn.call(e,this._id)},i.enroll=function(t,e){clearTimeout(t._idleTimeoutId),t._idleTimeout=e},i.unenroll=function(t){clearTimeout(t._idleTimeoutId),t._idleTimeout=-1},i._unrefActive=i.active=function(t){clearTimeout(t._idleTimeoutId);var e=t._idleTimeout;0<=e&&(t._idleTimeoutId=setTimeout(function(){t._onTimeout&&t._onTimeout()},e))},o(388),i.setImmediate="undefined"!=typeof self&&self.setImmediate||void 0!==t&&t.setImmediate||this&&this.setImmediate,i.clearImmediate="undefined"!=typeof self&&self.clearImmediate||void 0!==t&&t.clearImmediate||this&&this.clearImmediate}).call(this,o(50))},function(t,e,n){(function(t,e){!function(n,r){"use strict";if(!n.setImmediate){var i,o=1,a={},s=!1,u=n.document,t=Object.getPrototypeOf&&Object.getPrototypeOf(n);t=t&&t.setTimeout?t:n,"[object process]"==={}.toString.call(n.process)?function(){i=function(t){e.nextTick(function(){h(t)})}}():function(){if(n.postMessage&&!n.importScripts){var t=!0,e=n.onmessage;return n.onmessage=function(){t=!1},n.postMessage("","*"),n.onmessage=e,t}}()?function(){var e="setImmediate$"+Math.random()+"$",t=function(t){t.source===n&&"string"==typeof t.data&&0===t.data.indexOf(e)&&h(+t.data.slice(e.length))};n.addEventListener?n.addEventListener("message",t,!1):n.attachEvent("onmessage",t),i=function(t){n.postMessage(e+t,"*")}}():n.MessageChannel?function(){var e=new MessageChannel;e.port1.onmessage=function(t){h(t.data)},i=function(t){e.port2.postMessage(t)}}():u&&"onreadystatechange"in u.createElement("script")?function(){var n=u.documentElement;i=function(t){var e=u.createElement("script");e.onreadystatechange=function(){h(t),e.onreadystatechange=null,n.removeChild(e),e=null},n.appendChild(e)}}():function(){i=function(t){setTimeout(h,0,t)}}(),t.setImmediate=function(t){"function"!=typeof t&&(t=new Function(""+t));for(var e=new Array(arguments.length-1),n=0;n<e.length;n++)e[n]=arguments[n+1];var r={callback:t,args:e};return a[o]=r,i(o),o++},t.clearImmediate=c}function c(t){delete a[t]}function h(t){if(s)setTimeout(h,0,t);else{var e=a[t];if(e){s=!0;try{!function(t){var e=t.callback,n=t.args;switch(n.length){case 0:e();break;case 1:e(n[0]);break;case 2:e(n[0],n[1]);break;case 3:e(n[0],n[1],n[2]);break;default:e.apply(r,n)}}(e)}finally{c(t),s=!1}}}}}("undefined"==typeof self?void 0===t?this:t:self)}).call(this,n(50),n(166))},function(t,e,n){n(390),t.exports=n(32).Array.find},function(t,e,n){"use strict";var r=n(46),i=n(170)(5),o=!0;"find"in[]&&Array(1).find(function(){o=!1}),r(r.P+r.F*o,"Array",{find:function(t){return i(this,t,1<arguments.length?arguments[1]:void 0)}}),n(121)("find")},function(t,e){t.exports=function(t){if("function"!=typeof t)throw TypeError(t+" is not a function!");return t}},function(t,e,n){var r=n(393);t.exports=function(t,e){return new(r(t))(e)}},function(t,e,n){var r=n(48),i=n(171),o=n(19)("species");t.exports=function(t){var e;return i(t)&&("function"!=typeof(e=t.constructor)||e!==Array&&!i(e.prototype)||(e=void 0),r(e)&&null===(e=e[o])&&(e=void 0)),void 0===e?Array:e}},function(t,e,n){n(395),t.exports=n(32).Array.findIndex},function(t,e,n){"use strict";var r=n(46),i=n(170)(6),o="findIndex",a=!0;o in[]&&Array(1)[o](function(){a=!1}),r(r.P+r.F*a,"Array",{findIndex:function(t){return i(this,t,1<arguments.length?arguments[1]:void 0)}}),n(121)(o)},function(t,e,n){n(397),t.exports=n(32).Object.assign},function(t,e,n){var r=n(46);r(r.S+r.F,"Object",{assign:n(398)})},function(t,e,n){"use strict";var f=n(68),p=n(124),d=n(88),v=n(118),y=n(117),i=Object.assign;t.exports=!i||n(64)(function(){var t={},e={},n=Symbol(),r="abcdefghijklmnopqrst";return t[n]=7,r.split("").forEach(function(t){e[t]=t}),7!=i({},t)[n]||Object.keys(i({},e)).join("")!=r})?function(t,e){for(var n=v(t),r=arguments.length,i=1,o=p.f,a=d.f;i<r;)for(var s,u=y(arguments[i++]),c=o?f(u).concat(o(u)):f(u),h=c.length,l=0;l<h;)a.call(u,s=c[l++])&&(n[s]=u[s]);return n}:i},function(t,e,n){var u=n(58),c=n(119),h=n(400);t.exports=function(s){return function(t,e,n){var r,i=u(t),o=c(i.length),a=h(n,o);if(s&&e!=e){for(;a<o;)if((r=i[a++])!=r)return!0}else for(;a<o;a++)if((s||a in i)&&i[a]===e)return s||a||0;return!s&&-1}}},function(t,e,n){var r=n(87),i=Math.max,o=Math.min;t.exports=function(t,e){return(t=r(t))<0?i(t+e,0):o(t,e)}},function(t,e,n){n(402),t.exports=n(32).String.startsWith},function(t,e,n){"use strict";var r=n(46),i=n(119),o=n(403),a="startsWith",s=""[a];r(r.P+r.F*n(405)(a),"String",{startsWith:function(t){var e=o(this,t,a),n=i(Math.min(1<arguments.length?arguments[1]:void 0,e.length)),r=String(t);return s?s.call(e,r,n):e.slice(n,n+r.length)===r}})},function(t,e,n){var r=n(404),i=n(67);t.exports=function(t,e,n){if(r(e))throw TypeError("String#"+n+" doesn't accept regex!");return String(i(t))}},function(t,e,n){var r=n(48),i=n(86),o=n(19)("match");t.exports=function(t){var e;return r(t)&&(void 0!==(e=t[o])?!!e:"RegExp"==i(t))}},function(t,e,n){var r=n(19)("match");t.exports=function(e){var n=/./;try{"/./"[e](n)}catch(t){try{return n[r]=!1,!"/./"[e](n)}catch(t){}}return!0}},function(t,e,n){n(407),t.exports=n(32).String.repeat},function(t,e,n){var r=n(46);r(r.P,"String",{repeat:n(408)})},function(t,e,n){"use strict";var i=n(87),o=n(67);t.exports=function(t){var e=String(o(this)),n="",r=i(t);if(r<0||r==1/0)throw RangeError("Count can't be negative");for(;0<r;(r>>>=1)&&(e+=e))1&r&&(n+=e);return n}},function(t,e,n){n(410),n(417),n(419),n(420),t.exports=n(32).Symbol},function(t,e,n){"use strict";var r=n(31),a=n(49),i=n(57),o=n(46),s=n(65),u=n(411).KEY,c=n(64),h=n(120),l=n(125),f=n(66),p=n(19),d=n(126),v=n(127),y=n(412),g=n(171),m=n(84),_=n(48),b=n(58),w=n(116),E=n(85),S=n(173),T=n(415),C=n(416),I=n(56),x=n(68),A=C.f,N=I.f,k=T.f,R=r.Symbol,O=r.JSON,P=O&&O.stringify,D="prototype",L=p("_hidden"),M=p("toPrimitive"),F={}.propertyIsEnumerable,j=h("symbol-registry"),U=h("symbols"),W=h("op-symbols"),B=Object[D],V="function"==typeof R,q=r.QObject,H=!q||!q[D]||!q[D].findChild,K=i&&c(function(){return 7!=S(N({},"a",{get:function(){return N(this,"a",{value:7}).a}})).a})?function(t,e,n){var r=A(B,e);r&&delete B[e],N(t,e,n),r&&t!==B&&N(B,e,r)}:N,G=function(t){var e=U[t]=S(R[D]);return e._k=t,e},Q=V&&"symbol"==typeof R.iterator?function(t){return"symbol"==typeof t}:function(t){return t instanceof R},z=function(t,e,n){return t===B&&z(W,e,n),m(t),e=w(e,!0),m(n),a(U,e)?(n.enumerable?(a(t,L)&&t[L][e]&&(t[L][e]=!1),n=S(n,{enumerable:E(0,!1)})):(a(t,L)||N(t,L,E(1,{})),t[L][e]=!0),K(t,e,n)):N(t,e,n)},Y=function(t,e){m(t);for(var n,r=y(e=b(e)),i=0,o=r.length;i<o;)z(t,n=r[i++],e[n]);return t},X=function(t){var e=F.call(this,t=w(t,!0));return!(this===B&&a(U,t)&&!a(W,t))&&(!(e||!a(this,t)||!a(U,t)||a(this,L)&&this[L][t])||e)},J=function(t,e){if(t=b(t),e=w(e,!0),t!==B||!a(U,e)||a(W,e)){var n=A(t,e);return!n||!a(U,e)||a(t,L)&&t[L][e]||(n.enumerable=!0),n}},$=function(t){for(var e,n=k(b(t)),r=[],i=0;n.length>i;)a(U,e=n[i++])||e==L||e==u||r.push(e);return r},Z=function(t){for(var e,n=t===B,r=k(n?W:b(t)),i=[],o=0;r.length>o;)!a(U,e=r[o++])||n&&!a(B,e)||i.push(U[e]);return i};V||(s((R=function(){if(this instanceof R)throw TypeError("Symbol is not a constructor!");var e=f(0<arguments.length?arguments[0]:void 0),n=function(t){this===B&&n.call(W,t),a(this,L)&&a(this[L],e)&&(this[L][e]=!1),K(this,e,E(1,t))};return i&&H&&K(B,e,{configurable:!0,set:n}),G(e)})[D],"toString",function(){return this._k}),C.f=J,I.f=z,n(174).f=T.f=$,n(88).f=X,n(124).f=Z,i&&!n(128)&&s(B,"propertyIsEnumerable",X,!0),d.f=function(t){return G(p(t))}),o(o.G+o.W+o.F*!V,{Symbol:R});for(var tt="hasInstance,isConcatSpreadable,iterator,match,replace,search,species,split,toPrimitive,toStringTag,unscopables".split(","),et=0;tt.length>et;)p(tt[et++]);for(var nt=x(p.store),rt=0;nt.length>rt;)v(nt[rt++]);o(o.S+o.F*!V,"Symbol",{for:function(t){return a(j,t+="")?j[t]:j[t]=R(t)},keyFor:function(t){if(!Q(t))throw TypeError(t+" is not a symbol!");for(var e in j)if(j[e]===t)return e},useSetter:function(){H=!0},useSimple:function(){H=!1}}),o(o.S+o.F*!V,"Object",{create:function(t,e){return void 0===e?S(t):Y(S(t),e)},defineProperty:z,defineProperties:Y,getOwnPropertyDescriptor:J,getOwnPropertyNames:$,getOwnPropertySymbols:Z}),O&&o(o.S+o.F*(!V||c(function(){var t=R();return"[null]"!=P([t])||"{}"!=P({a:t})||"{}"!=P(Object(t))})),"JSON",{stringify:function(t){for(var e,n,r=[t],i=1;arguments.length>i;)r.push(arguments[i++]);if(n=e=r[1],(_(e)||void 0!==t)&&!Q(t))return g(e)||(e=function(t,e){if("function"==typeof n&&(e=n.call(this,t,e)),!Q(e))return e}),r[1]=e,P.apply(O,r)}}),R[D][M]||n(47)(R[D],M,R[D].valueOf),l(R,"Symbol"),l(Math,"Math",!0),l(r.JSON,"JSON",!0)},function(t,e,n){var r=n(66)("meta"),i=n(48),o=n(49),a=n(56).f,s=0,u=Object.isExtensible||function(){return!0},c=!n(64)(function(){return u(Object.preventExtensions({}))}),h=function(t){a(t,r,{value:{i:"O"+ ++s,w:{}}})},l=t.exports={KEY:r,NEED:!1,fastKey:function(t,e){if(!i(t))return"symbol"==typeof t?t:("string"==typeof t?"S":"P")+t;if(!o(t,r)){if(!u(t))return"F";if(!e)return"E";h(t)}return t[r].i},getWeak:function(t,e){if(!o(t,r)){if(!u(t))return!0;if(!e)return!1;h(t)}return t[r].w},onFreeze:function(t){return c&&l.NEED&&u(t)&&!o(t,r)&&h(t),t}}},function(t,e,n){var s=n(68),u=n(124),c=n(88);t.exports=function(t){var e=s(t),n=u.f;if(n)for(var r,i=n(t),o=c.f,a=0;i.length>a;)o.call(t,r=i[a++])&&e.push(r);return e}},function(t,e,n){var a=n(56),s=n(84),u=n(68);t.exports=n(57)?Object.defineProperties:function(t,e){s(t);for(var n,r=u(e),i=r.length,o=0;o<i;)a.f(t,n=r[o++],e[n]);return t}},function(t,e,n){var r=n(31).document;t.exports=r&&r.documentElement},function(t,e,n){var r=n(58),i=n(174).f,o={}.toString,a="object"==typeof window&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[];t.exports.f=function(t){return a&&"[object Window]"==o.call(t)?function(t){try{return i(t)}catch(t){return a.slice()}}(t):i(r(t))}},function(t,e,n){var r=n(88),i=n(85),o=n(58),a=n(116),s=n(49),u=n(167),c=Object.getOwnPropertyDescriptor;e.f=n(57)?c:function(t,e){if(t=o(t),e=a(e,!0),u)try{return c(t,e)}catch(t){}if(s(t,e))return i(!r.f.call(t,e),t[e])}},function(t,e,n){"use strict";var r=n(418),i={};i[n(19)("toStringTag")]="z",i+""!="[object z]"&&n(65)(Object.prototype,"toString",function(){return"[object "+r(this)+"]"},!0)},function(t,e,n){var i=n(86),o=n(19)("toStringTag"),a="Arguments"==i(function(){return arguments}());t.exports=function(t){var e,n,r;return void 0===t?"Undefined":null===t?"Null":"string"==typeof(n=function(t,e){try{return t[e]}catch(t){}}(e=Object(t),o))?n:a?i(e):"Object"==(r=i(e))&&"function"==typeof e.callee?"Arguments":r}},function(t,e,n){n(127)("asyncIterator")},function(t,e,n){n(127)("observable")},function(t,e,n){n(422),n(426),t.exports=n(126).f("iterator")},function(t,e,n){"use strict";var r=n(423)(!0);n(175)(String,"String",function(t){this._t=String(t),this._i=0},function(){var t,e=this._t,n=this._i;return n>=e.length?{value:void 0,done:!0}:(t=r(e,n),this._i+=t.length,{value:t,done:!1})})},function(t,e,n){var u=n(87),c=n(67);t.exports=function(s){return function(t,e){var n,r,i=String(c(t)),o=u(e),a=i.length;return o<0||a<=o?s?"":void 0:(n=i.charCodeAt(o))<55296||56319<n||o+1===a||(r=i.charCodeAt(o+1))<56320||57343<r?s?i.charAt(o):n:s?i.slice(o,o+2):r-56320+(n-55296<<10)+65536}}},function(t,e,n){"use strict";var r=n(173),i=n(85),o=n(125),a={};n(47)(a,n(19)("iterator"),function(){return this}),t.exports=function(t,e,n){t.prototype=r(a,{next:i(1,n)}),o(t,e+" Iterator")}},function(t,e,n){var r=n(49),i=n(118),o=n(122)("IE_PROTO"),a=Object.prototype;t.exports=Object.getPrototypeOf||function(t){return t=i(t),r(t,o)?t[o]:"function"==typeof t.constructor&&t instanceof t.constructor?t.constructor.prototype:t instanceof Object?a:null}},function(t,e,n){for(var r=n(427),i=n(68),o=n(65),a=n(31),s=n(47),u=n(129),c=n(19),h=c("iterator"),l=c("toStringTag"),f=u.Array,p={CSSRuleList:!0,CSSStyleDeclaration:!1,CSSValueList:!1,ClientRectList:!1,DOMRectList:!1,DOMStringList:!1,DOMTokenList:!0,DataTransferItemList:!1,FileList:!1,HTMLAllCollection:!1,HTMLCollection:!1,HTMLFormElement:!1,HTMLSelectElement:!1,MediaList:!0,MimeTypeArray:!1,NamedNodeMap:!1,NodeList:!0,PaintRequestList:!1,Plugin:!1,PluginArray:!1,SVGLengthList:!1,SVGNumberList:!1,SVGPathSegList:!1,SVGPointList:!1,SVGStringList:!1,SVGTransformList:!1,SourceBufferList:!1,StyleSheetList:!0,TextTrackCueList:!1,TextTrackList:!1,TouchList:!1},d=i(p),v=0;v<d.length;v++){var y,g=d[v],m=p[g],_=a[g],b=_&&_.prototype;if(b&&(b[h]||s(b,h,f),b[l]||s(b,l,g),u[g]=f,m))for(y in r)b[y]||o(b,y,r[y],!0)}},function(t,e,n){"use strict";var r=n(121),i=n(428),o=n(129),a=n(58);t.exports=n(175)(Array,"Array",function(t,e){this._t=a(t),this._i=0,this._k=e},function(){var t=this._t,e=this._k,n=this._i++;return!t||n>=t.length?(this._t=void 0,i(1)):i(0,"keys"==e?n:"values"==e?t[n]:[n,t[n]])},"values"),o.Arguments=o.Array,r("keys"),r("values"),r("entries")},function(t,e){t.exports=function(t,e){return{value:e,done:!!t}}},function(hn,ln,fn){"use strict";(function(u){Object.defineProperty(ln,"__esModule",{value:!0});var _=fn(176),n=fn(430),o=fn(177),c=function(t){return t&&"object"==typeof t&&"default"in t?t.default:t}(fn(1)),r=function(){function t(t){this.domStorage_=t,this.prefix_="firebase:"}return t.prototype.set=function(t,e){null==e?this.domStorage_.removeItem(this.prefixedName_(t)):this.domStorage_.setItem(this.prefixedName_(t),_.stringify(e))},t.prototype.get=function(t){var e=this.domStorage_.getItem(this.prefixedName_(t));return null==e?null:_.jsonEval(e)},t.prototype.remove=function(t){this.domStorage_.removeItem(this.prefixedName_(t))},t.prototype.prefixedName_=function(t){return this.prefix_+t},t.prototype.toString=function(){return this.domStorage_.toString()},t}(),i=function(){function t(){this.cache_={},this.isInMemoryStorage=!0}return t.prototype.set=function(t,e){null==e?delete this.cache_[t]:this.cache_[t]=e},t.prototype.get=function(t){return _.contains(this.cache_,t)?this.cache_[t]:null},t.prototype.remove=function(t){delete this.cache_[t]},t}(),t=function(t){try{if("undefined"!=typeof window&&void 0!==window[t]){var e=window[t];return e.setItem("firebase:sentinel","cache"),e.removeItem("firebase:sentinel"),new r(e)}}catch(t){}return new i},h=t("localStorage"),a=t("sessionStorage"),s=new n.Logger("@firebase/database"),g=function(){var t=1;return function(){return t++}}(),l=function(t){var e=_.stringToByteArray(t),n=new _.Sha1;n.update(e);var r=n.digest();return _.base64.encodeByteArray(r)},f=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];for(var n="",r=0;r<t.length;r++)Array.isArray(t[r])||t[r]&&"object"==typeof t[r]&&"number"==typeof t[r].length?n+=f.apply(null,t[r]):"object"==typeof t[r]?n+=_.stringify(t[r]):n+=t[r],n+=" ";return n},p=null,d=!0,v=function(t,e){_.assert(!e||!0===t||!1===t,"Can't turn on custom loggers persistently."),!0===t?(s.logLevel=n.LogLevel.VERBOSE,p=s.log.bind(s),e&&a.set("logging_enabled",!0)):"function"==typeof t?p=t:(p=null,a.remove("logging_enabled"))},y=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];if(!0===d&&(d=!1,null===p&&!0===a.get("logging_enabled")&&v(!0)),p){var n=f.apply(null,t);p(n)}},m=function(n){return function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];y.apply(void 0,[n].concat(t))}},b=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n="FIREBASE INTERNAL ERROR: "+f.apply(void 0,t);s.error(n)},w=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n="FIREBASE FATAL ERROR: "+f.apply(void 0,t);throw s.error(n),new Error(n)},E=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n="FIREBASE WARNING: "+f.apply(void 0,t);s.warn(n)},S=function(t){return"number"==typeof t&&(t!=t||t==Number.POSITIVE_INFINITY||t==Number.NEGATIVE_INFINITY)},T="[MIN_NAME]",C="[MAX_NAME]",I=function(t,e){if(t===e)return 0;if(t===T||e===C)return-1;if(e===T||t===C)return 1;var n=D(t),r=D(e);return null!==n?null!==r?n-r==0?t.length-e.length:n-r:-1:null!==r?1:t<e?-1:1},x=function(t,e){return t===e?0:t<e?-1:1},A=function(t,e){if(e&&t in e)return e[t];throw new Error("Missing required key ("+t+") in object: "+_.stringify(e))},N=function(t){if("object"!=typeof t||null===t)return _.stringify(t);var e=[];for(var n in t)e.push(n);e.sort();for(var r="{",i=0;i<e.length;i++)0!==i&&(r+=","),r+=_.stringify(e[i]),r+=":",r+=N(t[e[i]]);return r+="}"},k=function(t,e){var n=t.length;if(n<=e)return[t];for(var r=[],i=0;i<n;i+=e)n<i+e?r.push(t.substring(i,n)):r.push(t.substring(i,i+e));return r},R=function(t,n){if(Array.isArray(t))for(var e=0;e<t.length;++e)n(e,t[e]);else _.forEach(t,function(t,e){return n(e,t)})},O=function(t){_.assert(!S(t),"Invalid JSON number");var e,n,r,i,o,a,s;for(0===t?e=1/t==-1/(r=n=0)?1:0:(e=t<0,r=(t=Math.abs(t))>=Math.pow(2,-1022)?(n=(i=Math.min(Math.floor(Math.log(t)/Math.LN2),1023))+1023,Math.round(t*Math.pow(2,52-i)-Math.pow(2,52))):(n=0,Math.round(t/Math.pow(2,-1074)))),a=[],o=52;o;o-=1)a.push(r%2?1:0),r=Math.floor(r/2);for(o=11;o;o-=1)a.push(n%2?1:0),n=Math.floor(n/2);a.push(e?1:0),a.reverse(),s=a.join("");var u="";for(o=0;o<64;o+=8){var c=parseInt(s.substr(o,8),2).toString(16);1===c.length&&(c="0"+c),u+=c}return u.toLowerCase()},P=new RegExp("^-?\\d{1,10}$"),D=function(t){if(P.test(t)){var e=Number(t);if(-2147483648<=e&&e<=2147483647)return e}return null},L=function(t){try{t()}catch(e){setTimeout(function(){var t=e.stack||"";throw E("Exception was thrown by user callback.",t),e},Math.floor(0))}},M=function(t,e){var n=setTimeout(t,e);return"object"==typeof n&&n.unref&&n.unref(),n},F=function(){function i(t,e){if(void 0===e){this.pieces_=t.split("/");for(var n=0,r=0;r<this.pieces_.length;r++)0<this.pieces_[r].length&&(this.pieces_[n]=this.pieces_[r],n++);this.pieces_.length=n,this.pieceNum_=0}else this.pieces_=t,this.pieceNum_=e}return Object.defineProperty(i,"Empty",{get:function(){return new i("")},enumerable:!0,configurable:!0}),i.prototype.getFront=function(){return this.pieceNum_>=this.pieces_.length?null:this.pieces_[this.pieceNum_]},i.prototype.getLength=function(){return this.pieces_.length-this.pieceNum_},i.prototype.popFront=function(){var t=this.pieceNum_;return t<this.pieces_.length&&t++,new i(this.pieces_,t)},i.prototype.getBack=function(){return this.pieceNum_<this.pieces_.length?this.pieces_[this.pieces_.length-1]:null},i.prototype.toString=function(){for(var t="",e=this.pieceNum_;e<this.pieces_.length;e++)""!==this.pieces_[e]&&(t+="/"+this.pieces_[e]);return t||"/"},i.prototype.toUrlEncodedString=function(){for(var t="",e=this.pieceNum_;e<this.pieces_.length;e++)""!==this.pieces_[e]&&(t+="/"+encodeURIComponent(String(this.pieces_[e])));return t||"/"},i.prototype.slice=function(t){return void 0===t&&(t=0),this.pieces_.slice(this.pieceNum_+t)},i.prototype.parent=function(){if(this.pieceNum_>=this.pieces_.length)return null;for(var t=[],e=this.pieceNum_;e<this.pieces_.length-1;e++)t.push(this.pieces_[e]);return new i(t,0)},i.prototype.child=function(t){for(var e=[],n=this.pieceNum_;n<this.pieces_.length;n++)e.push(this.pieces_[n]);if(t instanceof i)for(n=t.pieceNum_;n<t.pieces_.length;n++)e.push(t.pieces_[n]);else{var r=t.split("/");for(n=0;n<r.length;n++)0<r[n].length&&e.push(r[n])}return new i(e,0)},i.prototype.isEmpty=function(){return this.pieceNum_>=this.pieces_.length},i.relativePath=function(t,e){var n=t.getFront(),r=e.getFront();if(null===n)return e;if(n===r)return i.relativePath(t.popFront(),e.popFront());throw new Error("INTERNAL ERROR: innerPath ("+e+") is not within outerPath ("+t+")")},i.comparePaths=function(t,e){for(var n=t.slice(),r=e.slice(),i=0;i<n.length&&i<r.length;i++){var o=I(n[i],r[i]);if(0!==o)return o}return n.length===r.length?0:n.length<r.length?-1:1},i.prototype.equals=function(t){if(this.getLength()!==t.getLength())return!1;for(var e=this.pieceNum_,n=t.pieceNum_;e<=this.pieces_.length;e++,n++)if(this.pieces_[e]!==t.pieces_[n])return!1;return!0},i.prototype.contains=function(t){var e=this.pieceNum_,n=t.pieceNum_;if(this.getLength()>t.getLength())return!1;for(;e<this.pieces_.length;){if(this.pieces_[e]!==t.pieces_[n])return!1;++e,++n}return!0},i}(),j=function(){function t(t,e){this.errorPrefix_=e,this.parts_=t.slice(),this.byteLength_=Math.max(1,this.parts_.length);for(var n=0;n<this.parts_.length;n++)this.byteLength_+=_.stringLength(this.parts_[n]);this.checkValid_()}return Object.defineProperty(t,"MAX_PATH_DEPTH",{get:function(){return 32},enumerable:!0,configurable:!0}),Object.defineProperty(t,"MAX_PATH_LENGTH_BYTES",{get:function(){return 768},enumerable:!0,configurable:!0}),t.prototype.push=function(t){0<this.parts_.length&&(this.byteLength_+=1),this.parts_.push(t),this.byteLength_+=_.stringLength(t),this.checkValid_()},t.prototype.pop=function(){var t=this.parts_.pop();this.byteLength_-=_.stringLength(t),0<this.parts_.length&&(this.byteLength_-=1)},t.prototype.checkValid_=function(){if(this.byteLength_>t.MAX_PATH_LENGTH_BYTES)throw new Error(this.errorPrefix_+"has a key path longer than "+t.MAX_PATH_LENGTH_BYTES+" bytes ("+this.byteLength_+").");if(this.parts_.length>t.MAX_PATH_DEPTH)throw new Error(this.errorPrefix_+"path specified exceeds the maximum depth that can be written ("+t.MAX_PATH_DEPTH+") or object contains a cycle "+this.toErrorString())},t.prototype.toErrorString=function(){return 0==this.parts_.length?"":"in property '"+this.parts_.join(".")+"'"},t}(),U="firebaseio.com",W="long_polling",B=function(){function t(t,e,n,r,i){void 0===i&&(i=""),this.secure=e,this.namespace=n,this.webSocketOnly=r,this.persistenceKey=i,this.host=t.toLowerCase(),this.domain=this.host.substr(this.host.indexOf(".")+1),this.internalHost=h.get("host:"+t)||this.host}return t.prototype.needsQueryParam=function(){return this.host!==this.internalHost||this.isCustomHost()},t.prototype.isCacheableHost=function(){return"s-"===this.internalHost.substr(0,2)},t.prototype.isDemoHost=function(){return"firebaseio-demo.com"===this.domain},t.prototype.isCustomHost=function(){return"firebaseio.com"!==this.domain&&"firebaseio-demo.com"!==this.domain},t.prototype.updateHost=function(t){t!==this.internalHost&&(this.internalHost=t,this.isCacheableHost()&&h.set("host:"+this.host,this.internalHost))},t.prototype.connectionURL=function(t,e){var n;if(_.assert("string"==typeof t,"typeof type must == string"),_.assert("object"==typeof e,"typeof params must == object"),"websocket"===t)n=(this.secure?"wss://":"ws://")+this.internalHost+"/.ws?";else{if(t!==W)throw new Error("Unknown connection type: "+t);n=(this.secure?"https://":"http://")+this.internalHost+"/.lp?"}this.needsQueryParam()&&(e.ns=this.namespace);var r=[];return _.forEach(e,function(t,e){r.push(t+"="+e)}),n+r.join("&")},t.prototype.toString=function(){var t=this.toURLString();return this.persistenceKey&&(t+="<"+this.persistenceKey+">"),t},t.prototype.toURLString=function(){return(this.secure?"https://":"http://")+this.host},t}();var V,q,H=function(t){var e=K(t),n=e.subdomain;"firebase"===e.domain&&w(e.host+" is no longer supported. Please use <YOUR FIREBASE>.firebaseio.com instead"),n&&"undefined"!=n||"localhost"===e.domain||w("Cannot parse Firebase url. Please use https://<YOUR FIREBASE>.firebaseio.com"),e.secure||function(){"undefined"!=typeof window&&window.location&&window.location.protocol&&-1!==window.location.protocol.indexOf("https:")&&E("Insecure Firebase access from a secure page. Please use https in calls to new Firebase().")}();var r="ws"===e.scheme||"wss"===e.scheme;return{repoInfo:new B(e.host,e.secure,n,r),path:new F(e.pathString)}},K=function(t){var e="",n="",r="",i="",o=!0,a="https",s=443;if("string"==typeof t){var u=t.indexOf("//");0<=u&&(a=t.substring(0,u-1),t=t.substring(u+2));var c=t.indexOf("/");-1===c&&(c=t.length);var h=t.indexOf("?");-1===h&&(h=t.length),e=t.substring(0,Math.min(c,h)),c<h&&(i=function(t){for(var e="",n=t.split("/"),r=0;r<n.length;r++)if(0<n[r].length){var i=n[r];try{i=decodeURIComponent(i.replace(/\+/g," "))}catch(t){}e+="/"+i}return e}(t.substring(c,h)));var l=function(t){var e={};"?"===t.charAt(0)&&(t=t.substring(1));for(var n=0,r=t.split("&");n<r.length;n++){var i=r[n];if(0!==i.length){var o=i.split("=");2===o.length?e[decodeURIComponent(o[0])]=decodeURIComponent(o[1]):E("Invalid query segment '"+i+"' in query '"+t+"'")}}return e}(t.substring(Math.min(t.length,h)));0<=(u=e.indexOf(":"))?(o="https"===a||"wss"===a,s=parseInt(e.substring(u+1),10)):u=t.length;var f=e.split(".");3===f.length?(n=f[1],r=f[0].toLowerCase()):2===f.length?n=f[0]:"localhost"===f[0].slice(0,u).toLowerCase()&&(n="localhost"),""===r&&"ns"in l&&(r=l.ns)}return{host:e,port:s,domain:n,subdomain:r,secure:o,scheme:a,pathString:i}},e=/[\[\].#$\/\u0000-\u001F\u007F]/,G=/[\[\].#$\u0000-\u001F\u007F]/,Q=10485760,z=function(t){return"string"==typeof t&&0!==t.length&&!e.test(t)},Y=function(t){return"string"==typeof t&&0!==t.length&&!G.test(t)},X=function(t){return null===t||"string"==typeof t||"number"==typeof t&&!S(t)||t&&"object"==typeof t&&_.contains(t,".sv")},J=function(t,e,n,r,i){i&&void 0===n||$(_.errorPrefix(t,e,i),n,r)},$=function(n,t,e){var r=e instanceof F?new j(e,n):e;if(void 0===t)throw new Error(n+"contains undefined "+r.toErrorString());if("function"==typeof t)throw new Error(n+"contains a function "+r.toErrorString()+" with contents = "+t.toString());if(S(t))throw new Error(n+"contains "+t.toString()+" "+r.toErrorString());if("string"==typeof t&&t.length>Q/3&&_.stringLength(t)>Q)throw new Error(n+"contains a string greater than "+Q+" utf8 bytes "+r.toErrorString()+" ('"+t.substring(0,50)+"...')");if(t&&"object"==typeof t){var i=!1,o=!1;if(_.forEach(t,function(t,e){if(".value"===t)i=!0;else if(".priority"!==t&&".sv"!==t&&(o=!0,!z(t)))throw new Error(n+" contains an invalid key ("+t+") "+r.toErrorString()+'.  Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"');r.push(t),$(n,e,r),r.pop()}),i&&o)throw new Error(n+' contains ".value" child '+r.toErrorString()+" in addition to actual children.")}},Z=function(t,e,n,r,i){if(!i||void 0!==n){var o=_.errorPrefix(t,e,i);if(!n||"object"!=typeof n||Array.isArray(n))throw new Error(o+" must be an object containing the children to replace.");var a=[];_.forEach(n,function(t,e){var n=new F(t);if($(o,e,r.child(n)),".priority"===n.getBack()&&!X(e))throw new Error(o+"contains an invalid value for '"+n.toString()+"', which must be a valid Firebase priority (a string, finite number, server value, or null).");a.push(n)}),function(t,e){var n,r;for(n=0;n<e.length;n++)for(var i=(r=e[n]).slice(),o=0;o<i.length;o++)if(".priority"===i[o]&&o===i.length-1);else if(!z(i[o]))throw new Error(t+"contains an invalid key ("+i[o]+") in path "+r.toString()+'. Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"');e.sort(F.comparePaths);var a=null;for(n=0;n<e.length;n++){if(r=e[n],null!==a&&a.contains(r))throw new Error(t+"contains a path "+a.toString()+" that is ancestor of another path "+r.toString());a=r}}(o,a)}},tt=function(t,e,n,r){if(!r||void 0!==n){if(S(n))throw new Error(_.errorPrefix(t,e,r)+"is "+n.toString()+", but must be a valid Firebase priority (a string, finite number, server value, or null).");if(!X(n))throw new Error(_.errorPrefix(t,e,r)+"must be a valid Firebase priority (a string, finite number, server value, or null).")}},et=function(t,e,n,r){if(!r||void 0!==n)switch(n){case"value":case"child_added":case"child_removed":case"child_changed":case"child_moved":break;default:throw new Error(_.errorPrefix(t,e,r)+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}},nt=function(t,e,n,r){if(!(r&&void 0===n||z(n)))throw new Error(_.errorPrefix(t,e,r)+'was an invalid key = "'+n+'".  Firebase keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]").')},rt=function(t,e,n,r){if(!(r&&void 0===n||Y(n)))throw new Error(_.errorPrefix(t,e,r)+'was an invalid path = "'+n+'". Paths must be non-empty strings and can\'t contain ".", "#", "$", "[", or "]"')},it=function(t,e){if(".info"===e.getFront())throw new Error(t+" failed = Can't modify data under /.info/")},ot=function(t,e,n){var r=n.path.toString();if("string"!=typeof n.repoInfo.host||0===n.repoInfo.host.length||!z(n.repoInfo.namespace)&&"localhost"!==n.repoInfo.host.split(":")[0]||0!==r.length&&!function(t){return t&&(t=t.replace(/^\/*\.info(\/|$)/,"/")),Y(t)}(r))throw new Error(_.errorPrefix(t,e,!1)+'must be a valid firebase URL and the path can\'t contain ".", "#", "$", "[", or "]".')},at=function(){function t(t,e){this.repo_=t,this.path_=e}return t.prototype.cancel=function(t){_.validateArgCount("OnDisconnect.cancel",0,1,arguments.length),_.validateCallback("OnDisconnect.cancel",1,t,!0);var e=new _.Deferred;return this.repo_.onDisconnectCancel(this.path_,e.wrapCallback(t)),e.promise},t.prototype.remove=function(t){_.validateArgCount("OnDisconnect.remove",0,1,arguments.length),it("OnDisconnect.remove",this.path_),_.validateCallback("OnDisconnect.remove",1,t,!0);var e=new _.Deferred;return this.repo_.onDisconnectSet(this.path_,null,e.wrapCallback(t)),e.promise},t.prototype.set=function(t,e){_.validateArgCount("OnDisconnect.set",1,2,arguments.length),it("OnDisconnect.set",this.path_),J("OnDisconnect.set",1,t,this.path_,!1),_.validateCallback("OnDisconnect.set",2,e,!0);var n=new _.Deferred;return this.repo_.onDisconnectSet(this.path_,t,n.wrapCallback(e)),n.promise},t.prototype.setWithPriority=function(t,e,n){_.validateArgCount("OnDisconnect.setWithPriority",2,3,arguments.length),it("OnDisconnect.setWithPriority",this.path_),J("OnDisconnect.setWithPriority",1,t,this.path_,!1),tt("OnDisconnect.setWithPriority",2,e,!1),_.validateCallback("OnDisconnect.setWithPriority",3,n,!0);var r=new _.Deferred;return this.repo_.onDisconnectSetWithPriority(this.path_,t,e,r.wrapCallback(n)),r.promise},t.prototype.update=function(t,e){if(_.validateArgCount("OnDisconnect.update",1,2,arguments.length),it("OnDisconnect.update",this.path_),Array.isArray(t)){for(var n={},r=0;r<t.length;++r)n[""+r]=t[r];t=n,E("Passing an Array to firebase.database.onDisconnect().update() is deprecated. Use set() if you want to overwrite the existing data, or an Object with integer keys if you really do want to only update some of the children.")}Z("OnDisconnect.update",1,t,this.path_,!1),_.validateCallback("OnDisconnect.update",2,e,!0);var i=new _.Deferred;return this.repo_.onDisconnectUpdate(this.path_,t,i.wrapCallback(e)),i.promise},t}(),st=function(){function t(t,e){this.committed=t,this.snapshot=e}return t.prototype.toJSON=function(){return _.validateArgCount("TransactionResult.toJSON",0,1,arguments.length),{committed:this.committed,snapshot:this.snapshot.toJSON()}},t}(),ut=function(){var o="-0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ_abcdefghijklmnopqrstuvwxyz",a=0,s=[];return function(t){var e,n=t===a;a=t;var r=new Array(8);for(e=7;0<=e;e--)r[e]=o.charAt(t%64),t=Math.floor(t/64);_.assert(0===t,"Cannot push at time == 0");var i=r.join("");if(n){for(e=11;0<=e&&63===s[e];e--)s[e]=0;s[e]++}else for(e=0;e<12;e++)s[e]=Math.floor(64*Math.random());for(e=0;e<12;e++)i+=o.charAt(s[e]);return _.assert(20===i.length,"nextPushId: Length should be 20."),i}}(),ct=function(){function n(t,e){this.name=t,this.node=e}return n.Wrap=function(t,e){return new n(t,e)},n}(),ht=function(){function t(){}return t.prototype.getCompare=function(){return this.compare.bind(this)},t.prototype.indexedValueChanged=function(t,e){var n=new ct(T,t),r=new ct(T,e);return 0!==this.compare(n,r)},t.prototype.minPost=function(){return ct.MIN},t}(),lt=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return o.__extends(e,t),Object.defineProperty(e,"__EMPTY_NODE",{get:function(){return V},set:function(t){V=t},enumerable:!0,configurable:!0}),e.prototype.compare=function(t,e){return I(t.name,e.name)},e.prototype.isDefinedOn=function(t){throw _.assertionError("KeyIndex.isDefinedOn not expected to be called.")},e.prototype.indexedValueChanged=function(t,e){return!1},e.prototype.minPost=function(){return ct.MIN},e.prototype.maxPost=function(){return new ct(C,V)},e.prototype.makePost=function(t,e){return _.assert("string"==typeof t,"KeyIndex indexValue must always be a string."),new ct(t,V)},e.prototype.toString=function(){return".key"},e}(ht),ft=new lt;var pt,dt,vt,yt=function(t){return"number"==typeof t?"number:"+O(t):"string:"+t},gt=function(t){if(t.isLeafNode()){var e=t.val();_.assert("string"==typeof e||"number"==typeof e||"object"==typeof e&&_.contains(e,".sv"),"Priority must be a string or number.")}else _.assert(t===q||t.isEmpty(),"priority of unexpected type.");_.assert(t===q||t.getPriority().isEmpty(),"Priority nodes can't have a priority of their own.")},mt=function(){function o(t,e){void 0===e&&(e=o.__childrenNodeConstructor.EMPTY_NODE),this.value_=t,this.priorityNode_=e,this.lazyHash_=null,_.assert(void 0!==this.value_&&null!==this.value_,"LeafNode shouldn't be created with null/undefined value."),gt(this.priorityNode_)}return Object.defineProperty(o,"__childrenNodeConstructor",{get:function(){return pt},set:function(t){pt=t},enumerable:!0,configurable:!0}),o.prototype.isLeafNode=function(){return!0},o.prototype.getPriority=function(){return this.priorityNode_},o.prototype.updatePriority=function(t){return new o(this.value_,t)},o.prototype.getImmediateChild=function(t){return".priority"===t?this.priorityNode_:o.__childrenNodeConstructor.EMPTY_NODE},o.prototype.getChild=function(t){return t.isEmpty()?this:".priority"===t.getFront()?this.priorityNode_:o.__childrenNodeConstructor.EMPTY_NODE},o.prototype.hasChild=function(){return!1},o.prototype.getPredecessorChildName=function(t,e){return null},o.prototype.updateImmediateChild=function(t,e){return".priority"===t?this.updatePriority(e):e.isEmpty()&&".priority"!==t?this:o.__childrenNodeConstructor.EMPTY_NODE.updateImmediateChild(t,e).updatePriority(this.priorityNode_)},o.prototype.updateChild=function(t,e){var n=t.getFront();return null===n?e:e.isEmpty()&&".priority"!==n?this:(_.assert(".priority"!==n||1===t.getLength(),".priority must be the last token in a path"),this.updateImmediateChild(n,o.__childrenNodeConstructor.EMPTY_NODE.updateChild(t.popFront(),e)))},o.prototype.isEmpty=function(){return!1},o.prototype.numChildren=function(){return 0},o.prototype.forEachChild=function(t,e){return!1},o.prototype.val=function(t){return t&&!this.getPriority().isEmpty()?{".value":this.getValue(),".priority":this.getPriority().val()}:this.getValue()},o.prototype.hash=function(){if(null===this.lazyHash_){var t="";this.priorityNode_.isEmpty()||(t+="priority:"+yt(this.priorityNode_.val())+":");var e=typeof this.value_;t+=e+":",t+="number"===e?O(this.value_):this.value_,this.lazyHash_=l(t)}return this.lazyHash_},o.prototype.getValue=function(){return this.value_},o.prototype.compareTo=function(t){return t===o.__childrenNodeConstructor.EMPTY_NODE?1:t instanceof o.__childrenNodeConstructor?-1:(_.assert(t.isLeafNode(),"Unknown node type"),this.compareToLeafNode_(t))},o.prototype.compareToLeafNode_=function(t){var e=typeof t.value_,n=typeof this.value_,r=o.VALUE_TYPE_ORDER.indexOf(e),i=o.VALUE_TYPE_ORDER.indexOf(n);return _.assert(0<=r,"Unknown leaf type: "+e),_.assert(0<=i,"Unknown leaf type: "+n),r===i?"object"===n?0:this.value_<t.value_?-1:this.value_===t.value_?0:1:i-r},o.prototype.withIndex=function(){return this},o.prototype.isIndexed=function(){return!0},o.prototype.equals=function(t){if(t===this)return!0;if(t.isLeafNode()){var e=t;return this.value_===e.value_&&this.priorityNode_.equals(e.priorityNode_)}return!1},o.VALUE_TYPE_ORDER=["object","boolean","number","string"],o}();var _t,bt,wt=new(function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return o.__extends(e,t),e.prototype.compare=function(t,e){var n=t.node.getPriority(),r=e.node.getPriority(),i=n.compareTo(r);return 0===i?I(t.name,e.name):i},e.prototype.isDefinedOn=function(t){return!t.getPriority().isEmpty()},e.prototype.indexedValueChanged=function(t,e){return!t.getPriority().equals(e.getPriority())},e.prototype.minPost=function(){return ct.MIN},e.prototype.maxPost=function(){return new ct(C,new mt("[PRIORITY-POST]",vt))},e.prototype.makePost=function(t,e){var n=dt(t);return new ct(e,new mt("[PRIORITY-POST]",n))},e.prototype.toString=function(){return".priority"},e}(ht)),Et=function(){function t(t,e,n,r,i){void 0===i&&(i=null),this.isReverse_=r,this.resultGenerator_=i,this.nodeStack_=[];for(var o=1;!t.isEmpty();)if(t=t,o=e?n(t.key,e):1,r&&(o*=-1),o<0)t=this.isReverse_?t.left:t.right;else{if(0===o){this.nodeStack_.push(t);break}this.nodeStack_.push(t),t=this.isReverse_?t.right:t.left}}return t.prototype.getNext=function(){if(0===this.nodeStack_.length)return null;var t,e=this.nodeStack_.pop();if(t=this.resultGenerator_?this.resultGenerator_(e.key,e.value):{key:e.key,value:e.value},this.isReverse_)for(e=e.left;!e.isEmpty();)this.nodeStack_.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack_.push(e),e=e.left;return t},t.prototype.hasNext=function(){return 0<this.nodeStack_.length},t.prototype.peek=function(){if(0===this.nodeStack_.length)return null;var t=this.nodeStack_[this.nodeStack_.length-1];return this.resultGenerator_?this.resultGenerator_(t.key,t.value):{key:t.key,value:t.value}},t}(),St=function(){function o(t,e,n,r,i){this.key=t,this.value=e,this.color=null!=n?n:o.RED,this.left=null!=r?r:Ct.EMPTY_NODE,this.right=null!=i?i:Ct.EMPTY_NODE}return o.prototype.copy=function(t,e,n,r,i){return new o(null!=t?t:this.key,null!=e?e:this.value,null!=n?n:this.color,null!=r?r:this.left,null!=i?i:this.right)},o.prototype.count=function(){return this.left.count()+1+this.right.count()},o.prototype.isEmpty=function(){return!1},o.prototype.inorderTraversal=function(t){return this.left.inorderTraversal(t)||t(this.key,this.value)||this.right.inorderTraversal(t)},o.prototype.reverseTraversal=function(t){return this.right.reverseTraversal(t)||t(this.key,this.value)||this.left.reverseTraversal(t)},o.prototype.min_=function(){return this.left.isEmpty()?this:this.left.min_()},o.prototype.minKey=function(){return this.min_().key},o.prototype.maxKey=function(){return this.right.isEmpty()?this.key:this.right.maxKey()},o.prototype.insert=function(t,e,n){var r,i;return(i=(r=n(t,(i=this).key))<0?i.copy(null,null,null,i.left.insert(t,e,n),null):0===r?i.copy(null,e,null,null,null):i.copy(null,null,null,null,i.right.insert(t,e,n))).fixUp_()},o.prototype.removeMin_=function(){if(this.left.isEmpty())return Ct.EMPTY_NODE;var t=this;return t.left.isRed_()||t.left.left.isRed_()||(t=t.moveRedLeft_()),(t=t.copy(null,null,null,t.left.removeMin_(),null)).fixUp_()},o.prototype.remove=function(t,e){var n,r;if(e(t,(n=this).key)<0)n.left.isEmpty()||n.left.isRed_()||n.left.left.isRed_()||(n=n.moveRedLeft_()),n=n.copy(null,null,null,n.left.remove(t,e),null);else{if(n.left.isRed_()&&(n=n.rotateRight_()),n.right.isEmpty()||n.right.isRed_()||n.right.left.isRed_()||(n=n.moveRedRight_()),0===e(t,n.key)){if(n.right.isEmpty())return Ct.EMPTY_NODE;r=n.right.min_(),n=n.copy(r.key,r.value,null,null,n.right.removeMin_())}n=n.copy(null,null,null,null,n.right.remove(t,e))}return n.fixUp_()},o.prototype.isRed_=function(){return this.color},o.prototype.fixUp_=function(){var t=this;return t.right.isRed_()&&!t.left.isRed_()&&(t=t.rotateLeft_()),t.left.isRed_()&&t.left.left.isRed_()&&(t=t.rotateRight_()),t.left.isRed_()&&t.right.isRed_()&&(t=t.colorFlip_()),t},o.prototype.moveRedLeft_=function(){var t=this.colorFlip_();return t.right.left.isRed_()&&(t=(t=(t=t.copy(null,null,null,null,t.right.rotateRight_())).rotateLeft_()).colorFlip_()),t},o.prototype.moveRedRight_=function(){var t=this.colorFlip_();return t.left.left.isRed_()&&(t=(t=t.rotateRight_()).colorFlip_()),t},o.prototype.rotateLeft_=function(){var t=this.copy(null,null,o.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)},o.prototype.rotateRight_=function(){var t=this.copy(null,null,o.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)},o.prototype.colorFlip_=function(){var t=this.left.copy(null,null,!this.left.color,null,null),e=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,e)},o.prototype.checkMaxDepth_=function(){var t=this.check_();return Math.pow(2,t)<=this.count()+1},o.prototype.check_=function(){var t;if(this.isRed_()&&this.left.isRed_())throw new Error("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed_())throw new Error("Right child of ("+this.key+","+this.value+") is red");if((t=this.left.check_())!==this.right.check_())throw new Error("Black depths differ");return t+(this.isRed_()?0:1)},o.RED=!0,o.BLACK=!1,o}(),Tt=function(){function t(){}return t.prototype.copy=function(t,e,n,r,i){return this},t.prototype.insert=function(t,e,n){return new St(t,e,null)},t.prototype.remove=function(t,e){return this},t.prototype.count=function(){return 0},t.prototype.isEmpty=function(){return!0},t.prototype.inorderTraversal=function(t){return!1},t.prototype.reverseTraversal=function(t){return!1},t.prototype.minKey=function(){return null},t.prototype.maxKey=function(){return null},t.prototype.check_=function(){return 0},t.prototype.isRed_=function(){return!1},t}(),Ct=function(){function n(t,e){void 0===e&&(e=n.EMPTY_NODE),this.comparator_=t,this.root_=e}return n.prototype.insert=function(t,e){return new n(this.comparator_,this.root_.insert(t,e,this.comparator_).copy(null,null,St.BLACK,null,null))},n.prototype.remove=function(t){return new n(this.comparator_,this.root_.remove(t,this.comparator_).copy(null,null,St.BLACK,null,null))},n.prototype.get=function(t){for(var e,n=this.root_;!n.isEmpty();){if(0===(e=this.comparator_(t,n.key)))return n.value;e<0?n=n.left:0<e&&(n=n.right)}return null},n.prototype.getPredecessorKey=function(t){for(var e,n=this.root_,r=null;!n.isEmpty();){if(0===(e=this.comparator_(t,n.key))){if(n.left.isEmpty())return r?r.key:null;for(n=n.left;!n.right.isEmpty();)n=n.right;return n.key}e<0?n=n.left:0<e&&(n=(r=n).right)}throw new Error("Attempted to find predecessor key for a nonexistent key.  What gives?")},n.prototype.isEmpty=function(){return this.root_.isEmpty()},n.prototype.count=function(){return this.root_.count()},n.prototype.minKey=function(){return this.root_.minKey()},n.prototype.maxKey=function(){return this.root_.maxKey()},n.prototype.inorderTraversal=function(t){return this.root_.inorderTraversal(t)},n.prototype.reverseTraversal=function(t){return this.root_.reverseTraversal(t)},n.prototype.getIterator=function(t){return new Et(this.root_,null,this.comparator_,!1,t)},n.prototype.getIteratorFrom=function(t,e){return new Et(this.root_,t,this.comparator_,!1,e)},n.prototype.getReverseIteratorFrom=function(t,e){return new Et(this.root_,t,this.comparator_,!0,e)},n.prototype.getReverseIterator=function(t){return new Et(this.root_,null,this.comparator_,!0,t)},n.EMPTY_NODE=new Tt,n}(),It=Math.log(2),xt=function(){function t(t){this.count=function(t){return parseInt(Math.log(t)/It,10)}(t+1),this.current_=this.count-1;var e=function(t){return parseInt(Array(t+1).join("1"),2)}(this.count);this.bits_=t+1&e}return t.prototype.nextBitIsOne=function(){var t=!(this.bits_&1<<this.current_);return this.current_--,t},t}(),At=function(c,t,h,e){c.sort(t);var l=function(t,e){var n,r,i=e-t;if(0==i)return null;if(1==i)return n=c[t],r=h?h(n):n,new St(r,n.node,St.BLACK,null,null);var o=parseInt(i/2,10)+t,a=l(t,o),s=l(o+1,e);return n=c[o],r=h?h(n):n,new St(r,n.node,St.BLACK,a,s)},n=function(t){for(var e=null,n=null,s=c.length,r=function(t,e){var n=s-t,r=s;s-=t;var i=l(n+1,r),o=c[n],a=h?h(o):o;u(new St(a,o.node,e,null,i))},u=function(t){e=e?e.left=t:n=t},i=0;i<t.count;++i){var o=t.nextBitIsOne(),a=Math.pow(2,t.count-(i+1));o?r(a,St.BLACK):(r(a,St.BLACK),r(a,St.RED))}return n}(new xt(c.length));return new Ct(e||t,n)},Nt={},kt=function(){function l(t,e){this.indexes_=t,this.indexSet_=e}return Object.defineProperty(l,"Default",{get:function(){return _.assert(wt,"ChildrenNode.ts has not been loaded"),_t=_t||new l({".priority":Nt},{".priority":wt})},enumerable:!0,configurable:!0}),l.prototype.get=function(t){var e=_.safeGet(this.indexes_,t);if(!e)throw new Error("No index defined for "+t);return e===Nt?null:e},l.prototype.hasIndex=function(t){return _.contains(this.indexSet_,t.toString())},l.prototype.addIndex=function(t,e){_.assert(t!==ft,"KeyIndex always exists and isn't meant to be added to the IndexMap.");for(var n,r=[],i=!1,o=e.getIterator(ct.Wrap),a=o.getNext();a;)i=i||t.isDefinedOn(a.node),r.push(a),a=o.getNext();n=i?At(r,t.getCompare()):Nt;var s=t.toString(),u=_.clone(this.indexSet_);u[s]=t;var c=_.clone(this.indexes_);return c[s]=n,new l(c,u)},l.prototype.addToIndexes=function(u,c){var h=this;return new l(_.map(this.indexes_,function(t,e){var n=_.safeGet(h.indexSet_,e);if(_.assert(n,"Missing index implementation for "+e),t===Nt){if(n.isDefinedOn(u.node)){for(var r=[],i=c.getIterator(ct.Wrap),o=i.getNext();o;)o.name!=u.name&&r.push(o),o=i.getNext();return r.push(u),At(r,n.getCompare())}return Nt}var a=c.get(u.name),s=t;return a&&(s=s.remove(new ct(u.name,a))),s.insert(u,u.node)}),this.indexSet_)},l.prototype.removeFromIndexes=function(n,r){return new l(_.map(this.indexes_,function(t){if(t===Nt)return t;var e=r.get(n.name);return e?t.remove(new ct(n.name,e)):t}),this.indexSet_)},l}();function Rt(t,e){return I(t.name,e.name)}function Ot(t,e){return I(t,e)}var Pt=function(){function s(t,e,n){this.children_=t,this.priorityNode_=e,this.indexMap_=n,this.lazyHash_=null,this.priorityNode_&&gt(this.priorityNode_),this.children_.isEmpty()&&_.assert(!this.priorityNode_||this.priorityNode_.isEmpty(),"An empty node cannot have a priority")}return Object.defineProperty(s,"EMPTY_NODE",{get:function(){return bt||(bt=new s(new Ct(Ot),null,kt.Default))},enumerable:!0,configurable:!0}),s.prototype.isLeafNode=function(){return!1},s.prototype.getPriority=function(){return this.priorityNode_||bt},s.prototype.updatePriority=function(t){return this.children_.isEmpty()?this:new s(this.children_,t,this.indexMap_)},s.prototype.getImmediateChild=function(t){if(".priority"===t)return this.getPriority();var e=this.children_.get(t);return null===e?bt:e},s.prototype.getChild=function(t){var e=t.getFront();return null===e?this:this.getImmediateChild(e).getChild(t.popFront())},s.prototype.hasChild=function(t){return null!==this.children_.get(t)},s.prototype.updateImmediateChild=function(t,e){if(_.assert(e,"We should always be passing snapshot nodes"),".priority"===t)return this.updatePriority(e);var n=new ct(t,e),r=void 0,i=void 0;return i=e.isEmpty()?(r=this.children_.remove(t),this.indexMap_.removeFromIndexes(n,this.children_)):(r=this.children_.insert(t,e),this.indexMap_.addToIndexes(n,this.children_)),new s(r,r.isEmpty()?bt:this.priorityNode_,i)},s.prototype.updateChild=function(t,e){var n=t.getFront();if(null===n)return e;_.assert(".priority"!==t.getFront()||1===t.getLength(),".priority must be the last token in a path");var r=this.getImmediateChild(n).updateChild(t.popFront(),e);return this.updateImmediateChild(n,r)},s.prototype.isEmpty=function(){return this.children_.isEmpty()},s.prototype.numChildren=function(){return this.children_.count()},s.prototype.val=function(n){if(this.isEmpty())return null;var r={},i=0,o=0,a=!0;if(this.forEachChild(wt,function(t,e){r[t]=e.val(n),i++,a&&s.INTEGER_REGEXP_.test(t)?o=Math.max(o,Number(t)):a=!1}),!n&&a&&o<2*i){var t=[];for(var e in r)t[e]=r[e];return t}return n&&!this.getPriority().isEmpty()&&(r[".priority"]=this.getPriority().val()),r},s.prototype.hash=function(){if(null===this.lazyHash_){var r="";this.getPriority().isEmpty()||(r+="priority:"+yt(this.getPriority().val())+":"),this.forEachChild(wt,function(t,e){var n=e.hash();""!==n&&(r+=":"+t+":"+n)}),this.lazyHash_=""===r?"":l(r)}return this.lazyHash_},s.prototype.getPredecessorChildName=function(t,e,n){var r=this.resolveIndex_(n);if(r){var i=r.getPredecessorKey(new ct(t,e));return i?i.name:null}return this.children_.getPredecessorKey(t)},s.prototype.getFirstChildName=function(t){var e=this.resolveIndex_(t);if(e){var n=e.minKey();return n&&n.name}return this.children_.minKey()},s.prototype.getFirstChild=function(t){var e=this.getFirstChildName(t);return e?new ct(e,this.children_.get(e)):null},s.prototype.getLastChildName=function(t){var e=this.resolveIndex_(t);if(e){var n=e.maxKey();return n&&n.name}return this.children_.maxKey()},s.prototype.getLastChild=function(t){var e=this.getLastChildName(t);return e?new ct(e,this.children_.get(e)):null},s.prototype.forEachChild=function(t,e){var n=this.resolveIndex_(t);return n?n.inorderTraversal(function(t){return e(t.name,t.node)}):this.children_.inorderTraversal(e)},s.prototype.getIterator=function(t){return this.getIteratorFrom(t.minPost(),t)},s.prototype.getIteratorFrom=function(t,e){var n=this.resolveIndex_(e);if(n)return n.getIteratorFrom(t,function(t){return t});for(var r=this.children_.getIteratorFrom(t.name,ct.Wrap),i=r.peek();null!=i&&e.compare(i,t)<0;)r.getNext(),i=r.peek();return r},s.prototype.getReverseIterator=function(t){return this.getReverseIteratorFrom(t.maxPost(),t)},s.prototype.getReverseIteratorFrom=function(t,e){var n=this.resolveIndex_(e);if(n)return n.getReverseIteratorFrom(t,function(t){return t});for(var r=this.children_.getReverseIteratorFrom(t.name,ct.Wrap),i=r.peek();null!=i&&0<e.compare(i,t);)r.getNext(),i=r.peek();return r},s.prototype.compareTo=function(t){return this.isEmpty()?t.isEmpty()?0:-1:t.isLeafNode()||t.isEmpty()?1:t===Dt?-1:0},s.prototype.withIndex=function(t){if(t===ft||this.indexMap_.hasIndex(t))return this;var e=this.indexMap_.addIndex(t,this.children_);return new s(this.children_,this.priorityNode_,e)},s.prototype.isIndexed=function(t){return t===ft||this.indexMap_.hasIndex(t)},s.prototype.equals=function(t){if(t===this)return!0;if(t.isLeafNode())return!1;var e=t;if(this.getPriority().equals(e.getPriority())){if(this.children_.count()!==e.children_.count())return!1;for(var n=this.getIterator(wt),r=e.getIterator(wt),i=n.getNext(),o=r.getNext();i&&o;){if(i.name!==o.name||!i.node.equals(o.node))return!1;i=n.getNext(),o=r.getNext()}return null===i&&null===o}return!1},s.prototype.resolveIndex_=function(t){return t===ft?null:this.indexMap_.get(t.toString())},s.INTEGER_REGEXP_=/^(0|[1-9]\d*)$/,s}(),Dt=new(function(t){function e(){return t.call(this,new Ct(Ot),Pt.EMPTY_NODE,kt.Default)||this}return o.__extends(e,t),e.prototype.compareTo=function(t){return t===this?0:1},e.prototype.equals=function(t){return t===this},e.prototype.getPriority=function(){return this},e.prototype.getImmediateChild=function(t){return Pt.EMPTY_NODE},e.prototype.isEmpty=function(){return!1},e}(Pt));Object.defineProperties(ct,{MIN:{value:new ct(T,Pt.EMPTY_NODE)},MAX:{value:new ct(C,Dt)}}),lt.__EMPTY_NODE=Pt.EMPTY_NODE,mt.__childrenNodeConstructor=Pt,function(t){q=t}(Dt),function(t){vt=t}(Dt);var Lt=!0;function Mt(t,e){if(void 0===e&&(e=null),null===t)return Pt.EMPTY_NODE;if("object"==typeof t&&".priority"in t&&(e=t[".priority"]),_.assert(null===e||"string"==typeof e||"number"==typeof e||"object"==typeof e&&".sv"in e,"Invalid priority type found: "+typeof e),"object"==typeof t&&".value"in t&&null!==t[".value"]&&(t=t[".value"]),"object"!=typeof t||".sv"in t)return new mt(t,Mt(e));if(t instanceof Array||!Lt){var r=Pt.EMPTY_NODE,i=t;return _.forEach(i,function(t,e){if(_.contains(i,t)&&"."!==t.substring(0,1)){var n=Mt(e);!n.isLeafNode()&&n.isEmpty()||(r=r.updateImmediateChild(t,n))}}),r.updatePriority(Mt(e))}var o=[],a=!1,s=t;if(_.forEach(s,function(t,e){if("string"!=typeof t||"."!==t.substring(0,1)){var n=Mt(s[t]);n.isEmpty()||(a=a||!n.getPriority().isEmpty(),o.push(new ct(t,n)))}}),0==o.length)return Pt.EMPTY_NODE;var n=At(o,Rt,function(t){return t.name},Ot);if(a){var u=At(o,wt.getCompare());return new Pt(n,Mt(e),new kt({".priority":u},{".priority":wt}))}return new Pt(n,Mt(e),kt.Default)}!function(t){dt=t}(Mt);var Ft,jt,Ut=new(function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return o.__extends(e,t),e.prototype.compare=function(t,e){var n=t.node.compareTo(e.node);return 0===n?I(t.name,e.name):n},e.prototype.isDefinedOn=function(t){return!0},e.prototype.indexedValueChanged=function(t,e){return!t.equals(e)},e.prototype.minPost=function(){return ct.MIN},e.prototype.maxPost=function(){return ct.MAX},e.prototype.makePost=function(t,e){var n=Mt(t);return new ct(e,n)},e.prototype.toString=function(){return".value"},e}(ht)),Wt=function(n){function t(t){var e=n.call(this)||this;return e.indexPath_=t,_.assert(!t.isEmpty()&&".priority"!==t.getFront(),"Can't create PathIndex with empty path or .priority key"),e}return o.__extends(t,n),t.prototype.extractChild=function(t){return t.getChild(this.indexPath_)},t.prototype.isDefinedOn=function(t){return!t.getChild(this.indexPath_).isEmpty()},t.prototype.compare=function(t,e){var n=this.extractChild(t.node),r=this.extractChild(e.node),i=n.compareTo(r);return 0===i?I(t.name,e.name):i},t.prototype.makePost=function(t,e){var n=Mt(t),r=Pt.EMPTY_NODE.updateChild(this.indexPath_,n);return new ct(e,r)},t.prototype.maxPost=function(){var t=Pt.EMPTY_NODE.updateChild(this.indexPath_,Dt);return new ct(C,t)},t.prototype.toString=function(){return this.indexPath_.slice().join("/")},t}(ht),Bt=function(){function i(t,e,n){this.node_=t,this.ref_=e,this.index_=n}return i.prototype.val=function(){return _.validateArgCount("DataSnapshot.val",0,0,arguments.length),this.node_.val()},i.prototype.exportVal=function(){return _.validateArgCount("DataSnapshot.exportVal",0,0,arguments.length),this.node_.val(!0)},i.prototype.toJSON=function(){return _.validateArgCount("DataSnapshot.toJSON",0,1,arguments.length),this.exportVal()},i.prototype.exists=function(){return _.validateArgCount("DataSnapshot.exists",0,0,arguments.length),!this.node_.isEmpty()},i.prototype.child=function(t){_.validateArgCount("DataSnapshot.child",0,1,arguments.length),t=String(t),rt("DataSnapshot.child",1,t,!1);var e=new F(t),n=this.ref_.child(e);return new i(this.node_.getChild(e),n,wt)},i.prototype.hasChild=function(t){_.validateArgCount("DataSnapshot.hasChild",1,1,arguments.length),rt("DataSnapshot.hasChild",1,t,!1);var e=new F(t);return!this.node_.getChild(e).isEmpty()},i.prototype.getPriority=function(){return _.validateArgCount("DataSnapshot.getPriority",0,0,arguments.length),this.node_.getPriority().val()},i.prototype.forEach=function(n){var r=this;return _.validateArgCount("DataSnapshot.forEach",1,1,arguments.length),_.validateCallback("DataSnapshot.forEach",1,n,!1),!this.node_.isLeafNode()&&!!this.node_.forEachChild(this.index_,function(t,e){return n(new i(e,r.ref_.child(t),wt))})},i.prototype.hasChildren=function(){return _.validateArgCount("DataSnapshot.hasChildren",0,0,arguments.length),!this.node_.isLeafNode()&&!this.node_.isEmpty()},Object.defineProperty(i.prototype,"key",{get:function(){return this.ref_.getKey()},enumerable:!0,configurable:!0}),i.prototype.numChildren=function(){return _.validateArgCount("DataSnapshot.numChildren",0,0,arguments.length),this.node_.numChildren()},i.prototype.getRef=function(){return _.validateArgCount("DataSnapshot.ref",0,0,arguments.length),this.ref_},Object.defineProperty(i.prototype,"ref",{get:function(){return this.getRef()},enumerable:!0,configurable:!0}),i}(),Vt=function(){function t(t,e,n,r){this.eventType=t,this.eventRegistration=e,this.snapshot=n,this.prevName=r}return t.prototype.getPath=function(){var t=this.snapshot.getRef();return"value"===this.eventType?t.path:t.getParent().path},t.prototype.getEventType=function(){return this.eventType},t.prototype.getEventRunner=function(){return this.eventRegistration.getEventRunner(this)},t.prototype.toString=function(){return this.getPath().toString()+":"+this.eventType+":"+_.stringify(this.snapshot.exportVal())},t}(),qt=function(){function t(t,e,n){this.eventRegistration=t,this.error=e,this.path=n}return t.prototype.getPath=function(){return this.path},t.prototype.getEventType=function(){return"cancel"},t.prototype.getEventRunner=function(){return this.eventRegistration.getEventRunner(this)},t.prototype.toString=function(){return this.path.toString()+":cancel"},t}(),Ht=function(){function e(t,e,n){this.callback_=t,this.cancelCallback_=e,this.context_=n}return e.prototype.respondsTo=function(t){return"value"===t},e.prototype.createEvent=function(t,e){var n=e.getQueryParams().getIndex();return new Vt("value",this,new Bt(t.snapshotNode,e.getRef(),n))},e.prototype.getEventRunner=function(t){var e=this.context_;if("cancel"===t.getEventType()){_.assert(this.cancelCallback_,"Raising a cancel event on a listener with no cancel callback");var n=this.cancelCallback_;return function(){n.call(e,t.error)}}var r=this.callback_;return function(){r.call(e,t.snapshot)}},e.prototype.createCancelEvent=function(t,e){return this.cancelCallback_?new qt(this,t,e):null},e.prototype.matches=function(t){return t instanceof e&&(!t.callback_||!this.callback_||t.callback_===this.callback_&&t.context_===this.context_)},e.prototype.hasAnyCallback=function(){return null!==this.callback_},e}(),Kt=function(){function i(t,e,n){this.callbacks_=t,this.cancelCallback_=e,this.context_=n}return i.prototype.respondsTo=function(t){var e="children_added"===t?"child_added":t;return e="children_removed"===e?"child_removed":e,_.contains(this.callbacks_,e)},i.prototype.createCancelEvent=function(t,e){return this.cancelCallback_?new qt(this,t,e):null},i.prototype.createEvent=function(t,e){_.assert(null!=t.childName,"Child events should have a childName.");var n=e.getRef().child(t.childName),r=e.getQueryParams().getIndex();return new Vt(t.type,this,new Bt(t.snapshotNode,n,r),t.prevName)},i.prototype.getEventRunner=function(t){var e=this.context_;if("cancel"===t.getEventType()){_.assert(this.cancelCallback_,"Raising a cancel event on a listener with no cancel callback");var n=this.cancelCallback_;return function(){n.call(e,t.error)}}var r=this.callbacks_[t.eventType];return function(){r.call(e,t.snapshot,t.prevName)}},i.prototype.matches=function(n){if(n instanceof i){if(!this.callbacks_||!n.callbacks_)return!0;if(this.context_===n.context_){var t=_.getCount(n.callbacks_);if(t===_.getCount(this.callbacks_)){if(1!==t)return _.every(this.callbacks_,function(t,e){return n.callbacks_[t]===e});var e=_.getAnyKey(n.callbacks_),r=_.getAnyKey(this.callbacks_);return!(r!==e||n.callbacks_[e]&&this.callbacks_[r]&&n.callbacks_[e]!==this.callbacks_[r])}}}return!1},i.prototype.hasAnyCallback=function(){return null!==this.callbacks_},i}(),Gt=function(){function c(t,e,n,r){this.repo=t,this.path=e,this.queryParams_=n,this.orderByCalled_=r}return Object.defineProperty(c,"__referenceConstructor",{get:function(){return _.assert(Ft,"Reference.ts has not been loaded"),Ft},set:function(t){Ft=t},enumerable:!0,configurable:!0}),c.validateQueryEndpoints_=function(t){var e=null,n=null;if(t.hasStart()&&(e=t.getIndexStartValue()),t.hasEnd()&&(n=t.getIndexEndValue()),t.getIndex()===ft){var r="Query: When ordering by key, you may only pass one argument to startAt(), endAt(), or equalTo().",i="Query: When ordering by key, the argument passed to startAt(), endAt(),or equalTo() must be a string.";if(t.hasStart()){if(t.getIndexStartName()!=T)throw new Error(r);if("string"!=typeof e)throw new Error(i)}if(t.hasEnd()){if(t.getIndexEndName()!=C)throw new Error(r);if("string"!=typeof n)throw new Error(i)}}else if(t.getIndex()===wt){if(null!=e&&!X(e)||null!=n&&!X(n))throw new Error("Query: When ordering by priority, the first argument passed to startAt(), endAt(), or equalTo() must be a valid priority value (null, a number, or a string).")}else if(_.assert(t.getIndex()instanceof Wt||t.getIndex()===Ut,"unknown index type."),null!=e&&"object"==typeof e||null!=n&&"object"==typeof n)throw new Error("Query: First argument passed to startAt(), endAt(), or equalTo() cannot be an object.")},c.validateLimit_=function(t){if(t.hasStart()&&t.hasEnd()&&t.hasLimit()&&!t.hasAnchoredLimit())throw new Error("Query: Can't combine startAt(), endAt(), and limit(). Use limitToFirst() or limitToLast() instead.")},c.prototype.validateNoPreviousOrderByCall_=function(t){if(!0===this.orderByCalled_)throw new Error(t+": You can't combine multiple orderBy calls.")},c.prototype.getQueryParams=function(){return this.queryParams_},c.prototype.getRef=function(){return _.validateArgCount("Query.ref",0,0,arguments.length),new c.__referenceConstructor(this.repo,this.path)},c.prototype.on=function(t,e,n,r){_.validateArgCount("Query.on",2,4,arguments.length),et("Query.on",1,t,!1),_.validateCallback("Query.on",2,e,!1);var i=c.getCancelAndContextArgs_("Query.on",n,r);if("value"===t)this.onValueEvent(e,i.cancel,i.context);else{var o={};o[t]=e,this.onChildEvent(o,i.cancel,i.context)}return e},c.prototype.onValueEvent=function(t,e,n){var r=new Ht(t,e||null,n||null);this.repo.addEventCallbackForQuery(this,r)},c.prototype.onChildEvent=function(t,e,n){var r=new Kt(t,e,n);this.repo.addEventCallbackForQuery(this,r)},c.prototype.off=function(t,e,n){_.validateArgCount("Query.off",0,3,arguments.length),et("Query.off",1,t,!0),_.validateCallback("Query.off",2,e,!0),_.validateContextObject("Query.off",3,n,!0);var r=null,i=null;"value"===t?r=new Ht(e||null,null,n||null):t&&(e&&((i={})[t]=e),r=new Kt(i,null,n||null));this.repo.removeEventCallbackForQuery(this,r)},c.prototype.once=function(e,n,t,r){var i=this;_.validateArgCount("Query.once",1,4,arguments.length),et("Query.once",1,e,!1),_.validateCallback("Query.once",2,n,!0);var o=c.getCancelAndContextArgs_("Query.once",t,r),a=!0,s=new _.Deferred;s.promise.catch(function(){});var u=function(t){a&&(a=!1,i.off(e,u),n&&n.bind(o.context)(t),s.resolve(t))};return this.on(e,u,function(t){i.off(e,u),o.cancel&&o.cancel.bind(o.context)(t),s.reject(t)}),s.promise},c.prototype.limitToFirst=function(t){if(_.validateArgCount("Query.limitToFirst",1,1,arguments.length),"number"!=typeof t||Math.floor(t)!==t||t<=0)throw new Error("Query.limitToFirst: First argument must be a positive integer.");if(this.queryParams_.hasLimit())throw new Error("Query.limitToFirst: Limit was already set (by another call to limit, limitToFirst, or limitToLast).");return new c(this.repo,this.path,this.queryParams_.limitToFirst(t),this.orderByCalled_)},c.prototype.limitToLast=function(t){if(_.validateArgCount("Query.limitToLast",1,1,arguments.length),"number"!=typeof t||Math.floor(t)!==t||t<=0)throw new Error("Query.limitToLast: First argument must be a positive integer.");if(this.queryParams_.hasLimit())throw new Error("Query.limitToLast: Limit was already set (by another call to limit, limitToFirst, or limitToLast).");return new c(this.repo,this.path,this.queryParams_.limitToLast(t),this.orderByCalled_)},c.prototype.orderByChild=function(t){if(_.validateArgCount("Query.orderByChild",1,1,arguments.length),"$key"===t)throw new Error('Query.orderByChild: "$key" is invalid.  Use Query.orderByKey() instead.');if("$priority"===t)throw new Error('Query.orderByChild: "$priority" is invalid.  Use Query.orderByPriority() instead.');if("$value"===t)throw new Error('Query.orderByChild: "$value" is invalid.  Use Query.orderByValue() instead.');rt("Query.orderByChild",1,t,!1),this.validateNoPreviousOrderByCall_("Query.orderByChild");var e=new F(t);if(e.isEmpty())throw new Error("Query.orderByChild: cannot pass in empty path.  Use Query.orderByValue() instead.");var n=new Wt(e),r=this.queryParams_.orderBy(n);return c.validateQueryEndpoints_(r),new c(this.repo,this.path,r,!0)},c.prototype.orderByKey=function(){_.validateArgCount("Query.orderByKey",0,0,arguments.length),this.validateNoPreviousOrderByCall_("Query.orderByKey");var t=this.queryParams_.orderBy(ft);return c.validateQueryEndpoints_(t),new c(this.repo,this.path,t,!0)},c.prototype.orderByPriority=function(){_.validateArgCount("Query.orderByPriority",0,0,arguments.length),this.validateNoPreviousOrderByCall_("Query.orderByPriority");var t=this.queryParams_.orderBy(wt);return c.validateQueryEndpoints_(t),new c(this.repo,this.path,t,!0)},c.prototype.orderByValue=function(){_.validateArgCount("Query.orderByValue",0,0,arguments.length),this.validateNoPreviousOrderByCall_("Query.orderByValue");var t=this.queryParams_.orderBy(Ut);return c.validateQueryEndpoints_(t),new c(this.repo,this.path,t,!0)},c.prototype.startAt=function(t,e){void 0===t&&(t=null),_.validateArgCount("Query.startAt",0,2,arguments.length),J("Query.startAt",1,t,this.path,!0),nt("Query.startAt",2,e,!0);var n=this.queryParams_.startAt(t,e);if(c.validateLimit_(n),c.validateQueryEndpoints_(n),this.queryParams_.hasStart())throw new Error("Query.startAt: Starting point was already set (by another call to startAt or equalTo).");return void 0===t&&(e=t=null),new c(this.repo,this.path,n,this.orderByCalled_)},c.prototype.endAt=function(t,e){void 0===t&&(t=null),_.validateArgCount("Query.endAt",0,2,arguments.length),J("Query.endAt",1,t,this.path,!0),nt("Query.endAt",2,e,!0);var n=this.queryParams_.endAt(t,e);if(c.validateLimit_(n),c.validateQueryEndpoints_(n),this.queryParams_.hasEnd())throw new Error("Query.endAt: Ending point was already set (by another call to endAt or equalTo).");return new c(this.repo,this.path,n,this.orderByCalled_)},c.prototype.equalTo=function(t,e){if(_.validateArgCount("Query.equalTo",1,2,arguments.length),J("Query.equalTo",1,t,this.path,!1),nt("Query.equalTo",2,e,!0),this.queryParams_.hasStart())throw new Error("Query.equalTo: Starting point was already set (by another call to startAt or equalTo).");if(this.queryParams_.hasEnd())throw new Error("Query.equalTo: Ending point was already set (by another call to endAt or equalTo).");return this.startAt(t,e).endAt(t,e)},c.prototype.toString=function(){return _.validateArgCount("Query.toString",0,0,arguments.length),this.repo.toString()+this.path.toUrlEncodedString()},c.prototype.toJSON=function(){return _.validateArgCount("Query.toJSON",0,1,arguments.length),this.toString()},c.prototype.queryObject=function(){return this.queryParams_.getQueryObject()},c.prototype.queryIdentifier=function(){var t=this.queryObject(),e=N(t);return"{}"===e?"default":e},c.prototype.isEqual=function(t){if(_.validateArgCount("Query.isEqual",1,1,arguments.length),!(t instanceof c)){throw new Error("Query.isEqual failed: First argument must be an instance of firebase.database.Query.")}var e=this.repo===t.repo,n=this.path.equals(t.path),r=this.queryIdentifier()===t.queryIdentifier();return e&&n&&r},c.getCancelAndContextArgs_=function(t,e,n){var r={cancel:null,context:null};if(e&&n)r.cancel=e,_.validateCallback(t,3,r.cancel,!0),r.context=n,_.validateContextObject(t,4,r.context,!0);else if(e)if("object"==typeof e&&null!==e)r.context=e;else{if("function"!=typeof e)throw new Error(_.errorPrefix(t,3,!0)+" must either be a cancel callback or a context object.");r.cancel=e}return r},Object.defineProperty(c.prototype,"ref",{get:function(){return this.getRef()},enumerable:!0,configurable:!0}),c}(),Qt=function(){function t(){this.set={}}return t.prototype.add=function(t,e){this.set[t]=null===e||e},t.prototype.contains=function(t){return _.contains(this.set,t)},t.prototype.get=function(t){return this.contains(t)?this.set[t]:void 0},t.prototype.remove=function(t){delete this.set[t]},t.prototype.clear=function(){this.set={}},t.prototype.isEmpty=function(){return _.isEmpty(this.set)},t.prototype.count=function(){return _.getCount(this.set)},t.prototype.each=function(n){_.forEach(this.set,function(t,e){return n(t,e)})},t.prototype.keys=function(){var e=[];return _.forEach(this.set,function(t){e.push(t)}),e},t}(),zt=function(){function i(){this.value_=null,this.children_=null}return i.prototype.find=function(t){if(null!=this.value_)return this.value_.getChild(t);if(t.isEmpty()||null==this.children_)return null;var e=t.getFront();return t=t.popFront(),this.children_.contains(e)?this.children_.get(e).find(t):null},i.prototype.remember=function(t,e){if(t.isEmpty())this.value_=e,this.children_=null;else if(null!==this.value_)this.value_=this.value_.updateChild(t,e);else{null==this.children_&&(this.children_=new Qt);var n=t.getFront();this.children_.contains(n)||this.children_.add(n,new i);var r=this.children_.get(n);t=t.popFront(),r.remember(t,e)}},i.prototype.forget=function(t){if(t.isEmpty())return this.value_=null,!(this.children_=null);if(null!==this.value_){if(this.value_.isLeafNode())return!1;var e=this.value_;this.value_=null;var n=this;return e.forEachChild(wt,function(t,e){n.remember(new F(t),e)}),this.forget(t)}if(null===this.children_)return!0;var r=t.getFront();return t=t.popFront(),this.children_.contains(r)&&this.children_.get(r).forget(t)&&this.children_.remove(r),!!this.children_.isEmpty()&&!(this.children_=null)},i.prototype.forEachTree=function(r,i){null!==this.value_?i(r,this.value_):this.forEachChild(function(t,e){var n=new F(r.toString()+"/"+t);e.forEachTree(n,i)})},i.prototype.forEachChild=function(n){null!==this.children_&&this.children_.each(function(t,e){n(t,e)})},i}(),Yt=function(t,e){return t&&"object"==typeof t?(_.assert(".sv"in t,"Unexpected leaf node or priority contents"),e[t[".sv"]]):t},Xt=function(t,r){var i,e=t.getPriority().val(),n=Yt(e,r);if(t.isLeafNode()){var o=t,a=Yt(o.getValue(),r);return a!==o.getValue()||n!==o.getPriority().val()?new mt(a,Mt(n)):t}var s=t;return n!==(i=s).getPriority().val()&&(i=i.updatePriority(new mt(n))),s.forEachChild(wt,function(t,e){var n=Xt(e,r);n!==e&&(i=i.updateImmediateChild(t,n))}),i};!function(t){t[t.OVERWRITE=0]="OVERWRITE",t[t.MERGE=1]="MERGE",t[t.ACK_USER_WRITE=2]="ACK_USER_WRITE",t[t.LISTEN_COMPLETE=3]="LISTEN_COMPLETE"}(jt||(jt={}));var Jt,$t,Zt=function(){function e(t,e,n,r){this.fromUser=t,this.fromServer=e,this.queryId=n,this.tagged=r,_.assert(!r||e,"Tagged queries must be from server.")}return e.User=new e(!0,!1,null,!1),e.Server=new e(!1,!0,null,!1),e.forServerTaggedQuery=function(t){return new e(!1,!0,t,!0)},e}(),te=function(){function n(t,e,n){this.path=t,this.affectedTree=e,this.revert=n,this.type=jt.ACK_USER_WRITE,this.source=Zt.User}return n.prototype.operationForChild=function(t){if(this.path.isEmpty()){if(null!=this.affectedTree.value)return _.assert(this.affectedTree.children.isEmpty(),"affectedTree should not have overlapping affected paths."),this;var e=this.affectedTree.subtree(new F(t));return new n(F.Empty,e,this.revert)}return _.assert(this.path.getFront()===t,"operationForChild called for unrelated child."),new n(this.path.popFront(),this.affectedTree,this.revert)},n}(),ee=function(){function o(t,e){void 0===e&&(e=function(){return Jt||(Jt=new Ct(x)),Jt}()),this.value=t,this.children=e}return o.fromObject=function(t){var n=o.Empty;return _.forEach(t,function(t,e){n=n.set(new F(t),e)}),n},o.prototype.isEmpty=function(){return null===this.value&&this.children.isEmpty()},o.prototype.findRootMostMatchingPathAndValue=function(t,e){if(null!=this.value&&e(this.value))return{path:F.Empty,value:this.value};if(t.isEmpty())return null;var n=t.getFront(),r=this.children.get(n);if(null===r)return null;var i=r.findRootMostMatchingPathAndValue(t.popFront(),e);return null==i?null:{path:new F(n).child(i.path),value:i.value}},o.prototype.findRootMostValueAndPath=function(t){return this.findRootMostMatchingPathAndValue(t,function(){return!0})},o.prototype.subtree=function(t){if(t.isEmpty())return this;var e=t.getFront(),n=this.children.get(e);return null!==n?n.subtree(t.popFront()):o.Empty},o.prototype.set=function(t,e){if(t.isEmpty())return new o(e,this.children);var n=t.getFront(),r=(this.children.get(n)||o.Empty).set(t.popFront(),e),i=this.children.insert(n,r);return new o(this.value,i)},o.prototype.remove=function(t){if(t.isEmpty())return this.children.isEmpty()?o.Empty:new o(null,this.children);var e=t.getFront(),n=this.children.get(e);if(n){var r=n.remove(t.popFront()),i=void 0;return i=r.isEmpty()?this.children.remove(e):this.children.insert(e,r),null===this.value&&i.isEmpty()?o.Empty:new o(this.value,i)}return this},o.prototype.get=function(t){if(t.isEmpty())return this.value;var e=t.getFront(),n=this.children.get(e);return n?n.get(t.popFront()):null},o.prototype.setTree=function(t,e){if(t.isEmpty())return e;var n=t.getFront(),r=(this.children.get(n)||o.Empty).setTree(t.popFront(),e),i=void 0;return i=r.isEmpty()?this.children.remove(n):this.children.insert(n,r),new o(this.value,i)},o.prototype.fold=function(t){return this.fold_(F.Empty,t)},o.prototype.fold_=function(n,r){var i={};return this.children.inorderTraversal(function(t,e){i[t]=e.fold_(n.child(t),r)}),r(n,this.value,i)},o.prototype.findOnPath=function(t,e){return this.findOnPath_(t,F.Empty,e)},o.prototype.findOnPath_=function(t,e,n){var r=!!this.value&&n(e,this.value);if(r)return r;if(t.isEmpty())return null;var i=t.getFront(),o=this.children.get(i);return o?o.findOnPath_(t.popFront(),e.child(i),n):null},o.prototype.foreachOnPath=function(t,e){return this.foreachOnPath_(t,F.Empty,e)},o.prototype.foreachOnPath_=function(t,e,n){if(t.isEmpty())return this;this.value&&n(e,this.value);var r=t.getFront(),i=this.children.get(r);return i?i.foreachOnPath_(t.popFront(),e.child(r),n):o.Empty},o.prototype.foreach=function(t){this.foreach_(F.Empty,t)},o.prototype.foreach_=function(n,r){this.children.inorderTraversal(function(t,e){e.foreach_(n.child(t),r)}),this.value&&r(n,this.value)},o.prototype.foreachChild=function(n){this.children.inorderTraversal(function(t,e){e.value&&n(t,e.value)})},o.Empty=new o(null),o}(),ne=function(){function e(t,e){this.source=t,this.path=e,this.type=jt.LISTEN_COMPLETE}return e.prototype.operationForChild=function(t){return this.path.isEmpty()?new e(this.source,F.Empty):new e(this.source,this.path.popFront())},e}(),re=function(){function e(t,e,n){this.source=t,this.path=e,this.snap=n,this.type=jt.OVERWRITE}return e.prototype.operationForChild=function(t){return this.path.isEmpty()?new e(this.source,F.Empty,this.snap.getImmediateChild(t)):new e(this.source,this.path.popFront(),this.snap)},e}(),ie=function(){function n(t,e,n){this.source=t,this.path=e,this.children=n,this.type=jt.MERGE}return n.prototype.operationForChild=function(t){if(this.path.isEmpty()){var e=this.children.subtree(new F(t));return e.isEmpty()?null:e.value?new re(this.source,F.Empty,e.value):new n(this.source,F.Empty,e)}return _.assert(this.path.getFront()===t,"Can't get a merge for a child not on the path of the operation"),new n(this.source,this.path.popFront(),this.children)},n.prototype.toString=function(){return"Operation("+this.path+": "+this.source.toString()+" merge: "+this.children.toString()+")"},n}(),oe=function(){function t(t,e,n){this.node_=t,this.fullyInitialized_=e,this.filtered_=n}return t.prototype.isFullyInitialized=function(){return this.fullyInitialized_},t.prototype.isFiltered=function(){return this.filtered_},t.prototype.isCompleteForPath=function(t){if(t.isEmpty())return this.isFullyInitialized()&&!this.filtered_;var e=t.getFront();return this.isCompleteForChild(e)},t.prototype.isCompleteForChild=function(t){return this.isFullyInitialized()&&!this.filtered_||this.node_.hasChild(t)},t.prototype.getNode=function(){return this.node_},t}(),ae=function(){function r(t,e){this.eventCache_=t,this.serverCache_=e}return r.prototype.updateEventSnap=function(t,e,n){return new r(new oe(t,e,n),this.serverCache_)},r.prototype.updateServerSnap=function(t,e,n){return new r(this.eventCache_,new oe(t,e,n))},r.prototype.getEventCache=function(){return this.eventCache_},r.prototype.getCompleteEventSnap=function(){return this.eventCache_.isFullyInitialized()?this.eventCache_.getNode():null},r.prototype.getServerCache=function(){return this.serverCache_},r.prototype.getCompleteServerSnap=function(){return this.serverCache_.isFullyInitialized()?this.serverCache_.getNode():null},r.Empty=new r(new oe(Pt.EMPTY_NODE,!1,!1),new oe(Pt.EMPTY_NODE,!1,!1)),r}(),se=function(){function r(t,e,n,r,i){this.type=t,this.snapshotNode=e,this.childName=n,this.oldSnap=r,this.prevName=i}return r.valueChange=function(t){return new r(r.VALUE,t)},r.childAddedChange=function(t,e){return new r(r.CHILD_ADDED,e,t)},r.childRemovedChange=function(t,e){return new r(r.CHILD_REMOVED,e,t)},r.childChangedChange=function(t,e,n){return new r(r.CHILD_CHANGED,e,t,n)},r.childMovedChange=function(t,e){return new r(r.CHILD_MOVED,e,t)},r.CHILD_ADDED="child_added",r.CHILD_REMOVED="child_removed",r.CHILD_CHANGED="child_changed",r.CHILD_MOVED="child_moved",r.VALUE="value",r}(),ue=function(){function t(t){this.index_=t}return t.prototype.updateChild=function(t,e,n,r,i,o){_.assert(t.isIndexed(this.index_),"A node must be indexed if only a child is updated");var a=t.getImmediateChild(e);return a.getChild(r).equals(n.getChild(r))&&a.isEmpty()==n.isEmpty()?t:(null!=o&&(n.isEmpty()?t.hasChild(e)?o.trackChildChange(se.childRemovedChange(e,a)):_.assert(t.isLeafNode(),"A child remove without an old child only makes sense on a leaf node"):a.isEmpty()?o.trackChildChange(se.childAddedChange(e,n)):o.trackChildChange(se.childChangedChange(e,n,a))),t.isLeafNode()&&n.isEmpty()?t:t.updateImmediateChild(e,n).withIndex(this.index_))},t.prototype.updateFullNode=function(r,n,i){return null!=i&&(r.isLeafNode()||r.forEachChild(wt,function(t,e){n.hasChild(t)||i.trackChildChange(se.childRemovedChange(t,e))}),n.isLeafNode()||n.forEachChild(wt,function(t,e){if(r.hasChild(t)){var n=r.getImmediateChild(t);n.equals(e)||i.trackChildChange(se.childChangedChange(t,e,n))}else i.trackChildChange(se.childAddedChange(t,e))})),n.withIndex(this.index_)},t.prototype.updatePriority=function(t,e){return t.isEmpty()?Pt.EMPTY_NODE:t.updatePriority(e)},t.prototype.filtersNodes=function(){return!1},t.prototype.getIndexedFilter=function(){return this},t.prototype.getIndex=function(){return this.index_},t}(),ce=function(){function t(){this.changeMap_={}}return t.prototype.trackChildChange=function(t){var e=t.type,n=t.childName;_.assert(e==se.CHILD_ADDED||e==se.CHILD_CHANGED||e==se.CHILD_REMOVED,"Only child changes supported for tracking"),_.assert(".priority"!==n,"Only non-priority child changes can be tracked.");var r=_.safeGet(this.changeMap_,n);if(r){var i=r.type;if(e==se.CHILD_ADDED&&i==se.CHILD_REMOVED)this.changeMap_[n]=se.childChangedChange(n,t.snapshotNode,r.snapshotNode);else if(e==se.CHILD_REMOVED&&i==se.CHILD_ADDED)delete this.changeMap_[n];else if(e==se.CHILD_REMOVED&&i==se.CHILD_CHANGED)this.changeMap_[n]=se.childRemovedChange(n,r.oldSnap);else if(e==se.CHILD_CHANGED&&i==se.CHILD_ADDED)this.changeMap_[n]=se.childAddedChange(n,t.snapshotNode);else{if(e!=se.CHILD_CHANGED||i!=se.CHILD_CHANGED)throw _.assertionError("Illegal combination of changes: "+t+" occurred after "+r);this.changeMap_[n]=se.childChangedChange(n,t.snapshotNode,r.oldSnap)}}else this.changeMap_[n]=t},t.prototype.getChanges=function(){return _.getValues(this.changeMap_)},t}(),he=new(function(){function t(){}return t.prototype.getCompleteChild=function(t){return null},t.prototype.getChildAfterChild=function(t,e,n){return null},t}()),le=function(){function t(t,e,n){void 0===n&&(n=null),this.writes_=t,this.viewCache_=e,this.optCompleteServerCache_=n}return t.prototype.getCompleteChild=function(t){var e=this.viewCache_.getEventCache();if(e.isCompleteForChild(t))return e.getNode().getImmediateChild(t);var n=null!=this.optCompleteServerCache_?new oe(this.optCompleteServerCache_,!0,!1):this.viewCache_.getServerCache();return this.writes_.calcCompleteChild(t,n)},t.prototype.getChildAfterChild=function(t,e,n){var r=null!=this.optCompleteServerCache_?this.optCompleteServerCache_:this.viewCache_.getCompleteServerSnap(),i=this.writes_.calcIndexedSlice(r,e,1,n,t);return 0===i.length?null:i[0]},t}(),fe=function(){return function(t,e){this.viewCache=t,this.changes=e}}(),pe=function(){function l(t){this.filter_=t}return l.prototype.assertIndexed=function(t){_.assert(t.getEventCache().getNode().isIndexed(this.filter_.getIndex()),"Event snap not indexed"),_.assert(t.getServerCache().getNode().isIndexed(this.filter_.getIndex()),"Server snap not indexed")},l.prototype.applyOperation=function(t,e,n,r){var i,o,a=new ce;if(e.type===jt.OVERWRITE){var s=e;i=s.source.fromUser?this.applyUserOverwrite_(t,s.path,s.snap,n,r,a):(_.assert(s.source.fromServer,"Unknown source."),o=s.source.tagged||t.getServerCache().isFiltered()&&!s.path.isEmpty(),this.applyServerOverwrite_(t,s.path,s.snap,n,r,o,a))}else if(e.type===jt.MERGE){var u=e;i=u.source.fromUser?this.applyUserMerge_(t,u.path,u.children,n,r,a):(_.assert(u.source.fromServer,"Unknown source."),o=u.source.tagged||t.getServerCache().isFiltered(),this.applyServerMerge_(t,u.path,u.children,n,r,o,a))}else if(e.type===jt.ACK_USER_WRITE){var c=e;i=c.revert?this.revertUserWrite_(t,c.path,n,r,a):this.ackUserWrite_(t,c.path,c.affectedTree,n,r,a)}else{if(e.type!==jt.LISTEN_COMPLETE)throw _.assertionError("Unknown operation type: "+e.type);i=this.listenComplete_(t,e.path,n,a)}var h=a.getChanges();return l.maybeAddValueEvent_(t,i,h),new fe(i,h)},l.maybeAddValueEvent_=function(t,e,n){var r=e.getEventCache();if(r.isFullyInitialized()){var i=r.getNode().isLeafNode()||r.getNode().isEmpty(),o=t.getCompleteEventSnap();(0<n.length||!t.getEventCache().isFullyInitialized()||i&&!r.getNode().equals(o)||!r.getNode().getPriority().equals(o.getPriority()))&&n.push(se.valueChange(e.getCompleteEventSnap()))}},l.prototype.generateEventCacheAfterServerEvent_=function(t,e,n,r,i){var o=t.getEventCache();if(null!=n.shadowingWrite(e))return t;var a=void 0,s=void 0;if(e.isEmpty())if(_.assert(t.getServerCache().isFullyInitialized(),"If change path is empty, we must have complete server data"),t.getServerCache().isFiltered()){var u=t.getCompleteServerSnap(),c=u instanceof Pt?u:Pt.EMPTY_NODE,h=n.calcCompleteEventChildren(c);a=this.filter_.updateFullNode(t.getEventCache().getNode(),h,i)}else{var l=n.calcCompleteEventCache(t.getCompleteServerSnap());a=this.filter_.updateFullNode(t.getEventCache().getNode(),l,i)}else{var f=e.getFront();if(".priority"==f){_.assert(1==e.getLength(),"Can't have a priority with additional path components");var p=o.getNode();s=t.getServerCache().getNode();var d=n.calcEventCacheAfterServerOverwrite(e,p,s);a=null!=d?this.filter_.updatePriority(p,d):o.getNode()}else{var v=e.popFront(),y=void 0;if(o.isCompleteForChild(f)){s=t.getServerCache().getNode();var g=n.calcEventCacheAfterServerOverwrite(e,o.getNode(),s);y=null!=g?o.getNode().getImmediateChild(f).updateChild(v,g):o.getNode().getImmediateChild(f)}else y=n.calcCompleteChild(f,t.getServerCache());a=null!=y?this.filter_.updateChild(o.getNode(),f,y,v,r,i):o.getNode()}}return t.updateEventSnap(a,o.isFullyInitialized()||e.isEmpty(),this.filter_.filtersNodes())},l.prototype.applyServerOverwrite_=function(t,e,n,r,i,o,a){var s,u=t.getServerCache(),c=o?this.filter_:this.filter_.getIndexedFilter();if(e.isEmpty())s=c.updateFullNode(u.getNode(),n,null);else if(c.filtersNodes()&&!u.isFiltered()){var h=u.getNode().updateChild(e,n);s=c.updateFullNode(u.getNode(),h,null)}else{var l=e.getFront();if(!u.isCompleteForPath(e)&&1<e.getLength())return t;var f=e.popFront(),p=u.getNode().getImmediateChild(l).updateChild(f,n);s=".priority"==l?c.updatePriority(u.getNode(),p):c.updateChild(u.getNode(),l,p,f,he,null)}var d=t.updateServerSnap(s,u.isFullyInitialized()||e.isEmpty(),c.filtersNodes()),v=new le(r,d,i);return this.generateEventCacheAfterServerEvent_(d,e,r,v,a)},l.prototype.applyUserOverwrite_=function(t,e,n,r,i,o){var a,s,u=t.getEventCache(),c=new le(r,t,i);if(e.isEmpty())s=this.filter_.updateFullNode(t.getEventCache().getNode(),n,o),a=t.updateEventSnap(s,!0,this.filter_.filtersNodes());else{var h=e.getFront();if(".priority"===h)s=this.filter_.updatePriority(t.getEventCache().getNode(),n),a=t.updateEventSnap(s,u.isFullyInitialized(),u.isFiltered());else{var l=e.popFront(),f=u.getNode().getImmediateChild(h),p=void 0;if(l.isEmpty())p=n;else{var d=c.getCompleteChild(h);p=null!=d?".priority"===l.getBack()&&d.getChild(l.parent()).isEmpty()?d:d.updateChild(l,n):Pt.EMPTY_NODE}if(f.equals(p))a=t;else{var v=this.filter_.updateChild(u.getNode(),h,p,l,c,o);a=t.updateEventSnap(v,u.isFullyInitialized(),this.filter_.filtersNodes())}}}return a},l.cacheHasChild_=function(t,e){return t.getEventCache().isCompleteForChild(e)},l.prototype.applyUserMerge_=function(r,i,t,o,a,s){var u=this,c=r;return t.foreach(function(t,e){var n=i.child(t);l.cacheHasChild_(r,n.getFront())&&(c=u.applyUserOverwrite_(c,n,e,o,a,s))}),t.foreach(function(t,e){var n=i.child(t);l.cacheHasChild_(r,n.getFront())||(c=u.applyUserOverwrite_(c,n,e,o,a,s))}),c},l.prototype.applyMerge_=function(n,t){return t.foreach(function(t,e){n=n.updateChild(t,e)}),n},l.prototype.applyServerMerge_=function(o,t,e,a,s,u,c){var h=this;if(o.getServerCache().getNode().isEmpty()&&!o.getServerCache().isFullyInitialized())return o;var n,l=o;n=t.isEmpty()?e:ee.Empty.setTree(t,e);var f=o.getServerCache().getNode();return n.children.inorderTraversal(function(t,e){if(f.hasChild(t)){var n=o.getServerCache().getNode().getImmediateChild(t),r=h.applyMerge_(n,e);l=h.applyServerOverwrite_(l,new F(t),r,a,s,u,c)}}),n.children.inorderTraversal(function(t,e){var n=!o.getServerCache().isCompleteForChild(t)&&null==e.value;if(!f.hasChild(t)&&!n){var r=o.getServerCache().getNode().getImmediateChild(t),i=h.applyMerge_(r,e);l=h.applyServerOverwrite_(l,new F(t),i,a,s,u,c)}}),l},l.prototype.ackUserWrite_=function(t,r,e,n,i,o){if(null!=n.shadowingWrite(r))return t;var a=t.getServerCache().isFiltered(),s=t.getServerCache();if(null!=e.value){if(r.isEmpty()&&s.isFullyInitialized()||s.isCompleteForPath(r))return this.applyServerOverwrite_(t,r,s.getNode().getChild(r),n,i,a,o);if(r.isEmpty()){var u=ee.Empty;return s.getNode().forEachChild(ft,function(t,e){u=u.set(new F(t),e)}),this.applyServerMerge_(t,r,u,n,i,a,o)}return t}var c=ee.Empty;return e.foreach(function(t,e){var n=r.child(t);s.isCompleteForPath(n)&&(c=c.set(t,s.getNode().getChild(n)))}),this.applyServerMerge_(t,r,c,n,i,a,o)},l.prototype.listenComplete_=function(t,e,n,r){var i=t.getServerCache(),o=t.updateServerSnap(i.getNode(),i.isFullyInitialized()||e.isEmpty(),i.isFiltered());return this.generateEventCacheAfterServerEvent_(o,e,n,he,r)},l.prototype.revertUserWrite_=function(t,e,n,r,i){var o;if(null!=n.shadowingWrite(e))return t;var a=new le(n,t,r),s=t.getEventCache().getNode(),u=void 0;if(e.isEmpty()||".priority"===e.getFront()){var c=void 0;if(t.getServerCache().isFullyInitialized())c=n.calcCompleteEventCache(t.getCompleteServerSnap());else{var h=t.getServerCache().getNode();_.assert(h instanceof Pt,"serverChildren would be complete if leaf node"),c=n.calcCompleteEventChildren(h)}c=c,u=this.filter_.updateFullNode(s,c,i)}else{var l=e.getFront(),f=n.calcCompleteChild(l,t.getServerCache());null==f&&t.getServerCache().isCompleteForChild(l)&&(f=s.getImmediateChild(l)),(u=null!=f?this.filter_.updateChild(s,l,f,e.popFront(),a,i):t.getEventCache().getNode().hasChild(l)?this.filter_.updateChild(s,l,Pt.EMPTY_NODE,e.popFront(),a,i):s).isEmpty()&&t.getServerCache().isFullyInitialized()&&(o=n.calcCompleteEventCache(t.getCompleteServerSnap())).isLeafNode()&&(u=this.filter_.updateFullNode(u,o,i))}return o=t.getServerCache().isFullyInitialized()||null!=n.shadowingWrite(F.Empty),t.updateEventSnap(u,o,this.filter_.filtersNodes())},l}(),de=function(){function t(t){this.query_=t,this.index_=this.query_.getQueryParams().getIndex()}return t.prototype.generateEventsForChanges=function(t,e,n){var r=this,i=[],o=[];return t.forEach(function(t){t.type===se.CHILD_CHANGED&&r.index_.indexedValueChanged(t.oldSnap,t.snapshotNode)&&o.push(se.childMovedChange(t.childName,t.snapshotNode))}),this.generateEventsForType_(i,se.CHILD_REMOVED,t,n,e),this.generateEventsForType_(i,se.CHILD_ADDED,t,n,e),this.generateEventsForType_(i,se.CHILD_MOVED,o,n,e),this.generateEventsForType_(i,se.CHILD_CHANGED,t,n,e),this.generateEventsForType_(i,se.VALUE,t,n,e),i},t.prototype.generateEventsForType_=function(r,e,t,i,o){var a=this,n=t.filter(function(t){return t.type===e});n.sort(this.compareChanges_.bind(this)),n.forEach(function(e){var n=a.materializeSingleChange_(e,o);i.forEach(function(t){t.respondsTo(e.type)&&r.push(t.createEvent(n,a.query_))})})},t.prototype.materializeSingleChange_=function(t,e){return"value"===t.type||"child_removed"===t.type||(t.prevName=e.getPredecessorChildName(t.childName,t.snapshotNode,this.index_)),t},t.prototype.compareChanges_=function(t,e){if(null==t.childName||null==e.childName)throw _.assertionError("Should only compare child_ events.");var n=new ct(t.childName,t.snapshotNode),r=new ct(e.childName,e.snapshotNode);return this.index_.compare(n,r)},t}(),ve=function(){function t(t,e){this.query_=t,this.eventRegistrations_=[];var n=this.query_.getQueryParams(),r=new ue(n.getIndex()),i=n.getNodeFilter();this.processor_=new pe(i);var o=e.getServerCache(),a=e.getEventCache(),s=r.updateFullNode(Pt.EMPTY_NODE,o.getNode(),null),u=i.updateFullNode(Pt.EMPTY_NODE,a.getNode(),null),c=new oe(s,o.isFullyInitialized(),r.filtersNodes()),h=new oe(u,a.isFullyInitialized(),i.filtersNodes());this.viewCache_=new ae(h,c),this.eventGenerator_=new de(this.query_)}return t.prototype.getQuery=function(){return this.query_},t.prototype.getServerCache=function(){return this.viewCache_.getServerCache().getNode()},t.prototype.getCompleteServerCache=function(t){var e=this.viewCache_.getCompleteServerSnap();return e&&(this.query_.getQueryParams().loadsAllData()||!t.isEmpty()&&!e.getImmediateChild(t.getFront()).isEmpty())?e.getChild(t):null},t.prototype.isEmpty=function(){return 0===this.eventRegistrations_.length},t.prototype.addEventRegistration=function(t){this.eventRegistrations_.push(t)},t.prototype.removeEventRegistration=function(t,n){var r=[];if(n){_.assert(null==t,"A cancel should cancel all event registrations.");var i=this.query_.path;this.eventRegistrations_.forEach(function(t){n=n;var e=t.createCancelEvent(n,i);e&&r.push(e)})}if(t){for(var e=[],o=0;o<this.eventRegistrations_.length;++o){var a=this.eventRegistrations_[o];if(a.matches(t)){if(t.hasAnyCallback()){e=e.concat(this.eventRegistrations_.slice(o+1));break}}else e.push(a)}this.eventRegistrations_=e}else this.eventRegistrations_=[];return r},t.prototype.applyOperation=function(t,e,n){t.type===jt.MERGE&&null!==t.source.queryId&&(_.assert(this.viewCache_.getCompleteServerSnap(),"We should always have a full cache before handling merges"),_.assert(this.viewCache_.getCompleteEventSnap(),"Missing event cache, even though we have a server cache"));var r=this.viewCache_,i=this.processor_.applyOperation(r,t,e,n);return this.processor_.assertIndexed(i.viewCache),_.assert(i.viewCache.getServerCache().isFullyInitialized()||!r.getServerCache().isFullyInitialized(),"Once a server snap is complete, it should never go back"),this.viewCache_=i.viewCache,this.generateEventsForChanges_(i.changes,i.viewCache.getEventCache().getNode(),null)},t.prototype.getInitialEvents=function(t){var e=this.viewCache_.getEventCache(),n=[];e.getNode().isLeafNode()||e.getNode().forEachChild(wt,function(t,e){n.push(se.childAddedChange(t,e))});return e.isFullyInitialized()&&n.push(se.valueChange(e.getNode())),this.generateEventsForChanges_(n,e.getNode(),t)},t.prototype.generateEventsForChanges_=function(t,e,n){var r=n?[n]:this.eventRegistrations_;return this.eventGenerator_.generateEventsForChanges(t,e,r)},t}(),ye=function(){function c(){this.views_={}}return Object.defineProperty(c,"__referenceConstructor",{get:function(){return _.assert($t,"Reference.ts has not been loaded"),$t},set:function(t){_.assert(!$t,"__referenceConstructor has already been defined"),$t=t},enumerable:!0,configurable:!0}),c.prototype.isEmpty=function(){return _.isEmpty(this.views_)},c.prototype.applyOperation=function(n,r,i){var t=n.source.queryId;if(null!==t){var e=_.safeGet(this.views_,t);return _.assert(null!=e,"SyncTree gave us an op for an invalid query."),e.applyOperation(n,r,i)}var o=[];return _.forEach(this.views_,function(t,e){o=o.concat(e.applyOperation(n,r,i))}),o},c.prototype.addEventRegistration=function(t,e,n,r,i){var o=t.queryIdentifier(),a=_.safeGet(this.views_,o);if(!a){var s=n.calcCompleteEventCache(i?r:null),u=!1;u=!!s||(s=r instanceof Pt?n.calcCompleteEventChildren(r):Pt.EMPTY_NODE,!1);var c=new ae(new oe(s,u,!1),new oe(r,i,!1));a=new ve(t,c),this.views_[o]=a}return a.addEventRegistration(e),a.getInitialEvents(e)},c.prototype.removeEventRegistration=function(t,n,r){var e=t.queryIdentifier(),i=[],o=[],a=this.hasCompleteView();if("default"===e){var s=this;_.forEach(this.views_,function(t,e){o=o.concat(e.removeEventRegistration(n,r)),e.isEmpty()&&(delete s.views_[t],e.getQuery().getQueryParams().loadsAllData()||i.push(e.getQuery()))})}else{var u=_.safeGet(this.views_,e);u&&(o=o.concat(u.removeEventRegistration(n,r)),u.isEmpty()&&(delete this.views_[e],u.getQuery().getQueryParams().loadsAllData()||i.push(u.getQuery())))}return a&&!this.hasCompleteView()&&i.push(new c.__referenceConstructor(t.repo,t.path)),{removed:i,events:o}},c.prototype.getQueryViews=function(){var e=this;return Object.keys(this.views_).map(function(t){return e.views_[t]}).filter(function(t){return!t.getQuery().getQueryParams().loadsAllData()})},c.prototype.getCompleteServerCache=function(n){var r=null;return _.forEach(this.views_,function(t,e){r=r||e.getCompleteServerCache(n)}),r},c.prototype.viewForQuery=function(t){if(t.getQueryParams().loadsAllData())return this.getCompleteView();var e=t.queryIdentifier();return _.safeGet(this.views_,e)},c.prototype.viewExistsForQuery=function(t){return null!=this.viewForQuery(t)},c.prototype.hasCompleteView=function(){return null!=this.getCompleteView()},c.prototype.getCompleteView=function(){return _.findValue(this.views_,function(t){return t.getQuery().getQueryParams().loadsAllData()})||null},c}(),ge=function(){function s(t){this.writeTree_=t}return s.prototype.addWrite=function(t,e){if(t.isEmpty())return new s(new ee(e));var n=this.writeTree_.findRootMostValueAndPath(t);if(null!=n){var r=n.path,i=n.value,o=F.relativePath(r,t);return i=i.updateChild(o,e),new s(this.writeTree_.set(r,i))}var a=new ee(e);return new s(this.writeTree_.setTree(t,a))},s.prototype.addWrites=function(n,t){var r=this;return _.forEach(t,function(t,e){r=r.addWrite(n.child(t),e)}),r},s.prototype.removeWrite=function(t){return t.isEmpty()?s.Empty:new s(this.writeTree_.setTree(t,ee.Empty))},s.prototype.hasCompleteWrite=function(t){return null!=this.getCompleteNode(t)},s.prototype.getCompleteNode=function(t){var e=this.writeTree_.findRootMostValueAndPath(t);return null!=e?this.writeTree_.get(e.path).getChild(F.relativePath(e.path,t)):null},s.prototype.getCompleteChildren=function(){var n=[],t=this.writeTree_.value;return null!=t?t.isLeafNode()||t.forEachChild(wt,function(t,e){n.push(new ct(t,e))}):this.writeTree_.children.inorderTraversal(function(t,e){null!=e.value&&n.push(new ct(t,e.value))}),n},s.prototype.childCompoundWrite=function(t){if(t.isEmpty())return this;var e=this.getCompleteNode(t);return new s(null!=e?new ee(e):this.writeTree_.subtree(t))},s.prototype.isEmpty=function(){return this.writeTree_.isEmpty()},s.prototype.apply=function(t){return s.applySubtreeWrite_(F.Empty,this.writeTree_,t)},s.Empty=new s(new ee(null)),s.applySubtreeWrite_=function(n,t,r){if(null!=t.value)return r.updateChild(n,t.value);var i=null;return t.children.inorderTraversal(function(t,e){".priority"===t?(_.assert(null!==e.value,"Priority writes must always be leaf nodes"),i=e.value):r=s.applySubtreeWrite_(n.child(t),e,r)}),r.getChild(n).isEmpty()||null===i||(r=r.updateChild(n.child(".priority"),i)),r},s}(),me=function(){function c(){this.visibleWrites_=ge.Empty,this.allWrites_=[],this.lastWriteId_=-1}return c.prototype.childWrites=function(t){return new _e(t,this)},c.prototype.addOverwrite=function(t,e,n,r){_.assert(n>this.lastWriteId_,"Stacking an older write on top of newer ones"),void 0===r&&(r=!0),this.allWrites_.push({path:t,snap:e,writeId:n,visible:r}),r&&(this.visibleWrites_=this.visibleWrites_.addWrite(t,e)),this.lastWriteId_=n},c.prototype.addMerge=function(t,e,n){_.assert(n>this.lastWriteId_,"Stacking an older merge on top of newer ones"),this.allWrites_.push({path:t,children:e,writeId:n,visible:!0}),this.visibleWrites_=this.visibleWrites_.addWrites(t,e),this.lastWriteId_=n},c.prototype.getWrite=function(t){for(var e=0;e<this.allWrites_.length;e++){var n=this.allWrites_[e];if(n.writeId===t)return n}return null},c.prototype.removeWrite=function(e){var n=this,t=this.allWrites_.findIndex(function(t){return t.writeId===e});_.assert(0<=t,"removeWrite called with nonexistent writeId.");var r=this.allWrites_[t];this.allWrites_.splice(t,1);for(var i=r.visible,o=!1,a=this.allWrites_.length-1;i&&0<=a;){var s=this.allWrites_[a];s.visible&&(t<=a&&this.recordContainsPath_(s,r.path)?i=!1:r.path.contains(s.path)&&(o=!0)),a--}if(i){if(o)return this.resetTree_(),!0;if(r.snap)this.visibleWrites_=this.visibleWrites_.removeWrite(r.path);else{var u=r.children;_.forEach(u,function(t){n.visibleWrites_=n.visibleWrites_.removeWrite(r.path.child(t))})}return!0}return!1},c.prototype.getCompleteWriteData=function(t){return this.visibleWrites_.getCompleteNode(t)},c.prototype.calcCompleteEventCache=function(e,t,n,r){if(n||r){var i=this.visibleWrites_.childCompoundWrite(e);if(!r&&i.isEmpty())return t;if(r||null!=t||i.hasCompleteWrite(F.Empty)){var o=c.layerTree_(this.allWrites_,function(t){return(t.visible||r)&&(!n||!~n.indexOf(t.writeId))&&(t.path.contains(e)||e.contains(t.path))},e);u=t||Pt.EMPTY_NODE;return o.apply(u)}return null}var a=this.visibleWrites_.getCompleteNode(e);if(null!=a)return a;var s=this.visibleWrites_.childCompoundWrite(e);if(s.isEmpty())return t;if(null!=t||s.hasCompleteWrite(F.Empty)){var u=t||Pt.EMPTY_NODE;return s.apply(u)}return null},c.prototype.calcCompleteEventChildren=function(t,e){var r=Pt.EMPTY_NODE,n=this.visibleWrites_.getCompleteNode(t);if(n)return n.isLeafNode()||n.forEachChild(wt,function(t,e){r=r.updateImmediateChild(t,e)}),r;if(e){var i=this.visibleWrites_.childCompoundWrite(t);return e.forEachChild(wt,function(t,e){var n=i.childCompoundWrite(new F(t)).apply(e);r=r.updateImmediateChild(t,n)}),i.getCompleteChildren().forEach(function(t){r=r.updateImmediateChild(t.name,t.node)}),r}return this.visibleWrites_.childCompoundWrite(t).getCompleteChildren().forEach(function(t){r=r.updateImmediateChild(t.name,t.node)}),r},c.prototype.calcEventCacheAfterServerOverwrite=function(t,e,n,r){_.assert(n||r,"Either existingEventSnap or existingServerSnap must exist");var i=t.child(e);if(this.visibleWrites_.hasCompleteWrite(i))return null;var o=this.visibleWrites_.childCompoundWrite(i);return o.isEmpty()?r.getChild(e):o.apply(r.getChild(e))},c.prototype.calcCompleteChild=function(t,e,n){var r=t.child(e),i=this.visibleWrites_.getCompleteNode(r);return null!=i?i:n.isCompleteForChild(e)?this.visibleWrites_.childCompoundWrite(r).apply(n.getNode().getImmediateChild(e)):null},c.prototype.shadowingWrite=function(t){return this.visibleWrites_.getCompleteNode(t)},c.prototype.calcIndexedSlice=function(t,e,n,r,i,o){var a,s=this.visibleWrites_.childCompoundWrite(t),u=s.getCompleteNode(F.Empty);if(null!=u)a=u;else{if(null==e)return[];a=s.apply(e)}if((a=a.withIndex(o)).isEmpty()||a.isLeafNode())return[];for(var c=[],h=o.getCompare(),l=i?a.getReverseIteratorFrom(n,o):a.getIteratorFrom(n,o),f=l.getNext();f&&c.length<r;)0!==h(f,n)&&c.push(f),f=l.getNext();return c},c.prototype.recordContainsPath_=function(n,r){return n.snap?n.path.contains(r):!!_.findKey(n.children,function(t,e){return n.path.child(e).contains(r)})},c.prototype.resetTree_=function(){this.visibleWrites_=c.layerTree_(this.allWrites_,c.DefaultFilter_,F.Empty),0<this.allWrites_.length?this.lastWriteId_=this.allWrites_[this.allWrites_.length-1].writeId:this.lastWriteId_=-1},c.DefaultFilter_=function(t){return t.visible},c.layerTree_=function(t,e,n){for(var r=ge.Empty,i=0;i<t.length;++i){var o=t[i];if(e(o)){var a=o.path,s=void 0;if(o.snap)n.contains(a)?(s=F.relativePath(n,a),r=r.addWrite(s,o.snap)):a.contains(n)&&(s=F.relativePath(a,n),r=r.addWrite(F.Empty,o.snap.getChild(s)));else{if(!o.children)throw _.assertionError("WriteRecord should have .snap or .children");if(n.contains(a))s=F.relativePath(n,a),r=r.addWrites(s,o.children);else if(a.contains(n))if((s=F.relativePath(a,n)).isEmpty())r=r.addWrites(F.Empty,o.children);else{var u=_.safeGet(o.children,s.getFront());if(u){var c=u.getChild(s.popFront());r=r.addWrite(F.Empty,c)}}}}}return r},c}(),_e=function(){function e(t,e){this.treePath_=t,this.writeTree_=e}return e.prototype.calcCompleteEventCache=function(t,e,n){return this.writeTree_.calcCompleteEventCache(this.treePath_,t,e,n)},e.prototype.calcCompleteEventChildren=function(t){return this.writeTree_.calcCompleteEventChildren(this.treePath_,t)},e.prototype.calcEventCacheAfterServerOverwrite=function(t,e,n){return this.writeTree_.calcEventCacheAfterServerOverwrite(this.treePath_,t,e,n)},e.prototype.shadowingWrite=function(t){return this.writeTree_.shadowingWrite(this.treePath_.child(t))},e.prototype.calcIndexedSlice=function(t,e,n,r,i){return this.writeTree_.calcIndexedSlice(this.treePath_,t,e,n,r,i)},e.prototype.calcCompleteChild=function(t,e){return this.writeTree_.calcCompleteChild(this.treePath_,t,e)},e.prototype.child=function(t){return new e(this.treePath_.child(t),this.writeTree_)},e}(),be=function(){function g(t){this.listenProvider_=t,this.syncPointTree_=ee.Empty,this.pendingWriteTree_=new me,this.tagToQueryMap_={},this.queryToTagMap_={}}return g.prototype.applyUserOverwrite=function(t,e,n,r){return this.pendingWriteTree_.addOverwrite(t,e,n,r),r?this.applyOperationToSyncPoints_(new re(Zt.User,t,e)):[]},g.prototype.applyUserMerge=function(t,e,n){this.pendingWriteTree_.addMerge(t,e,n);var r=ee.fromObject(e);return this.applyOperationToSyncPoints_(new ie(Zt.User,t,r))},g.prototype.ackUserWrite=function(t,e){void 0===e&&(e=!1);var n=this.pendingWriteTree_.getWrite(t);if(this.pendingWriteTree_.removeWrite(t)){var r=ee.Empty;return null!=n.snap?r=r.set(F.Empty,!0):_.forEach(n.children,function(t,e){r=r.set(new F(t),e)}),this.applyOperationToSyncPoints_(new te(n.path,r,e))}return[]},g.prototype.applyServerOverwrite=function(t,e){return this.applyOperationToSyncPoints_(new re(Zt.Server,t,e))},g.prototype.applyServerMerge=function(t,e){var n=ee.fromObject(e);return this.applyOperationToSyncPoints_(new ie(Zt.Server,t,n))},g.prototype.applyListenComplete=function(t){return this.applyOperationToSyncPoints_(new ne(Zt.Server,t))},g.prototype.applyTaggedQueryOverwrite=function(t,e,n){var r=this.queryKeyForTag_(n);if(null==r)return[];var i=g.parseQueryKey_(r),o=i.path,a=i.queryId,s=F.relativePath(o,t),u=new re(Zt.forServerTaggedQuery(a),s,e);return this.applyTaggedOperation_(o,u)},g.prototype.applyTaggedQueryMerge=function(t,e,n){var r=this.queryKeyForTag_(n);if(r){var i=g.parseQueryKey_(r),o=i.path,a=i.queryId,s=F.relativePath(o,t),u=ee.fromObject(e),c=new ie(Zt.forServerTaggedQuery(a),s,u);return this.applyTaggedOperation_(o,c)}return[]},g.prototype.applyTaggedListenComplete=function(t,e){var n=this.queryKeyForTag_(e);if(n){var r=g.parseQueryKey_(n),i=r.path,o=r.queryId,a=F.relativePath(i,t),s=new ne(Zt.forServerTaggedQuery(o),a);return this.applyTaggedOperation_(i,s)}return[]},g.prototype.addEventRegistration=function(t,e){var r=t.path,i=null,o=!1;this.syncPointTree_.foreachOnPath(r,function(t,e){var n=F.relativePath(t,r);i=i||e.getCompleteServerCache(n),o=o||e.hasCompleteView()});var n,a=this.syncPointTree_.get(r);(a?(o=o||a.hasCompleteView(),i=i||a.getCompleteServerCache(F.Empty)):(a=new ye,this.syncPointTree_=this.syncPointTree_.set(r,a)),null!=i)?n=!0:(n=!1,i=Pt.EMPTY_NODE,this.syncPointTree_.subtree(r).foreachChild(function(t,e){var n=e.getCompleteServerCache(F.Empty);n&&(i=i.updateImmediateChild(t,n))}));var s=a.viewExistsForQuery(t);if(!s&&!t.getQueryParams().loadsAllData()){var u=g.makeQueryKey_(t);_.assert(!(u in this.queryToTagMap_),"View does not exist, but we have a tag");var c=g.getNextQueryTag_();this.queryToTagMap_[u]=c,this.tagToQueryMap_["_"+c]=u}var h=this.pendingWriteTree_.childWrites(r),l=a.addEventRegistration(t,e,h,i,n);if(!s&&!o){var f=a.viewForQuery(t);l=l.concat(this.setupListener_(t,f))}return l},g.prototype.removeEventRegistration=function(t,e,n){var r=this,i=t.path,o=this.syncPointTree_.get(i),a=[];if(o&&("default"===t.queryIdentifier()||o.viewExistsForQuery(t))){var s=o.removeEventRegistration(t,e,n);o.isEmpty()&&(this.syncPointTree_=this.syncPointTree_.remove(i));var u=s.removed;a=s.events;var c=-1!==u.findIndex(function(t){return t.getQueryParams().loadsAllData()}),h=this.syncPointTree_.findOnPath(i,function(t,e){return e.hasCompleteView()});if(c&&!h){var l=this.syncPointTree_.subtree(i);if(!l.isEmpty())for(var f=this.collectDistinctViewsForSubTree_(l),p=0;p<f.length;++p){var d=f[p],v=d.getQuery(),y=this.createListenerForView_(d);this.listenProvider_.startListening(g.queryForListening_(v),this.tagForQuery_(v),y.hashFn,y.onComplete)}}if(!h&&0<u.length&&!n)if(c){this.listenProvider_.stopListening(g.queryForListening_(t),null)}else u.forEach(function(t){var e=r.queryToTagMap_[g.makeQueryKey_(t)];r.listenProvider_.stopListening(g.queryForListening_(t),e)});this.removeTags_(u)}return a},g.prototype.calcCompleteEventCache=function(i,t){var e=this.pendingWriteTree_,n=this.syncPointTree_.findOnPath(i,function(t,e){var n=F.relativePath(t,i),r=e.getCompleteServerCache(n);if(r)return r});return e.calcCompleteEventCache(i,n,t,!0)},g.prototype.collectDistinctViewsForSubTree_=function(t){return t.fold(function(t,e,n){if(e&&e.hasCompleteView())return[e.getCompleteView()];var r=[];return e&&(r=e.getQueryViews()),_.forEach(n,function(t,e){r=r.concat(e)}),r})},g.prototype.removeTags_=function(t){for(var e=0;e<t.length;++e){var n=t[e];if(!n.getQueryParams().loadsAllData()){var r=g.makeQueryKey_(n),i=this.queryToTagMap_[r];delete this.queryToTagMap_[r],delete this.tagToQueryMap_["_"+i]}}},g.queryForListening_=function(t){return t.getQueryParams().loadsAllData()&&!t.getQueryParams().isDefault()?t.getRef():t},g.prototype.setupListener_=function(t,e){var n=t.path,r=this.tagForQuery_(t),i=this.createListenerForView_(e),o=this.listenProvider_.startListening(g.queryForListening_(t),r,i.hashFn,i.onComplete),a=this.syncPointTree_.subtree(n);if(r)_.assert(!a.value.hasCompleteView(),"If we're adding a query, it shouldn't be shadowed");else for(var s=a.fold(function(t,e,n){if(!t.isEmpty()&&e&&e.hasCompleteView())return[e.getCompleteView().getQuery()];var r=[];return e&&(r=r.concat(e.getQueryViews().map(function(t){return t.getQuery()}))),_.forEach(n,function(t,e){r=r.concat(e)}),r}),u=0;u<s.length;++u){var c=s[u];this.listenProvider_.stopListening(g.queryForListening_(c),this.tagForQuery_(c))}return o},g.prototype.createListenerForView_=function(t){var n=this,r=t.getQuery(),i=this.tagForQuery_(r);return{hashFn:function(){return(t.getServerCache()||Pt.EMPTY_NODE).hash()},onComplete:function(t){if("ok"===t)return i?n.applyTaggedListenComplete(r.path,i):n.applyListenComplete(r.path);var e=function(t,e){var n="Unknown Error";"too_big"===t?n="The data requested exceeds the maximum size that can be accessed with a single request.":"permission_denied"==t?n="Client doesn't have permission to access the desired data.":"unavailable"==t&&(n="The service is unavailable");var r=new Error(t+" at "+e.path.toString()+": "+n);return r.code=t.toUpperCase(),r}(t,r);return n.removeEventRegistration(r,null,e)}}},g.makeQueryKey_=function(t){return t.path.toString()+"$"+t.queryIdentifier()},g.parseQueryKey_=function(t){var e=t.indexOf("$");return _.assert(-1!==e&&e<t.length-1,"Bad queryKey."),{queryId:t.substr(e+1),path:new F(t.substr(0,e))}},g.prototype.queryKeyForTag_=function(t){return this.tagToQueryMap_["_"+t]},g.prototype.tagForQuery_=function(t){var e=g.makeQueryKey_(t);return _.safeGet(this.queryToTagMap_,e)},g.getNextQueryTag_=function(){return g.nextQueryTag_++},g.prototype.applyTaggedOperation_=function(t,e){var n=this.syncPointTree_.get(t);_.assert(n,"Missing sync point for query tag that we're tracking");var r=this.pendingWriteTree_.childWrites(t);return n.applyOperation(e,r,null)},g.prototype.applyOperationToSyncPoints_=function(t){return this.applyOperationHelper_(t,this.syncPointTree_,null,this.pendingWriteTree_.childWrites(F.Empty))},g.prototype.applyOperationHelper_=function(t,e,n,r){if(t.path.isEmpty())return this.applyOperationDescendantsHelper_(t,e,n,r);var i=e.get(F.Empty);null==n&&null!=i&&(n=i.getCompleteServerCache(F.Empty));var o=[],a=t.path.getFront(),s=t.operationForChild(a),u=e.children.get(a);if(u&&s){var c=n?n.getImmediateChild(a):null,h=r.child(a);o=o.concat(this.applyOperationHelper_(s,u,c,h))}return i&&(o=o.concat(i.applyOperation(t,r,n))),o},g.prototype.applyOperationDescendantsHelper_=function(o,t,a,s){var u=this,e=t.get(F.Empty);null==a&&null!=e&&(a=e.getCompleteServerCache(F.Empty));var c=[];return t.children.inorderTraversal(function(t,e){var n=a?a.getImmediateChild(t):null,r=s.child(t),i=o.operationForChild(t);i&&(c=c.concat(u.applyOperationDescendantsHelper_(i,e,n,r)))}),e&&(c=c.concat(e.applyOperation(o,s,a))),c},g.nextQueryTag_=1,g}(),we=function(){function t(){this.rootNode_=Pt.EMPTY_NODE}return t.prototype.getNode=function(t){return this.rootNode_.getChild(t)},t.prototype.updateSnapshot=function(t,e){this.rootNode_=this.rootNode_.updateChild(t,e)},t}(),Ee=function(){function t(t){this.app_=t}return t.prototype.getToken=function(t){return this.app_.INTERNAL.getToken(t).then(null,function(t){return t&&"auth/token-not-initialized"===t.code?(y("Got auth/token-not-initialized error.  Treating as null token."),null):Promise.reject(t)})},t.prototype.addTokenChangeListener=function(t){this.app_.INTERNAL.addAuthTokenListener(t)},t.prototype.removeTokenChangeListener=function(t){this.app_.INTERNAL.removeAuthTokenListener(t)},t.prototype.notifyForInvalidToken=function(){var t='Provided authentication credentials for the app named "'+this.app_.name+'" are invalid. This usually indicates your app was not initialized correctly. ';"credential"in this.app_.options?t+='Make sure the "credential" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':"serviceAccount"in this.app_.options?t+='Make sure the "serviceAccount" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':t+='Make sure the "apiKey" and "databaseURL" properties provided to initializeApp() match the values provided for your app at https://console.firebase.google.com/.',E(t)},t}(),Se=function(){function t(){this.counters_={}}return t.prototype.incrementCounter=function(t,e){void 0===e&&(e=1),_.contains(this.counters_,t)||(this.counters_[t]=0),this.counters_[t]+=e},t.prototype.get=function(){return _.deepCopy(this.counters_)},t}(),Te=function(){function t(){}return t.getCollection=function(t){var e=t.toString();return this.collections_[e]||(this.collections_[e]=new Se),this.collections_[e]},t.getOrCreateReporter=function(t,e){var n=t.toString();return this.reporters_[n]||(this.reporters_[n]=e()),this.reporters_[n]},t.collections_={},t.reporters_={},t}(),Ce=function(){function t(t){this.collection_=t,this.last_=null}return t.prototype.get=function(){var t=this.collection_.get(),n=_.clone(t);return this.last_&&_.forEach(this.last_,function(t,e){n[t]=n[t]-e}),this.last_=t,n},t}(),Ie=function(){function t(t,e){this.server_=e,this.statsToReport_={},this.statsListener_=new Ce(t);var n=1e4+2e4*Math.random();M(this.reportStats_.bind(this),Math.floor(n))}return t.prototype.includeStat=function(t){this.statsToReport_[t]=!0},t.prototype.reportStats_=function(){var n=this,t=this.statsListener_.get(),r={},i=!1;_.forEach(t,function(t,e){0<e&&_.contains(n.statsToReport_,t)&&(r[t]=e,i=!0)}),i&&this.server_.reportStats(r),M(this.reportStats_.bind(this),Math.floor(2*Math.random()*3e5))},t}(),xe=function(){function t(){this.eventLists_=[],this.recursionDepth_=0}return t.prototype.queueEvents=function(t){for(var e=null,n=0;n<t.length;n++){var r=t[n],i=r.getPath();null===e||i.equals(e.getPath())||(this.eventLists_.push(e),e=null),null===e&&(e=new Ae(i)),e.add(r)}e&&this.eventLists_.push(e)},t.prototype.raiseEventsAtPath=function(e,t){this.queueEvents(t),this.raiseQueuedEventsMatchingPredicate_(function(t){return t.equals(e)})},t.prototype.raiseEventsForChangedPath=function(e,t){this.queueEvents(t),this.raiseQueuedEventsMatchingPredicate_(function(t){return t.contains(e)||e.contains(t)})},t.prototype.raiseQueuedEventsMatchingPredicate_=function(t){this.recursionDepth_++;for(var e=!0,n=0;n<this.eventLists_.length;n++){var r=this.eventLists_[n];if(r)t(r.getPath())?(this.eventLists_[n].raise(),this.eventLists_[n]=null):e=!1}e&&(this.eventLists_=[]),this.recursionDepth_--},t}(),Ae=function(){function t(t){this.path_=t,this.events_=[]}return t.prototype.add=function(t){this.events_.push(t)},t.prototype.raise=function(){for(var t=0;t<this.events_.length;t++){var e=this.events_[t];if(null!==e){this.events_[t]=null;var n=e.getEventRunner();p&&y("event: "+e.toString()),L(n)}}},t.prototype.getPath=function(){return this.path_},t}(),Ne=function(){function t(t){this.allowedEvents_=t,this.listeners_={},_.assert(Array.isArray(t)&&0<t.length,"Requires a non-empty array")}return t.prototype.trigger=function(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];if(Array.isArray(this.listeners_[t]))for(var r=this.listeners_[t].slice(),i=0;i<r.length;i++)r[i].callback.apply(r[i].context,e)},t.prototype.on=function(t,e,n){this.validateEventType_(t),this.listeners_[t]=this.listeners_[t]||[],this.listeners_[t].push({callback:e,context:n});var r=this.getInitialEvent(t);r&&e.apply(n,r)},t.prototype.off=function(t,e,n){this.validateEventType_(t);for(var r=this.listeners_[t]||[],i=0;i<r.length;i++)if(r[i].callback===e&&(!n||n===r[i].context))return void r.splice(i,1)},t.prototype.validateEventType_=function(e){_.assert(this.allowedEvents_.find(function(t){return t===e}),"Unknown event: "+e)},t}(),ke=function(r){function t(){var e,t,n=r.call(this,["visible"])||this;return"undefined"!=typeof document&&void 0!==document.addEventListener&&(void 0!==document.hidden?(t="visibilitychange",e="hidden"):void 0!==document.mozHidden?(t="mozvisibilitychange",e="mozHidden"):void 0!==document.msHidden?(t="msvisibilitychange",e="msHidden"):void 0!==document.webkitHidden&&(t="webkitvisibilitychange",e="webkitHidden")),n.visible_=!0,t&&document.addEventListener(t,function(){var t=!document[e];t!==n.visible_&&(n.visible_=t,n.trigger("visible",t))},!1),n}return o.__extends(t,r),t.getInstance=function(){return new t},t.prototype.getInitialEvent=function(t){return _.assert("visible"===t,"Unknown event type: "+t),[this.visible_]},t}(Ne),Re=function(e){function t(){var t=e.call(this,["online"])||this;return t.online_=!0,"undefined"==typeof window||void 0===window.addEventListener||_.isMobileCordova()||(window.addEventListener("online",function(){t.online_||(t.online_=!0,t.trigger("online",!0))},!1),window.addEventListener("offline",function(){t.online_&&(t.online_=!1,t.trigger("online",!1))},!1)),t}return o.__extends(t,e),t.getInstance=function(){return new t},t.prototype.getInitialEvent=function(t){return _.assert("online"===t,"Unknown event type: "+t),[this.online_]},t.prototype.currentlyOnline=function(){return this.online_},t}(Ne),Oe=function(){function t(t){this.onMessage_=t,this.pendingResponses=[],this.currentResponseNum=0,this.closeAfterResponse=-1,this.onClose=null}return t.prototype.closeAfter=function(t,e){this.closeAfterResponse=t,this.onClose=e,this.closeAfterResponse<this.currentResponseNum&&(this.onClose(),this.onClose=null)},t.prototype.handleResponse=function(t,e){var r=this;this.pendingResponses[t]=e;for(var n=function(){var e=i.pendingResponses[i.currentResponseNum];delete i.pendingResponses[i.currentResponseNum];for(var t=function(t){e[t]&&L(function(){r.onMessage_(e[t])})},n=0;n<e.length;++n)t(n);if(i.currentResponseNum===i.closeAfterResponse)return i.onClose&&(i.onClose(),i.onClose=null),"break";i.currentResponseNum++},i=this;this.pendingResponses[this.currentResponseNum];){if("break"===n())break}},t}(),Pe=function(){function t(t,e,n,r){this.connId=t,this.repoInfo=e,this.transportSessionId=n,this.lastSessionId=r,this.bytesSent=0,this.bytesReceived=0,this.everConnected_=!1,this.log_=m(t),this.stats_=Te.getCollection(e),this.urlFn=function(t){return e.connectionURL(W,t)}}return t.prototype.open=function(t,e){var o=this;this.curSegmentNum=0,this.onDisconnect_=e,this.myPacketOrderer=new Oe(t),this.isClosed_=!1,this.connectTimeoutTimer_=setTimeout(function(){o.log_("Timed out trying to connect."),o.onClosed_(),o.connectTimeoutTimer_=null},Math.floor(3e4)),function(t){if(_.isNodeSdk()||"complete"===document.readyState)t();else{var e=!1,n=function(){document.body?e||(e=!0,t()):setTimeout(n,Math.floor(10))};document.addEventListener?(document.addEventListener("DOMContentLoaded",n,!1),window.addEventListener("load",n,!1)):document.attachEvent&&(document.attachEvent("onreadystatechange",function(){"complete"===document.readyState&&n()}),window.attachEvent("onload",n))}}(function(){if(!o.isClosed_){o.scriptTagHolder=new De(function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n=t[0],r=t[1],i=t[2];if(o.incrementIncomingBytes_(t),o.scriptTagHolder)if(o.connectTimeoutTimer_&&(clearTimeout(o.connectTimeoutTimer_),o.connectTimeoutTimer_=null),o.everConnected_=!0,"start"==n)o.id=r,o.password=i;else{if("close"!==n)throw new Error("Unrecognized command received: "+n);r?(o.scriptTagHolder.sendNewPolls=!1,o.myPacketOrderer.closeAfter(r,function(){o.onClosed_()})):o.onClosed_()}},function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n=t[0],r=t[1];o.incrementIncomingBytes_(t),o.myPacketOrderer.handleResponse(n,r)},function(){o.onClosed_()},o.urlFn);var t={start:"t"};t.ser=Math.floor(1e8*Math.random()),o.scriptTagHolder.uniqueCallbackIdentifier&&(t.cb=o.scriptTagHolder.uniqueCallbackIdentifier),t.v="5",o.transportSessionId&&(t.s=o.transportSessionId),o.lastSessionId&&(t.ls=o.lastSessionId),!_.isNodeSdk()&&"undefined"!=typeof location&&location.href&&-1!==location.href.indexOf(U)&&(t.r="f");var e=o.urlFn(t);o.log_("Connecting via long-poll to "+e),o.scriptTagHolder.addTag(e,function(){})}})},t.prototype.start=function(){this.scriptTagHolder.startLongPoll(this.id,this.password),this.addDisconnectPingFrame(this.id,this.password)},t.forceAllow=function(){t.forceAllow_=!0},t.forceDisallow=function(){t.forceDisallow_=!0},t.isAvailable=function(){return t.forceAllow_||!t.forceDisallow_&&"undefined"!=typeof document&&null!=document.createElement&&!function(){return!("object"!=typeof window||!window.chrome||!window.chrome.extension||/^chrome/.test(window.location.href))}()&&!function(){return"object"==typeof Windows&&"object"==typeof Windows.UI}()&&!_.isNodeSdk()},t.prototype.markConnectionHealthy=function(){},t.prototype.shutdown_=function(){this.isClosed_=!0,this.scriptTagHolder&&(this.scriptTagHolder.close(),this.scriptTagHolder=null),this.myDisconnFrame&&(document.body.removeChild(this.myDisconnFrame),this.myDisconnFrame=null),this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null)},t.prototype.onClosed_=function(){this.isClosed_||(this.log_("Longpoll is closing itself"),this.shutdown_(),this.onDisconnect_&&(this.onDisconnect_(this.everConnected_),this.onDisconnect_=null))},t.prototype.close=function(){this.isClosed_||(this.log_("Longpoll is being closed."),this.shutdown_())},t.prototype.send=function(t){var e=_.stringify(t);this.bytesSent+=e.length,this.stats_.incrementCounter("bytes_sent",e.length);for(var n=_.base64Encode(e),r=k(n,1840),i=0;i<r.length;i++)this.scriptTagHolder.enqueueSegment(this.curSegmentNum,r.length,r[i]),this.curSegmentNum++},t.prototype.addDisconnectPingFrame=function(t,e){if(!_.isNodeSdk()){this.myDisconnFrame=document.createElement("iframe");var n={dframe:"t"};n.id=t,n.pw=e,this.myDisconnFrame.src=this.urlFn(n),this.myDisconnFrame.style.display="none",document.body.appendChild(this.myDisconnFrame)}},t.prototype.incrementIncomingBytes_=function(t){var e=_.stringify(t).length;this.bytesReceived+=e,this.stats_.incrementCounter("bytes_received",e)},t}(),De=function(){function a(t,e,n,r){if(this.onDisconnect=n,this.urlFn=r,this.outstandingRequests=new Qt,this.pendingSegs=[],this.currentSerial=Math.floor(1e8*Math.random()),this.sendNewPolls=!0,_.isNodeSdk())this.commandCB=t,this.onMessageCB=e;else{this.uniqueCallbackIdentifier=g(),window["pLPCommand"+this.uniqueCallbackIdentifier]=t,window["pRTLPCB"+this.uniqueCallbackIdentifier]=e,this.myIFrame=a.createIFrame_();var i="";if(this.myIFrame.src&&"javascript:"===this.myIFrame.src.substr(0,"javascript:".length))i='<script>document.domain="'+document.domain+'";<\/script>';var o="<html><body>"+i+"</body></html>";try{this.myIFrame.doc.open(),this.myIFrame.doc.write(o),this.myIFrame.doc.close()}catch(t){y("frame writing exception"),t.stack&&y(t.stack),y(t)}}}return a.createIFrame_=function(){var e=document.createElement("iframe");if(e.style.display="none",!document.body)throw"Document body has not initialized. Wait to initialize Firebase until after the document is ready.";document.body.appendChild(e);try{e.contentWindow.document||y("No IE domain setting required")}catch(t){var n=document.domain;e.src="javascript:void((function(){document.open();document.domain='"+n+"';document.close();})())"}return e.contentDocument?e.doc=e.contentDocument:e.contentWindow?e.doc=e.contentWindow.document:e.document&&(e.doc=e.document),e},a.prototype.close=function(){var t=this;if(this.alive=!1,this.myIFrame&&(this.myIFrame.doc.body.innerHTML="",setTimeout(function(){null!==t.myIFrame&&(document.body.removeChild(t.myIFrame),t.myIFrame=null)},Math.floor(0))),_.isNodeSdk()&&this.myID){var e={disconn:"t"};e.id=this.myID,e.pw=this.myPW;var n=this.urlFn(e);a.nodeRestRequest(n)}var r=this.onDisconnect;r&&(this.onDisconnect=null,r())},a.prototype.startLongPoll=function(t,e){for(this.myID=t,this.myPW=e,this.alive=!0;this.newRequest_(););},a.prototype.newRequest_=function(){if(this.alive&&this.sendNewPolls&&this.outstandingRequests.count()<(0<this.pendingSegs.length?2:1)){this.currentSerial++;var t={};t.id=this.myID,t.pw=this.myPW,t.ser=this.currentSerial;for(var e=this.urlFn(t),n="",r=0;0<this.pendingSegs.length;){if(!(this.pendingSegs[0].d.length+30+n.length<=1870))break;var i=this.pendingSegs.shift();n=n+"&seg"+r+"="+i.seg+"&ts"+r+"="+i.ts+"&d"+r+"="+i.d,r++}return e+=n,this.addLongPollTag_(e,this.currentSerial),!0}return!1},a.prototype.enqueueSegment=function(t,e,n){this.pendingSegs.push({seg:t,ts:e,d:n}),this.alive&&this.newRequest_()},a.prototype.addLongPollTag_=function(t,e){var n=this;this.outstandingRequests.add(e,1);var r=function(){n.outstandingRequests.remove(e),n.newRequest_()},i=setTimeout(r,Math.floor(25e3));this.addTag(t,function(){clearTimeout(i),r()})},a.prototype.addTag=function(t,n){var r=this;_.isNodeSdk()?this.doNodeLongPoll(t,n):setTimeout(function(){try{if(!r.sendNewPolls)return;var e=r.myIFrame.doc.createElement("script");e.type="text/javascript",e.async=!0,e.src=t,e.onload=e.onreadystatechange=function(){var t=e.readyState;t&&"loaded"!==t&&"complete"!==t||(e.onload=e.onreadystatechange=null,e.parentNode&&e.parentNode.removeChild(e),n())},e.onerror=function(){y("Long-poll script failed to load: "+t),r.sendNewPolls=!1,r.close()},r.myIFrame.doc.body.appendChild(e)}catch(t){}},Math.floor(1))},a}(),Le=null;"undefined"!=typeof MozWebSocket?Le=MozWebSocket:"undefined"!=typeof WebSocket&&(Le=WebSocket);var Me=function(){function i(t,e,n,r){this.connId=t,this.keepaliveTimer=null,this.frames=null,this.totalFrames=0,this.bytesSent=0,this.bytesReceived=0,this.log_=m(this.connId),this.stats_=Te.getCollection(e),this.connURL=i.connectionURL_(e,n,r)}return i.connectionURL_=function(t,e,n){var r={v:"5"};return!_.isNodeSdk()&&"undefined"!=typeof location&&location.href&&-1!==location.href.indexOf(U)&&(r.r="f"),e&&(r.s=e),n&&(r.ls=n),t.connectionURL("websocket",r)},i.prototype.open=function(t,e){var n=this;this.onDisconnect=e,this.onMessage=t,this.log_("Websocket connecting to "+this.connURL),this.everConnected_=!1,h.set("previous_websocket_failure",!0);try{if(_.isNodeSdk()){var r=_.CONSTANTS.NODE_ADMIN?"AdminNode":"Node",i={headers:{"User-Agent":"Firebase/5/"+c.SDK_VERSION+"/"+u.platform+"/"+r}},o=Object({NODE_ENV:"production"}),a=0==this.connURL.indexOf("wss://")?o.HTTPS_PROXY||o.https_proxy:o.HTTP_PROXY||o.http_proxy;a&&(i.proxy={origin:a}),this.mySock=new Le(this.connURL,[],i)}else this.mySock=new Le(this.connURL)}catch(t){this.log_("Error instantiating WebSocket.");var s=t.message||t.data;return s&&this.log_(s),void this.onClosed_()}this.mySock.onopen=function(){n.log_("Websocket connected."),n.everConnected_=!0},this.mySock.onclose=function(){n.log_("Websocket connection was disconnected."),n.mySock=null,n.onClosed_()},this.mySock.onmessage=function(t){n.handleIncomingFrame(t)},this.mySock.onerror=function(t){n.log_("WebSocket error.  Closing connection.");var e=t.message||t.data;e&&n.log_(e),n.onClosed_()}},i.prototype.start=function(){},i.forceDisallow=function(){i.forceDisallow_=!0},i.isAvailable=function(){var t=!1;if("undefined"!=typeof navigator&&navigator.userAgent){var e=navigator.userAgent.match(/Android ([0-9]{0,}\.[0-9]{0,})/);e&&1<e.length&&parseFloat(e[1])<4.4&&(t=!0)}return!t&&null!==Le&&!i.forceDisallow_},i.previouslyFailed=function(){return h.isInMemoryStorage||!0===h.get("previous_websocket_failure")},i.prototype.markConnectionHealthy=function(){h.remove("previous_websocket_failure")},i.prototype.appendFrame_=function(t){if(this.frames.push(t),this.frames.length==this.totalFrames){var e=this.frames.join("");this.frames=null;var n=_.jsonEval(e);this.onMessage(n)}},i.prototype.handleNewFrameCount_=function(t){this.totalFrames=t,this.frames=[]},i.prototype.extractFrameCount_=function(t){if(_.assert(null===this.frames,"We already have a frame buffer"),t.length<=6){var e=Number(t);if(!isNaN(e))return this.handleNewFrameCount_(e),null}return this.handleNewFrameCount_(1),t},i.prototype.handleIncomingFrame=function(t){if(null!==this.mySock){var e=t.data;if(this.bytesReceived+=e.length,this.stats_.incrementCounter("bytes_received",e.length),this.resetKeepAlive(),null!==this.frames)this.appendFrame_(e);else{var n=this.extractFrameCount_(e);null!==n&&this.appendFrame_(n)}}},i.prototype.send=function(t){this.resetKeepAlive();var e=_.stringify(t);this.bytesSent+=e.length,this.stats_.incrementCounter("bytes_sent",e.length);var n=k(e,16384);1<n.length&&this.sendString_(String(n.length));for(var r=0;r<n.length;r++)this.sendString_(n[r])},i.prototype.shutdown_=function(){this.isClosed_=!0,this.keepaliveTimer&&(clearInterval(this.keepaliveTimer),this.keepaliveTimer=null),this.mySock&&(this.mySock.close(),this.mySock=null)},i.prototype.onClosed_=function(){this.isClosed_||(this.log_("WebSocket is closing itself"),this.shutdown_(),this.onDisconnect&&(this.onDisconnect(this.everConnected_),this.onDisconnect=null))},i.prototype.close=function(){this.isClosed_||(this.log_("WebSocket is being closed"),this.shutdown_())},i.prototype.resetKeepAlive=function(){var t=this;clearInterval(this.keepaliveTimer),this.keepaliveTimer=setInterval(function(){t.mySock&&t.sendString_("0"),t.resetKeepAlive()},Math.floor(45e3))},i.prototype.sendString_=function(t){try{this.mySock.send(t)}catch(t){this.log_("Exception thrown from WebSocket.send():",t.message||t.data,"Closing connection."),setTimeout(this.onClosed_.bind(this),0)}},i.responsesRequiredToBeHealthy=2,i.healthyTimeout=3e4,i}(),Fe=function(){function i(t){this.initTransports_(t)}return Object.defineProperty(i,"ALL_TRANSPORTS",{get:function(){return[Pe,Me]},enumerable:!0,configurable:!0}),i.prototype.initTransports_=function(t){var e=Me&&Me.isAvailable(),n=e&&!Me.previouslyFailed();if(t.webSocketOnly&&(e||E("wss:// URL used, but browser isn't known to support websockets.  Trying anyway."),n=!0),n)this.transports_=[Me];else{var r=this.transports_=[];R(i.ALL_TRANSPORTS,function(t,e){e&&e.isAvailable()&&r.push(e)})}},i.prototype.initialTransport=function(){if(0<this.transports_.length)return this.transports_[0];throw new Error("No transports available")},i.prototype.upgradeTransport=function(){return 1<this.transports_.length?this.transports_[1]:null},i}(),je=function(){function t(t,e,n,r,i,o,a){this.id=t,this.repoInfo_=e,this.onMessage_=n,this.onReady_=r,this.onDisconnect_=i,this.onKill_=o,this.lastSessionId=a,this.connectionCount=0,this.pendingDataMessages=[],this.state_=0,this.log_=m("c:"+this.id+":"),this.transportManager_=new Fe(e),this.log_("Connection created"),this.start_()}return t.prototype.start_=function(){var t=this,e=this.transportManager_.initialTransport();this.conn_=new e(this.nextTransportId_(),this.repoInfo_,void 0,this.lastSessionId),this.primaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;var n=this.connReceiver_(this.conn_),r=this.disconnReceiver_(this.conn_);this.tx_=this.conn_,this.rx_=this.conn_,this.secondaryConn_=null,this.isHealthy_=!1,setTimeout(function(){t.conn_&&t.conn_.open(n,r)},Math.floor(0));var i=e.healthyTimeout||0;0<i&&(this.healthyTimeout_=M(function(){t.healthyTimeout_=null,t.isHealthy_||(t.conn_&&102400<t.conn_.bytesReceived?(t.log_("Connection exceeded healthy timeout but has received "+t.conn_.bytesReceived+" bytes.  Marking connection healthy."),t.isHealthy_=!0,t.conn_.markConnectionHealthy()):t.conn_&&10240<t.conn_.bytesSent?t.log_("Connection exceeded healthy timeout but has sent "+t.conn_.bytesSent+" bytes.  Leaving connection alive."):(t.log_("Closing unhealthy connection after timeout."),t.close()))},Math.floor(i)))},t.prototype.nextTransportId_=function(){return"c:"+this.id+":"+this.connectionCount++},t.prototype.disconnReceiver_=function(e){var n=this;return function(t){e===n.conn_?n.onConnectionLost_(t):e===n.secondaryConn_?(n.log_("Secondary connection lost."),n.onSecondaryConnectionLost_()):n.log_("closing an old connection")}},t.prototype.connReceiver_=function(e){var n=this;return function(t){2!=n.state_&&(e===n.rx_?n.onPrimaryMessageReceived_(t):e===n.secondaryConn_?n.onSecondaryMessageReceived_(t):n.log_("message on old connection"))}},t.prototype.sendRequest=function(t){var e={t:"d",d:t};this.sendData_(e)},t.prototype.tryCleanupConnection=function(){this.tx_===this.secondaryConn_&&this.rx_===this.secondaryConn_&&(this.log_("cleaning up and promoting a connection: "+this.secondaryConn_.connId),this.conn_=this.secondaryConn_,this.secondaryConn_=null)},t.prototype.onSecondaryControl_=function(t){if("t"in t){var e=t.t;"a"===e?this.upgradeIfSecondaryHealthy_():"r"===e?(this.log_("Got a reset on secondary, closing it"),this.secondaryConn_.close(),this.tx_!==this.secondaryConn_&&this.rx_!==this.secondaryConn_||this.close()):"o"===e&&(this.log_("got pong on secondary."),this.secondaryResponsesRequired_--,this.upgradeIfSecondaryHealthy_())}},t.prototype.onSecondaryMessageReceived_=function(t){var e=A("t",t),n=A("d",t);if("c"==e)this.onSecondaryControl_(n);else{if("d"!=e)throw new Error("Unknown protocol layer: "+e);this.pendingDataMessages.push(n)}},t.prototype.upgradeIfSecondaryHealthy_=function(){this.secondaryResponsesRequired_<=0?(this.log_("Secondary connection is healthy."),this.isHealthy_=!0,this.secondaryConn_.markConnectionHealthy(),this.proceedWithUpgrade_()):(this.log_("sending ping on secondary."),this.secondaryConn_.send({t:"c",d:{t:"p",d:{}}}))},t.prototype.proceedWithUpgrade_=function(){this.secondaryConn_.start(),this.log_("sending client ack on secondary"),this.secondaryConn_.send({t:"c",d:{t:"a",d:{}}}),this.log_("Ending transmission on primary"),this.conn_.send({t:"c",d:{t:"n",d:{}}}),this.tx_=this.secondaryConn_,this.tryCleanupConnection()},t.prototype.onPrimaryMessageReceived_=function(t){var e=A("t",t),n=A("d",t);"c"==e?this.onControl_(n):"d"==e&&this.onDataMessage_(n)},t.prototype.onDataMessage_=function(t){this.onPrimaryResponse_(),this.onMessage_(t)},t.prototype.onPrimaryResponse_=function(){this.isHealthy_||(this.primaryResponsesRequired_--,this.primaryResponsesRequired_<=0&&(this.log_("Primary connection is healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()))},t.prototype.onControl_=function(t){var e=A("t",t);if("d"in t){var n=t.d;if("h"===e)this.onHandshake_(n);else if("n"===e){this.log_("recvd end transmission on primary"),this.rx_=this.secondaryConn_;for(var r=0;r<this.pendingDataMessages.length;++r)this.onDataMessage_(this.pendingDataMessages[r]);this.pendingDataMessages=[],this.tryCleanupConnection()}else"s"===e?this.onConnectionShutdown_(n):"r"===e?this.onReset_(n):"e"===e?b("Server Error: "+n):"o"===e?(this.log_("got pong on primary."),this.onPrimaryResponse_(),this.sendPingOnPrimaryIfNecessary_()):b("Unknown control packet command: "+e)}},t.prototype.onHandshake_=function(t){var e=t.ts,n=t.v,r=t.h;this.sessionId=t.s,this.repoInfo_.updateHost(r),0==this.state_&&(this.conn_.start(),this.onConnectionEstablished_(this.conn_,e),"5"!==n&&E("Protocol version mismatch detected"),this.tryStartUpgrade_())},t.prototype.tryStartUpgrade_=function(){var t=this.transportManager_.upgradeTransport();t&&this.startUpgrade_(t)},t.prototype.startUpgrade_=function(t){var e=this;this.secondaryConn_=new t(this.nextTransportId_(),this.repoInfo_,this.sessionId),this.secondaryResponsesRequired_=t.responsesRequiredToBeHealthy||0;var n=this.connReceiver_(this.secondaryConn_),r=this.disconnReceiver_(this.secondaryConn_);this.secondaryConn_.open(n,r),M(function(){e.secondaryConn_&&(e.log_("Timed out trying to upgrade."),e.secondaryConn_.close())},Math.floor(6e4))},t.prototype.onReset_=function(t){this.log_("Reset packet received.  New host: "+t),this.repoInfo_.updateHost(t),1===this.state_?this.close():(this.closeConnections_(),this.start_())},t.prototype.onConnectionEstablished_=function(t,e){var n=this;this.log_("Realtime connection established."),this.conn_=t,this.state_=1,this.onReady_&&(this.onReady_(e,this.sessionId),this.onReady_=null),0===this.primaryResponsesRequired_?(this.log_("Primary connection is healthy."),this.isHealthy_=!0):M(function(){n.sendPingOnPrimaryIfNecessary_()},Math.floor(5e3))},t.prototype.sendPingOnPrimaryIfNecessary_=function(){this.isHealthy_||1!==this.state_||(this.log_("sending ping on primary."),this.sendData_({t:"c",d:{t:"p",d:{}}}))},t.prototype.onSecondaryConnectionLost_=function(){var t=this.secondaryConn_;this.secondaryConn_=null,this.tx_!==t&&this.rx_!==t||this.close()},t.prototype.onConnectionLost_=function(t){this.conn_=null,t||0!==this.state_?1===this.state_&&this.log_("Realtime connection lost."):(this.log_("Realtime connection failed."),this.repoInfo_.isCacheableHost()&&(h.remove("host:"+this.repoInfo_.host),this.repoInfo_.internalHost=this.repoInfo_.host)),this.close()},t.prototype.onConnectionShutdown_=function(t){this.log_("Connection shutdown command received. Shutting down..."),this.onKill_&&(this.onKill_(t),this.onKill_=null),this.onDisconnect_=null,this.close()},t.prototype.sendData_=function(t){if(1!==this.state_)throw"Connection is not connected";this.tx_.send(t)},t.prototype.close=function(){2!==this.state_&&(this.log_("Closing realtime connection."),this.state_=2,this.closeConnections_(),this.onDisconnect_&&(this.onDisconnect_(),this.onDisconnect_=null))},t.prototype.closeConnections_=function(){this.log_("Shutting down all connections"),this.conn_&&(this.conn_.close(),this.conn_=null),this.secondaryConn_&&(this.secondaryConn_.close(),this.secondaryConn_=null),this.healthyTimeout_&&(clearTimeout(this.healthyTimeout_),this.healthyTimeout_=null)},t}(),Ue=function(){function t(){}return t.prototype.put=function(t,e,n,r){},t.prototype.merge=function(t,e,n,r){},t.prototype.refreshAuthToken=function(t){},t.prototype.onDisconnectPut=function(t,e,n){},t.prototype.onDisconnectMerge=function(t,e,n){},t.prototype.onDisconnectCancel=function(t,e){},t.prototype.reportStats=function(t){},t}(),We=function(s){function h(t,e,n,r,i,o){var a=s.call(this)||this;if(a.repoInfo_=t,a.onDataUpdate_=e,a.onConnectStatus_=n,a.onServerInfoUpdate_=r,a.authTokenProvider_=i,a.authOverride_=o,a.id=h.nextPersistentConnectionId_++,a.log_=m("p:"+a.id+":"),a.interruptReasons_={},a.listens_={},a.outstandingPuts_=[],a.outstandingPutCount_=0,a.onDisconnectRequestQueue_=[],a.connected_=!1,a.reconnectDelay_=1e3,a.maxReconnectDelay_=3e5,a.securityDebugCallback_=null,a.lastSessionId=null,a.establishConnectionTimer_=null,a.visible_=!1,a.requestCBHash_={},a.requestNumber_=0,a.realtime_=null,a.authToken_=null,a.forceTokenRefresh_=!1,a.invalidAuthTokenCount_=0,a.firstConnection_=!0,a.lastConnectionAttemptTime_=null,a.lastConnectionEstablishedTime_=null,o&&!_.isNodeSdk())throw new Error("Auth override specified in options, but not supported on non Node.js platforms");return a.scheduleConnect_(0),ke.getInstance().on("visible",a.onVisible_,a),-1===t.host.indexOf("fblocal")&&Re.getInstance().on("online",a.onOnline_,a),a}return o.__extends(h,s),h.prototype.sendRequest=function(t,e,n){var r=++this.requestNumber_,i={r:r,a:t,b:e};this.log_(_.stringify(i)),_.assert(this.connected_,"sendRequest call when we're not connected not allowed."),this.realtime_.sendRequest(i),n&&(this.requestCBHash_[r]=n)},h.prototype.listen=function(t,e,n,r){var i=t.queryIdentifier(),o=t.path.toString();this.log_("Listen called for "+o+" "+i),this.listens_[o]=this.listens_[o]||{},_.assert(t.getQueryParams().isDefault()||!t.getQueryParams().loadsAllData(),"listen() called for non-default but complete query"),_.assert(!this.listens_[o][i],"listen() called twice for same path/queryId.");var a={onComplete:r,hashFn:e,query:t,tag:n};this.listens_[o][i]=a,this.connected_&&this.sendListen_(a)},h.prototype.sendListen_=function(r){var i=this,o=r.query,a=o.path.toString(),s=o.queryIdentifier();this.log_("Listen on "+a+" for "+s);var t={p:a};r.tag&&(t.q=o.queryObject(),t.t=r.tag),t.h=r.hashFn(),this.sendRequest("q",t,function(t){var e=t.d,n=t.s;h.warnOnListenWarnings_(e,o),(i.listens_[a]&&i.listens_[a][s])===r&&(i.log_("listen response",t),"ok"!==n&&i.removeListen_(a,s),r.onComplete&&r.onComplete(n,e))})},h.warnOnListenWarnings_=function(t,e){if(t&&"object"==typeof t&&_.contains(t,"w")){var n=_.safeGet(t,"w");if(Array.isArray(n)&&~n.indexOf("no_index")){var r='".indexOn": "'+e.getQueryParams().getIndex().toString()+'"',i=e.path.toString();E("Using an unspecified index. Your data will be downloaded and filtered on the client. Consider adding "+r+" at "+i+" to your security rules for better performance.")}}},h.prototype.refreshAuthToken=function(t){this.authToken_=t,this.log_("Auth token refreshed"),this.authToken_?this.tryAuth():this.connected_&&this.sendRequest("unauth",{},function(){}),this.reduceReconnectDelayIfAdminCredential_(t)},h.prototype.reduceReconnectDelayIfAdminCredential_=function(t){(t&&40===t.length||_.isAdmin(t))&&(this.log_("Admin auth credential detected.  Reducing max reconnect time."),this.maxReconnectDelay_=3e4)},h.prototype.tryAuth=function(){var r=this;if(this.connected_&&this.authToken_){var i=this.authToken_,t=_.isValidFormat(i)?"auth":"gauth",e={cred:i};null===this.authOverride_?e.noauth=!0:"object"==typeof this.authOverride_&&(e.authvar=this.authOverride_),this.sendRequest(t,e,function(t){var e=t.s,n=t.d||"error";r.authToken_===i&&("ok"===e?r.invalidAuthTokenCount_=0:r.onAuthRevoked_(e,n))})}},h.prototype.unlisten=function(t,e){var n=t.path.toString(),r=t.queryIdentifier();this.log_("Unlisten called for "+n+" "+r),_.assert(t.getQueryParams().isDefault()||!t.getQueryParams().loadsAllData(),"unlisten() called for non-default but complete query"),this.removeListen_(n,r)&&this.connected_&&this.sendUnlisten_(n,r,t.queryObject(),e)},h.prototype.sendUnlisten_=function(t,e,n,r){this.log_("Unlisten on "+t+" for "+e);var i={p:t};r&&(i.q=n,i.t=r),this.sendRequest("n",i)},h.prototype.onDisconnectPut=function(t,e,n){this.connected_?this.sendOnDisconnect_("o",t,e,n):this.onDisconnectRequestQueue_.push({pathString:t,action:"o",data:e,onComplete:n})},h.prototype.onDisconnectMerge=function(t,e,n){this.connected_?this.sendOnDisconnect_("om",t,e,n):this.onDisconnectRequestQueue_.push({pathString:t,action:"om",data:e,onComplete:n})},h.prototype.onDisconnectCancel=function(t,e){this.connected_?this.sendOnDisconnect_("oc",t,null,e):this.onDisconnectRequestQueue_.push({pathString:t,action:"oc",data:null,onComplete:e})},h.prototype.sendOnDisconnect_=function(t,e,n,r){var i={p:e,d:n};this.log_("onDisconnect "+t,i),this.sendRequest(t,i,function(t){r&&setTimeout(function(){r(t.s,t.d)},Math.floor(0))})},h.prototype.put=function(t,e,n,r){this.putInternal("p",t,e,n,r)},h.prototype.merge=function(t,e,n,r){this.putInternal("m",t,e,n,r)},h.prototype.putInternal=function(t,e,n,r,i){var o={p:e,d:n};void 0!==i&&(o.h=i),this.outstandingPuts_.push({action:t,request:o,onComplete:r}),this.outstandingPutCount_++;var a=this.outstandingPuts_.length-1;this.connected_?this.sendPut_(a):this.log_("Buffering put: "+e)},h.prototype.sendPut_=function(e){var n=this,r=this.outstandingPuts_[e].action,t=this.outstandingPuts_[e].request,i=this.outstandingPuts_[e].onComplete;this.outstandingPuts_[e].queued=this.connected_,this.sendRequest(r,t,function(t){n.log_(r+" response",t),delete n.outstandingPuts_[e],n.outstandingPutCount_--,0===n.outstandingPutCount_&&(n.outstandingPuts_=[]),i&&i(t.s,t.d)})},h.prototype.reportStats=function(t){var n=this;if(this.connected_){var e={c:t};this.log_("reportStats",e),this.sendRequest("s",e,function(t){if("ok"!==t.s){var e=t.d;n.log_("reportStats","Error sending stats: "+e)}})}},h.prototype.onDataMessage_=function(t){if("r"in t){this.log_("from server: "+_.stringify(t));var e=t.r,n=this.requestCBHash_[e];n&&(delete this.requestCBHash_[e],n(t.b))}else{if("error"in t)throw"A server-side error has occurred: "+t.error;"a"in t&&this.onDataPush_(t.a,t.b)}},h.prototype.onDataPush_=function(t,e){this.log_("handleServerMessage",t,e),"d"===t?this.onDataUpdate_(e.p,e.d,!1,e.t):"m"===t?this.onDataUpdate_(e.p,e.d,!0,e.t):"c"===t?this.onListenRevoked_(e.p,e.q):"ac"===t?this.onAuthRevoked_(e.s,e.d):"sd"===t?this.onSecurityDebugPacket_(e):b("Unrecognized action received from server: "+_.stringify(t)+"\nAre you using the latest client?")},h.prototype.onReady_=function(t,e){this.log_("connection ready"),this.connected_=!0,this.lastConnectionEstablishedTime_=(new Date).getTime(),this.handleTimestamp_(t),this.lastSessionId=e,this.firstConnection_&&this.sendConnectStats_(),this.restoreState_(),this.firstConnection_=!1,this.onConnectStatus_(!0)},h.prototype.scheduleConnect_=function(t){var e=this;_.assert(!this.realtime_,"Scheduling a connect when we're already connected/ing?"),this.establishConnectionTimer_&&clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=setTimeout(function(){e.establishConnectionTimer_=null,e.establishConnection_()},Math.floor(t))},h.prototype.onVisible_=function(t){t&&!this.visible_&&this.reconnectDelay_===this.maxReconnectDelay_&&(this.log_("Window became visible.  Reducing delay."),this.reconnectDelay_=1e3,this.realtime_||this.scheduleConnect_(0)),this.visible_=t},h.prototype.onOnline_=function(t){t?(this.log_("Browser went online."),this.reconnectDelay_=1e3,this.realtime_||this.scheduleConnect_(0)):(this.log_("Browser went offline.  Killing connection."),this.realtime_&&this.realtime_.close())},h.prototype.onRealtimeDisconnect_=function(){if(this.log_("data client disconnected"),this.connected_=!1,this.realtime_=null,this.cancelSentTransactions_(),this.requestCBHash_={},this.shouldReconnect_()){if(this.visible_){if(this.lastConnectionEstablishedTime_){3e4<(new Date).getTime()-this.lastConnectionEstablishedTime_&&(this.reconnectDelay_=1e3),this.lastConnectionEstablishedTime_=null}}else this.log_("Window isn't visible.  Delaying reconnect."),this.reconnectDelay_=this.maxReconnectDelay_,this.lastConnectionAttemptTime_=(new Date).getTime();var t=(new Date).getTime()-this.lastConnectionAttemptTime_,e=Math.max(0,this.reconnectDelay_-t);e=Math.random()*e,this.log_("Trying to reconnect in "+e+"ms"),this.scheduleConnect_(e),this.reconnectDelay_=Math.min(this.maxReconnectDelay_,1.3*this.reconnectDelay_)}this.onConnectStatus_(!1)},h.prototype.establishConnection_=function(){if(this.shouldReconnect_()){this.log_("Making a connection attempt"),this.lastConnectionAttemptTime_=(new Date).getTime(),this.lastConnectionEstablishedTime_=null;var e=this.onDataMessage_.bind(this),n=this.onReady_.bind(this),r=this.onRealtimeDisconnect_.bind(this),i=this.id+":"+h.nextConnectionId_++,o=this,a=this.lastSessionId,s=!1,u=null,c=function(){u?u.close():(s=!0,r())};this.realtime_={close:c,sendRequest:function(t){_.assert(u,"sendRequest call when we're not connected not allowed."),u.sendRequest(t)}};var t=this.forceTokenRefresh_;this.forceTokenRefresh_=!1,this.authTokenProvider_.getToken(t).then(function(t){s?y("getToken() completed but was canceled"):(y("getToken() completed. Creating connection."),o.authToken_=t&&t.accessToken,u=new je(i,o.repoInfo_,e,n,r,function(t){E(t+" ("+o.repoInfo_.toString()+")"),o.interrupt("server_kill")},a))}).then(null,function(t){o.log_("Failed to get token: "+t),s||(_.CONSTANTS.NODE_ADMIN&&E(t),c())})}},h.prototype.interrupt=function(t){y("Interrupting connection for reason: "+t),this.interruptReasons_[t]=!0,this.realtime_?this.realtime_.close():(this.establishConnectionTimer_&&(clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=null),this.connected_&&this.onRealtimeDisconnect_())},h.prototype.resume=function(t){y("Resuming connection for reason: "+t),delete this.interruptReasons_[t],_.isEmpty(this.interruptReasons_)&&(this.reconnectDelay_=1e3,this.realtime_||this.scheduleConnect_(0))},h.prototype.handleTimestamp_=function(t){var e=t-(new Date).getTime();this.onServerInfoUpdate_({serverTimeOffset:e})},h.prototype.cancelSentTransactions_=function(){for(var t=0;t<this.outstandingPuts_.length;t++){var e=this.outstandingPuts_[t];e&&"h"in e.request&&e.queued&&(e.onComplete&&e.onComplete("disconnect"),delete this.outstandingPuts_[t],this.outstandingPutCount_--)}0===this.outstandingPutCount_&&(this.outstandingPuts_=[])},h.prototype.onListenRevoked_=function(t,e){var n;n=e?e.map(function(t){return N(t)}).join("$"):"default";var r=this.removeListen_(t,n);r&&r.onComplete&&r.onComplete("permission_denied")},h.prototype.removeListen_=function(t,e){var n,r=new F(t).toString();return void 0!==this.listens_[r]?(n=this.listens_[r][e],delete this.listens_[r][e],0===_.getCount(this.listens_[r])&&delete this.listens_[r]):n=void 0,n},h.prototype.onAuthRevoked_=function(t,e){y("Auth token revoked: "+t+"/"+e),this.authToken_=null,this.forceTokenRefresh_=!0,this.realtime_.close(),"invalid_token"!==t&&"permission_denied"!==t||(this.invalidAuthTokenCount_++,3<=this.invalidAuthTokenCount_&&(this.reconnectDelay_=3e4,this.authTokenProvider_.notifyForInvalidToken()))},h.prototype.onSecurityDebugPacket_=function(t){this.securityDebugCallback_?this.securityDebugCallback_(t):"msg"in t&&console.log("FIREBASE: "+t.msg.replace("\n","\nFIREBASE: "))},h.prototype.restoreState_=function(){var n=this;this.tryAuth(),_.forEach(this.listens_,function(t,e){_.forEach(e,function(t,e){n.sendListen_(e)})});for(var t=0;t<this.outstandingPuts_.length;t++)this.outstandingPuts_[t]&&this.sendPut_(t);for(;this.onDisconnectRequestQueue_.length;){var e=this.onDisconnectRequestQueue_.shift();this.sendOnDisconnect_(e.action,e.pathString,e.data,e.onComplete)}},h.prototype.sendConnectStats_=function(){var t={},e="js";_.CONSTANTS.NODE_ADMIN?e="admin_node":_.CONSTANTS.NODE_CLIENT&&(e="node"),t["sdk."+e+"."+c.SDK_VERSION.replace(/\./g,"-")]=1,_.isMobileCordova()?t["framework.cordova"]=1:_.isReactNative()&&(t["framework.reactnative"]=1),this.reportStats(t)},h.prototype.shouldReconnect_=function(){var t=Re.getInstance().currentlyOnline();return _.isEmpty(this.interruptReasons_)&&t},h.nextPersistentConnectionId_=0,h.nextConnectionId_=0,h}(Ue),Be=function(i){function c(t,e,n){var r=i.call(this)||this;return r.repoInfo_=t,r.onDataUpdate_=e,r.authTokenProvider_=n,r.log_=m("p:rest:"),r.listens_={},r}return o.__extends(c,i),c.prototype.reportStats=function(t){throw new Error("Method not implemented.")},c.getListenId_=function(t,e){return void 0!==e?"tag$"+e:(_.assert(t.getQueryParams().isDefault(),"should have a tag if it's not a default query."),t.path.toString())},c.prototype.listen=function(t,e,r,i){var o=this,a=t.path.toString();this.log_("Listen called for "+a+" "+t.queryIdentifier());var s=c.getListenId_(t,r),u={};this.listens_[s]=u;var n=t.getQueryParams().toRestQueryStringParameters();this.restRequest_(a+".json",n,function(t,e){var n=e;(404===t&&(t=n=null),null===t&&o.onDataUpdate_(a,n,!1,r),_.safeGet(o.listens_,s)===u)&&i(t?401==t?"permission_denied":"rest_error:"+t:"ok",null)})},c.prototype.unlisten=function(t,e){var n=c.getListenId_(t,e);delete this.listens_[n]},c.prototype.refreshAuthToken=function(t){},c.prototype.restRequest_=function(i,o,a){var s=this;void 0===o&&(o={}),o.format="export",this.authTokenProvider_.getToken(!1).then(function(t){var e=t&&t.accessToken;e&&(o.auth=e);var n=(s.repoInfo_.secure?"https://":"http://")+s.repoInfo_.host+i+"?ns="+s.repoInfo_.namespace+_.querystring(o);s.log_("Sending REST request for "+n);var r=new XMLHttpRequest;r.onreadystatechange=function(){if(a&&4===r.readyState){s.log_("REST Response for "+n+" received. status:",r.status,"response:",r.responseText);var t=null;if(200<=r.status&&r.status<300){try{t=_.jsonEval(r.responseText)}catch(t){E("Failed to parse JSON response for "+n+": "+r.responseText)}a(null,t)}else 401!==r.status&&404!==r.status&&E("Got unsuccessful REST response for "+n+" Status: "+r.status),a(r.status);a=null}},r.open("GET",n,!0),r.send()})},c}(Ue),Ve="repo_interrupt",qe=function(){function t(t,e,n){var a=this;this.repoInfo_=t,this.app=n,this.dataUpdateCount=0,this.statsListener_=null,this.eventQueue_=new xe,this.nextWriteId_=1,this.interceptServerDataCallback_=null,this.onDisconnect_=new zt,this.persistentConnection_=null;var r=new Ee(n);if(this.stats_=Te.getCollection(t),e||function(){return 0<=("object"==typeof window&&window.navigator&&window.navigator.userAgent||"").search(/googlebot|google webmaster tools|bingbot|yahoo! slurp|baiduspider|yandexbot|duckduckbot/i)}())this.server_=new Be(this.repoInfo_,this.onDataUpdate_.bind(this),r),setTimeout(this.onConnectStatus_.bind(this,!0),0);else{var i=n.options.databaseAuthVariableOverride;if(null!=i){if("object"!=typeof i)throw new Error("Only objects are supported for option databaseAuthVariableOverride");try{_.stringify(i)}catch(t){throw new Error("Invalid authOverride provided: "+t)}}this.persistentConnection_=new We(this.repoInfo_,this.onDataUpdate_.bind(this),this.onConnectStatus_.bind(this),this.onServerInfoUpdate_.bind(this),r,i),this.server_=this.persistentConnection_}r.addTokenChangeListener(function(t){a.server_.refreshAuthToken(t)}),this.statsReporter_=Te.getOrCreateReporter(t,function(){return new Ie(a.stats_,a.server_)}),this.transactions_init_(),this.infoData_=new we,this.infoSyncTree_=new be({startListening:function(t,e,n,r){var i=[],o=a.infoData_.getNode(t.path);return o.isEmpty()||(i=a.infoSyncTree_.applyServerOverwrite(t.path,o),setTimeout(function(){r("ok")},0)),i},stopListening:function(){}}),this.updateInfo_("connected",!1),this.serverSyncTree_=new be({startListening:function(r,t,e,i){return a.server_.listen(r,e,t,function(t,e){var n=i(t,e);a.eventQueue_.raiseEventsForChangedPath(r.path,n)}),[]},stopListening:function(t,e){a.server_.unlisten(t,e)}})}return t.prototype.toString=function(){return(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host},t.prototype.name=function(){return this.repoInfo_.namespace},t.prototype.serverTime=function(){var t=this.infoData_.getNode(new F(".info/serverTimeOffset")).val()||0;return(new Date).getTime()+t},t.prototype.generateServerValues=function(){return function(t){return(t=t||{}).timestamp=t.timestamp||(new Date).getTime(),t}({timestamp:this.serverTime()})},t.prototype.onDataUpdate_=function(t,e,n,r){this.dataUpdateCount++;var i=new F(t);e=this.interceptServerDataCallback_?this.interceptServerDataCallback_(t,e):e;var o=[];if(r)if(n){var a=_.map(e,function(t){return Mt(t)});o=this.serverSyncTree_.applyTaggedQueryMerge(i,a,r)}else{var s=Mt(e);o=this.serverSyncTree_.applyTaggedQueryOverwrite(i,s,r)}else if(n){var u=_.map(e,function(t){return Mt(t)});o=this.serverSyncTree_.applyServerMerge(i,u)}else{var c=Mt(e);o=this.serverSyncTree_.applyServerOverwrite(i,c)}var h=i;0<o.length&&(h=this.rerunTransactions_(i)),this.eventQueue_.raiseEventsForChangedPath(h,o)},t.prototype.interceptServerData_=function(t){this.interceptServerDataCallback_=t},t.prototype.onConnectStatus_=function(t){this.updateInfo_("connected",t),!1===t&&this.runOnDisconnectEvents_()},t.prototype.onServerInfoUpdate_=function(t){var n=this;R(t,function(t,e){n.updateInfo_(e,t)})},t.prototype.updateInfo_=function(t,e){var n=new F("/.info/"+t),r=Mt(e);this.infoData_.updateSnapshot(n,r);var i=this.infoSyncTree_.applyServerOverwrite(n,r);this.eventQueue_.raiseEventsForChangedPath(n,i)},t.prototype.getNextWriteId_=function(){return this.nextWriteId_++},t.prototype.setWithPriority=function(i,t,e,o){var a=this;this.log_("set",{path:i.toString(),value:t,priority:e});var n=this.generateServerValues(),r=Mt(t,e),s=Xt(r,n),u=this.getNextWriteId_(),c=this.serverSyncTree_.applyUserOverwrite(i,s,u,!0);this.eventQueue_.queueEvents(c),this.server_.put(i.toString(),r.val(!0),function(t,e){var n="ok"===t;n||E("set at "+i+" failed: "+t);var r=a.serverSyncTree_.ackUserWrite(u,!n);a.eventQueue_.raiseEventsForChangedPath(i,r),a.callOnCompleteCallback(o,t,e)});var h=this.abortTransactions_(i);this.rerunTransactions_(h),this.eventQueue_.raiseEventsForChangedPath(h,[])},t.prototype.update=function(o,t,a){var s=this;this.log_("update",{path:o.toString(),value:t});var r=!0,i=this.generateServerValues(),u={};if(_.forEach(t,function(t,e){r=!1;var n=Mt(e);u[t]=Xt(n,i)}),r)y("update() called with empty data.  Don't do anything."),this.callOnCompleteCallback(a,"ok");else{var c=this.getNextWriteId_(),e=this.serverSyncTree_.applyUserMerge(o,u,c);this.eventQueue_.queueEvents(e),this.server_.merge(o.toString(),t,function(t,e){var n="ok"===t;n||E("update at "+o+" failed: "+t);var r=s.serverSyncTree_.ackUserWrite(c,!n),i=0<r.length?s.rerunTransactions_(o):o;s.eventQueue_.raiseEventsForChangedPath(i,r),s.callOnCompleteCallback(a,t,e)}),_.forEach(t,function(t){var e=s.abortTransactions_(o.child(t));s.rerunTransactions_(e)}),this.eventQueue_.raiseEventsForChangedPath(o,[])}},t.prototype.runOnDisconnectEvents_=function(){var r=this;this.log_("onDisconnectEvents");var t=this.generateServerValues(),e=function(t,n){var r=new zt;return t.forEachTree(new F(""),function(t,e){r.remember(t,Xt(e,n))}),r}(this.onDisconnect_,t),i=[];e.forEachTree(F.Empty,function(t,e){i=i.concat(r.serverSyncTree_.applyServerOverwrite(t,e));var n=r.abortTransactions_(t);r.rerunTransactions_(n)}),this.onDisconnect_=new zt,this.eventQueue_.raiseEventsForChangedPath(F.Empty,i)},t.prototype.onDisconnectCancel=function(n,r){var i=this;this.server_.onDisconnectCancel(n.toString(),function(t,e){"ok"===t&&i.onDisconnect_.forget(n),i.callOnCompleteCallback(r,t,e)})},t.prototype.onDisconnectSet=function(n,t,r){var i=this,o=Mt(t);this.server_.onDisconnectPut(n.toString(),o.val(!0),function(t,e){"ok"===t&&i.onDisconnect_.remember(n,o),i.callOnCompleteCallback(r,t,e)})},t.prototype.onDisconnectSetWithPriority=function(n,t,e,r){var i=this,o=Mt(t,e);this.server_.onDisconnectPut(n.toString(),o.val(!0),function(t,e){"ok"===t&&i.onDisconnect_.remember(n,o),i.callOnCompleteCallback(r,t,e)})},t.prototype.onDisconnectUpdate=function(r,n,i){var o=this;if(_.isEmpty(n))return y("onDisconnect().update() called with empty data.  Don't do anything."),void this.callOnCompleteCallback(i,"ok");this.server_.onDisconnectMerge(r.toString(),n,function(t,e){"ok"===t&&_.forEach(n,function(t,e){var n=Mt(e);o.onDisconnect_.remember(r.child(t),n)}),o.callOnCompleteCallback(i,t,e)})},t.prototype.addEventCallbackForQuery=function(t,e){var n;n=".info"===t.path.getFront()?this.infoSyncTree_.addEventRegistration(t,e):this.serverSyncTree_.addEventRegistration(t,e),this.eventQueue_.raiseEventsAtPath(t.path,n)},t.prototype.removeEventCallbackForQuery=function(t,e){var n;n=".info"===t.path.getFront()?this.infoSyncTree_.removeEventRegistration(t,e):this.serverSyncTree_.removeEventRegistration(t,e),this.eventQueue_.raiseEventsAtPath(t.path,n)},t.prototype.interrupt=function(){this.persistentConnection_&&this.persistentConnection_.interrupt(Ve)},t.prototype.resume=function(){this.persistentConnection_&&this.persistentConnection_.resume(Ve)},t.prototype.stats=function(t){if(void 0===t&&(t=!1),"undefined"!=typeof console){var e;e=t?(this.statsListener_||(this.statsListener_=new Ce(this.stats_)),this.statsListener_.get()):this.stats_.get();var r=Object.keys(e).reduce(function(t,e){return Math.max(e.length,t)},0);_.forEach(e,function(t,e){for(var n=t.length;n<r+2;n++)t+=" ";console.log(t+e)})}},t.prototype.statsIncrementCounter=function(t){this.stats_.incrementCounter(t),this.statsReporter_.includeStat(t)},t.prototype.log_=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n="";this.persistentConnection_&&(n=this.persistentConnection_.id+":"),y.apply(void 0,[n].concat(t))},t.prototype.callOnCompleteCallback=function(r,i,o){r&&L(function(){if("ok"==i)r(null);else{var t=(i||"error").toUpperCase(),e=t;o&&(e+=": "+o);var n=new Error(e);n.code=t,r(n)}})},Object.defineProperty(t.prototype,"database",{get:function(){return this.__database||(this.__database=new tn(this))},enumerable:!0,configurable:!0}),t}(),He=function(){function e(t){this.indexedFilter_=new ue(t.getIndex()),this.index_=t.getIndex(),this.startPost_=e.getStartPost_(t),this.endPost_=e.getEndPost_(t)}return e.prototype.getStartPost=function(){return this.startPost_},e.prototype.getEndPost=function(){return this.endPost_},e.prototype.matches=function(t){return this.index_.compare(this.getStartPost(),t)<=0&&this.index_.compare(t,this.getEndPost())<=0},e.prototype.updateChild=function(t,e,n,r,i,o){return this.matches(new ct(e,n))||(n=Pt.EMPTY_NODE),this.indexedFilter_.updateChild(t,e,n,r,i,o)},e.prototype.updateFullNode=function(t,e,n){e.isLeafNode()&&(e=Pt.EMPTY_NODE);var r=e.withIndex(this.index_);r=r.updatePriority(Pt.EMPTY_NODE);var i=this;return e.forEachChild(wt,function(t,e){i.matches(new ct(t,e))||(r=r.updateImmediateChild(t,Pt.EMPTY_NODE))}),this.indexedFilter_.updateFullNode(t,r,n)},e.prototype.updatePriority=function(t,e){return t},e.prototype.filtersNodes=function(){return!0},e.prototype.getIndexedFilter=function(){return this.indexedFilter_},e.prototype.getIndex=function(){return this.index_},e.getStartPost_=function(t){if(t.hasStart()){var e=t.getIndexStartName();return t.getIndex().makePost(t.getIndexStartValue(),e)}return t.getIndex().minPost()},e.getEndPost_=function(t){if(t.hasEnd()){var e=t.getIndexEndName();return t.getIndex().makePost(t.getIndexEndValue(),e)}return t.getIndex().maxPost()},e}(),Ke=function(){function t(t){this.rangedFilter_=new He(t),this.index_=t.getIndex(),this.limit_=t.getLimit(),this.reverse_=!t.isViewFromLeft()}return t.prototype.updateChild=function(t,e,n,r,i,o){return this.rangedFilter_.matches(new ct(e,n))||(n=Pt.EMPTY_NODE),t.getImmediateChild(e).equals(n)?t:t.numChildren()<this.limit_?this.rangedFilter_.getIndexedFilter().updateChild(t,e,n,r,i,o):this.fullLimitUpdateChild_(t,e,n,i,o)},t.prototype.updateFullNode=function(t,e,n){var r;if(e.isLeafNode()||e.isEmpty())r=Pt.EMPTY_NODE.withIndex(this.index_);else if(2*this.limit_<e.numChildren()&&e.isIndexed(this.index_)){r=Pt.EMPTY_NODE.withIndex(this.index_);var i=void 0;i=this.reverse_?e.getReverseIteratorFrom(this.rangedFilter_.getEndPost(),this.index_):e.getIteratorFrom(this.rangedFilter_.getStartPost(),this.index_);for(var o=0;i.hasNext()&&o<this.limit_;){var a=i.getNext();if(!(this.reverse_?this.index_.compare(this.rangedFilter_.getStartPost(),a)<=0:this.index_.compare(a,this.rangedFilter_.getEndPost())<=0))break;r=r.updateImmediateChild(a.name,a.node),o++}}else{r=(r=e.withIndex(this.index_)).updatePriority(Pt.EMPTY_NODE);var s=void 0,u=void 0,c=void 0;i=void 0;if(this.reverse_){i=r.getReverseIterator(this.index_),s=this.rangedFilter_.getEndPost(),u=this.rangedFilter_.getStartPost();var h=this.index_.getCompare();c=function(t,e){return h(e,t)}}else i=r.getIterator(this.index_),s=this.rangedFilter_.getStartPost(),u=this.rangedFilter_.getEndPost(),c=this.index_.getCompare();o=0;for(var l=!1;i.hasNext();){a=i.getNext();!l&&c(s,a)<=0&&(l=!0),l&&o<this.limit_&&c(a,u)<=0?o++:r=r.updateImmediateChild(a.name,Pt.EMPTY_NODE)}}return this.rangedFilter_.getIndexedFilter().updateFullNode(t,r,n)},t.prototype.updatePriority=function(t,e){return t},t.prototype.filtersNodes=function(){return!0},t.prototype.getIndexedFilter=function(){return this.rangedFilter_.getIndexedFilter()},t.prototype.getIndex=function(){return this.index_},t.prototype.fullLimitUpdateChild_=function(t,e,n,r,i){var o;if(this.reverse_){var a=this.index_.getCompare();o=function(t,e){return a(e,t)}}else o=this.index_.getCompare();var s=t;_.assert(s.numChildren()==this.limit_,"");var u=new ct(e,n),c=this.reverse_?s.getFirstChild(this.index_):s.getLastChild(this.index_),h=this.rangedFilter_.matches(u);if(s.hasChild(e)){for(var l=s.getImmediateChild(e),f=r.getChildAfterChild(this.index_,c,this.reverse_);null!=f&&(f.name==e||s.hasChild(f.name));)f=r.getChildAfterChild(this.index_,f,this.reverse_);var p=null==f?1:o(f,u);if(h&&!n.isEmpty()&&0<=p)return null!=i&&i.trackChildChange(se.childChangedChange(e,n,l)),s.updateImmediateChild(e,n);null!=i&&i.trackChildChange(se.childRemovedChange(e,l));var d=s.updateImmediateChild(e,Pt.EMPTY_NODE);return null!=f&&this.rangedFilter_.matches(f)?(null!=i&&i.trackChildChange(se.childAddedChange(f.name,f.node)),d.updateImmediateChild(f.name,f.node)):d}return n.isEmpty()?t:h&&0<=o(c,u)?(null!=i&&(i.trackChildChange(se.childRemovedChange(c.name,c.node)),i.trackChildChange(se.childAddedChange(e,n))),s.updateImmediateChild(e,n).updateImmediateChild(c.name,Pt.EMPTY_NODE)):t},t}(),Ge=function(){function r(){this.limitSet_=!1,this.startSet_=!1,this.startNameSet_=!1,this.endSet_=!1,this.endNameSet_=!1,this.limit_=0,this.viewFrom_="",this.indexStartValue_=null,this.indexStartName_="",this.indexEndValue_=null,this.indexEndName_="",this.index_=wt}return r.prototype.hasStart=function(){return this.startSet_},r.prototype.isViewFromLeft=function(){return""===this.viewFrom_?this.startSet_:this.viewFrom_===r.WIRE_PROTOCOL_CONSTANTS_.VIEW_FROM_LEFT},r.prototype.getIndexStartValue=function(){return _.assert(this.startSet_,"Only valid if start has been set"),this.indexStartValue_},r.prototype.getIndexStartName=function(){return _.assert(this.startSet_,"Only valid if start has been set"),this.startNameSet_?this.indexStartName_:T},r.prototype.hasEnd=function(){return this.endSet_},r.prototype.getIndexEndValue=function(){return _.assert(this.endSet_,"Only valid if end has been set"),this.indexEndValue_},r.prototype.getIndexEndName=function(){return _.assert(this.endSet_,"Only valid if end has been set"),this.endNameSet_?this.indexEndName_:C},r.prototype.hasLimit=function(){return this.limitSet_},r.prototype.hasAnchoredLimit=function(){return this.limitSet_&&""!==this.viewFrom_},r.prototype.getLimit=function(){return _.assert(this.limitSet_,"Only valid if limit has been set"),this.limit_},r.prototype.getIndex=function(){return this.index_},r.prototype.copy_=function(){var t=new r;return t.limitSet_=this.limitSet_,t.limit_=this.limit_,t.startSet_=this.startSet_,t.indexStartValue_=this.indexStartValue_,t.startNameSet_=this.startNameSet_,t.indexStartName_=this.indexStartName_,t.endSet_=this.endSet_,t.indexEndValue_=this.indexEndValue_,t.endNameSet_=this.endNameSet_,t.indexEndName_=this.indexEndName_,t.index_=this.index_,t.viewFrom_=this.viewFrom_,t},r.prototype.limit=function(t){var e=this.copy_();return e.limitSet_=!0,e.limit_=t,e.viewFrom_="",e},r.prototype.limitToFirst=function(t){var e=this.copy_();return e.limitSet_=!0,e.limit_=t,e.viewFrom_=r.WIRE_PROTOCOL_CONSTANTS_.VIEW_FROM_LEFT,e},r.prototype.limitToLast=function(t){var e=this.copy_();return e.limitSet_=!0,e.limit_=t,e.viewFrom_=r.WIRE_PROTOCOL_CONSTANTS_.VIEW_FROM_RIGHT,e},r.prototype.startAt=function(t,e){var n=this.copy_();return n.startSet_=!0,void 0===t&&(t=null),n.indexStartValue_=t,n.indexStartName_=null!=e?(n.startNameSet_=!0,e):(n.startNameSet_=!1,""),n},r.prototype.endAt=function(t,e){var n=this.copy_();return n.endSet_=!0,void 0===t&&(t=null),n.indexEndValue_=t,n.indexEndName_=void 0!==e?(n.endNameSet_=!0,e):(n.endNameSet_=!1,""),n},r.prototype.orderBy=function(t){var e=this.copy_();return e.index_=t,e},r.prototype.getQueryObject=function(){var t=r.WIRE_PROTOCOL_CONSTANTS_,e={};if(this.startSet_&&(e[t.INDEX_START_VALUE]=this.indexStartValue_,this.startNameSet_&&(e[t.INDEX_START_NAME]=this.indexStartName_)),this.endSet_&&(e[t.INDEX_END_VALUE]=this.indexEndValue_,this.endNameSet_&&(e[t.INDEX_END_NAME]=this.indexEndName_)),this.limitSet_){e[t.LIMIT]=this.limit_;var n=this.viewFrom_;""===n&&(n=this.isViewFromLeft()?t.VIEW_FROM_LEFT:t.VIEW_FROM_RIGHT),e[t.VIEW_FROM]=n}return this.index_!==wt&&(e[t.INDEX]=this.index_.toString()),e},r.prototype.loadsAllData=function(){return!(this.startSet_||this.endSet_||this.limitSet_)},r.prototype.isDefault=function(){return this.loadsAllData()&&this.index_==wt},r.prototype.getNodeFilter=function(){return this.loadsAllData()?new ue(this.getIndex()):this.hasLimit()?new Ke(this):new He(this)},r.prototype.toRestQueryStringParameters=function(){var t,e=r.REST_QUERY_CONSTANTS_,n={};return this.isDefault()||(t=this.index_===wt?e.PRIORITY_INDEX:this.index_===Ut?e.VALUE_INDEX:this.index_===ft?e.KEY_INDEX:(_.assert(this.index_ instanceof Wt,"Unrecognized index type!"),this.index_.toString()),n[e.ORDER_BY]=_.stringify(t),this.startSet_&&(n[e.START_AT]=_.stringify(this.indexStartValue_),this.startNameSet_&&(n[e.START_AT]+=","+_.stringify(this.indexStartName_))),this.endSet_&&(n[e.END_AT]=_.stringify(this.indexEndValue_),this.endNameSet_&&(n[e.END_AT]+=","+_.stringify(this.indexEndName_))),this.limitSet_&&(this.isViewFromLeft()?n[e.LIMIT_TO_FIRST]=this.limit_:n[e.LIMIT_TO_LAST]=this.limit_)),n},r.WIRE_PROTOCOL_CONSTANTS_={INDEX_START_VALUE:"sp",INDEX_START_NAME:"sn",INDEX_END_VALUE:"ep",INDEX_END_NAME:"en",LIMIT:"l",VIEW_FROM:"vf",VIEW_FROM_LEFT:"l",VIEW_FROM_RIGHT:"r",INDEX:"i"},r.REST_QUERY_CONSTANTS_={ORDER_BY:"orderBy",PRIORITY_INDEX:"$priority",VALUE_INDEX:"$value",KEY_INDEX:"$key",START_AT:"startAt",END_AT:"endAt",LIMIT_TO_FIRST:"limitToFirst",LIMIT_TO_LAST:"limitToLast"},r.DEFAULT=new r,r}(),Qe=function(n){function e(t,e){if(!(t instanceof qe))throw new Error("new Reference() no longer supported - use app.database().");return n.call(this,t,e,Ge.DEFAULT,!1)||this}return o.__extends(e,n),e.prototype.getKey=function(){return _.validateArgCount("Reference.key",0,0,arguments.length),this.path.isEmpty()?null:this.path.getBack()},e.prototype.child=function(t){return _.validateArgCount("Reference.child",1,1,arguments.length),"number"==typeof t?t=String(t):t instanceof F||(null===this.path.getFront()?function(t,e,n,r){n&&(n=n.replace(/^\/*\.info(\/|$)/,"/")),rt(t,e,n,r)}("Reference.child",1,t,!1):rt("Reference.child",1,t,!1)),new e(this.repo,this.path.child(t))},e.prototype.getParent=function(){_.validateArgCount("Reference.parent",0,0,arguments.length);var t=this.path.parent();return null===t?null:new e(this.repo,t)},e.prototype.getRoot=function(){_.validateArgCount("Reference.root",0,0,arguments.length);for(var t=this;null!==t.getParent();)t=t.getParent();return t},e.prototype.databaseProp=function(){return this.repo.database},e.prototype.set=function(t,e){_.validateArgCount("Reference.set",1,2,arguments.length),it("Reference.set",this.path),J("Reference.set",1,t,this.path,!1),_.validateCallback("Reference.set",2,e,!0);var n=new _.Deferred;return this.repo.setWithPriority(this.path,t,null,n.wrapCallback(e)),n.promise},e.prototype.update=function(t,e){if(_.validateArgCount("Reference.update",1,2,arguments.length),it("Reference.update",this.path),Array.isArray(t)){for(var n={},r=0;r<t.length;++r)n[""+r]=t[r];t=n,E("Passing an Array to Firebase.update() is deprecated. Use set() if you want to overwrite the existing data, or an Object with integer keys if you really do want to only update some of the children.")}Z("Reference.update",1,t,this.path,!1),_.validateCallback("Reference.update",2,e,!0);var i=new _.Deferred;return this.repo.update(this.path,t,i.wrapCallback(e)),i.promise},e.prototype.setWithPriority=function(t,e,n){if(_.validateArgCount("Reference.setWithPriority",2,3,arguments.length),it("Reference.setWithPriority",this.path),J("Reference.setWithPriority",1,t,this.path,!1),tt("Reference.setWithPriority",2,e,!1),_.validateCallback("Reference.setWithPriority",3,n,!0),".length"===this.getKey()||".keys"===this.getKey())throw"Reference.setWithPriority failed: "+this.getKey()+" is a read-only object.";var r=new _.Deferred;return this.repo.setWithPriority(this.path,t,e,r.wrapCallback(n)),r.promise},e.prototype.remove=function(t){return _.validateArgCount("Reference.remove",0,1,arguments.length),it("Reference.remove",this.path),_.validateCallback("Reference.remove",1,t,!0),this.set(null,t)},e.prototype.transaction=function(t,r,e){if(_.validateArgCount("Reference.transaction",1,3,arguments.length),it("Reference.transaction",this.path),_.validateCallback("Reference.transaction",1,t,!1),_.validateCallback("Reference.transaction",2,r,!0),function(t,e,n,r){if((!r||void 0!==n)&&"boolean"!=typeof n)throw new Error(_.errorPrefix(t,e,r)+"must be a boolean.")}("Reference.transaction",3,e,!0),".length"===this.getKey()||".keys"===this.getKey())throw"Reference.transaction failed: "+this.getKey()+" is a read-only object.";void 0===e&&(e=!0);var i=new _.Deferred;"function"==typeof r&&i.promise.catch(function(){});return this.repo.startTransaction(this.path,t,function(t,e,n){t?i.reject(t):i.resolve(new st(e,n)),"function"==typeof r&&r(t,e,n)},e),i.promise},e.prototype.setPriority=function(t,e){_.validateArgCount("Reference.setPriority",1,2,arguments.length),it("Reference.setPriority",this.path),tt("Reference.setPriority",1,t,!1),_.validateCallback("Reference.setPriority",2,e,!0);var n=new _.Deferred;return this.repo.setWithPriority(this.path.child(".priority"),t,null,n.wrapCallback(e)),n.promise},e.prototype.push=function(t,e){_.validateArgCount("Reference.push",0,2,arguments.length),it("Reference.push",this.path),J("Reference.push",1,t,this.path,!0),_.validateCallback("Reference.push",2,e,!0);var n,r=this.repo.serverTime(),i=ut(r),o=this.child(i),a=this.child(i);return n=null!=t?o.set(t,e).then(function(){return a}):Promise.resolve(a),o.then=n.then.bind(n),o.catch=n.then.bind(n,void 0),"function"==typeof e&&n.catch(function(){}),o},e.prototype.onDisconnect=function(){return it("Reference.onDisconnect",this.path),new at(this.repo,this.path)},Object.defineProperty(e.prototype,"database",{get:function(){return this.databaseProp()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"key",{get:function(){return this.getKey()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"parent",{get:function(){return this.getParent()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"root",{get:function(){return this.getRoot()},enumerable:!0,configurable:!0}),e}(Gt);Gt.__referenceConstructor=Qe,ye.__referenceConstructor=Qe;var ze,Ye=function(){return function(){this.children={},this.childCount=0,this.value=null}}(),Xe=function(){function i(t,e,n){void 0===t&&(t=""),void 0===e&&(e=null),void 0===n&&(n=new Ye),this.name_=t,this.parent_=e,this.node_=n}return i.prototype.subTree=function(t){for(var e,n=t instanceof F?t:new F(t),r=this;null!==(e=n.getFront());){r=new i(e,r,_.safeGet(r.node_.children,e)||new Ye),n=n.popFront()}return r},i.prototype.getValue=function(){return this.node_.value},i.prototype.setValue=function(t){_.assert(void 0!==t,"Cannot set value to undefined"),this.node_.value=t,this.updateParents_()},i.prototype.clear=function(){this.node_.value=null,this.node_.children={},this.node_.childCount=0,this.updateParents_()},i.prototype.hasChildren=function(){return 0<this.node_.childCount},i.prototype.isEmpty=function(){return null===this.getValue()&&!this.hasChildren()},i.prototype.forEachChild=function(n){var r=this;_.forEach(this.node_.children,function(t,e){n(new i(t,r,e))})},i.prototype.forEachDescendant=function(e,t,n){t&&!n&&e(this),this.forEachChild(function(t){t.forEachDescendant(e,!0,n)}),t&&n&&e(this)},i.prototype.forEachAncestor=function(t,e){for(var n=e?this:this.parent();null!==n;){if(t(n))return!0;n=n.parent()}return!1},i.prototype.forEachImmediateDescendantWithValue=function(e){this.forEachChild(function(t){null!==t.getValue()?e(t):t.forEachImmediateDescendantWithValue(e)})},i.prototype.path=function(){return new F(null===this.parent_?this.name_:this.parent_.path()+"/"+this.name_)},i.prototype.name=function(){return this.name_},i.prototype.parent=function(){return this.parent_},i.prototype.updateParents_=function(){null!==this.parent_&&this.parent_.updateChild_(this.name_,this)},i.prototype.updateChild_=function(t,e){var n=e.isEmpty(),r=_.contains(this.node_.children,t);n&&r?(delete this.node_.children[t],this.node_.childCount--,this.updateParents_()):n||r||(this.node_.children[t]=e.node_,this.node_.childCount++,this.updateParents_())},i}();!function(t){t[t.RUN=0]="RUN",t[t.SENT=1]="SENT",t[t.COMPLETED=2]="COMPLETED",t[t.SENT_NEEDS_ABORT=3]="SENT_NEEDS_ABORT",t[t.NEEDS_ABORT=4]="NEEDS_ABORT"}(ze||(ze={})),qe.MAX_TRANSACTION_RETRIES_=25,qe.prototype.transactions_init_=function(){this.transactionQueueTree_=new Xe},qe.prototype.startTransaction=function(t,e,n,r){this.log_("transaction on "+t);var i=function(){},o=new Qe(this,t);o.on("value",i);var a={path:t,update:e,onComplete:n,status:null,order:g(),applyLocally:r,retryCount:0,unwatcher:function(){o.off("value",i)},abortReason:null,currentWriteId:null,currentInputSnapshot:null,currentOutputSnapshotRaw:null,currentOutputSnapshotResolved:null},s=this.getLatestState_(t);a.currentInputSnapshot=s;var u=a.update(s.val());if(void 0===u){if(a.unwatcher(),a.currentOutputSnapshotRaw=null,a.currentOutputSnapshotResolved=null,a.onComplete){var c=new Bt(a.currentInputSnapshot,new Qe(this,a.path),wt);a.onComplete(null,!1,c)}}else{$("transaction failed: Data returned ",u,a.path),a.status=ze.RUN;var h=this.transactionQueueTree_.subTree(t),l=h.getValue()||[];l.push(a),h.setValue(l);var f=void 0;if("object"==typeof u&&null!==u&&_.contains(u,".priority"))f=_.safeGet(u,".priority"),_.assert(X(f),"Invalid priority returned by transaction. Priority must be a valid string, finite number, server value, or null.");else f=(this.serverSyncTree_.calcCompleteEventCache(t)||Pt.EMPTY_NODE).getPriority().val();f=f;var p=this.generateServerValues(),d=Mt(u,f),v=Xt(d,p);a.currentOutputSnapshotRaw=d,a.currentOutputSnapshotResolved=v,a.currentWriteId=this.getNextWriteId_();var y=this.serverSyncTree_.applyUserOverwrite(t,v,a.currentWriteId,a.applyLocally);this.eventQueue_.raiseEventsForChangedPath(t,y),this.sendReadyTransactions_()}},qe.prototype.getLatestState_=function(t,e){return this.serverSyncTree_.calcCompleteEventCache(t,e)||Pt.EMPTY_NODE},qe.prototype.sendReadyTransactions_=function(t){var e=this;if(void 0===t&&(t=this.transactionQueueTree_),t||this.pruneCompletedTransactionsBelowNode_(t),null!==t.getValue()){var n=this.buildTransactionQueue_(t);_.assert(0<n.length,"Sending zero length transaction queue"),n.every(function(t){return t.status===ze.RUN})&&this.sendTransactionQueue_(t.path(),n)}else t.hasChildren()&&t.forEachChild(function(t){e.sendReadyTransactions_(t)})},qe.prototype.sendTransactionQueue_=function(s,u){for(var c=this,t=u.map(function(t){return t.currentWriteId}),e=this.getLatestState_(s,t),n=e,r=e.hash(),i=0;i<u.length;i++){var o=u[i];_.assert(o.status===ze.RUN,"tryToSendTransactionQueue_: items in queue should all be run."),o.status=ze.SENT,o.retryCount++;var a=F.relativePath(s,o.path);n=n.updateChild(a,o.currentOutputSnapshotRaw)}var h=n.val(!0),l=s;this.server_.put(l.toString(),h,function(t){c.log_("transaction put response",{path:l.toString(),status:t});var e=[];if("ok"===t){for(var n=[],r=0;r<u.length;r++){if(u[r].status=ze.COMPLETED,e=e.concat(c.serverSyncTree_.ackUserWrite(u[r].currentWriteId)),u[r].onComplete){var i=u[r].currentOutputSnapshotResolved,o=new Qe(c,u[r].path),a=new Bt(i,o,wt);n.push(u[r].onComplete.bind(null,null,!0,a))}u[r].unwatcher()}c.pruneCompletedTransactionsBelowNode_(c.transactionQueueTree_.subTree(s)),c.sendReadyTransactions_(),c.eventQueue_.raiseEventsForChangedPath(s,e);for(r=0;r<n.length;r++)L(n[r])}else{if("datastale"===t)for(r=0;r<u.length;r++)u[r].status===ze.SENT_NEEDS_ABORT?u[r].status=ze.NEEDS_ABORT:u[r].status=ze.RUN;else{E("transaction at "+l.toString()+" failed: "+t);for(r=0;r<u.length;r++)u[r].status=ze.NEEDS_ABORT,u[r].abortReason=t}c.rerunTransactions_(s)}},r)},qe.prototype.rerunTransactions_=function(t){var e=this.getAncestorTransactionNode_(t),n=e.path(),r=this.buildTransactionQueue_(e);return this.rerunTransactionQueue_(r,n),n},qe.prototype.rerunTransactionQueue_=function(t,e){if(0!==t.length){for(var n=[],r=[],i=t.filter(function(t){return t.status===ze.RUN}).map(function(t){return t.currentWriteId}),o=0;o<t.length;o++){var a=t[o],s=F.relativePath(e,a.path),u=!1,c=void 0;if(_.assert(null!==s,"rerunTransactionsUnderNode_: relativePath should not be null."),a.status===ze.NEEDS_ABORT)u=!0,c=a.abortReason,r=r.concat(this.serverSyncTree_.ackUserWrite(a.currentWriteId,!0));else if(a.status===ze.RUN)if(a.retryCount>=qe.MAX_TRANSACTION_RETRIES_)u=!0,c="maxretry",r=r.concat(this.serverSyncTree_.ackUserWrite(a.currentWriteId,!0));else{var h=this.getLatestState_(a.path,i);a.currentInputSnapshot=h;var l=t[o].update(h.val());if(void 0!==l){$("transaction failed: Data returned ",l,a.path);var f=Mt(l);"object"==typeof l&&null!=l&&_.contains(l,".priority")||(f=f.updatePriority(h.getPriority()));var p=a.currentWriteId,d=this.generateServerValues(),v=Xt(f,d);a.currentOutputSnapshotRaw=f,a.currentOutputSnapshotResolved=v,a.currentWriteId=this.getNextWriteId_(),i.splice(i.indexOf(p),1),r=(r=r.concat(this.serverSyncTree_.applyUserOverwrite(a.path,v,a.currentWriteId,a.applyLocally))).concat(this.serverSyncTree_.ackUserWrite(p,!0))}else u=!0,c="nodata",r=r.concat(this.serverSyncTree_.ackUserWrite(a.currentWriteId,!0))}if(this.eventQueue_.raiseEventsForChangedPath(e,r),r=[],u&&(t[o].status=ze.COMPLETED,function(t){setTimeout(t,Math.floor(0))}(t[o].unwatcher),t[o].onComplete))if("nodata"===c){var y=new Qe(this,t[o].path),g=t[o].currentInputSnapshot,m=new Bt(g,y,wt);n.push(t[o].onComplete.bind(null,null,!1,m))}else n.push(t[o].onComplete.bind(null,new Error(c),!1,null))}this.pruneCompletedTransactionsBelowNode_(this.transactionQueueTree_);for(o=0;o<n.length;o++)L(n[o]);this.sendReadyTransactions_()}},qe.prototype.getAncestorTransactionNode_=function(t){for(var e,n=this.transactionQueueTree_;null!==(e=t.getFront())&&null===n.getValue();)n=n.subTree(e),t=t.popFront();return n},qe.prototype.buildTransactionQueue_=function(t){var e=[];return this.aggregateTransactionQueuesForNode_(t,e),e.sort(function(t,e){return t.order-e.order}),e},qe.prototype.aggregateTransactionQueuesForNode_=function(t,e){var n=this,r=t.getValue();if(null!==r)for(var i=0;i<r.length;i++)e.push(r[i]);t.forEachChild(function(t){n.aggregateTransactionQueuesForNode_(t,e)})},qe.prototype.pruneCompletedTransactionsBelowNode_=function(t){var e=this,n=t.getValue();if(n){for(var r=0,i=0;i<n.length;i++)n[i].status!==ze.COMPLETED&&(n[r]=n[i],r++);n.length=r,t.setValue(0<n.length?n:null)}t.forEachChild(function(t){e.pruneCompletedTransactionsBelowNode_(t)})},qe.prototype.abortTransactions_=function(t){var e=this,n=this.getAncestorTransactionNode_(t).path(),r=this.transactionQueueTree_.subTree(t);return r.forEachAncestor(function(t){e.abortTransactionsOnNode_(t)}),this.abortTransactionsOnNode_(r),r.forEachDescendant(function(t){e.abortTransactionsOnNode_(t)}),n},qe.prototype.abortTransactionsOnNode_=function(t){var e=t.getValue();if(null!==e){for(var n=[],r=[],i=-1,o=0;o<e.length;o++)if(e[o].status===ze.SENT_NEEDS_ABORT);else if(e[o].status===ze.SENT)_.assert(i===o-1,"All SENT items should be at beginning of queue."),e[i=o].status=ze.SENT_NEEDS_ABORT,e[o].abortReason="set";else if(_.assert(e[o].status===ze.RUN,"Unexpected transaction status in abort"),e[o].unwatcher(),r=r.concat(this.serverSyncTree_.ackUserWrite(e[o].currentWriteId,!0)),e[o].onComplete){n.push(e[o].onComplete.bind(null,new Error("set"),!1,null))}-1===i?t.setValue(null):e.length=i+1,this.eventQueue_.raiseEventsForChangedPath(t.path(),r);for(o=0;o<n.length;o++)L(n[o])}};var Je,$e="databaseURL",Ze=function(){function t(){this.repos_={},this.useRestClient_=!1}return t.getInstance=function(){return Je||(Je=new t),Je},t.prototype.interrupt=function(){for(var t in this.repos_)for(var e in this.repos_[t])this.repos_[t][e].interrupt()},t.prototype.resume=function(){for(var t in this.repos_)for(var e in this.repos_[t])this.repos_[t][e].resume()},t.prototype.databaseFromApp=function(t,e){var n=e||t.options[$e];void 0===n&&w("Can't determine Firebase Database URL.  Be sure to include "+$e+" option when calling firebase.initializeApp().");var r=H(n),i=r.repoInfo;return ot("Invalid Firebase Database URL",1,r),r.path.isEmpty()||w("Database URL must point to the root of a Firebase Database (not including a child path)."),this.createRepo(i,t).database},t.prototype.deleteRepo=function(t){var e=_.safeGet(this.repos_,t.app.name);e&&_.safeGet(e,t.repoInfo_.toURLString())===t||w("Database "+t.app.name+"("+t.repoInfo_+") has already been deleted."),t.interrupt(),delete e[t.repoInfo_.toURLString()]},t.prototype.createRepo=function(t,e){var n=_.safeGet(this.repos_,e.name);n||(n={},this.repos_[e.name]=n);var r=_.safeGet(n,t.toURLString());return r&&w("Database initialized multiple times. Please make sure the format of the database URL matches with each database() call."),r=new qe(t,this.useRestClient_,e),n[t.toURLString()]=r},t.prototype.forceRestClient=function(t){this.useRestClient_=t},t}(),tn=function(){function t(t){(this.repo_=t)instanceof qe||w("Don't call new Database() directly - please use firebase.database()."),this.root_=new Qe(t,F.Empty),this.INTERNAL=new en(this)}return Object.defineProperty(t.prototype,"app",{get:function(){return this.repo_.app},enumerable:!0,configurable:!0}),t.prototype.ref=function(t){return this.checkDeleted_("ref"),_.validateArgCount("database.ref",0,1,arguments.length),t instanceof Qe?this.refFromURL(t.toString()):void 0!==t?this.root_.child(t):this.root_},t.prototype.refFromURL=function(t){var e="database.refFromURL";this.checkDeleted_(e),_.validateArgCount(e,1,1,arguments.length);var n=H(t);ot(e,1,n);var r=n.repoInfo;return r.host!==this.repo_.repoInfo_.host&&w(e+": Host name does not match the current database: (found "+r.host+" but expected "+this.repo_.repoInfo_.host+")"),this.ref(n.path.toString())},t.prototype.checkDeleted_=function(t){null===this.repo_&&w("Cannot call "+t+" on a deleted database.")},t.prototype.goOffline=function(){_.validateArgCount("database.goOffline",0,0,arguments.length),this.checkDeleted_("goOffline"),this.repo_.interrupt()},t.prototype.goOnline=function(){_.validateArgCount("database.goOnline",0,0,arguments.length),this.checkDeleted_("goOnline"),this.repo_.resume()},t.ServerValue={TIMESTAMP:{".sv":"timestamp"}},t}(),en=function(){function t(t){this.database=t}return t.prototype.delete=function(){return o.__awaiter(this,void 0,void 0,function(){return o.__generator(this,function(t){return this.database.checkDeleted_("delete"),Ze.getInstance().deleteRepo(this.database.repo_),this.database.repo_=null,this.database.root_=null,this.database.INTERNAL=null,this.database=null,[2]})})},t}(),nn=Object.freeze({forceLongPolling:function(){Me.forceDisallow(),Pe.forceAllow()},forceWebSockets:function(){Pe.forceDisallow()},isWebSocketsAvailable:function(){return Me.isAvailable()},setSecurityDebugCallback:function(t,e){t.repo.persistentConnection_.securityDebugCallback_=e},stats:function(t,e){t.repo.stats(e)},statsIncrementCounter:function(t,e){t.repo.statsIncrementCounter(e)},dataUpdateCount:function(t){return t.repo.dataUpdateCount},interceptServerData:function(t,e){return t.repo.interceptServerData_(e)}}),rn=We;We.prototype.simpleListen=function(t,e){this.sendRequest("q",{p:t},e)},We.prototype.echo=function(t,e){this.sendRequest("echo",{d:t},e)};var on=je,an=B,sn=Object.freeze({DataConnection:rn,RealTimeConnection:on,hijackHash:function(i){var o=We.prototype.put;return We.prototype.put=function(t,e,n,r){void 0!==r&&(r=i()),o.call(this,t,e,n,r)},function(){We.prototype.put=o}},ConnectionTarget:an,queryIdentifier:function(t){return t.queryIdentifier()},listens:function(t){return t.repo.persistentConnection_.listens_},forceRestClient:function(t){Ze.getInstance().forceRestClient(t)}}),un=tn.ServerValue;function cn(t){var e=t.INTERNAL.registerService("database",function(t,e,n){return Ze.getInstance().databaseFromApp(t,n)},{Reference:Qe,Query:Gt,Database:tn,enableLogging:v,INTERNAL:nn,ServerValue:un,TEST_ACCESS:sn},null,!0);_.isNodeSdk()&&(hn.exports=e)}cn(c),ln.registerDatabase=cn,ln.Database=tn,ln.Query=Gt,ln.Reference=Qe,ln.enableLogging=v,ln.ServerValue=un,ln.DataSnapshot=Bt,ln.OnDisconnect=at}).call(this,fn(166))},function(t,e,n){"use strict";n.r(e),n.d(e,"setLogLevel",function(){return u}),n.d(e,"Logger",function(){return s}),n.d(e,"LogLevel",function(){return o});var o,r=[];!function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"}(o||(o={}));var i=o.INFO,a=function(t,e){for(var n=[],r=2;r<arguments.length;r++)n[r-2]=arguments[r];if(!(e<t.logLevel)){var i=(new Date).toISOString();switch(e){case o.DEBUG:case o.VERBOSE:console.log.apply(console,["["+i+"]  "+t.name+":"].concat(n));break;case o.INFO:console.info.apply(console,["["+i+"]  "+t.name+":"].concat(n));break;case o.WARN:console.warn.apply(console,["["+i+"]  "+t.name+":"].concat(n));break;case o.ERROR:console.error.apply(console,["["+i+"]  "+t.name+":"].concat(n));break;default:throw new Error("Attempted to log a message with an invalid logType (value: "+e+")")}}},s=function(){function t(t){this.name=t,this._logLevel=i,this._logHandler=a,r.push(this)}return Object.defineProperty(t.prototype,"logLevel",{get:function(){return this._logLevel},set:function(t){if(!(t in o))throw new TypeError("Invalid value assigned to `logLevel`");this._logLevel=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"logHandler",{get:function(){return this._logHandler},set:function(t){if("function"!=typeof t)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=t},enumerable:!0,configurable:!0}),t.prototype.debug=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._logHandler.apply(this,[this,o.DEBUG].concat(t))},t.prototype.log=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._logHandler.apply(this,[this,o.VERBOSE].concat(t))},t.prototype.info=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._logHandler.apply(this,[this,o.INFO].concat(t))},t.prototype.warn=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._logHandler.apply(this,[this,o.WARN].concat(t))},t.prototype.error=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._logHandler.apply(this,[this,o.ERROR].concat(t))},t}();function u(e){r.forEach(function(t){t.logLevel=e})}},function(t,e,n){"use strict";(function(t){var e=n(1),Mh=n.n(e);(function(){var t,u=u||{},h=this;function c(t){return"string"==typeof t}function n(t){return"boolean"==typeof t}function o(){}function s(t){var e=typeof t;if("object"==e){if(!t)return"null";if(t instanceof Array)return"array";if(t instanceof Object)return e;var n=Object.prototype.toString.call(t);if("[object Window]"==n)return"object";if("[object Array]"==n||"number"==typeof t.length&&void 0!==t.splice&&void 0!==t.propertyIsEnumerable&&!t.propertyIsEnumerable("splice"))return"array";if("[object Function]"==n||void 0!==t.call&&void 0!==t.propertyIsEnumerable&&!t.propertyIsEnumerable("call"))return"function"}else if("function"==e&&void 0===t.call)return"object";return e}function r(t){return null===t}function l(t){return"array"==s(t)}function f(t){var e=s(t);return"array"==e||"object"==e&&"number"==typeof t.length}function a(t){return"function"==s(t)}function p(t){var e=typeof t;return"object"==e&&null!=t||"function"==e}var i="closure_uid_"+(1e9*Math.random()>>>0),d=0;function v(t,e,n){return t.call.apply(t.bind,arguments)}function y(e,n,t){if(!e)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var t=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(t,r),e.apply(n,t)}}return function(){return e.apply(n,arguments)}}function g(t,e,n){return(g=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?v:y).apply(null,arguments)}function m(e,t){var n=Array.prototype.slice.call(arguments,1);return function(){var t=n.slice();return t.push.apply(t,arguments),e.apply(this,t)}}var _=Date.now||function(){return+new Date};function e(t,o){function e(){}e.prototype=o.prototype,t.ob=o.prototype,t.prototype=new e,(t.prototype.constructor=t).ed=function(t,e,n){for(var r=Array(arguments.length-2),i=2;i<arguments.length;i++)r[i-2]=arguments[i];return o.prototype[e].apply(t,r)}}function b(t){t.prototype.then=t.prototype.then,t.prototype.$goog_Thenable=!0}function w(t){if(!t)return!1;try{return!!t.$goog_Thenable}catch(t){return!1}}function E(t){if(Error.captureStackTrace)Error.captureStackTrace(this,E);else{var e=Error().stack;e&&(this.stack=e)}t&&(this.message=String(t))}function S(t,e){for(var n="",r=(t=t.split("%s")).length-1,i=0;i<r;i++)n+=t[i]+(i<e.length?e[i]:"%s");E.call(this,n+t[r])}function T(t,e){throw new S("Failure"+(t?": "+t:""),Array.prototype.slice.call(arguments,1))}function C(t,e){this.c=t,this.f=e,this.b=0,this.a=null}function I(t,e){t.f(e),t.b<100&&(t.b++,e.next=t.a,t.a=e)}function x(){this.b=this.a=null}e(E,Error),E.prototype.name="CustomError",e(S,E),S.prototype.name="AssertionError",C.prototype.get=function(){if(0<this.b){this.b--;var t=this.a;this.a=t.next,t.next=null}else t=this.c();return t};var A=new C(function(){return new k},function(t){t.reset()});function N(){var t=ft,e=null;return t.a&&(e=t.a,t.a=t.a.next,t.a||(t.b=null),e.next=null),e}function k(){this.next=this.b=this.a=null}x.prototype.add=function(t,e){var n=A.get();n.set(t,e),this.b?this.b.next=n:this.a=n,this.b=n},k.prototype.set=function(t,e){this.a=t,this.b=e,this.next=null},k.prototype.reset=function(){this.next=this.b=this.a=null};var R=Array.prototype.indexOf?function(t,e){return Array.prototype.indexOf.call(t,e,void 0)}:function(t,e){if(c(t))return c(e)&&1==e.length?t.indexOf(e,0):-1;for(var n=0;n<t.length;n++)if(n in t&&t[n]===e)return n;return-1},O=Array.prototype.forEach?function(t,e,n){Array.prototype.forEach.call(t,e,n)}:function(t,e,n){for(var r=t.length,i=c(t)?t.split(""):t,o=0;o<r;o++)o in i&&e.call(n,i[o],o,t)};var P=Array.prototype.map?function(t,e){return Array.prototype.map.call(t,e,void 0)}:function(t,e){for(var n=t.length,r=Array(n),i=c(t)?t.split(""):t,o=0;o<n;o++)o in i&&(r[o]=e.call(void 0,i[o],o,t));return r},D=Array.prototype.some?function(t,e){return Array.prototype.some.call(t,e,void 0)}:function(t,e){for(var n=t.length,r=c(t)?t.split(""):t,i=0;i<n;i++)if(i in r&&e.call(void 0,r[i],i,t))return!0;return!1};function L(t,e){return 0<=R(t,e)}function M(t,e){var n;return(n=0<=(e=R(t,e)))&&Array.prototype.splice.call(t,e,1),n}function F(n,r){!function(t,e){var n=t.length,r=c(t)?t.split(""):t;for(--n;0<=n;--n)n in r&&e.call(void 0,r[n],n,t)}(n,function(t,e){r.call(void 0,t,e,n)&&1==Array.prototype.splice.call(n,e,1).length&&0})}function j(t){return Array.prototype.concat.apply([],arguments)}function U(t){var e=t.length;if(0<e){for(var n=Array(e),r=0;r<e;r++)n[r]=t[r];return n}return[]}function W(t,e){for(var n=t.split("%s"),r="",i=Array.prototype.slice.call(arguments,1);i.length&&1<n.length;)r+=n.shift()+i.shift();return r+n.join("%s")}var B=String.prototype.trim?function(t){return t.trim()}:function(t){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(t)[1]};function V(t){return X.test(t)&&(-1!=t.indexOf("&")&&(t=t.replace(H,"&amp;")),-1!=t.indexOf("<")&&(t=t.replace(K,"&lt;")),-1!=t.indexOf(">")&&(t=t.replace(G,"&gt;")),-1!=t.indexOf('"')&&(t=t.replace(Q,"&quot;")),-1!=t.indexOf("'")&&(t=t.replace(z,"&#39;")),-1!=t.indexOf("\0")&&(t=t.replace(Y,"&#0;"))),t}var q,H=/&/g,K=/</g,G=/>/g,Q=/"/g,z=/'/g,Y=/\x00/g,X=/[\x00&<>"']/;function J(t,e){return-1!=t.indexOf(e)}function $(t,e){return t<e?-1:e<t?1:0}t:{var Z=h.navigator;if(Z){var tt=Z.userAgent;if(tt){q=tt;break t}}q=""}function et(t){return J(q,t)}function nt(t,e){for(var n in t)e.call(void 0,t[n],n,t)}function rt(t){for(var e in t)return!1;return!0}function it(t){var e,n={};for(e in t)n[e]=t[e];return n}var ot,at,st="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function ut(t,e){for(var n,r,i=1;i<arguments.length;i++){for(n in r=arguments[i])t[n]=r[n];for(var o=0;o<st.length;o++)n=st[o],Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}}function ct(t){h.setTimeout(function(){throw t},0)}function ht(t,e){at||function(){if(h.Promise&&h.Promise.resolve){var t=h.Promise.resolve(void 0);at=function(){t.then(pt)}}else at=function(){var t=pt;!a(h.setImmediate)||h.Window&&h.Window.prototype&&!et("Edge")&&h.Window.prototype.setImmediate==h.setImmediate?(ot||(ot=function(){var t=h.MessageChannel;if(void 0===t&&"undefined"!=typeof window&&window.postMessage&&window.addEventListener&&!et("Presto")&&(t=function(){var t=document.createElement("IFRAME");t.style.display="none",t.src="",document.documentElement.appendChild(t);var e=t.contentWindow;(t=e.document).open(),t.write(""),t.close();var n="callImmediate"+Math.random(),r="file:"==e.location.protocol?"*":e.location.protocol+"//"+e.location.host;t=g(function(t){"*"!=r&&t.origin!=r||t.data!=n||this.port1.onmessage()},this),e.addEventListener("message",t,!1),this.port1={},this.port2={postMessage:function(){e.postMessage(n,r)}}}),void 0===t||et("Trident")||et("MSIE"))return"undefined"!=typeof document&&"onreadystatechange"in document.createElement("SCRIPT")?function(t){var e=document.createElement("SCRIPT");e.onreadystatechange=function(){e.onreadystatechange=null,e.parentNode.removeChild(e),e=null,t(),t=null},document.documentElement.appendChild(e)}:function(t){h.setTimeout(t,0)};var e=new t,n={},r=n;return e.port1.onmessage=function(){if(void 0!==n.next){var t=(n=n.next).wb;n.wb=null,t()}},function(t){r.next={wb:t},r=r.next,e.port2.postMessage(0)}}()),ot(t)):h.setImmediate(t)}}(),lt||(at(),lt=!0),ft.add(t,e)}var lt=!1,ft=new x;function pt(){for(var t;t=N();){try{t.a.call(t.b)}catch(t){ct(t)}I(A,t)}lt=!1}function dt(t,e){if(this.a=vt,this.i=void 0,this.f=this.b=this.c=null,this.g=this.h=!1,t!=o)try{var n=this;t.call(e,function(t){xt(n,yt,t)},function(t){if(!(t instanceof Dt))try{if(t instanceof Error)throw t;throw Error("Promise rejected.")}catch(t){}xt(n,gt,t)})}catch(t){xt(this,gt,t)}}var vt=0,yt=2,gt=3;function mt(){this.next=this.f=this.b=this.g=this.a=null,this.c=!1}mt.prototype.reset=function(){this.f=this.b=this.g=this.a=null,this.c=!1};var _t=new C(function(){return new mt},function(t){t.reset()});function bt(t,e,n){var r=_t.get();return r.g=t,r.b=e,r.f=n,r}function wt(t){if(t instanceof dt)return t;var e=new dt(o);return xt(e,yt,t),e}function Et(n){return new dt(function(t,e){e(n)})}function St(t,e,n){At(t,e,n,null)||ht(m(e,t))}function Tt(n){return new dt(function(r){var i=n.length,o=[];if(i)for(var t=function(t,e,n){i--,o[t]=e?{Db:!0,value:n}:{Db:!1,reason:n},0==i&&r(o)},e=0;e<n.length;e++)St(n[e],m(t,e,!0),m(t,e,!1));else r(o)})}function Ct(t,e){t.b||t.a!=yt&&t.a!=gt||Nt(t),t.f?t.f.next=e:t.b=e,t.f=e}function It(t,i,o,a){var e=bt(null,null,null);return e.a=new dt(function(n,r){e.g=i?function(t){try{var e=i.call(a,t);n(e)}catch(t){r(t)}}:n,e.b=o?function(t){try{var e=o.call(a,t);void 0===e&&t instanceof Dt?r(t):n(e)}catch(t){r(t)}}:r}),Ct(e.a.c=t,e),e.a}function xt(t,e,n){t.a==vt&&(t===n&&(e=gt,n=new TypeError("Promise cannot resolve to itself")),t.a=1,At(n,t.Nc,t.Oc,t)||(t.i=n,t.a=e,t.c=null,Nt(t),e!=gt||n instanceof Dt||function(t,e){t.g=!0,ht(function(){t.g&&Pt.call(null,e)})}(t,n)))}function At(t,e,n,r){if(t instanceof dt)return Ct(t,bt(e||o,n||null,r)),!0;if(w(t))return t.then(e,n,r),!0;if(p(t))try{var i=t.then;if(a(i))return function(t,e,n,r,i){function o(t){a||(a=!0,r.call(i,t))}var a=!1;try{e.call(t,function(t){a||(a=!0,n.call(i,t))},o)}catch(t){o(t)}}(t,i,e,n,r),!0}catch(t){return n.call(r,t),!0}return!1}function Nt(t){t.h||(t.h=!0,ht(t.Yb,t))}function kt(t){var e=null;return t.b&&(e=t.b,t.b=e.next,e.next=null),t.b||(t.f=null),e}function Rt(t,e,n,r){if(n==gt&&e.b&&!e.c)for(;t&&t.g;t=t.c)t.g=!1;if(e.a)e.a.c=null,Ot(e,n,r);else try{e.c?e.g.call(e.f):Ot(e,n,r)}catch(t){Pt.call(null,t)}I(_t,e)}function Ot(t,e,n){e==yt?t.g.call(t.f,n):t.b&&t.b.call(t.f,n)}dt.prototype.then=function(t,e,n){return It(this,a(t)?t:null,a(e)?e:null,n)},b(dt),(t=dt.prototype).ia=function(t,e){return(t=bt(t,t,e)).c=!0,Ct(this,t),this},t.s=function(t,e){return It(this,null,t,e)},t.cancel=function(t){this.a==vt&&ht(function(){!function t(e,n){if(e.a==vt)if(e.c){var r=e.c;if(r.b){for(var i=0,o=null,a=null,s=r.b;s&&(s.c||(i++,s.a==e&&(o=s),!(o&&1<i)));s=s.next)o||(a=s);o&&(r.a==vt&&1==i?t(r,n):(a?((i=a).next==r.f&&(r.f=i),i.next=i.next.next):kt(r),Rt(r,o,gt,n)))}e.c=null}else xt(e,gt,n)}(this,new Dt(t))},this)},t.Nc=function(t){this.a=vt,xt(this,yt,t)},t.Oc=function(t){this.a=vt,xt(this,gt,t)},t.Yb=function(){for(var t;t=kt(this);)Rt(this,t,this.a,this.i);this.h=!1};var Pt=ct;function Dt(t){E.call(this,t)}function Lt(){0!=Mt&&(Ft[this[i]||(this[i]=++d)]=this),this.qa=this.qa,this.ja=this.ja}e(Dt,E);var Mt=0,Ft={};function jt(t){if(!t.qa&&(t.qa=!0,t.va(),0!=Mt)){var e=t[i]||(t[i]=++d);if(0!=Mt&&t.ja&&0<t.ja.length)throw Error(t+" did not empty its onDisposeCallbacks queue. This probably means it overrode dispose() or disposeInternal() without calling the superclass' method.");delete Ft[e]}}function Ut(t){return Ut[" "](t),t}Lt.prototype.qa=!(Dt.prototype.name="cancel"),Lt.prototype.va=function(){if(this.ja)for(;this.ja.length;)this.ja.shift()()},Ut[" "]=o;var Wt,Bt=et("Opera"),Vt=et("Trident")||et("MSIE"),qt=et("Edge"),Ht=qt||Vt,Kt=et("Gecko")&&!(J(q.toLowerCase(),"webkit")&&!et("Edge"))&&!(et("Trident")||et("MSIE"))&&!et("Edge"),Gt=J(q.toLowerCase(),"webkit")&&!et("Edge");function Qt(){var t=h.document;return t?t.documentMode:void 0}t:{var zt="",Yt=function(){var t=q;return Kt?/rv:([^\);]+)(\)|;)/.exec(t):qt?/Edge\/([\d\.]+)/.exec(t):Vt?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(t):Gt?/WebKit\/(\S+)/.exec(t):Bt?/(?:Version)[ \/]?(\S+)/.exec(t):void 0}();if(Yt&&(zt=Yt?Yt[1]:""),Vt){var Xt=Qt();if(null!=Xt&&Xt>parseFloat(zt)){Wt=String(Xt);break t}}Wt=zt}var Jt,$t={};function Zt(s){return function(t,e){var n=$t;return Object.prototype.hasOwnProperty.call(n,t)?n[t]:n[t]=e(t)}(s,function(){for(var t=0,e=B(String(Wt)).split("."),n=B(String(s)).split("."),r=Math.max(e.length,n.length),i=0;0==t&&i<r;i++){var o=e[i]||"",a=n[i]||"";do{if(o=/(\d*)(\D*)(.*)/.exec(o)||["","","",""],a=/(\d*)(\D*)(.*)/.exec(a)||["","","",""],0==o[0].length&&0==a[0].length)break;t=$(0==o[1].length?0:parseInt(o[1],10),0==a[1].length?0:parseInt(a[1],10))||$(0==o[2].length,0==a[2].length)||$(o[2],a[2]),o=o[3],a=a[3]}while(0==t)}return 0<=t})}var te=h.document;Jt=te&&Vt?Qt()||("CSS1Compat"==te.compatMode?parseInt(Wt,10):5):void 0;var ee=Object.freeze||function(t){return t},ne=!Vt||9<=Number(Jt),re=Vt&&!Zt("9"),ie=function(){if(!h.addEventListener||!Object.defineProperty)return!1;var t=!1,e=Object.defineProperty({},"passive",{get:function(){t=!0}});return h.addEventListener("test",o,e),h.removeEventListener("test",o,e),t}();function oe(t,e){this.type=t,this.b=this.target=e,this.Kb=!0}function ae(t,e){if(oe.call(this,t?t.type:""),this.relatedTarget=this.b=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.pointerId=0,this.pointerType="",this.a=null,t){var n=this.type=t.type,r=t.changedTouches?t.changedTouches[0]:null;if(this.target=t.target||t.srcElement,this.b=e,e=t.relatedTarget){if(Kt){t:{try{Ut(e.nodeName);var i=!0;break t}catch(t){}i=!1}i||(e=null)}}else"mouseover"==n?e=t.fromElement:"mouseout"==n&&(e=t.toElement);this.relatedTarget=e,this.screenY=null===r?(this.clientX=void 0!==t.clientX?t.clientX:t.pageX,this.clientY=void 0!==t.clientY?t.clientY:t.pageY,this.screenX=t.screenX||0,t.screenY||0):(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,r.screenY||0),this.button=t.button,this.key=t.key||"",this.ctrlKey=t.ctrlKey,this.altKey=t.altKey,this.shiftKey=t.shiftKey,this.metaKey=t.metaKey,this.pointerId=t.pointerId||0,this.pointerType=c(t.pointerType)?t.pointerType:se[t.pointerType]||"",(this.a=t).defaultPrevented&&this.preventDefault()}}oe.prototype.preventDefault=function(){this.Kb=!1},e(ae,oe);var se=ee({2:"touch",3:"pen",4:"mouse"});ae.prototype.preventDefault=function(){ae.ob.preventDefault.call(this);var t=this.a;if(t.preventDefault)t.preventDefault();else if(t.returnValue=!1,re)try{(t.ctrlKey||112<=t.keyCode&&t.keyCode<=123)&&(t.keyCode=-1)}catch(t){}},ae.prototype.f=function(){return this.a};var ue="closure_listenable_"+(1e6*Math.random()|0),ce=0;function he(t,e,n,r,i){this.listener=t,this.proxy=null,this.src=e,this.type=n,this.capture=!!r,this.La=i,this.key=++ce,this.oa=this.Ia=!1}function le(t){t.oa=!0,t.listener=null,t.proxy=null,t.src=null,t.La=null}function fe(t){this.src=t,this.a={},this.b=0}function pe(t,e){var n=e.type;n in t.a&&M(t.a[n],e)&&(le(e),0==t.a[n].length&&(delete t.a[n],t.b--))}function de(t,e,n,r){for(var i=0;i<t.length;++i){var o=t[i];if(!o.oa&&o.listener==e&&o.capture==!!n&&o.La==r)return i}return-1}fe.prototype.add=function(t,e,n,r,i){var o=t.toString();(t=this.a[o])||(t=this.a[o]=[],this.b++);var a=de(t,e,r,i);return-1<a?(e=t[a],n||(e.Ia=!1)):((e=new he(e,this.src,o,!!r,i)).Ia=n,t.push(e)),e};var ve="closure_lm_"+(1e6*Math.random()|0),ye={};function ge(t,e,n,r,i){if(r&&r.once)_e(t,e,n,r,i);else if(l(e))for(var o=0;o<e.length;o++)ge(t,e[o],n,r,i);else n=Ae(n),t&&t[ue]?ke(t,e,n,p(r)?!!r.capture:!!r,i):me(t,e,n,!1,r,i)}function me(t,e,n,r,i,o){if(!e)throw Error("Invalid event type");var a=p(i)?!!i.capture:!!i,s=Ie(t);if(s||(t[ve]=s=new fe(t)),!(n=s.add(e,n,r,a,o)).proxy){if(r=function(){var e=Ce,n=ne?function(t){return e.call(n.src,n.listener,t)}:function(t){if(!(t=e.call(n.src,n.listener,t)))return t};return n}(),(n.proxy=r).src=t,r.listener=n,t.addEventListener)ie||(i=a),void 0===i&&(i=!1),t.addEventListener(e.toString(),r,i);else if(t.attachEvent)t.attachEvent(Ee(e.toString()),r);else{if(!t.addListener||!t.removeListener)throw Error("addEventListener and attachEvent are unavailable.");t.addListener(r)}0}}function _e(t,e,n,r,i){if(l(e))for(var o=0;o<e.length;o++)_e(t,e[o],n,r,i);else n=Ae(n),t&&t[ue]?Re(t,e,n,p(r)?!!r.capture:!!r,i):me(t,e,n,!0,r,i)}function be(t,e,n,r,i){if(l(e))for(var o=0;o<e.length;o++)be(t,e[o],n,r,i);else r=p(r)?!!r.capture:!!r,n=Ae(n),t&&t[ue]?(t=t.l,(e=String(e).toString())in t.a&&(-1<(n=de(o=t.a[e],n,r,i))&&(le(o[n]),Array.prototype.splice.call(o,n,1),0==o.length&&(delete t.a[e],t.b--)))):t&&(t=Ie(t))&&(e=t.a[e.toString()],t=-1,e&&(t=de(e,n,r,i)),(n=-1<t?e[t]:null)&&we(n))}function we(t){if("number"!=typeof t&&t&&!t.oa){var e=t.src;if(e&&e[ue])pe(e.l,t);else{var n=t.type,r=t.proxy;e.removeEventListener?e.removeEventListener(n,r,t.capture):e.detachEvent?e.detachEvent(Ee(n),r):e.addListener&&e.removeListener&&e.removeListener(r),0,(n=Ie(e))?(pe(n,t),0==n.b&&(n.src=null,e[ve]=null)):le(t)}}}function Ee(t){return t in ye?ye[t]:ye[t]="on"+t}function Se(t,e,n,r){var i=!0;if((t=Ie(t))&&(e=t.a[e.toString()]))for(e=e.concat(),t=0;t<e.length;t++){var o=e[t];o&&o.capture==n&&!o.oa&&(o=Te(o,r),i=i&&!1!==o)}return i}function Te(t,e){var n=t.listener,r=t.La||t.src;return t.Ia&&we(t),n.call(r,e)}function Ce(t,e){if(t.oa)return!0;if(ne)return Te(t,new ae(e,this));if(!e)t:{e=["window","event"];for(var n=h,r=0;r<e.length;r++)if(null==(n=n[e[r]])){e=null;break t}e=n}if(e=new ae(r=e,this),n=!0,!(r.keyCode<0||null!=r.returnValue)){t:{var i=!1;if(0==r.keyCode)try{r.keyCode=-1;break t}catch(t){i=!0}(i||null==r.returnValue)&&(r.returnValue=!0)}for(r=[],i=e.b;i;i=i.parentNode)r.push(i);for(t=t.type,i=r.length-1;0<=i;i--){e.b=r[i];var o=Se(r[i],t,!0,e);n=n&&o}for(i=0;i<r.length;i++)e.b=r[i],o=Se(r[i],t,!1,e),n=n&&o}return n}function Ie(t){return(t=t[ve])instanceof fe?t:null}var xe="__closure_events_fn_"+(1e9*Math.random()>>>0);function Ae(e){return a(e)?e:(e[xe]||(e[xe]=function(t){return e.handleEvent(t)}),e[xe])}function Ne(){Lt.call(this),this.l=new fe(this),(this.Rb=this).Va=null}function ke(t,e,n,r,i){t.l.add(String(e),n,!1,r,i)}function Re(t,e,n,r,i){t.l.add(String(e),n,!0,r,i)}function Oe(t,e,n,r){if(!(e=t.l.a[String(e)]))return!0;e=e.concat();for(var i=!0,o=0;o<e.length;++o){var a=e[o];if(a&&!a.oa&&a.capture==n){var s=a.listener,u=a.La||a.src;a.Ia&&pe(t.l,a),i=!1!==s.call(u,r)&&i}}return i&&0!=r.Kb}function Pe(t,e,n){if(a(t))n&&(t=g(t,n));else{if(!t||"function"!=typeof t.handleEvent)throw Error("Invalid listener argument");t=g(t.handleEvent,t)}return 2147483647<Number(e)?-1:h.setTimeout(t,e||0)}function De(n){var r=null;return new dt(function(t,e){-1==(r=Pe(function(){t(void 0)},n))&&e(Error("Failed to schedule timer."))}).s(function(t){throw h.clearTimeout(r),t})}function Le(t){if(t.S&&"function"==typeof t.S)return t.S();if(c(t))return t.split("");if(f(t)){for(var e=[],n=t.length,r=0;r<n;r++)e.push(t[r]);return e}for(r in e=[],n=0,t)e[n++]=t[r];return e}function Me(t){if(t.U&&"function"==typeof t.U)return t.U();if(!t.S||"function"!=typeof t.S){if(f(t)||c(t)){var e=[];t=t.length;for(var n=0;n<t;n++)e.push(n);return e}for(var r in e=[],n=0,t)e[n++]=r;return e}}function Fe(t,e){this.b={},this.a=[],this.c=0;var n=arguments.length;if(1<n){if(n%2)throw Error("Uneven number of arguments");for(var r=0;r<n;r+=2)this.set(arguments[r],arguments[r+1])}else if(t)if(t instanceof Fe)for(n=t.U(),r=0;r<n.length;r++)this.set(n[r],t.get(n[r]));else for(r in t)this.set(r,t[r])}function je(t){if(t.c!=t.a.length){for(var e=0,n=0;e<t.a.length;){var r=t.a[e];Ue(t.b,r)&&(t.a[n++]=r),e++}t.a.length=n}if(t.c!=t.a.length){var i={};for(n=e=0;e<t.a.length;)Ue(i,r=t.a[e])||(i[t.a[n++]=r]=1),e++;t.a.length=n}}function Ue(t,e){return Object.prototype.hasOwnProperty.call(t,e)}e(Ne,Lt),Ne.prototype[ue]=!0,Ne.prototype.addEventListener=function(t,e,n,r){ge(this,t,e,n,r)},Ne.prototype.removeEventListener=function(t,e,n,r){be(this,t,e,n,r)},Ne.prototype.dispatchEvent=function(t){var e,n=this.Va;if(n)for(e=[];n;n=n.Va)e.push(n);n=this.Rb;var r=t.type||t;if(c(t))t=new oe(t,n);else if(t instanceof oe)t.target=t.target||n;else{var i=t;ut(t=new oe(r,n),i)}if(i=!0,e)for(var o=e.length-1;0<=o;o--){var a=t.b=e[o];i=Oe(a,r,!0,t)&&i}if(i=Oe(a=t.b=n,r,!0,t)&&i,i=Oe(a,r,!1,t)&&i,e)for(o=0;o<e.length;o++)i=Oe(a=t.b=e[o],r,!1,t)&&i;return i},Ne.prototype.va=function(){if(Ne.ob.va.call(this),this.l){var t,e=this.l;for(t in e.a){for(var n=e.a[t],r=0;r<n.length;r++)0,le(n[r]);delete e.a[t],e.b--}}this.Va=null},(t=Fe.prototype).S=function(){je(this);for(var t=[],e=0;e<this.a.length;e++)t.push(this.b[this.a[e]]);return t},t.U=function(){return je(this),this.a.concat()},t.clear=function(){this.b={},this.c=this.a.length=0},t.get=function(t,e){return Ue(this.b,t)?this.b[t]:e},t.set=function(t,e){Ue(this.b,t)||(this.c++,this.a.push(t)),this.b[t]=e},t.forEach=function(t,e){for(var n=this.U(),r=0;r<n.length;r++){var i=n[r],o=this.get(i);t.call(e,o,i,this)}};var We=/^(?:([^:/?#.]+):)?(?:\/\/(?:([^/?#]*)@)?([^/#?]*?)(?::([0-9]+))?(?=[/#?]|$))?([^?#]+)?(?:\?([^#]*))?(?:#([\s\S]*))?$/;function Be(t,e){if(this.b=this.l=this.c="",this.i=null,this.h=this.g="",this.f=!1,t instanceof Be){this.f=void 0!==e?e:t.f,Ve(this,t.c),this.l=t.l,this.b=t.b,qe(this,t.i),this.g=t.g,e=t.a;var n=new rn;n.c=e.c,e.a&&(n.a=new Fe(e.a),n.b=e.b),He(this,n),this.h=t.h}else t&&(n=String(t).match(We))?(this.f=!!e,Ve(this,n[1]||"",!0),this.l=Ye(n[2]||""),this.b=Ye(n[3]||"",!0),qe(this,n[4]),this.g=Ye(n[5]||"",!0),He(this,n[6]||"",!0),this.h=Ye(n[7]||"")):(this.f=!!e,this.a=new rn(null,this.f))}function Ve(t,e,n){t.c=n?Ye(e,!0):e,t.c&&(t.c=t.c.replace(/:$/,""))}function qe(t,e){if(e){if(e=Number(e),isNaN(e)||e<0)throw Error("Bad port number "+e);t.i=e}else t.i=null}function He(t,e,n){e instanceof rn?(t.a=e,function(t,e){e&&!t.f&&(on(t),t.c=null,t.a.forEach(function(t,e){var n=e.toLowerCase();e!=n&&(sn(this,e),cn(this,n,t))},t)),t.f=e}(t.a,t.f)):(n||(e=Xe(e,en)),t.a=new rn(e,t.f))}function Ke(t,e,n){t.a.set(e,n)}function Ge(t,e){return t.a.get(e)}function Qe(t){return t instanceof Be?new Be(t):new Be(t,void 0)}function ze(t,e){var n=new Be(null,void 0);return Ve(n,"https"),t&&(n.b=t),e&&(n.g=e),n}function Ye(t,e){return t?e?decodeURI(t.replace(/%25/g,"%2525")):decodeURIComponent(t):""}function Xe(t,e,n){return c(t)?(t=encodeURI(t).replace(e,Je),n&&(t=t.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),t):null}function Je(t){return"%"+((t=t.charCodeAt(0))>>4&15).toString(16)+(15&t).toString(16)}Be.prototype.toString=function(){var t=[],e=this.c;e&&t.push(Xe(e,$e,!0),":");var n=this.b;return(n||"file"==e)&&(t.push("//"),(e=this.l)&&t.push(Xe(e,$e,!0),"@"),t.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(n=this.i)&&t.push(":",String(n))),(n=this.g)&&(this.b&&"/"!=n.charAt(0)&&t.push("/"),t.push(Xe(n,"/"==n.charAt(0)?tn:Ze,!0))),(n=this.a.toString())&&t.push("?",n),(n=this.h)&&t.push("#",Xe(n,nn)),t.join("")};var $e=/[#\/\?@]/g,Ze=/[#\?:]/g,tn=/[#\?]/g,en=/[#\?@]/g,nn=/#/g;function rn(t,e){this.b=this.a=null,this.c=t||null,this.f=!!e}function on(n){n.a||(n.a=new Fe,n.b=0,n.c&&function(t,e){if(t){t=t.split("&");for(var n=0;n<t.length;n++){var r=t[n].indexOf("="),i=null;if(0<=r){var o=t[n].substring(0,r);i=t[n].substring(r+1)}else o=t[n];e(o,i?decodeURIComponent(i.replace(/\+/g," ")):"")}}}(n.c,function(t,e){n.add(decodeURIComponent(t.replace(/\+/g," ")),e)}))}function an(t){var e=Me(t);if(void 0===e)throw Error("Keys are undefined");var n=new rn(null,void 0);t=Le(t);for(var r=0;r<e.length;r++){var i=e[r],o=t[r];l(o)?cn(n,i,o):n.add(i,o)}return n}function sn(t,e){on(t),e=hn(t,e),Ue(t.a.b,e)&&(t.c=null,t.b-=t.a.get(e).length,Ue((t=t.a).b,e)&&(delete t.b[e],t.c--,t.a.length>2*t.c&&je(t)))}function un(t,e){return on(t),e=hn(t,e),Ue(t.a.b,e)}function cn(t,e,n){sn(t,e),0<n.length&&(t.c=null,t.a.set(hn(t,e),U(n)),t.b+=n.length)}function hn(t,e){return e=String(e),t.f&&(e=e.toLowerCase()),e}(t=rn.prototype).add=function(t,e){on(this),this.c=null,t=hn(this,t);var n=this.a.get(t);return n||this.a.set(t,n=[]),n.push(e),this.b+=1,this},t.clear=function(){this.a=this.c=null,this.b=0},t.forEach=function(n,r){on(this),this.a.forEach(function(t,e){O(t,function(t){n.call(r,t,e,this)},this)},this)},t.U=function(){on(this);for(var t=this.a.S(),e=this.a.U(),n=[],r=0;r<e.length;r++)for(var i=t[r],o=0;o<i.length;o++)n.push(e[r]);return n},t.S=function(t){on(this);var e=[];if(c(t))un(this,t)&&(e=j(e,this.a.get(hn(this,t))));else{t=this.a.S();for(var n=0;n<t.length;n++)e=j(e,t[n])}return e},t.set=function(t,e){return on(this),this.c=null,un(this,t=hn(this,t))&&(this.b-=this.a.get(t).length),this.a.set(t,[e]),this.b+=1,this},t.get=function(t,e){return 0<(t=t?this.S(t):[]).length?String(t[0]):e},t.toString=function(){if(this.c)return this.c;if(!this.a)return"";for(var t=[],e=this.a.U(),n=0;n<e.length;n++){var r=e[n],i=encodeURIComponent(String(r));r=this.S(r);for(var o=0;o<r.length;o++){var a=i;""!==r[o]&&(a+="="+encodeURIComponent(String(r[o]))),t.push(a)}}return this.c=t.join("&")};var ln=!Vt||9<=Number(Jt);function fn(){this.a="",this.b=dn}function pn(t){return t instanceof fn&&t.constructor===fn&&t.b===dn?t.a:(T("expected object of type Const, got '"+t+"'"),"type_error:Const")}fn.prototype.na=!0,fn.prototype.ma=function(){return this.a},fn.prototype.toString=function(){return"Const{"+this.a+"}"};var dn={};function vn(t){var e=new fn;return e.a=t,e}function yn(){this.a="",this.b=wn}function gn(t){return t instanceof yn&&t.constructor===yn&&t.b===wn?t.a:(T("expected object of type TrustedResourceUrl, got '"+t+"' of type "+s(t)),"type_error:TrustedResourceUrl")}function mn(t,n){var r=pn(t);if(!bn.test(r))throw Error("Invalid TrustedResourceUrl format: "+r);return function(t){var e=new yn;return e.a=t,e}(t=r.replace(_n,function(t,e){if(!Object.prototype.hasOwnProperty.call(n,e))throw Error('Found marker, "'+e+'", in format string, "'+r+'", but no valid label mapping found in args: '+JSON.stringify(n));return(t=n[e])instanceof fn?pn(t):encodeURIComponent(String(t))}))}vn(""),yn.prototype.na=!0,yn.prototype.ma=function(){return this.a},yn.prototype.toString=function(){return"TrustedResourceUrl{"+this.a+"}"};var _n=/%{(\w+)}/g,bn=/^(?:https:)?\/\/[0-9a-z.:[\]-]+\/|^\/[^\/\\]|^about:blank#/i,wn={};function En(){this.a="",this.b=In}function Sn(t){return t instanceof En&&t.constructor===En&&t.b===In?t.a:(T("expected object of type SafeUrl, got '"+t+"' of type "+s(t)),"type_error:SafeUrl")}En.prototype.na=!0,En.prototype.ma=function(){return this.a},En.prototype.toString=function(){return"SafeUrl{"+this.a+"}"};var Tn=/^(?:(?:https?|mailto|ftp):|[^:/?#]*(?:[/?#]|$))/i;function Cn(t){return t instanceof En?t:(t=t.na?t.ma():String(t),Tn.test(t)||(t="about:invalid#zClosurez"),xn(t))}var In={};function xn(t){var e=new En;return e.a=t,e}function An(){this.a="",this.b=Nn}xn("about:blank"),An.prototype.na=!0,An.prototype.ma=function(){return this.a},An.prototype.toString=function(){return"SafeHtml{"+this.a+"}"};var Nn={};function kn(t){var e=new An;return e.a=t,e}function Rn(t){var e=document;return c(t)?e.getElementById(t):t}function On(n,t){nt(t,function(t,e){t&&t.na&&(t=t.ma()),"style"==e?n.style.cssText=t:"class"==e?n.className=t:"for"==e?n.htmlFor=t:Pn.hasOwnProperty(e)?n.setAttribute(Pn[e],t):0==e.lastIndexOf("aria-",0)||0==e.lastIndexOf("data-",0)?n.setAttribute(e,t):n[e]=t})}kn("<!DOCTYPE html>"),kn(""),kn("<br>");var Pn={cellpadding:"cellPadding",cellspacing:"cellSpacing",colspan:"colSpan",frameborder:"frameBorder",height:"height",maxlength:"maxLength",nonce:"nonce",role:"role",rowspan:"rowSpan",type:"type",usemap:"useMap",valign:"vAlign",width:"width"};function Dn(t,e,n){var r=arguments,i=document,o=String(r[0]),a=r[1];if(!ln&&a&&(a.name||a.type)){if(o=["<",o],a.name&&o.push(' name="',V(a.name),'"'),a.type){o.push(' type="',V(a.type),'"');var s={};ut(s,a),delete s.type,a=s}o.push(">"),o=o.join("")}return o=i.createElement(o),a&&(c(a)?o.className=a:l(a)?o.className=a.join(" "):On(o,a)),2<r.length&&function(e,n,t){function r(t){t&&n.appendChild(c(t)?e.createTextNode(t):t)}for(var i=2;i<t.length;i++){var o=t[i];!f(o)||p(o)&&0<o.nodeType?r(o):O(Ln(o)?U(o):o,r)}}(i,o,r),o}function Ln(t){if(t&&"number"==typeof t.length){if(p(t))return"function"==typeof t.item||"string"==typeof t.item;if(a(t))return"function"==typeof t.item}return!1}function Mn(t){var e=[];return function t(e,n,r){if(null==n)r.push("null");else{if("object"==typeof n){if(l(n)){var i=n;n=i.length,r.push("[");for(var o="",a=0;a<n;a++)r.push(o),t(e,i[a],r),o=",";return void r.push("]")}if(!(n instanceof String||n instanceof Number||n instanceof Boolean)){for(i in r.push("{"),o="",n)Object.prototype.hasOwnProperty.call(n,i)&&("function"!=typeof(a=n[i])&&(r.push(o),Wn(i,r),r.push(":"),t(e,a,r),o=","));return void r.push("}")}n=n.valueOf()}switch(typeof n){case"string":Wn(n,r);break;case"number":r.push(isFinite(n)&&!isNaN(n)?String(n):"null");break;case"boolean":r.push(String(n));break;case"function":r.push("null");break;default:throw Error("Unknown type: "+typeof n)}}}(new Fn,t,e),e.join("")}function Fn(){}var jn={'"':'\\"',"\\":"\\\\","/":"\\/","\b":"\\b","\f":"\\f","\n":"\\n","\r":"\\r","\t":"\\t","\v":"\\u000b"},Un=/\uffff/.test("￿")?/[\\"\x00-\x1f\x7f-\uffff]/g:/[\\"\x00-\x1f\x7f-\xff]/g;function Wn(t,e){e.push('"',t.replace(Un,function(t){var e=jn[t];return e||(e="\\u"+(65536|t.charCodeAt(0)).toString(16).substr(1),jn[t]=e),e}),'"')}function Bn(){var t=ar();return Vt&&!!Jt&&11==Jt||/Edge\/\d+/.test(t)}function Vn(){return h.window&&h.window.location.href||self&&self.location&&self.location.href||""}function qn(t,e){e=e||h.window;var n="about:blank";t&&(n=Sn(Cn(t))),e.location.href=n}function Hn(t){return!!((t=(t||ar()).toLowerCase()).match(/android/)||t.match(/webos/)||t.match(/iphone|ipad|ipod/)||t.match(/blackberry/)||t.match(/windows phone/)||t.match(/iemobile/))}function Kn(t){t=t||h.window;try{t.close()}catch(t){}}function Gn(t,e,n){var r=Math.floor(1e9*Math.random()).toString();e=e||500,n=n||600;var i=(window.screen.availHeight-n)/2,o=(window.screen.availWidth-e)/2;for(a in e={width:e,height:n,top:0<i?i:0,left:0<o?o:0,location:!0,resizable:!0,statusbar:!0,toolbar:!1},n=ar().toLowerCase(),r&&(e.target=r,J(n,"crios/")&&(e.target="_blank")),rr(ar())==er&&(t=t||"http://localhost",e.scrollbars=!0),n=t||"",(t=e)||(t={}),r=window,e=n instanceof En?n:Cn(void 0!==n.href?n.href:String(n)),n=t.target||n.target,i=[],t)switch(a){case"width":case"height":case"top":case"left":i.push(a+"="+t[a]);break;case"target":case"noopener":case"noreferrer":break;default:i.push(a+"="+(t[a]?1:0))}var a=i.join(",");if((et("iPhone")&&!et("iPod")&&!et("iPad")||et("iPad")||et("iPod"))&&r.navigator&&r.navigator.standalone&&n&&"_self"!=n?(a=r.document.createElement("A"),e instanceof En||e instanceof En||(e=e.na?e.ma():String(e),Tn.test(e)||(e="about:invalid#zClosurez"),e=xn(e)),a.href=Sn(e),a.setAttribute("target",n),t.noreferrer&&a.setAttribute("rel","noreferrer"),(t=document.createEvent("MouseEvent")).initMouseEvent("click",!0,!0,r,1),a.dispatchEvent(t),a={}):t.noreferrer?(a=r.open("",n,a),t=Sn(e),a&&(Ht&&J(t,";")&&(t="'"+t.replace(/'/g,"%27")+"'"),a.opener=null,vn("b/12014412, meta tag with sanitized URL"),t=kn(t='<meta name="referrer" content="no-referrer"><meta http-equiv="refresh" content="0; url='+V(t)+'">'),a.document.write(function(t){return t instanceof An&&t.constructor===An&&t.b===Nn?t.a:(T("expected object of type SafeHtml, got '"+t+"' of type "+s(t)),"type_error:SafeHtml")}(t)),a.document.close())):(a=r.open(Sn(e),n,a))&&t.noopener&&(a.opener=null),a)try{a.focus()}catch(t){}return a}var Qn=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,zn=/^[^@]+@[^@]+$/;function Yn(){var e=null;return new dt(function(t){"complete"==h.document.readyState?t():(e=function(){t()},_e(window,"load",e))}).s(function(t){throw be(window,"load",e),t})}function Xn(t){return t=t||ar(),!("file:"!==lr()||!t.toLowerCase().match(/iphone|ipad|ipod|android/))}function Jn(){var t=h.window;try{return!(!t||t==t.top)}catch(t){return!1}}function $n(){return"object"!=typeof h.window&&"function"==typeof h.importScripts}function Zn(){return Mh.a.INTERNAL.hasOwnProperty("reactNative")?"ReactNative":Mh.a.INTERNAL.hasOwnProperty("node")?"Node":$n()?"Worker":"Browser"}function tr(){var t=Zn();return"ReactNative"===t||"Node"===t}var er="Firefox",nr="Chrome";function rr(t){var e=t.toLowerCase();return J(e,"opera/")||J(e,"opr/")||J(e,"opios/")?"Opera":J(e,"iemobile")?"IEMobile":J(e,"msie")||J(e,"trident/")?"IE":J(e,"edge/")?"Edge":J(e,"firefox/")?er:J(e,"silk/")?"Silk":J(e,"blackberry")?"Blackberry":J(e,"webos")?"Webos":!J(e,"safari/")||J(e,"chrome/")||J(e,"crios/")||J(e,"android")?!J(e,"chrome/")&&!J(e,"crios/")||J(e,"edge/")?J(e,"android")?"Android":(t=t.match(/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/))&&2==t.length?t[1]:"Other":nr:"Safari"}var ir={Uc:"FirebaseCore-web",Wc:"FirebaseUI-web"};function or(t,e){e=e||[];var n,r=[],i={};for(n in ir)i[ir[n]]=!0;for(n=0;n<e.length;n++)void 0!==i[e[n]]&&(delete i[e[n]],r.push(e[n]));return r.sort(),(e=r).length||(e=["FirebaseCore-web"]),"Browser"===(r=Zn())?r=rr(i=ar()):"Worker"===r&&(r=rr(i=ar())+"-"+r),r+"/JsCore/"+t+"/"+e.join(",")}function ar(){return h.navigator&&h.navigator.userAgent||""}function sr(t,e){t=t.split("."),e=e||h;for(var n=0;n<t.length&&"object"==typeof e&&null!=e;n++)e=e[t[n]];return n!=t.length&&(e=void 0),e}function ur(){try{var t=h.localStorage,e=yr();if(t)return t.setItem(e,"1"),t.removeItem(e),!Bn()||!!h.indexedDB}catch(t){return $n()&&!!h.indexedDB}return!1}function cr(){return(hr()||"chrome-extension:"===lr()||Xn())&&!tr()&&ur()&&!$n()}function hr(){return"http:"===lr()||"https:"===lr()}function lr(){return h.location&&h.location.protocol||null}function fr(t){return!Hn(t=t||ar())&&rr(t)!=er}function pr(t){return void 0===t?null:Mn(t)}function dr(t){var e,n={};for(e in t)t.hasOwnProperty(e)&&null!==t[e]&&void 0!==t[e]&&(n[e]=t[e]);return n}function vr(t){if(null!==t)return JSON.parse(t)}function yr(t){return t||Math.floor(1e9*Math.random()).toString()}function gr(t){return"Safari"!=rr(t=t||ar())&&!t.toLowerCase().match(/iphone|ipad|ipod/)}function mr(){var t=h.___jsl;if(t&&t.H)for(var e in t.H)if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=t.H[e].L.concat(),t.CP)for(var n=0;n<t.CP.length;n++)t.CP[n]=null}function _r(t,e){if(e<t)throw Error("Short delay should be less than long delay!");this.a=t,this.c=e,t=ar(),e=Zn(),this.b=Hn(t)||"ReactNative"===e}function br(){var t=h.document;return!t||void 0===t.visibilityState||"visible"==t.visibilityState}function wr(){var e=h.document,n=null;return br()||!e?wt():new dt(function(t){n=function(){br()&&(e.removeEventListener("visibilitychange",n,!1),t())},e.addEventListener("visibilitychange",n,!1)}).s(function(t){throw e.removeEventListener("visibilitychange",n,!1),t})}function Er(t){try{var e=new Date(parseInt(t,10));if(!isNaN(e.getTime())&&!/[^0-9]/.test(t))return e.toUTCString()}catch(t){}return null}function Sr(){return!(!sr("fireauth.oauthhelper",h)&&!sr("fireauth.iframe",h))}_r.prototype.get=function(){var t=h.navigator;return!t||"boolean"!=typeof t.onLine||!hr()&&"chrome-extension:"!==lr()&&void 0===t.connection||t.onLine?this.b?this.c:this.a:Math.min(5e3,this.a)};var Tr,Cr={};function Ir(t){Cr[t]||(Cr[t]=!0,"undefined"!=typeof console&&"function"==typeof console.warn&&console.warn(t))}try{var xr={};Object.defineProperty(xr,"abcd",{configurable:!0,enumerable:!0,value:1}),Object.defineProperty(xr,"abcd",{configurable:!0,enumerable:!0,value:2}),Tr=2==xr.abcd}catch(t){Tr=!1}function Ar(t,e,n){Tr?Object.defineProperty(t,e,{configurable:!0,enumerable:!0,value:n}):t[e]=n}function Nr(t,e){if(e)for(var n in e)e.hasOwnProperty(n)&&Ar(t,n,e[n])}function kr(t){var e={};return Nr(e,t),e}function Rr(t){var e=t;if("object"==typeof t&&null!=t)for(var n in e="length"in t?[]:{},t)Ar(e,n,Rr(t[n]));return e}function Or(t){var e={},n=t[Dr],r=t[Lr];if(!(t=t[Mr])||t!=Pr&&!n)throw Error("Invalid provider user info!");e[jr]=r||null,e[Fr]=n||null,Ar(this,Wr,t),Ar(this,Ur,Rr(e))}var Pr="EMAIL_SIGNIN",Dr="email",Lr="newEmail",Mr="requestType",Fr="email",jr="fromEmail",Ur="data",Wr="operation";function Br(t,e){this.code=qr+t,this.message=e||Hr[t]||""}function Vr(t){var e=t&&t.code;return e?new Br(e.substring(qr.length),t.message):null}e(Br,Error),Br.prototype.C=function(){return{code:this.code,message:this.message}},Br.prototype.toJSON=function(){return this.C()};var qr="auth/",Hr={"argument-error":"","app-not-authorized":"This app, identified by the domain where it's hosted, is not authorized to use Firebase Authentication with the provided API key. Review your key configuration in the Google API console.","app-not-installed":"The requested mobile application corresponding to the identifier (Android package name or iOS bundle ID) provided is not installed on this device.","captcha-check-failed":"The reCAPTCHA response token provided is either invalid, expired, already used or the domain associated with it does not match the list of whitelisted domains.","code-expired":"The SMS code has expired. Please re-send the verification code to try again.","cordova-not-ready":"Cordova framework is not ready.","cors-unsupported":"This browser is not supported.","credential-already-in-use":"This credential is already associated with a different user account.","custom-token-mismatch":"The custom token corresponds to a different audience.","requires-recent-login":"This operation is sensitive and requires recent authentication. Log in again before retrying this request.","dynamic-link-not-activated":"Please activate Dynamic Links in the Firebase Console and agree to the terms and conditions.","email-already-in-use":"The email address is already in use by another account.","expired-action-code":"The action code has expired. ","cancelled-popup-request":"This operation has been cancelled due to another conflicting popup being opened.","internal-error":"An internal error has occurred.","invalid-app-credential":"The phone verification request contains an invalid application verifier. The reCAPTCHA token response is either invalid or expired.","invalid-app-id":"The mobile app identifier is not registed for the current project.","invalid-user-token":"This user's credential isn't valid for this project. This can happen if the user's token has been tampered with, or if the user isn't for the project associated with this API key.","invalid-auth-event":"An internal error has occurred.","invalid-verification-code":"The SMS verification code used to create the phone auth credential is invalid. Please resend the verification code sms and be sure use the verification code provided by the user.","invalid-continue-uri":"The continue URL provided in the request is invalid.","invalid-cordova-configuration":"The following Cordova plugins must be installed to enable OAuth sign-in: cordova-plugin-buildinfo, cordova-universal-links-plugin, cordova-plugin-browsertab, cordova-plugin-inappbrowser and cordova-plugin-customurlscheme.","invalid-custom-token":"The custom token format is incorrect. Please check the documentation.","invalid-dynamic-link-domain":"The provided dynamic link domain is not configured or authorized for the current project.","invalid-email":"The email address is badly formatted.","invalid-api-key":"Your API key is invalid, please check you have copied it correctly.","invalid-cert-hash":"The SHA-1 certificate hash provided is invalid.","invalid-credential":"The supplied auth credential is malformed or has expired.","invalid-persistence-type":"The specified persistence type is invalid. It can only be local, session or none.","invalid-message-payload":"The email template corresponding to this action contains invalid characters in its message. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-oauth-provider":"EmailAuthProvider is not supported for this operation. This operation only supports OAuth providers.","invalid-oauth-client-id":"The OAuth client ID provided is either invalid or does not match the specified API key.","unauthorized-domain":"This domain is not authorized for OAuth operations for your Firebase project. Edit the list of authorized domains from the Firebase console.","invalid-action-code":"The action code is invalid. This can happen if the code is malformed, expired, or has already been used.","wrong-password":"The password is invalid or the user does not have a password.","invalid-phone-number":"The format of the phone number provided is incorrect. Please enter the phone number in a format that can be parsed into E.164 format. E.164 phone numbers are written in the format [+][country code][subscriber number including area code].","invalid-provider-id":"The specified provider ID is invalid.","invalid-recipient-email":"The email corresponding to this action failed to send as the provided recipient email address is invalid.","invalid-sender":"The email template corresponding to this action contains an invalid sender email or name. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-verification-id":"The verification ID used to create the phone auth credential is invalid.","missing-android-pkg-name":"An Android Package Name must be provided if the Android App is required to be installed.","auth-domain-config-required":"Be sure to include authDomain when calling firebase.initializeApp(), by following the instructions in the Firebase console.","missing-app-credential":"The phone verification request is missing an application verifier assertion. A reCAPTCHA response token needs to be provided.","missing-verification-code":"The phone auth credential was created with an empty SMS verification code.","missing-continue-uri":"A continue URL must be provided in the request.","missing-iframe-start":"An internal error has occurred.","missing-ios-bundle-id":"An iOS Bundle ID must be provided if an App Store ID is provided.","missing-or-invalid-nonce":"The OIDC ID token requires a valid unhashed nonce.","missing-phone-number":"To send verification codes, provide a phone number for the recipient.","missing-verification-id":"The phone auth credential was created with an empty verification ID.","app-deleted":"This instance of FirebaseApp has been deleted.","account-exists-with-different-credential":"An account already exists with the same email address but different sign-in credentials. Sign in using a provider associated with this email address.","network-request-failed":"A network error (such as timeout, interrupted connection or unreachable host) has occurred.","no-auth-event":"An internal error has occurred.","no-such-provider":"User was not linked to an account with the given provider.","null-user":"A null user object was provided as the argument for an operation which requires a non-null user object.","operation-not-allowed":"The given sign-in provider is disabled for this Firebase project. Enable it in the Firebase console, under the sign-in method tab of the Auth section.","operation-not-supported-in-this-environment":'This operation is not supported in the environment this application is running on. "location.protocol" must be http, https or chrome-extension and web storage must be enabled.',"popup-blocked":"Unable to establish a connection with the popup. It may have been blocked by the browser.","popup-closed-by-user":"The popup has been closed by the user before finalizing the operation.","provider-already-linked":"User can only be linked to one identity for the given provider.","quota-exceeded":"The project's quota for this operation has been exceeded.","redirect-cancelled-by-user":"The redirect operation has been cancelled by the user before finalizing.","redirect-operation-pending":"A redirect sign-in operation is already pending.","rejected-credential":"The request contains malformed or mismatching credentials.",timeout:"The operation has timed out.","user-token-expired":"The user's credential is no longer valid. The user must sign in again.","too-many-requests":"We have blocked all requests from this device due to unusual activity. Try again later.","unauthorized-continue-uri":"The domain of the continue URL is not whitelisted.  Please whitelist the domain in the Firebase console.","unsupported-persistence-type":"The current environment does not support the specified persistence type.","user-cancelled":"User did not grant your application the permissions it requested.","user-not-found":"There is no user record corresponding to this identifier. The user may have been deleted.","user-disabled":"The user account has been disabled by an administrator.","user-mismatch":"The supplied credentials do not correspond to the previously signed in user.","user-signed-out":"","weak-password":"The password must be 6 characters long or more.","web-storage-unsupported":"This browser is not supported or 3rd party cookies and data may be disabled."};function Kr(t){var e=t[Xr];if(void 0===e)throw new Br("missing-continue-uri");if("string"!=typeof e||"string"==typeof e&&!e.length)throw new Br("invalid-continue-uri");this.h=e,this.b=this.a=null,this.g=!1;var n=t[Gr];if(n&&"object"==typeof n){e=n[Zr];var r=n[Jr];if(n=n[$r],"string"==typeof e&&e.length){if(this.a=e,void 0!==r&&"boolean"!=typeof r)throw new Br("argument-error",Jr+" property must be a boolean when specified.");if(this.g=!!r,void 0!==n&&("string"!=typeof n||"string"==typeof n&&!n.length))throw new Br("argument-error",$r+" property must be a non empty string when specified.");this.b=n||null}else{if(void 0!==e)throw new Br("argument-error",Zr+" property must be a non empty string when specified.");if(void 0!==r||void 0!==n)throw new Br("missing-android-pkg-name")}}else if(void 0!==n)throw new Br("argument-error",Gr+" property must be a non null object when specified.");if(this.f=null,(e=t[Yr])&&"object"==typeof e){if("string"==typeof(e=e[ti])&&e.length)this.f=e;else if(void 0!==e)throw new Br("argument-error",ti+" property must be a non empty string when specified.")}else if(void 0!==e)throw new Br("argument-error",Yr+" property must be a non null object when specified.");if(void 0!==(e=t[zr])&&"boolean"!=typeof e)throw new Br("argument-error",zr+" property must be a boolean when specified.");if(this.c=!!e,void 0!==(t=t[Qr])&&("string"!=typeof t||"string"==typeof t&&!t.length))throw new Br("argument-error",Qr+" property must be a non empty string when specified.");this.i=t||null}var Gr="android",Qr="dynamicLinkDomain",zr="handleCodeInApp",Yr="iOS",Xr="url",Jr="installApp",$r="minimumVersion",Zr="packageName",ti="bundleId";function ei(t){var e={};for(var n in e.continueUrl=t.h,e.canHandleCodeInApp=t.c,(e.androidPackageName=t.a)&&(e.androidMinimumVersion=t.b,e.androidInstallApp=t.g),e.iOSBundleId=t.f,e.dynamicLinkDomain=t.i,e)null===e[n]&&delete e[n];return e}var ni=null,ri=null;function ii(t){var e="";return function(r,t){function e(t){for(;i<r.length;){var e=r.charAt(i++),n=ri[e];if(null!=n)return n;if(!/^[\s\xa0]*$/.test(e))throw Error("Unknown base64 encoding at char: "+e)}return t}!function(){if(!ni){ni={},ri={};for(var t=0;t<65;t++)ni[t]="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".charAt(t),62<=(ri[ni[t]]=t)&&(ri["ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_.".charAt(t)]=t)}}();for(var i=0;;){var n=e(-1),o=e(0),a=e(64),s=e(64);if(64===s&&-1===n)break;t(n<<2|o>>4),64!=a&&(t(o<<4&240|a>>2),64!=s&&t(a<<6&192|s))}}(t,function(t){e+=String.fromCharCode(t)}),e}function oi(t){this.c=t.sub,_(),this.a=t.provider_id||t.firebase&&t.firebase.sign_in_provider||null,this.b=!!t.is_anonymous||"anonymous"==this.a}function ai(t){return(t=si(t))&&t.sub&&t.iss&&t.aud&&t.exp?new oi(t):null}function si(t){if(!t)return null;if(3!=(t=t.split(".")).length)return null;for(var e=(4-(t=t[1]).length%4)%4,n=0;n<e;n++)t+=".";try{return JSON.parse(ii(t))}catch(t){}return null}oi.prototype.f=function(){return this.b};var ui,ci={$c:{ab:"https://www.googleapis.com/identitytoolkit/v3/relyingparty/",ib:"https://securetoken.googleapis.com/v1/token",id:"p"},bd:{ab:"https://staging-www.sandbox.googleapis.com/identitytoolkit/v3/relyingparty/",ib:"https://staging-securetoken.sandbox.googleapis.com/v1/token",id:"s"},cd:{ab:"https://www-googleapis-test.sandbox.google.com/identitytoolkit/v3/relyingparty/",ib:"https://test-securetoken.sandbox.googleapis.com/v1/token",id:"t"}};function hi(t){for(var e in ci)if(ci[e].id===t)return{firebaseEndpoint:(t=ci[e]).ab,secureTokenEndpoint:t.ib};return null}ui=hi("__EID__")?"__EID__":void 0;var li="oauth_consumer_key oauth_nonce oauth_signature oauth_signature_method oauth_timestamp oauth_token oauth_version".split(" "),fi=["client_id","response_type","scope","redirect_uri","state"],pi={Vc:{Ma:"locale",Ba:500,Aa:600,Na:"facebook.com",hb:fi},Xc:{Ma:null,Ba:500,Aa:620,Na:"github.com",hb:fi},Yc:{Ma:"hl",Ba:515,Aa:680,Na:"google.com",hb:fi},dd:{Ma:"lang",Ba:485,Aa:705,Na:"twitter.com",hb:li}};function di(t){for(var e in pi)if(pi[e].Na==t)return pi[e];return null}function vi(t){var e={};e["facebook.com"]=bi,e["google.com"]=Ei,e["github.com"]=wi,e["twitter.com"]=Si;var n=t&&t[gi];try{if(n)return e[n]?new e[n](t):new _i(t);if(void 0!==t[yi])return new mi(t)}catch(t){}return null}var yi="idToken",gi="providerId";function mi(t){var e=t[gi];if(!e&&t[yi]){var n=ai(t[yi]);n&&n.a&&(e=n.a)}if(!e)throw Error("Invalid additional user info!");"anonymous"!=e&&"custom"!=e||(e=null),n=!1,void 0!==t.isNewUser?n=!!t.isNewUser:"identitytoolkit#SignupNewUserResponse"===t.kind&&(n=!0),Ar(this,"providerId",e),Ar(this,"isNewUser",n)}function _i(t){mi.call(this,t),Ar(this,"profile",Rr((t=vr(t.rawUserInfo||"{}"))||{}))}function bi(t){if(_i.call(this,t),"facebook.com"!=this.providerId)throw Error("Invalid provider ID!")}function wi(t){if(_i.call(this,t),"github.com"!=this.providerId)throw Error("Invalid provider ID!");Ar(this,"username",this.profile&&this.profile.login||null)}function Ei(t){if(_i.call(this,t),"google.com"!=this.providerId)throw Error("Invalid provider ID!")}function Si(t){if(_i.call(this,t),"twitter.com"!=this.providerId)throw Error("Invalid provider ID!");Ar(this,"username",t.screenName||null)}function Ti(t){this.a=Qe(t)}function Ci(t){var e=Qe(t),n=Ge(e,"link"),r=Ge(Qe(n),"link");return Ge(Qe(e=Ge(e,"deep_link_id")),"link")||e||r||n||t}function Ii(t,n){return t.then(function(t){if(t[ua]){var e=ai(t[ua]);if(!e||n!=e.c)throw new Br("user-mismatch");return t}throw new Br("user-mismatch")}).s(function(t){throw t&&t.code&&t.code==qr+"user-not-found"?new Br("user-mismatch"):t})}function xi(t,e){if(!e)throw new Br("internal-error","failed to construct a credential");this.a=e,Ar(this,"providerId",t),Ar(this,"signInMethod",t)}function Ai(t){return{pendingToken:t.a,requestUri:"http://localhost"}}function Ni(t,e,n){if(this.a=null,e.idToken||e.accessToken)e.idToken&&Ar(this,"idToken",e.idToken),e.accessToken&&Ar(this,"accessToken",e.accessToken),e.nonce&&!e.pendingToken&&Ar(this,"nonce",e.nonce),e.pendingToken&&(this.a=e.pendingToken);else{if(!e.oauthToken||!e.oauthTokenSecret)throw new Br("internal-error","failed to construct a credential");Ar(this,"accessToken",e.oauthToken),Ar(this,"secret",e.oauthTokenSecret)}Ar(this,"providerId",t),Ar(this,"signInMethod",n)}function ki(t){var e={};return t.idToken&&(e.id_token=t.idToken),t.accessToken&&(e.access_token=t.accessToken),t.secret&&(e.oauth_token_secret=t.secret),e.providerId=t.providerId,t.nonce&&!t.a&&(e.nonce=t.nonce),e={postBody:an(e).toString(),requestUri:"http://localhost"},t.a&&(delete e.postBody,e.pendingToken=t.a),e}function Ri(t,e){this.Dc=e||[],Nr(this,{providerId:t,isOAuthProvider:!0}),this.yb={},this.cb=(di(t)||{}).Ma||null,this.$a=null}function Oi(t){if("string"!=typeof t||0!=t.indexOf("saml."))throw new Br("argument-error",'SAML provider IDs must be prefixed with "saml."');Ri.call(this,t,[])}function Pi(t){Ri.call(this,t,fi),this.a=[]}function Di(){Pi.call(this,"facebook.com")}function Li(t){if(!t)throw new Br("argument-error","credential failed: expected 1 argument (the OAuth access token).");var e=t;return p(t)&&(e=t.accessToken),(new Di).credential(null,e)}function Mi(){Pi.call(this,"github.com")}function Fi(t){if(!t)throw new Br("argument-error","credential failed: expected 1 argument (the OAuth access token).");var e=t;return p(t)&&(e=t.accessToken),(new Mi).credential(null,e)}function ji(){Pi.call(this,"google.com"),this.ua("profile")}function Ui(t,e){var n=t;return p(t)&&(n=t.idToken,e=t.accessToken),(new ji).credential(n,e)}function Wi(){Ri.call(this,"twitter.com",li)}function Bi(t,e){var n=t;if(p(n)||(n={oauthToken:t,oauthTokenSecret:e}),!n.oauthToken||!n.oauthTokenSecret)throw new Br("argument-error","credential failed: expected 2 arguments (the OAuth access token and secret).");return new Ni("twitter.com",n,"twitter.com")}function Vi(t,e,n){this.a=t,this.c=e,Ar(this,"providerId","password"),Ar(this,"signInMethod",n===qi.EMAIL_LINK_SIGN_IN_METHOD?qi.EMAIL_LINK_SIGN_IN_METHOD:qi.EMAIL_PASSWORD_SIGN_IN_METHOD)}function qi(){Nr(this,{providerId:"password",isOAuthProvider:!1})}function Hi(t,e){if(!(e=Ki(e)))throw new Br("argument-error","Invalid email link!");return new Vi(t,e,qi.EMAIL_LINK_SIGN_IN_METHOD)}function Ki(t){var e=Ge((t=new Ti(t=Ci(t))).a,"oobCode")||null;return"signIn"===(Ge(t.a,"mode")||null)&&e?e:null}function Gi(t){if(!(t.Ta&&t.Sa||t.Fa&&t.$))throw new Br("internal-error");this.a=t,Ar(this,"providerId","phone"),Ar(this,"signInMethod","phone")}function Qi(t){return t.a.Fa&&t.a.$?{temporaryProof:t.a.Fa,phoneNumber:t.a.$}:{sessionInfo:t.a.Ta,code:t.a.Sa}}function zi(t){try{this.a=t||Mh.a.auth()}catch(t){throw new Br("argument-error","Either an instance of firebase.auth.Auth must be passed as an argument to the firebase.auth.PhoneAuthProvider constructor, or the default firebase App instance must be initialized via firebase.initializeApp().")}Nr(this,{providerId:"phone",isOAuthProvider:!1})}function Yi(t,e){if(!t)throw new Br("missing-verification-id");if(!e)throw new Br("missing-verification-code");return new Gi({Ta:t,Sa:e})}function Xi(t){if(t.temporaryProof&&t.phoneNumber)return new Gi({Fa:t.temporaryProof,$:t.phoneNumber});var e=t&&t.providerId;if(!e||"password"===e)return null;var n=t&&t.oauthAccessToken,r=t&&t.oauthTokenSecret,i=t&&t.nonce,o=t&&t.oauthIdToken,a=t&&t.pendingToken;try{switch(e){case"google.com":return Ui(o,n);case"facebook.com":return Li(n);case"github.com":return Fi(n);case"twitter.com":return Bi(n,r);default:return n||r||o||a?a?0==e.indexOf("saml.")?new xi(e,a):new Ni(e,{pendingToken:a,idToken:t.oauthIdToken,accessToken:t.oauthAccessToken},e):new Pi(e).credential(o,n,i):null}}catch(t){return null}}function Ji(t){if(!t.isOAuthProvider)throw new Br("invalid-oauth-provider")}function $i(t,e,n,r,i,o){if(this.b=t,this.c=e||null,this.f=n||null,this.g=r||null,this.h=o||null,this.a=i||null,!this.f&&!this.a)throw new Br("invalid-auth-event");if(this.f&&this.a)throw new Br("invalid-auth-event");if(this.f&&!this.g)throw new Br("invalid-auth-event")}function Zi(t){return(t=t||{}).type?new $i(t.type,t.eventId,t.urlResponse,t.sessionId,t.error&&Vr(t.error),t.postBody):null}function to(){this.b=null,this.a=[]}e(_i,mi),e(bi,_i),e(wi,_i),e(Ei,_i),e(Si,_i),xi.prototype.la=function(t){return Ia(t,Ai(this))},xi.prototype.b=function(t,e){var n=Ai(this);return n.idToken=e,xa(t,n)},xi.prototype.f=function(t,e){return Ii(Aa(t,Ai(this)),e)},xi.prototype.C=function(){return{providerId:this.providerId,signInMethod:this.signInMethod,pendingToken:this.a}},Ni.prototype.la=function(t){return Ia(t,ki(this))},Ni.prototype.b=function(t,e){var n=ki(this);return n.idToken=e,xa(t,n)},Ni.prototype.f=function(t,e){return Ii(Aa(t,ki(this)),e)},Ni.prototype.C=function(){var t={providerId:this.providerId,signInMethod:this.signInMethod};return this.idToken&&(t.oauthIdToken=this.idToken),this.accessToken&&(t.oauthAccessToken=this.accessToken),this.secret&&(t.oauthTokenSecret=this.secret),this.nonce&&(t.nonce=this.nonce),this.a&&(t.pendingToken=this.a),t},Ri.prototype.Da=function(t){return this.yb=it(t),this},e(Oi,Ri),e(Pi,Ri),Pi.prototype.ua=function(t){return L(this.a,t)||this.a.push(t),this},Pi.prototype.Eb=function(){return U(this.a)},Pi.prototype.credential=function(t,e,n){if(!t&&!e)throw new Br("argument-error","credential failed: must provide the ID token and/or the access token.");return new Ni(this.providerId,{idToken:t||null,accessToken:e||null,nonce:n||null},this.providerId)},e(Di,Pi),Ar(Di,"PROVIDER_ID","facebook.com"),Ar(Di,"FACEBOOK_SIGN_IN_METHOD","facebook.com"),e(Mi,Pi),Ar(Mi,"PROVIDER_ID","github.com"),Ar(Mi,"GITHUB_SIGN_IN_METHOD","github.com"),e(ji,Pi),Ar(ji,"PROVIDER_ID","google.com"),Ar(ji,"GOOGLE_SIGN_IN_METHOD","google.com"),e(Wi,Ri),Ar(Wi,"PROVIDER_ID","twitter.com"),Ar(Wi,"TWITTER_SIGN_IN_METHOD","twitter.com"),Vi.prototype.la=function(t){return this.signInMethod==qi.EMAIL_LINK_SIGN_IN_METHOD?rs(t,Ma,{email:this.a,oobCode:this.c}):rs(t,Za,{email:this.a,password:this.c})},Vi.prototype.b=function(t,e){return this.signInMethod==qi.EMAIL_LINK_SIGN_IN_METHOD?rs(t,Fa,{idToken:e,email:this.a,oobCode:this.c}):rs(t,Qa,{idToken:e,email:this.a,password:this.c})},Vi.prototype.f=function(t,e){return Ii(this.la(t),e)},Vi.prototype.C=function(){return{email:this.a,password:this.c,signInMethod:this.signInMethod}},Nr(qi,{PROVIDER_ID:"password"}),Nr(qi,{EMAIL_LINK_SIGN_IN_METHOD:"emailLink"}),Nr(qi,{EMAIL_PASSWORD_SIGN_IN_METHOD:"password"}),Gi.prototype.la=function(t){return t.Ua(Qi(this))},Gi.prototype.b=function(t,e){var n=Qi(this);return n.idToken=e,rs(t,es,n)},Gi.prototype.f=function(t,e){var n=Qi(this);return n.operation="REAUTH",Ii(t=rs(t,ns,n),e)},Gi.prototype.C=function(){var t={providerId:"phone"};return this.a.Ta&&(t.verificationId=this.a.Ta),this.a.Sa&&(t.verificationCode=this.a.Sa),this.a.Fa&&(t.temporaryProof=this.a.Fa),this.a.$&&(t.phoneNumber=this.a.$),t},zi.prototype.Ua=function(e,n){var r=this.a.b;return wt(n.verify()).then(function(t){if(!c(t))throw new Br("argument-error","An implementation of firebase.auth.ApplicationVerifier.prototype.verify() must return a firebase.Promise that resolves with a string.");switch(n.type){case"recaptcha":return function(t,e){return rs(t,Ka,e)}(r,{phoneNumber:e,recaptchaToken:t}).then(function(t){return"function"==typeof n.reset&&n.reset(),t},function(t){throw"function"==typeof n.reset&&n.reset(),t});default:throw new Br("argument-error",'Only firebase.auth.ApplicationVerifiers with type="recaptcha" are currently supported.')}})},Nr(zi,{PROVIDER_ID:"phone"}),Nr(zi,{PHONE_SIGN_IN_METHOD:"phone"}),$i.prototype.C=function(){return{type:this.b,eventId:this.c,urlResponse:this.f,sessionId:this.g,postBody:this.h,error:this.a&&this.a.C()}};var eo,no=null;function ro(t){var e="unauthorized-domain",n=void 0,r=Qe(t);t=r.b,"chrome-extension"==(r=r.c)?n=W("This chrome extension ID (chrome-extension://%s) is not authorized to run this operation. Add it to the OAuth redirect domains list in the Firebase console -> Auth section -> Sign in method tab.",t):"http"==r||"https"==r?n=W("This domain (%s) is not authorized to run this operation. Add it to the OAuth redirect domains list in the Firebase console -> Auth section -> Sign in method tab.",t):e="operation-not-supported-in-this-environment",Br.call(this,e,n)}function io(t,e,n){Br.call(this,t,n),(t=e||{}).zb&&Ar(this,"email",t.zb),t.$&&Ar(this,"phoneNumber",t.$),t.credential&&Ar(this,"credential",t.credential)}function oo(t){if(t.code){var e=t.code||"";0==e.indexOf(qr)&&(e=e.substring(qr.length));var n={credential:Xi(t)};if(t.email)n.zb=t.email;else if(t.phoneNumber)n.$=t.phoneNumber;else if(!n.credential)return new Br(e,t.message||void 0);return new io(e,n,t.message)}return null}function ao(){}function so(t){return t.c||(t.c=t.b())}function uo(){}function co(t){if(t.f||"undefined"!=typeof XMLHttpRequest||"undefined"==typeof ActiveXObject)return t.f;for(var e=["MSXML2.XMLHTTP.6.0","MSXML2.XMLHTTP.3.0","MSXML2.XMLHTTP","Microsoft.XMLHTTP"],n=0;n<e.length;n++){var r=e[n];try{return new ActiveXObject(r),t.f=r}catch(t){}}throw Error("Could not create ActiveXObject. ActiveX might be disabled, or MSXML might not be installed")}function ho(){}function lo(){this.a=new XDomainRequest,this.readyState=0,this.onreadystatechange=null,this.responseText="",this.status=-1,this.statusText="",this.a.onload=g(this.ec,this),this.a.onerror=g(this.Fb,this),this.a.onprogress=g(this.fc,this),this.a.ontimeout=g(this.ic,this)}function fo(t,e){t.readyState=e,t.onreadystatechange&&t.onreadystatechange()}function po(t,e,n){this.reset(t,e,n,void 0,void 0)}to.prototype.subscribe=function(t){var n=this;this.a.push(t),this.b||(this.b=function(t){for(var e=0;e<n.a.length;e++)n.a[e](t)},"function"==typeof(t=sr("universalLinks.subscribe",h))&&t(null,this.b))},to.prototype.unsubscribe=function(e){F(this.a,function(t){return t==e})},e(ro,Br),e(io,Br),io.prototype.C=function(){var t={code:this.code,message:this.message};this.email&&(t.email=this.email),this.phoneNumber&&(t.phoneNumber=this.phoneNumber);var e=this.credential&&this.credential.C();return e&&ut(t,e),t},io.prototype.toJSON=function(){return this.C()},ao.prototype.c=null,e(uo,ao),uo.prototype.a=function(){var t=co(this);return t?new ActiveXObject(t):new XMLHttpRequest},uo.prototype.b=function(){var t={};return co(this)&&(t[0]=!0,t[1]=!0),t},eo=new uo,e(ho,ao),ho.prototype.a=function(){var t=new XMLHttpRequest;if("withCredentials"in t)return t;if("undefined"!=typeof XDomainRequest)return new lo;throw Error("Unsupported browser")},ho.prototype.b=function(){return{}},(t=lo.prototype).open=function(t,e,n){if(null!=n&&!n)throw Error("Only async requests are supported.");this.a.open(t,e)},t.send=function(t){if(t){if("string"!=typeof t)throw Error("Only string data is supported");this.a.send(t)}else this.a.send()},t.abort=function(){this.a.abort()},t.setRequestHeader=function(){},t.getResponseHeader=function(t){return"content-type"==t.toLowerCase()?this.a.contentType:""},t.ec=function(){this.status=200,this.responseText=this.a.responseText,fo(this,4)},t.Fb=function(){this.status=500,this.responseText="",fo(this,4)},t.ic=function(){this.Fb()},t.fc=function(){this.status=200,fo(this,1)},t.getAllResponseHeaders=function(){return"content-type: "+this.a.contentType},po.prototype.a=null;function vo(t){this.f=t,this.b=this.c=this.a=null}function yo(t,e){this.name=t,this.value=e}po.prototype.reset=function(t,e,n,r,i){"number"==typeof i||0,r||_(),delete this.a},yo.prototype.toString=function(){return this.name};var go=new yo("SEVERE",1e3),mo=new yo("WARNING",900),_o=new yo("CONFIG",700),bo=new yo("FINE",500);vo.prototype.log=function(t,e,n){if(t.value>=function t(e){return e.c?e.c:e.a?t(e.a):(T("Root logger has no level set."),null)}(this).value)for(a(e)&&(e=e()),t=new po(t,String(e),this.f),n&&(t.a=n),n=this;n;)n=n.a};var wo={},Eo=null;function So(t){var e;if(Eo||(Eo=new vo(""),(wo[""]=Eo).c=_o),!(e=wo[t])){e=new vo(t);var n=t.lastIndexOf("."),r=t.substr(n+1);(n=So(t.substr(0,n))).b||(n.b={}),(n.b[r]=e).a=n,wo[t]=e}return e}function To(t,e){t&&t.log(bo,e,void 0)}function Co(t){this.f=t}function Io(t){Ne.call(this),this.i=t,this.readyState=xo,this.status=0,this.responseText=this.statusText="",this.onreadystatechange=null,this.g=new Headers,this.b=null,this.h="GET",this.c="",this.a=!1,this.f=So("goog.net.FetchXmlHttp")}e(Co,ao),Co.prototype.a=function(){return new Io(this.f)},Co.prototype.b=function(t){return function(){return t}}({}),e(Io,Ne);var xo=0;function Ao(t){t.onreadystatechange&&t.onreadystatechange.call(t)}function No(t){Ne.call(this),this.headers=new Fe,this.D=t||null,this.c=!1,this.w=this.a=null,this.h=this.N=this.m="",this.f=this.I=this.i=this.G=!1,this.g=0,this.u=null,this.o=ko,this.v=this.O=!1}(t=Io.prototype).open=function(t,e){if(this.readyState!=xo)throw this.abort(),Error("Error reopening a connection");this.h=t,this.c=e,this.readyState=1,Ao(this)},t.send=function(t){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.a=!0;var e={headers:this.g,method:this.h,credentials:void 0,cache:void 0};t&&(e.body=t),this.i.fetch(new Request(this.c,e)).then(this.hc.bind(this),this.Gb.bind(this))},t.abort=function(){this.responseText="",this.g=new Headers,this.status=0,1<=this.readyState&&this.a&&4!=this.readyState&&(this.readyState=4,this.a=!1,Ao(this)),this.readyState=xo},t.hc=function(t){this.a&&(this.b||(this.b=t.headers,this.readyState=2,Ao(this)),this.a&&(this.readyState=3,Ao(this),this.a&&t.text().then(this.gc.bind(this,t),this.Gb.bind(this))))},t.gc=function(t,e){this.a&&(this.status=t.status,this.statusText=t.statusText,this.responseText=e,this.readyState=4,Ao(this))},t.Gb=function(t){var e=this.f;e&&e.log(mo,"Failed to fetch url "+this.c,t instanceof Error?t:Error(t)),this.a&&(this.readyState=4,Ao(this))},t.setRequestHeader=function(t,e){this.g.append(t,e)},t.getResponseHeader=function(t){return this.b?this.b.get(t.toLowerCase())||"":((t=this.f)&&t.log(mo,"Attempting to get response header but no headers have been received for url: "+this.c,void 0),"")},t.getAllResponseHeaders=function(){if(!this.b){var t=this.f;return t&&t.log(mo,"Attempting to get all response headers but no headers have been received for url: "+this.c,void 0),""}t=[];for(var e=this.b.entries(),n=e.next();!n.done;)n=n.value,t.push(n[0]+": "+n[1]),n=e.next();return t.join("\r\n")},e(No,Ne);var ko="";No.prototype.b=So("goog.net.XhrIo");var Ro=/^https?$/i,Oo=["POST","PUT"];function Po(e,t,n,r,i){if(e.a)throw Error("[goog.net.XhrIo] Object is active with another request="+e.m+"; newUri="+t);n=n?n.toUpperCase():"GET",e.m=t,e.h="",e.N=n,e.G=!1,e.c=!0,e.a=e.D?e.D.a():eo.a(),e.w=e.D?so(e.D):so(eo),e.a.onreadystatechange=g(e.Jb,e);try{To(e.b,Vo(e,"Opening Xhr")),e.I=!0,e.a.open(n,String(t),!0),e.I=!1}catch(t){return To(e.b,Vo(e,"Error opening Xhr: "+t.message)),void Lo(e,t)}t=r||"";var o=new Fe(e.headers);i&&function(t,e){if(t.forEach&&"function"==typeof t.forEach)t.forEach(e,void 0);else if(f(t)||c(t))O(t,e,void 0);else for(var n=Me(t),r=Le(t),i=r.length,o=0;o<i;o++)e.call(void 0,r[o],n&&n[o],t)}(i,function(t,e){o.set(e,t)}),i=function(t){t:{for(var e=Do,n=t.length,r=c(t)?t.split(""):t,i=0;i<n;i++)if(i in r&&e.call(void 0,r[i],i,t)){e=i;break t}e=-1}return e<0?null:c(t)?t.charAt(e):t[e]}(o.U()),r=h.FormData&&t instanceof h.FormData,!L(Oo,n)||i||r||o.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8"),o.forEach(function(t,e){this.a.setRequestHeader(e,t)},e),e.o&&(e.a.responseType=e.o),"withCredentials"in e.a&&e.a.withCredentials!==e.O&&(e.a.withCredentials=e.O);try{Uo(e),0<e.g&&(e.v=function(t){return Vt&&Zt(9)&&"number"==typeof t.timeout&&void 0!==t.ontimeout}(e.a),To(e.b,Vo(e,"Will abort after "+e.g+"ms if incomplete, xhr2 "+e.v)),e.v?(e.a.timeout=e.g,e.a.ontimeout=g(e.Ga,e)):e.u=Pe(e.Ga,e.g,e)),To(e.b,Vo(e,"Sending request")),e.i=!0,e.a.send(t),e.i=!1}catch(t){To(e.b,Vo(e,"Send error: "+t.message)),Lo(e,t)}}function Do(t){return"content-type"==t.toLowerCase()}function Lo(t,e){t.c=!1,t.a&&(t.f=!0,t.a.abort(),t.f=!1),t.h=e,Mo(t),jo(t)}function Mo(t){t.G||(t.G=!0,t.dispatchEvent("complete"),t.dispatchEvent("error"))}function Fo(e){if(e.c&&void 0!==u)if(e.w[1]&&4==Wo(e)&&2==Bo(e))To(e.b,Vo(e,"Local request error detected and ignored"));else if(e.i&&4==Wo(e))Pe(e.Jb,0,e);else if(e.dispatchEvent("readystatechange"),4==Wo(e)){To(e.b,Vo(e,"Request complete")),e.c=!1;try{var t,n=Bo(e);t:switch(n){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var r=!0;break t;default:r=!1}if(!(t=r)){var i;if(i=0===n){var o=String(e.m).match(We)[1]||null;if(!o&&h.self&&h.self.location){var a=h.self.location.protocol;o=a.substr(0,a.length-1)}i=!Ro.test(o?o.toLowerCase():"")}t=i}if(t)e.dispatchEvent("complete"),e.dispatchEvent("success");else{try{var s=2<Wo(e)?e.a.statusText:""}catch(t){To(e.b,"Can not get status: "+t.message),s=""}e.h=s+" ["+Bo(e)+"]",Mo(e)}}finally{jo(e)}}}function jo(e,t){if(e.a){Uo(e);var n=e.a,r=e.w[0]?o:null;e.a=null,e.w=null,t||e.dispatchEvent("ready");try{n.onreadystatechange=r}catch(t){(e=e.b)&&e.log(go,"Problem encountered resetting onreadystatechange: "+t.message,void 0)}}}function Uo(t){t.a&&t.v&&(t.a.ontimeout=null),t.u&&(h.clearTimeout(t.u),t.u=null)}function Wo(t){return t.a?t.a.readyState:0}function Bo(t){try{return 2<Wo(t)?t.a.status:-1}catch(t){return-1}}function Vo(t,e){return e+" ["+t.N+" "+t.m+" "+Bo(t)+"]"}function qo(t,e){this.g=[],this.v=t,this.u=e||null,this.f=this.a=!1,this.c=void 0,this.m=this.w=this.i=!1,this.h=0,this.b=null,this.l=0}function Ho(t,e,n){t.a=!0,t.c=n,t.f=!e,zo(t)}function Ko(t){if(t.a){if(!t.m)throw new Yo(t);t.m=!1}}function Go(t,e,n,r){t.g.push([e,n,r]),t.a&&zo(t)}function Qo(t){return D(t.g,function(t){return a(t[1])})}function zo(e){if(e.h&&e.a&&Qo(e)){var n=e.h,r=$o[n];r&&(h.clearTimeout(r.a),delete $o[n]),e.h=0}e.b&&(e.b.l--,delete e.b),n=e.c;for(var t=r=!1;e.g.length&&!e.i;){var i=e.g.shift(),o=i[0],a=i[1];if(i=i[2],o=e.f?a:o)try{var s=o.call(i||e.u,n);void 0!==s&&(e.f=e.f&&(s==n||s instanceof Error),e.c=n=s),(w(n)||"function"==typeof h.Promise&&n instanceof h.Promise)&&(t=!0,e.i=!0)}catch(t){n=t,e.f=!0,Qo(e)||(r=!0)}}e.c=n,t&&(s=g(e.o,e,!0),t=g(e.o,e,!1),n instanceof qo?(Go(n,s,t),n.w=!0):n.then(s,t)),r&&(n=new Jo(n),$o[n.a]=n,e.h=n.a)}function Yo(){E.call(this)}function Xo(){E.call(this)}function Jo(t){this.a=h.setTimeout(g(this.c,this),0),this.b=t}(t=No.prototype).Ga=function(){void 0!==u&&this.a&&(this.h="Timed out after "+this.g+"ms, aborting",To(this.b,Vo(this,this.h)),this.dispatchEvent("timeout"),this.abort(8))},t.abort=function(){this.a&&this.c&&(To(this.b,Vo(this,"Aborting")),this.c=!1,this.f=!0,this.a.abort(),this.f=!1,this.dispatchEvent("complete"),this.dispatchEvent("abort"),jo(this))},t.va=function(){this.a&&(this.c&&(this.c=!1,this.f=!0,this.a.abort(),this.f=!1),jo(this,!0)),No.ob.va.call(this)},t.Jb=function(){this.qa||(this.I||this.i||this.f?Fo(this):this.wc())},t.wc=function(){Fo(this)},t.getResponse=function(){try{if(!this.a)return null;if("response"in this.a)return this.a.response;switch(this.o){case ko:case"text":return this.a.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in this.a)return this.a.mozResponseArrayBuffer}var t=this.b;return t&&t.log(go,"Response type "+this.o+" is not supported on this browser",void 0),null}catch(t){return To(this.b,"Can not get response: "+t.message),null}},qo.prototype.cancel=function(t){if(this.a)this.c instanceof qo&&this.c.cancel();else{if(this.b){var e=this.b;delete this.b,t?e.cancel(t):(e.l--,e.l<=0&&e.cancel())}this.v?this.v.call(this.u,this):this.m=!0,this.a||(t=new Xo(this),Ko(this),Ho(this,!1,t))}},qo.prototype.o=function(t,e){this.i=!1,Ho(this,t,e)},qo.prototype.D=function(){Ko(this),Ho(this,!0,null)},qo.prototype.then=function(t,e,n){var r,i,o=new dt(function(t,e){r=t,i=e});return Go(this,r,function(t){t instanceof Xo?o.cancel():i(t)}),o.then(t,e,n)},b(qo),e(Yo,E),Yo.prototype.message="Deferred has already fired",Yo.prototype.name="AlreadyCalledError",e(Xo,E),Xo.prototype.message="Deferred was canceled",Xo.prototype.name="CanceledError",Jo.prototype.c=function(){throw delete $o[this.a],this.b};var $o={};function Zo(t){var e={},n=e.document||document,r=gn(t),i=document.createElement("SCRIPT"),o={Lb:i,Ga:void 0},a=new qo(ta,o),s=null,u=null!=e.timeout?e.timeout:5e3;return 0<u&&(s=window.setTimeout(function(){ea(i,!0);var t=new ia(ra,"Timeout reached for loading script "+r);Ko(a),Ho(a,!1,t)},u),o.Ga=s),i.onload=i.onreadystatechange=function(){i.readyState&&"loaded"!=i.readyState&&"complete"!=i.readyState||(ea(i,e.fd||!1,s),a.D())},i.onerror=function(){ea(i,!0,s);var t=new ia(na,"Error while loading script "+r);Ko(a),Ho(a,!1,t)},ut(o=e.attributes||{},{type:"text/javascript",charset:"UTF-8"}),On(i,o),i.src=gn(t),function(t){var e;return(e=(t||document).getElementsByTagName("HEAD"))&&0!=e.length?e[0]:t.documentElement}(n).appendChild(i),a}function ta(){if(this&&this.Lb){var t=this.Lb;t&&"SCRIPT"==t.tagName&&ea(t,!0,this.Ga)}}function ea(t,e,n){null!=n&&h.clearTimeout(n),t.onload=o,t.onerror=o,t.onreadystatechange=o,e&&window.setTimeout(function(){t&&t.parentNode&&t.parentNode.removeChild(t)},0)}var na=0,ra=1;function ia(t,e){var n="Jsloader error (code #"+t+")";e&&(n+=": "+e),E.call(this,n),this.code=t}function oa(t){this.f=t}function aa(t,e,n){if(this.b=t,t=e||{},this.i=t.secureTokenEndpoint||"https://securetoken.googleapis.com/v1/token",this.l=t.secureTokenTimeout||ca,this.f=it(t.secureTokenHeaders||ha),this.g=t.firebaseEndpoint||"https://www.googleapis.com/identitytoolkit/v3/relyingparty/",this.h=t.firebaseTimeout||la,this.a=it(t.firebaseHeaders||fa),n&&(this.a["X-Client-Version"]=n,this.f["X-Client-Version"]=n),n="Node"==Zn(),!(n=h.XMLHttpRequest||n&&Mh.a.INTERNAL.node&&Mh.a.INTERNAL.node.XMLHttpRequest)&&!$n())throw new Br("internal-error","The XMLHttpRequest compatibility library was not found.");this.c=void 0,$n()?this.c=new Co(self):tr()?this.c=new oa(n):this.c=new ho}e(ia,E),e(oa,ao),oa.prototype.a=function(){return new this.f},oa.prototype.b=function(){return{}};var sa,ua="idToken",ca=new _r(3e4,6e4),ha={"Content-Type":"application/x-www-form-urlencoded"},la=new _r(3e4,6e4),fa={"Content-Type":"application/json"};function pa(t,e){e?t.a["X-Firebase-Locale"]=e:delete t.a["X-Firebase-Locale"]}function da(t,e){e?(t.a["X-Client-Version"]=e,t.f["X-Client-Version"]=e):(delete t.a["X-Client-Version"],delete t.f["X-Client-Version"])}function va(t,e,n,r,i,o,a){(t=function(){var t=ar();return!((t=rr(t)!=nr?null:(t=t.match(/\sChrome\/(\d+)/i))&&2==t.length?parseInt(t[1],10):null)&&t<30||Vt&&Jt&&!(9<Jt))}()||$n()?g(t.o,t):(sa||(sa=new dt(function(t,e){!function(t,e){if(((window.gapi||{}).client||{}).request)t();else{h[ga]=function(){((window.gapi||{}).client||{}).request?t():e(Error("CORS_UNSUPPORTED"))};var n=mn(ya,{onload:ga});!function(t,e){Go(t,null,e,void 0)}(Zo(n),function(){e(Error("CORS_UNSUPPORTED"))})}}(t,e)})),g(t.m,t)))(e,n,r,i,o,a)}aa.prototype.o=function(t,n,e,r,i,o){if($n()&&(void 0===h.fetch||void 0===h.Headers||void 0===h.Request))throw new Br("operation-not-supported-in-this-environment","fetch, Headers and Request native APIs or equivalent Polyfills must be available to support HTTP requests from a Worker environment.");var a=new No(this.c);if(o){a.g=Math.max(0,o);var s=setTimeout(function(){a.dispatchEvent("timeout")},o)}ke(a,"complete",function(){s&&clearTimeout(s);var e=null;try{e=JSON.parse(function(e){try{return e.a?e.a.responseText:""}catch(t){return To(e.b,"Can not get responseText: "+t.message),""}}(this))||null}catch(t){e=null}n&&n(e)}),Re(a,"ready",function(){s&&clearTimeout(s),jt(this)}),Re(a,"timeout",function(){s&&clearTimeout(s),jt(this),n&&n(null)}),Po(a,t,e,r,i)};var ya=vn("https://apis.google.com/js/client.js?onload=%{onload}"),ga="__fcb"+Math.floor(1e6*Math.random()).toString();function ma(t){if(!c(t=t.email)||!zn.test(t))throw new Br("invalid-email")}function _a(t){"email"in t&&ma(t)}function ba(t){if(!t[ua])throw new Br("internal-error")}function wa(t){if(t.phoneNumber||t.temporaryProof){if(!t.phoneNumber||!t.temporaryProof)throw new Br("internal-error")}else{if(!t.sessionInfo)throw new Br("missing-verification-id");if(!t.code)throw new Br("missing-verification-code")}}aa.prototype.m=function(t,n,r,i,o){var a=this;sa.then(function(){window.gapi.client.setApiKey(a.b);var e=window.gapi.auth.getToken();window.gapi.auth.setToken(null),window.gapi.client.request({path:t,method:r,body:i,headers:o,authType:"none",callback:function(t){window.gapi.auth.setToken(e),n&&n(t)}})}).s(function(t){n&&n({error:{message:t&&t.message||"CORS_UNSUPPORTED"}})})},aa.prototype.Qa=function(){return rs(this,za,{})},aa.prototype.pb=function(t,e){return rs(this,Ga,{idToken:t,email:e})},aa.prototype.qb=function(t,e){return rs(this,Qa,{idToken:t,password:e})};var Ea={displayName:"DISPLAY_NAME",photoUrl:"PHOTO_URL"};function Sa(t){if(!t.requestUri||!t.sessionId&&!t.postBody&&!t.pendingToken)throw new Br("internal-error")}function Ta(t,e){return e.oauthIdToken&&e.providerId&&0==e.providerId.indexOf("oidc.")&&!e.pendingToken&&(t.sessionId?e.nonce=t.sessionId:t.postBody&&(un(t=new rn(t.postBody),"nonce")&&(e.nonce=t.get("nonce")))),e}function Ca(t){var e=null;if(t.needConfirmation?(t.code="account-exists-with-different-credential",e=oo(t)):"FEDERATED_USER_ID_ALREADY_LINKED"==t.errorMessage?(t.code="credential-already-in-use",e=oo(t)):"EMAIL_EXISTS"==t.errorMessage?(t.code="email-already-in-use",e=oo(t)):t.errorMessage&&(e=is(t.errorMessage)),e)throw e;if(!t[ua])throw new Br("internal-error")}function Ia(t,e){return e.returnIdpCredential=!0,rs(t,Ya,e)}function xa(t,e){return e.returnIdpCredential=!0,rs(t,Ja,e)}function Aa(t,e){return e.returnIdpCredential=!0,e.autoCreate=!1,rs(t,Xa,e)}function Na(t){if(!t.oobCode)throw new Br("invalid-action-code")}(t=aa.prototype).rb=function(t,r){var i={idToken:t},o=[];return nt(Ea,function(t,e){var n=r[e];null===n?o.push(t):e in r&&(i[e]=n)}),o.length&&(i.deleteAttribute=o),rs(this,Ga,i)},t.kb=function(t,e){return ut(t={requestType:"PASSWORD_RESET",email:t},e),rs(this,Ba,t)},t.lb=function(t,e){return ut(t={requestType:"EMAIL_SIGNIN",email:t},e),rs(this,Ua,t)},t.jb=function(t,e){return ut(t={requestType:"VERIFY_EMAIL",idToken:t},e),rs(this,Wa,t)},t.Ua=function(t){return rs(this,ts,t)},t.Za=function(t,e){return rs(this,Ha,{oobCode:t,newPassword:e})},t.Ja=function(t){return rs(this,Ra,{oobCode:t})},t.Wa=function(t){return rs(this,ka,{oobCode:t})};var ka={endpoint:"setAccountInfo",B:Na,da:"email"},Ra={endpoint:"resetPassword",B:Na,J:function(t){var e=t.requestType;if(!e||!t.email&&"EMAIL_SIGNIN"!=e)throw new Br("internal-error")}},Oa={endpoint:"signupNewUser",B:function(t){if(ma(t),!t.password)throw new Br("weak-password")},J:ba,R:!0},Pa={endpoint:"createAuthUri"},Da={endpoint:"deleteAccount",T:["idToken"]},La={endpoint:"setAccountInfo",T:["idToken","deleteProvider"],B:function(t){if(!l(t.deleteProvider))throw new Br("internal-error")}},Ma={endpoint:"emailLinkSignin",T:["email","oobCode"],B:ma,J:ba,R:!0},Fa={endpoint:"emailLinkSignin",T:["idToken","email","oobCode"],B:ma,J:ba,R:!0},ja={endpoint:"getAccountInfo"},Ua={endpoint:"getOobConfirmationCode",T:["requestType"],B:function(t){if("EMAIL_SIGNIN"!=t.requestType)throw new Br("internal-error");ma(t)},da:"email"},Wa={endpoint:"getOobConfirmationCode",T:["idToken","requestType"],B:function(t){if("VERIFY_EMAIL"!=t.requestType)throw new Br("internal-error")},da:"email"},Ba={endpoint:"getOobConfirmationCode",T:["requestType"],B:function(t){if("PASSWORD_RESET"!=t.requestType)throw new Br("internal-error");ma(t)},da:"email"},Va={ub:!0,endpoint:"getProjectConfig",Ib:"GET"},qa={ub:!0,endpoint:"getRecaptchaParam",Ib:"GET",J:function(t){if(!t.recaptchaSiteKey)throw new Br("internal-error")}},Ha={endpoint:"resetPassword",B:Na,da:"email"},Ka={endpoint:"sendVerificationCode",T:["phoneNumber","recaptchaToken"],da:"sessionInfo"},Ga={endpoint:"setAccountInfo",T:["idToken"],B:_a,R:!0},Qa={endpoint:"setAccountInfo",T:["idToken"],B:function(t){if(_a(t),!t.password)throw new Br("weak-password")},J:ba,R:!0},za={endpoint:"signupNewUser",J:ba,R:!0},Ya={endpoint:"verifyAssertion",B:Sa,Oa:Ta,J:Ca,R:!0},Xa={endpoint:"verifyAssertion",B:Sa,Oa:Ta,J:function(t){if(t.errorMessage&&"USER_NOT_FOUND"==t.errorMessage)throw new Br("user-not-found");if(t.errorMessage)throw is(t.errorMessage);if(!t[ua])throw new Br("internal-error")},R:!0},Ja={endpoint:"verifyAssertion",B:function(t){if(Sa(t),!t.idToken)throw new Br("internal-error")},Oa:Ta,J:Ca,R:!0},$a={endpoint:"verifyCustomToken",B:function(t){if(!t.token)throw new Br("invalid-custom-token")},J:ba,R:!0},Za={endpoint:"verifyPassword",B:function(t){if(ma(t),!t.password)throw new Br("wrong-password")},J:ba,R:!0},ts={endpoint:"verifyPhoneNumber",B:wa,J:ba},es={endpoint:"verifyPhoneNumber",B:function(t){if(!t.idToken)throw new Br("internal-error");wa(t)},J:function(t){if(t.temporaryProof)throw t.code="credential-already-in-use",oo(t);ba(t)}},ns={Xb:{USER_NOT_FOUND:"user-not-found"},endpoint:"verifyPhoneNumber",B:wa,J:ba};function rs(t,e,n){if(!function(t,e){if(!e||!e.length)return!0;if(!t)return!1;for(var n=0;n<e.length;n++){var r=t[e[n]];if(null==r||""===r)return!1}return!0}(n,e.T))return Et(new Br("internal-error"));var r,i=e.Ib||"POST";return wt(n).then(e.B).then(function(){return e.R&&(n.returnSecureToken=!0),function(t,e,r,i,o,n){var a=Qe(t.g+e);Ke(a,"key",t.b),n&&Ke(a,"cb",_().toString());var s="GET"==r;if(s)for(var u in i)i.hasOwnProperty(u)&&Ke(a,u,i[u]);return new dt(function(e,n){va(t,a.toString(),function(t){t?t.error?n(os(t,o||{})):e(t):n(new Br("network-request-failed"))},r,s?void 0:Mn(dr(i)),t.a,t.h.get())})}(t,e.endpoint,i,n,e.Xb,e.ub||!1)}).then(function(t){return r=t,e.Oa?e.Oa(n,r):r}).then(e.J).then(function(){if(!e.da)return r;if(!(e.da in r))throw new Br("internal-error");return r[e.da]})}function is(t){return os({error:{errors:[{message:t}],code:400,message:t}})}function os(t,e){var n=(t.error&&t.error.errors&&t.error.errors[0]||{}).reason||"",r={keyInvalid:"invalid-api-key",ipRefererBlocked:"app-not-authorized"};if(n=r[n]?new Br(r[n]):null)return n;for(var i in n=t.error&&t.error.message||"",ut(r={INVALID_CUSTOM_TOKEN:"invalid-custom-token",CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_EMAIL:"invalid-email",INVALID_PASSWORD:"wrong-password",USER_DISABLED:"user-disabled",MISSING_PASSWORD:"internal-error",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_OR_INVALID_NONCE:"missing-or-invalid-nonce",INVALID_MESSAGE_PAYLOAD:"invalid-message-payload",INVALID_RECIPIENT_EMAIL:"invalid-recipient-email",INVALID_SENDER:"invalid-sender",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",INVALID_PROVIDER_ID:"invalid-provider-id",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",CORS_UNSUPPORTED:"cors-unsupported",DYNAMIC_LINK_NOT_ACTIVATED:"dynamic-link-not-activated",INVALID_APP_ID:"invalid-app-id",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",WEAK_PASSWORD:"weak-password",OPERATION_NOT_ALLOWED:"operation-not-allowed",USER_CANCELLED:"user-cancelled",CAPTCHA_CHECK_FAILED:"captcha-check-failed",INVALID_APP_CREDENTIAL:"invalid-app-credential",INVALID_CODE:"invalid-verification-code",INVALID_PHONE_NUMBER:"invalid-phone-number",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_APP_CREDENTIAL:"missing-app-credential",MISSING_CODE:"missing-verification-code",MISSING_PHONE_NUMBER:"missing-phone-number",MISSING_SESSION_INFO:"missing-verification-id",QUOTA_EXCEEDED:"quota-exceeded",SESSION_EXPIRED:"code-expired",REJECTED_CREDENTIAL:"rejected-credential",INVALID_CONTINUE_URI:"invalid-continue-uri",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",MISSING_IOS_BUNDLE_ID:"missing-ios-bundle-id",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_DYNAMIC_LINK_DOMAIN:"invalid-dynamic-link-domain",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",INVALID_CERT_HASH:"invalid-cert-hash"},e||{}),e=(e=n.match(/^[^\s]+\s*:\s*(.*)$/))&&1<e.length?e[1]:void 0,r)if(0===n.indexOf(i))return new Br(r[i],e);return!e&&t&&(e=pr(t)),new Br("internal-error",e)}function as(t){this.b=t,this.a=null,this.fb=function(o){return function(){return hs||(hs=new dt(function(t,e){function n(){mr(),sr("gapi.load")("gapi.iframes",{callback:t,ontimeout:function(){mr(),e(Error("Network Error"))},timeout:us.get()})}if(sr("gapi.iframes.Iframe"))t();else if(sr("gapi.load"))n();else{var r="__iframefcb"+Math.floor(1e6*Math.random()).toString();h[r]=function(){sr("gapi.load")?n():e(Error("Network Error"))},wt(Zo(r=mn(ss,{onload:r}))).s(function(){e(Error("Network Error"))})}}).s(function(t){throw hs=null,t}))}().then(function(){return new dt(function(r,i){sr("gapi.iframes.getContext")().open({where:document.body,url:o.b,messageHandlersFilter:sr("gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER"),attributes:{style:{position:"absolute",top:"-100px",width:"1px",height:"1px"}},dontclear:!0},function(t){function e(){clearTimeout(n),r()}o.a=t,o.a.restyle({setHideOnLeave:!1});var n=setTimeout(function(){i(Error("Network Error"))},cs.get());t.ping(e).then(e,function(){i(Error("Network Error"))})})})})}(this)}var ss=vn("https://apis.google.com/js/api.js?onload=%{onload}"),us=new _r(3e4,6e4),cs=new _r(5e3,15e3),hs=null;function ls(t,e,n){this.i=t,this.g=e,this.h=n,this.f=null,this.a=ze(this.i,"/__/auth/iframe"),Ke(this.a,"apiKey",this.g),Ke(this.a,"appName",this.h),this.b=null,this.c=[]}function fs(t,e,n,r,i){this.o=t,this.m=e,this.c=n,this.l=r,this.h=this.g=this.i=null,this.a=i,this.f=null}function ps(t){try{return Mh.a.app(t).auth().ya()}catch(t){return[]}}function ds(t,e,n,r,i){this.m=t,this.f=e,this.b=n,this.c=r||null,this.h=i||null,this.o=this.u=this.v=null,this.g=[],this.l=this.a=null}function vs(t){var s=Vn();return function(t){return rs(t,Va,{}).then(function(t){return t.authorizedDomains||[]})}(t).then(function(t){t:{var e=Qe(s),n=e.c;e=e.b;for(var r=0;r<t.length;r++){var i=t[r],o=e,a=n;if(o=0==i.indexOf("chrome-extension://")?Qe(i).b==o&&"chrome-extension"==a:("http"==a||"https"==a)&&(Qn.test(i)?o==i:(i=i.split(".").join("\\."),new RegExp("^(.+\\."+i+"|"+i+")$","i").test(o)))){t=!0;break t}}t=!1}if(!t)throw new ro(Vn())})}function ys(i){return i.l||(i.l=Yn().then(function(){if(!i.u){var t=i.c,e=i.h,n=ps(i.b),r=new ls(i.m,i.f,i.b);r.f=t,r.b=e,r.c=U(n||[]),i.u=r.toString()}i.i=new as(i.u),function(r){if(!r.i)throw Error("IfcHandler must be initialized!");!function(t,e){t.fb.then(function(){t.a.register("authEvent",e,sr("gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER"))})}(r.i,function(t){var e={};if(t&&t.authEvent){var n=!1;for(t=Zi(t.authEvent),e=0;e<r.g.length;e++)n=r.g[e](t)||n;return(e={}).status=n?"ACK":"ERROR",wt(e)}return e.status="ERROR",wt(e)})}(i)})),i.l}function gs(t){return t.o||(t.v=t.c?or(t.c,ps(t.b)):null,t.o=new aa(t.f,hi(t.h),t.v)),t.o}function ms(t,e,n,r,i,o,a,s,u,c){return(t=new fs(t,e,n,r,i)).i=o,t.g=a,t.h=s,t.b=it(u||null),t.f=c,t.toString()}function _s(t){if(this.a=t||Mh.a.INTERNAL.reactNative&&Mh.a.INTERNAL.reactNative.AsyncStorage,!this.a)throw new Br("internal-error","The React Native compatibility library was not found.");this.type="asyncStorage"}function bs(t){this.b=t,this.a={},this.c=g(this.f,this)}ls.prototype.toString=function(){return this.f?Ke(this.a,"v",this.f):sn(this.a.a,"v"),this.b?Ke(this.a,"eid",this.b):sn(this.a.a,"eid"),this.c.length?Ke(this.a,"fw",this.c.join(",")):sn(this.a.a,"fw"),this.a.toString()},fs.prototype.toString=function(){var t=ze(this.o,"/__/auth/handler");if(Ke(t,"apiKey",this.m),Ke(t,"appName",this.c),Ke(t,"authType",this.l),this.a.isOAuthProvider){var e=this.a;try{var n=Mh.a.app(this.c).auth().ea()}catch(t){n=null}for(var r in e.$a=n,Ke(t,"providerId",this.a.providerId),n=dr((e=this.a).yb))n[r]=n[r].toString();r=e.Dc,n=it(n);for(var i=0;i<r.length;i++){var o=r[i];o in n&&delete n[o]}e.cb&&e.$a&&!n[e.cb]&&(n[e.cb]=e.$a),rt(n)||Ke(t,"customParameters",pr(n))}if("function"==typeof this.a.Eb&&((e=this.a.Eb()).length&&Ke(t,"scopes",e.join(","))),this.i?Ke(t,"redirectUrl",this.i):sn(t.a,"redirectUrl"),this.g?Ke(t,"eventId",this.g):sn(t.a,"eventId"),this.h?Ke(t,"v",this.h):sn(t.a,"v"),this.b)for(var a in this.b)this.b.hasOwnProperty(a)&&!Ge(t,a)&&Ke(t,a,this.b[a]);return this.f?Ke(t,"eid",this.f):sn(t.a,"eid"),(a=ps(this.c)).length&&Ke(t,"fw",a.join(",")),t.toString()},(t=ds.prototype).Ea=function(e,n,t){var r=new Br("popup-closed-by-user"),i=new Br("web-storage-unsupported"),o=this,a=!1;return this.ga().then(function(){(function(t){var e={type:"webStorageSupport"};return ys(t).then(function(){return function(e,n){return e.fb.then(function(){return new dt(function(t){e.a.send(n.type,n,t,sr("gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER"))})})}(t.i,e)}).then(function(t){if(t&&t.length&&void 0!==t[0].webStorageSupport)return t[0].webStorageSupport;throw Error()})})(o).then(function(t){t||(e&&Kn(e),n(i),a=!0)})}).s(function(){}).then(function(){if(!a)return function(n){return new dt(function(e){return function t(){De(2e3).then(function(){if(n&&!n.closed)return t();e()})}()})}(e)}).then(function(){if(!a)return De(t).then(function(){n(r)})})},t.Mb=function(){var t=ar();return!fr(t)&&!gr(t)},t.Hb=function(){return!1},t.Cb=function(e,t,n,r,i,o,a){if(!e)return Et(new Br("popup-blocked"));if(a&&!fr())return this.ga().s(function(t){Kn(e),i(t)}),r(),wt();this.a||(this.a=vs(gs(this)));var s=this;return this.a.then(function(){var t=s.ga().s(function(t){throw Kn(e),i(t),t});return r(),t}).then(function(){(Ji(n),a)||qn(ms(s.m,s.f,s.b,t,n,null,o,s.c,void 0,s.h),e)}).s(function(t){throw"auth/network-request-failed"==t.code&&(s.a=null),t})},t.Ca=function(t,e,n){this.a||(this.a=vs(gs(this)));var r=this;return this.a.then(function(){Ji(e),qn(ms(r.m,r.f,r.b,t,e,Vn(),n,r.c,void 0,r.h))}).s(function(t){throw"auth/network-request-failed"==t.code&&(r.a=null),t})},t.ga=function(){var t=this;return ys(this).then(function(){return t.i.fb}).s(function(){throw t.a=null,new Br("network-request-failed")})},t.Qb=function(){return!0},t.wa=function(t){this.g.push(t)},t.Ka=function(e){F(this.g,function(t){return t==e})},(t=_s.prototype).get=function(t){return wt(this.a.getItem(t)).then(function(t){return t&&vr(t)})},t.set=function(t,e){return wt(this.a.setItem(t,pr(e)))},t.P=function(t){return wt(this.a.removeItem(t))},t.Y=function(){},t.ca=function(){};var ws,Es=[];function Ss(t){this.a=t}function Ts(t){this.c=t,this.b=!1,this.a=[]}function Cs(r,t,e,n){var i,o,a,s,u=e||{},c=null;if(r.b)return Et(Error("connection_unavailable"));var h=n?800:50,l="undefined"!=typeof MessageChannel?new MessageChannel:null;return new dt(function(e,n){l?(i=Math.floor(Math.random()*Math.pow(10,20)).toString(),l.port1.start(),a=setTimeout(function(){n(Error("unsupported_event"))},h),c={messageChannel:l,onMessage:o=function(t){t.data.eventId===i&&("ack"===t.data.status?(clearTimeout(a),s=setTimeout(function(){n(Error("timeout"))},3e3)):"done"===t.data.status?(clearTimeout(s),void 0!==t.data.response?e(t.data.response):n(Error("unknown_error"))):(clearTimeout(a),clearTimeout(s),n(Error("invalid_response"))))}},r.a.push(c),l.port1.addEventListener("message",o),r.c.postMessage({eventType:t,eventId:i,data:u},[l.port2])):n(Error("connection_unavailable"))}).then(function(t){return Is(r,c),t}).s(function(t){throw Is(r,c),t})}function Is(t,e){if(e){var n=e.messageChannel,r=e.onMessage;n&&(n.port1.removeEventListener("message",r),n.port1.close()),F(t.a,function(t){return t==e})}}function xs(){if(!ks())throw new Br("web-storage-unsupported");this.c={},this.a=[],this.b=0,this.m=h.indexedDB,this.type="indexedDB",this.g=this.l=this.f=this.i=null,this.u=!1,this.h=null;var r=this;$n()&&self?(this.l=function(){var e=$n()?self:null;if(O(Es,function(t){t.b==e&&(n=t)}),!n){var n=new bs(e);Es.push(n)}return n}(),this.l.subscribe("keyChanged",function(t,n){return Ls(r).then(function(e){return 0<e.length&&O(r.a,function(t){t(e)}),{keyProcessed:L(e,n.key)}})}),this.l.subscribe("ping",function(){return wt(["keyChanged"])})):function(){var t=h.navigator;return t&&t.serviceWorker?wt().then(function(){return t.serviceWorker.ready}).then(function(t){return t.active||null}).s(function(){return null}):wt(null)}().then(function(t){(r.h=t)&&(r.g=new Ts(new Ss(t)),Cs(r.g,"ping",null,!0).then(function(t){t[0].fulfilled&&L(t[0].value,"keyChanged")&&(r.u=!0)}).s(function(){}))})}function As(r){return new dt(function(e,n){var t=r.m.open("firebaseLocalStorageDb",1);t.onerror=function(t){try{t.preventDefault()}catch(t){}n(Error(t.target.error))},t.onupgradeneeded=function(t){t=t.target.result;try{t.createObjectStore("firebaseLocalStorage",{keyPath:"fbase_key"})}catch(t){n(t)}},t.onsuccess=function(t){(t=t.target.result).objectStoreNames.contains("firebaseLocalStorage")?e(t):function(r){return new dt(function(t,e){var n=r.m.deleteDatabase("firebaseLocalStorageDb");n.onsuccess=function(){t()},n.onerror=function(t){e(Error(t.target.error))}})}(r).then(function(){return As(r)}).then(function(t){e(t)}).s(function(t){n(t)})}})}function Ns(t){return t.o||(t.o=As(t)),t.o}function ks(){try{return!!h.indexedDB}catch(t){return!1}}function Rs(t){return t.objectStore("firebaseLocalStorage")}function Os(t,e){return t.transaction(["firebaseLocalStorage"],e?"readwrite":"readonly")}function Ps(t){return new dt(function(e,n){t.onsuccess=function(t){t&&t.target?e(t.target.result):e()},t.onerror=function(t){n(t.target.error)}})}function Ds(t,e){return t.g&&t.h&&function(){var t=h.navigator;return t&&t.serviceWorker&&t.serviceWorker.controller||null}()===t.h?Cs(t.g,"keyChanged",{key:e},t.u).then(function(){}).s(function(){}):wt()}function Ls(r){return Ns(r).then(function(t){var i=Rs(Os(t,!1));return i.getAll?Ps(i.getAll()):new dt(function(e,n){var r=[],t=i.openCursor();t.onsuccess=function(t){(t=t.target.result)?(r.push(t.value),t.continue()):e(r)},t.onerror=function(t){n(t.target.error)}})}).then(function(t){var e={},n=[];if(0==r.b){for(n=0;n<t.length;n++)e[t[n].fbase_key]=t[n].value;n=function t(e,n){var r,i=[];for(r in e)r in n?typeof e[r]!=typeof n[r]?i.push(r):"object"==typeof e[r]&&null!=e[r]&&null!=n[r]?0<t(e[r],n[r]).length&&i.push(r):e[r]!==n[r]&&i.push(r):i.push(r);for(r in n)r in e||i.push(r);return i}(r.c,e),r.c=e}return n})}function Ms(t){t.i&&t.i.cancel("STOP_EVENT"),t.f&&(clearTimeout(t.f),t.f=null)}function Fs(t){var r=this,i=null;this.a=[],this.type="indexedDB",this.c=t,this.b=wt().then(function(){if(ks()){var e=yr(),n="__sak"+e;return ws||(ws=new xs),(i=ws).set(n,e).then(function(){return i.get(n)}).then(function(t){if(t!==e)throw Error("indexedDB not supported!");return i.P(n)}).then(function(){return i}).s(function(){return r.c})}return r.c}).then(function(t){return r.type=t.type,t.Y(function(e){O(r.a,function(t){t(e)})}),t})}function js(){this.a={},this.type="inMemory"}function Us(){if(!function(){var t="Node"==Zn();if(!(t=Ws()||t&&Mh.a.INTERNAL.node&&Mh.a.INTERNAL.node.localStorage))return!1;try{return t.setItem("__sak","1"),t.removeItem("__sak"),!0}catch(t){return!1}}()){if("Node"==Zn())throw new Br("internal-error","The LocalStorage compatibility library was not found.");throw new Br("web-storage-unsupported")}this.a=Ws()||Mh.a.INTERNAL.node.localStorage,this.type="localStorage"}function Ws(){try{var t=h.localStorage,e=yr();return t&&(t.setItem(e,"1"),t.removeItem(e)),t}catch(t){return null}}function Bs(){this.type="nullStorage"}function Vs(){if(!function(){var t="Node"==Zn();if(!(t=qs()||t&&Mh.a.INTERNAL.node&&Mh.a.INTERNAL.node.sessionStorage))return!1;try{return t.setItem("__sak","1"),t.removeItem("__sak"),!0}catch(t){return!1}}()){if("Node"==Zn())throw new Br("internal-error","The SessionStorage compatibility library was not found.");throw new Br("web-storage-unsupported")}this.a=qs()||Mh.a.INTERNAL.node.sessionStorage,this.type="sessionStorage"}function qs(){try{var t=h.sessionStorage,e=yr();return t&&(t.setItem(e,"1"),t.removeItem(e)),t}catch(t){return null}}function Hs(){var t={};t.Browser=Qs,t.Node=zs,t.ReactNative=Ys,t.Worker=Xs,this.a=t[Zn()]}bs.prototype.f=function(n){var r=n.data.eventType,i=n.data.eventId,t=this.a[r];if(t&&0<t.length){n.ports[0].postMessage({status:"ack",eventId:i,eventType:r,response:null});var e=[];O(t,function(t){e.push(wt().then(function(){return t(n.origin,n.data.data)}))}),Tt(e).then(function(t){var e=[];O(t,function(t){e.push({fulfilled:t.Db,value:t.value,reason:t.reason?t.reason.message:void 0})}),O(e,function(t){for(var e in t)void 0===t[e]&&delete t[e]}),n.ports[0].postMessage({status:"done",eventId:i,eventType:r,response:e})})}},bs.prototype.subscribe=function(t,e){rt(this.a)&&this.b.addEventListener("message",this.c),void 0===this.a[t]&&(this.a[t]=[]),this.a[t].push(e)},bs.prototype.unsubscribe=function(t,e){void 0!==this.a[t]&&e?(F(this.a[t],function(t){return t==e}),0==this.a[t].length&&delete this.a[t]):e||delete this.a[t],rt(this.a)&&this.b.removeEventListener("message",this.c)},Ss.prototype.postMessage=function(t,e){this.a.postMessage(t,e)},Ts.prototype.close=function(){for(;0<this.a.length;)Is(this,this.a[0]);this.b=!0},(t=xs.prototype).set=function(n,r){var i,o=!1,a=this;return Ns(this).then(function(t){return Ps((t=Rs(Os(i=t,!0))).get(n))}).then(function(t){var e=Rs(Os(i,!0));return t?(t.value=r,Ps(e.put(t))):(a.b++,o=!0,(t={}).fbase_key=n,t.value=r,Ps(e.add(t)))}).then(function(){return a.c[n]=r,Ds(a,n)}).ia(function(){o&&a.b--})},t.get=function(e){return Ns(this).then(function(t){return Ps(Rs(Os(t,!1)).get(e))}).then(function(t){return t&&t.value})},t.P=function(e){var n=!1,r=this;return Ns(this).then(function(t){return n=!0,r.b++,Ps(Rs(Os(t,!0)).delete(e))}).then(function(){return delete r.c[e],Ds(r,e)}).ia(function(){n&&r.b--})},t.Y=function(t){0==this.a.length&&function(t){Ms(t),function e(){t.f=setTimeout(function(){t.i=Ls(t).then(function(e){0<e.length&&O(t.a,function(t){t(e)})}).then(function(){e()}).s(function(t){"STOP_EVENT"!=t.message&&e()})},800)}()}(this),this.a.push(t)},t.ca=function(e){F(this.a,function(t){return t==e}),0==this.a.length&&Ms(this)},(t=Fs.prototype).get=function(e){return this.b.then(function(t){return t.get(e)})},t.set=function(e,n){return this.b.then(function(t){return t.set(e,n)})},t.P=function(e){return this.b.then(function(t){return t.P(e)})},t.Y=function(t){this.a.push(t)},t.ca=function(e){F(this.a,function(t){return t==e})},(t=js.prototype).get=function(t){return wt(this.a[t])},t.set=function(t,e){return this.a[t]=e,wt()},t.P=function(t){return delete this.a[t],wt()},t.Y=function(){},t.ca=function(){},(t=Us.prototype).get=function(t){var e=this;return wt().then(function(){return vr(e.a.getItem(t))})},t.set=function(e,n){var r=this;return wt().then(function(){var t=pr(n);null===t?r.P(e):r.a.setItem(e,t)})},t.P=function(t){var e=this;return wt().then(function(){e.a.removeItem(t)})},t.Y=function(t){h.window&&ge(h.window,"storage",t)},t.ca=function(t){h.window&&be(h.window,"storage",t)},(t=Bs.prototype).get=function(){return wt(null)},t.set=function(){return wt()},t.P=function(){return wt()},t.Y=function(){},t.ca=function(){},(t=Vs.prototype).get=function(t){var e=this;return wt().then(function(){return vr(e.a.getItem(t))})},t.set=function(e,n){var r=this;return wt().then(function(){var t=pr(n);null===t?r.P(e):r.a.setItem(e,t)})},t.P=function(t){var e=this;return wt().then(function(){e.a.removeItem(t)})},t.Y=function(){},t.ca=function(){};var Ks,Gs,Qs={A:Us,Ra:Vs},zs={A:Us,Ra:Vs},Ys={A:_s,Ra:Bs},Xs={A:Us,Ra:Bs},Js={Zc:"local",NONE:"none",ad:"session"};function $s(){var t=!(gr(ar())||!Jn()),e=fr(),n=ur();this.o=t,this.h=e,this.l=n,this.a={},Ks||(Ks=new Hs),t=Ks;try{this.g=!Bn()&&Sr()||!h.indexedDB?new t.a.A:new Fs($n()?new js:new t.a.A)}catch(t){this.g=new js,this.h=!0}try{this.i=new t.a.Ra}catch(t){this.i=new js}this.m=new js,this.f=g(this.Pb,this),this.b={}}function Zs(){return Gs||(Gs=new $s),Gs}function tu(t,e){switch(e){case"session":return t.i;case"none":return t.m;default:return t.g}}function eu(t,e){return"firebase:"+t.name+(e?":"+e:"")}function nu(t,e,n){return n=eu(e,n),"local"==e.A&&(t.b[n]=null),tu(t,e.A).P(n)}function ru(t){t.c&&(clearInterval(t.c),t.c=null)}function iu(t){this.a=t,this.b=Zs()}(t=$s.prototype).get=function(t,e){return tu(this,t.A).get(eu(t,e))},t.set=function(e,t,n){var r=eu(e,n),i=this,o=tu(this,e.A);return o.set(r,t).then(function(){return o.get(r)}).then(function(t){"local"==e.A&&(i.b[r]=t)})},t.addListener=function(t,e,n){t=eu(t,e),this.l&&(this.b[t]=h.localStorage.getItem(t)),rt(this.a)&&(tu(this,"local").Y(this.f),this.h||(Bn()||!Sr())&&h.indexedDB||!this.l||function(r){ru(r),r.c=setInterval(function(){for(var t in r.a){var e=h.localStorage.getItem(t),n=r.b[t];e!=n&&(r.b[t]=e,e=new ae({type:"storage",key:t,target:window,oldValue:n,newValue:e,a:!0}),r.Pb(e))}},1e3)}(this)),this.a[t]||(this.a[t]=[]),this.a[t].push(n)},t.removeListener=function(t,e,n){t=eu(t,e),this.a[t]&&(F(this.a[t],function(t){return t==n}),0==this.a[t].length&&delete this.a[t]),rt(this.a)&&(tu(this,"local").ca(this.f),ru(this))},t.Pb=function(t){if(t&&t.f){var e=t.a.key;if(null==e)for(var n in this.a){var r=this.b[n];void 0===r&&(r=null);var i=h.localStorage.getItem(n);i!==r&&(this.b[n]=i,this.Xa(n))}else if(0==e.indexOf("firebase:")&&this.a[e]){if(void 0!==t.a.a?tu(this,"local").ca(this.f):ru(this),this.o)if(n=h.localStorage.getItem(e),(r=t.a.newValue)!==n)null!==r?h.localStorage.setItem(e,r):h.localStorage.removeItem(e);else if(this.b[e]===r&&void 0===t.a.a)return;var o=this;n=function(){void 0===t.a.a&&o.b[e]===h.localStorage.getItem(e)||(o.b[e]=h.localStorage.getItem(e),o.Xa(e))},Vt&&Jt&&10==Jt&&h.localStorage.getItem(e)!==t.a.newValue&&t.a.newValue!==t.a.oldValue?setTimeout(n,10):n()}}else O(t,g(this.Xa,this))},t.Xa=function(t){this.a[t]&&O(this.a[t],function(t){t()})};var ou,au={name:"authEvent",A:"local"};function su(){this.a=Zs()}function uu(t,e){this.b=cu,this.f=h.Uint8Array?new Uint8Array(this.b):Array(this.b),this.g=this.c=0,this.a=[],this.i=t,this.h=e,this.l=h.Int32Array?new Int32Array(64):Array(64),void 0!==ou||(ou=h.Int32Array?new Int32Array(yu):yu),this.reset()}e(uu,function(){this.b=-1});for(var cu=64,hu=cu-1,lu=[],fu=0;fu<hu;fu++)lu[fu]=0;var pu=j(128,lu);function du(t){for(var e=t.f,n=t.l,r=0,i=0;i<e.length;)n[r++]=e[i]<<24|e[i+1]<<16|e[i+2]<<8|e[i+3],i=4*r;for(e=16;e<64;e++){i=0|n[e-15],r=0|n[e-2];var o=(0|n[e-16])+((i>>>7|i<<25)^(i>>>18|i<<14)^i>>>3)|0,a=(0|n[e-7])+((r>>>17|r<<15)^(r>>>19|r<<13)^r>>>10)|0;n[e]=o+a|0}r=0|t.a[0],i=0|t.a[1];var s=0|t.a[2],u=0|t.a[3],c=0|t.a[4],h=0|t.a[5],l=0|t.a[6];for(o=0|t.a[7],e=0;e<64;e++){var f=((r>>>2|r<<30)^(r>>>13|r<<19)^(r>>>22|r<<10))+(r&i^r&s^i&s)|0;a=(o=o+((c>>>6|c<<26)^(c>>>11|c<<21)^(c>>>25|c<<7))|0)+((a=(a=c&h^~c&l)+(0|ou[e])|0)+(0|n[e])|0)|0,o=l,l=h,h=c,c=u+a|0,u=s,s=i,i=r,r=a+f|0}t.a[0]=t.a[0]+r|0,t.a[1]=t.a[1]+i|0,t.a[2]=t.a[2]+s|0,t.a[3]=t.a[3]+u|0,t.a[4]=t.a[4]+c|0,t.a[5]=t.a[5]+h|0,t.a[6]=t.a[6]+l|0,t.a[7]=t.a[7]+o|0}function vu(t,e,n){void 0===n&&(n=e.length);var r=0,i=t.c;if(c(e))for(;r<n;)t.f[i++]=e.charCodeAt(r++),i==t.b&&(du(t),i=0);else{if(!f(e))throw Error("message must be string or array");for(;r<n;){var o=e[r++];if(!("number"==typeof o&&0<=o&&o<=255&&o==(0|o)))throw Error("message must be a byte array");t.f[i++]=o,i==t.b&&(du(t),i=0)}}t.c=i,t.g+=n}uu.prototype.reset=function(){this.g=this.c=0,this.a=h.Int32Array?new Int32Array(this.h):U(this.h)};var yu=[1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298];function gu(){uu.call(this,8,mu)}e(gu,uu);var mu=[1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225];function _u(t,e,n,r,i){this.m=t,this.i=e,this.l=n,this.o=r||null,this.u=i||null,this.h=e+":"+n,this.v=new su,this.g=new iu(this.h),this.f=null,this.b=[],this.a=this.c=null}function bu(t){return new Br("invalid-cordova-configuration",t)}function wu(t){var e=new gu;vu(e,t),t=[];var n=8*e.g;e.c<56?vu(e,pu,56-e.c):vu(e,pu,e.b-(e.c-56));for(var r=63;56<=r;r--)e.f[r]=255&n,n/=256;for(du(e),r=n=0;r<e.i;r++)for(var i=24;0<=i;i-=8)t[n++]=e.a[r]>>i&255;return function(t){return P(t,function(t){return 1<(t=t.toString(16)).length?t:"0"+t}).join("")}(t)}function Eu(t,e){for(var n=0;n<t.b.length;n++)try{t.b[n](e)}catch(t){}}function Su(r){return r.f||(r.f=r.ga().then(function(){return new dt(function(n){r.wa(function t(e){return n(e),r.Ka(t),!1}),function(i){function e(r){t=!0,n&&n.cancel(),Tu(i).then(function(t){var e=o;if(t&&r&&r.url){var n=null;-1!=(e=Ci(r.url)).indexOf("/__/auth/callback")&&(n=(n="object"==typeof(n=vr(Ge(n=Qe(e),"firebaseError")||null))?Vr(n):null)?new $i(t.b,t.c,null,null,n):new $i(t.b,t.c,e,t.g)),e=n||o}Eu(i,e)})}var o=new $i("unknown",null,null,null,new Br("no-auth-event")),t=!1,n=De(500).then(function(){return Tu(i).then(function(){t||Eu(i,o)})}),r=h.handleOpenURL;h.handleOpenURL=function(t){if(0==t.toLowerCase().indexOf(sr("BuildInfo.packageName",h).toLowerCase()+"://")&&e({url:t}),"function"==typeof r)try{r(t)}catch(t){console.error(t)}},no||(no=new to),no.subscribe(e)}(r)})})),r.f}function Tu(e){var n=null;return function(t){return t.b.get(au,t.a).then(function(t){return Zi(t)})}(e.g).then(function(t){return n=t,nu((t=e.g).b,au,t.a)}).then(function(){return n})}function Cu(t){this.a=t,this.b=Zs()}(t=_u.prototype).ga=function(){return this.za?this.za:this.za=function(){return Xn(void 0)?Yn().then(function(){return new dt(function(t,e){var n=h.document,r=setTimeout(function(){e(Error("Cordova framework is not ready."))},1e3);n.addEventListener("deviceready",function(){clearTimeout(r),t()},!1)})}):Et(Error("Cordova must run in an Android or iOS file scheme."))}().then(function(){if("function"!=typeof sr("universalLinks.subscribe",h))throw bu("cordova-universal-links-plugin-fix is not installed");if(void 0===sr("BuildInfo.packageName",h))throw bu("cordova-plugin-buildinfo is not installed");if("function"!=typeof sr("cordova.plugins.browsertab.openUrl",h))throw bu("cordova-plugin-browsertab is not installed");if("function"!=typeof sr("cordova.InAppBrowser.open",h))throw bu("cordova-plugin-inappbrowser is not installed")},function(){throw new Br("cordova-not-ready")})},t.Ea=function(t,e){return e(new Br("operation-not-supported-in-this-environment")),wt()},t.Cb=function(){return Et(new Br("operation-not-supported-in-this-environment"))},t.Qb=function(){return!1},t.Mb=function(){return!0},t.Hb=function(){return!0},t.Ca=function(t,e,n){if(this.c)return Et(new Br("redirect-operation-pending"));var r=this,i=h.document,o=null,a=null,s=null,u=null;return this.c=wt().then(function(){return Ji(e),Su(r)}).then(function(){return function(n,t,e,r){var i=function(){for(var t=20,e=[];0<t;)e.push("1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ".charAt(Math.floor(62*Math.random()))),t--;return e.join("")}(),o=new $i(t,r,null,i,new Br("no-auth-event")),a=sr("BuildInfo.packageName",h);if("string"!=typeof a)throw new Br("invalid-cordova-configuration");var s=sr("BuildInfo.displayName",h),u={};if(ar().toLowerCase().match(/iphone|ipad|ipod/))u.ibi=a;else{if(!ar().toLowerCase().match(/android/))return Et(new Br("operation-not-supported-in-this-environment"));u.apn=a}s&&(u.appDisplayName=s),i=wu(i),u.sessionId=i;var c=ms(n.m,n.i,n.l,t,e,null,r,n.o,u,n.u);return n.ga().then(function(){var t=n.h;return n.v.a.set(au,o.C(),t)}).then(function(){var t=sr("cordova.plugins.browsertab.isAvailable",h);if("function"!=typeof t)throw new Br("invalid-cordova-configuration");var e=null;t(function(t){if(t){if("function"!=typeof(e=sr("cordova.plugins.browsertab.openUrl",h)))throw new Br("invalid-cordova-configuration");e(c)}else{if("function"!=typeof(e=sr("cordova.InAppBrowser.open",h)))throw new Br("invalid-cordova-configuration");t=!(!(t=ar()).match(/(iPad|iPhone|iPod).*OS 7_\d/i)&&!t.match(/(iPad|iPhone|iPod).*OS 8_\d/i)),n.a=e(c,t?"_blank":"_system","location=yes")}})})}(r,t,e,n)}).then(function(){return new dt(function(e,t){a=function(){var t=sr("cordova.plugins.browsertab.close",h);return e(),"function"==typeof t&&t(),r.a&&"function"==typeof r.a.close&&(r.a.close(),r.a=null),!1},r.wa(a),s=function(){o||(o=De(2e3).then(function(){t(new Br("redirect-cancelled-by-user"))}))},u=function(){br()&&s()},i.addEventListener("resume",s,!1),ar().toLowerCase().match(/android/)||i.addEventListener("visibilitychange",u,!1)}).s(function(t){return Tu(r).then(function(){throw t})})}).ia(function(){s&&i.removeEventListener("resume",s,!1),u&&i.removeEventListener("visibilitychange",u,!1),o&&o.cancel(),a&&r.Ka(a),r.c=null})},t.wa=function(e){this.b.push(e),Su(this).s(function(t){"auth/invalid-cordova-configuration"===t.code&&(t=new $i("unknown",null,null,null,new Br("no-auth-event")),e(t))})},t.Ka=function(e){F(this.b,function(t){return t==e})};var Iu={name:"pendingRedirect",A:"session"};function xu(t){return nu(t.b,Iu,t.a)}function Au(t,e,n){this.u=t,this.l=e,this.m=n,this.h=[],this.f=!1,this.i=g(this.bb,this),this.b=new ju,this.o=new Vu,this.g=new Cu(this.l+":"+this.m),this.c={},this.c.unknown=this.b,this.c.signInViaRedirect=this.b,this.c.linkViaRedirect=this.b,this.c.reauthViaRedirect=this.b,this.c.signInViaPopup=this.o,this.c.linkViaPopup=this.o,this.c.reauthViaPopup=this.o,this.a=Nu(this.u,this.l,this.m,ui)}function Nu(t,e,n,r){var i=Mh.a.SDK_VERSION||null;return Xn()?new _u(t,e,n,i,r):new ds(t,e,n,i,r)}function ku(e){e.f||(e.f=!0,e.a.wa(e.i));var n=e.a;return e.a.ga().s(function(t){throw e.a==n&&e.reset(),t})}function Ru(n){n.a.Mb()&&ku(n).s(function(t){var e=new $i("unknown",null,null,null,new Br("operation-not-supported-in-this-environment"));Lu(t)&&n.bb(e)}),n.a.Hb()||Uu(n.b)}(t=Au.prototype).reset=function(){this.f=!1,this.a.Ka(this.i),this.a=Nu(this.u,this.l,this.m)},t.Ya=function(){this.b.Ya()},t.subscribe=function(t){if(L(this.h,t)||this.h.push(t),!this.f){var n=this;(function(t){return t.b.get(Iu,t.a).then(function(t){return"pending"==t})})(this.g).then(function(t){t?xu(n.g).then(function(){ku(n).s(function(t){var e=new $i("unknown",null,null,null,new Br("operation-not-supported-in-this-environment"));Lu(t)&&n.bb(e)})}):Ru(n)}).s(function(){Ru(n)})}},t.unsubscribe=function(e){F(this.h,function(t){return t==e})},t.bb=function(t){if(!t)throw new Br("invalid-auth-event");for(var e=!1,n=0;n<this.h.length;n++){var r=this.h[n];if(r.vb(t.b,t.c)){(e=this.c[t.b])&&e.h(t,r),e=!0;break}}return Uu(this.b),e};var Ou=new _r(2e3,1e4),Pu=new _r(3e4,6e4);function Du(t,e,n,r,i,o){return t.a.Cb(e,n,r,function(){t.f||(t.f=!0,t.a.wa(t.i))},function(){t.reset()},i,o)}function Lu(t){return!(!t||"auth/cordova-not-ready"!=t.code)}Au.prototype.fa=function(){return this.b.fa()},Au.prototype.Ca=function(t,e,n){var r,i=this;return function(t){return t.b.set(Iu,"pending",t.a)}(this.g).then(function(){return i.a.Ca(t,e,n).s(function(t){if(Lu(t))throw new Br("operation-not-supported-in-this-environment");return r=t,xu(i.g).then(function(){throw r})}).then(function(){return i.a.Qb()?new dt(function(){}):xu(i.g).then(function(){return i.fa()}).then(function(){}).s(function(){})})})},Au.prototype.Ea=function(e,n,t,r){return this.a.Ea(t,function(t){e.ha(n,null,t,r)},Ou.get())};var Mu={};function Fu(t,e,n){var r=e+":"+n;return Mu[r]||(Mu[r]=new Au(t,e,n)),Mu[r]}function ju(){this.b=null,this.f=[],this.c=[],this.a=null,this.i=this.g=!1}function Uu(t){t.g||(t.g=!0,Bu(t,!1,null,null))}function Wu(t,e){if(t.b=function(){return wt(e)},t.f.length)for(var n=0;n<t.f.length;n++)t.f[n](e)}function Bu(t,e,n,r){e?r?function(t,e){if(t.b=function(){return Et(e)},t.c.length)for(var n=0;n<t.c.length;n++)t.c[n](e)}(t,r):Wu(t,n):Wu(t,{user:null}),t.f=[],t.c=[]}function Vu(){}function qu(){this.sb=!1,Object.defineProperty(this,"appVerificationDisabled",{get:function(){return this.sb},set:function(t){this.sb=t},enumerable:!1})}function Hu(t,e){this.a=e,Ar(this,"verificationId",t)}function Ku(t,e,n,r){return new zi(t).Ua(e,n).then(function(t){return new Hu(t,r)})}function Gu(t){var e=si(t);if(!(e&&e.exp&&e.auth_time&&e.iat))throw new Br("internal-error","An internal error occurred. The token obtained by Firebase appears to be malformed. Please retry the operation.");Nr(this,{token:t,expirationTime:Er(1e3*e.exp),authTime:Er(1e3*e.auth_time),issuedAtTime:Er(1e3*e.iat),signInProvider:e.firebase&&e.firebase.sign_in_provider?e.firebase.sign_in_provider:null,claims:e})}function Qu(t,e,n){if(this.h=t,this.i=e,this.g=n,this.c=3e4,this.f=96e4,this.b=null,this.a=this.c,this.f<this.c)throw Error("Proactive refresh lower bound greater than upper bound!")}function zu(t,e){return e?(t.a=t.c,t.g()):(e=t.a,t.a*=2,t.a>t.f&&(t.a=t.f),e)}function Yu(t){this.f=t,this.b=this.a=null,this.c=0}function Xu(t,e){var n=e[ua],r=e.refreshToken;e=Ju(e.expiresIn),t.b=n,t.c=e,t.a=r}function Ju(t){return _()+1e3*parseInt(t,10)}function $u(e,t){return function(t,r){return new dt(function(e,n){"refresh_token"==r.grant_type&&r.refresh_token||"authorization_code"==r.grant_type&&r.code?va(t,t.i+"?key="+encodeURIComponent(t.b),function(t){t?t.error?n(os(t)):t.access_token&&t.refresh_token?e(t):n(new Br("internal-error")):n(new Br("network-request-failed"))},"POST",an(r).toString(),t.f,t.l.get()):n(new Br("internal-error"))})}(e.f,t).then(function(t){return e.b=t.access_token,e.c=Ju(t.expires_in),e.a=t.refresh_token,{accessToken:e.b,expirationTime:e.c,refreshToken:e.a}}).s(function(t){throw"auth/user-token-expired"==t.code&&(e.a=null),t})}function Zu(t,e){this.a=t||null,this.b=e||null,Nr(this,{lastSignInTime:Er(e||null),creationTime:Er(t||null)})}function tc(t,e,n,r,i,o){Nr(this,{uid:t,displayName:r||null,photoURL:i||null,email:n||null,phoneNumber:o||null,providerId:e})}function ec(t,e){for(var n in oe.call(this,t),e)this[n]=e[n]}function nc(t,e,n){this.G=[],this.m=t.apiKey,this.o=t.appName,this.u=t.authDomain||null,t=Mh.a.SDK_VERSION?or(Mh.a.SDK_VERSION):null,this.b=new aa(this.m,hi(ui),t),this.h=new Yu(this.b),cc(this,e[ua]),Xu(this.h,e),Ar(this,"refreshToken",this.h.a),fc(this,n||{}),Ne.call(this),this.I=!1,this.u&&cr()&&(this.a=Fu(this.u,this.m,this.o)),this.N=[],this.i=null,this.w=function(e){return new Qu(function(){return e.F(!0)},function(t){return!(!t||"auth/network-request-failed"!=t.code)},function(){var t=e.h.c-_()-3e5;return 0<t?t:0})}(this),this.V=g(this.Ha,this);var r=this;this.ka=null,this.ta=function(t){r.pa(t.g)},this.X=null,this.O=[],this.sa=function(t){ic(r,t.c)},this.W=null}function rc(t,e){t.X&&be(t.X,"languageCodeChanged",t.ta),(t.X=e)&&ge(e,"languageCodeChanged",t.ta)}function ic(t,e){t.O=e,da(t.b,Mh.a.SDK_VERSION?or(Mh.a.SDK_VERSION,t.O):null)}function oc(t,e){t.W&&be(t.W,"frameworkChanged",t.sa),(t.W=e)&&ge(e,"frameworkChanged",t.sa)}function ac(e){try{return Mh.a.app(e.o).auth()}catch(t){throw new Br("internal-error","No firebase.auth.Auth instance is available for the Firebase App '"+e.o+"'!")}}function sc(t){t.D||t.w.b||(t.w.start(),be(t,"tokenChanged",t.V),ge(t,"tokenChanged",t.V))}function uc(t){be(t,"tokenChanged",t.V),t.w.stop()}function cc(t,e){t.ra=e,Ar(t,"_lat",e)}function hc(t){for(var e=[],n=0;n<t.N.length;n++)e.push(t.N[n](t));return Tt(e).then(function(){return t})}function lc(t){t.a&&!t.I&&(t.I=!0,t.a.subscribe(t))}function fc(t,e){Nr(t,{uid:e.uid,displayName:e.displayName||null,photoURL:e.photoURL||null,email:e.email||null,emailVerified:e.emailVerified||!1,phoneNumber:e.phoneNumber||null,isAnonymous:e.isAnonymous||!1,metadata:new Zu(e.createdAt,e.lastLoginAt),providerData:[]})}function pc(){}function dc(t){return wt().then(function(){if(t.D)throw new Br("app-deleted")})}function vc(t){return P(t.providerData,function(t){return t.providerId})}function yc(t,e){e&&(gc(t,e.providerId),t.providerData.push(e))}function gc(t,e){F(t.providerData,function(t){return t.providerId==e})}function mc(t,e,n){("uid"!=e||n)&&t.hasOwnProperty(e)&&Ar(t,e,n)}function _c(e,t){e!=t&&(Nr(e,{uid:t.uid,displayName:t.displayName,photoURL:t.photoURL,email:t.email,emailVerified:t.emailVerified,phoneNumber:t.phoneNumber,isAnonymous:t.isAnonymous,providerData:[]}),t.metadata?Ar(e,"metadata",function(t){return new Zu(t.a,t.b)}(t.metadata)):Ar(e,"metadata",new Zu),O(t.providerData,function(t){yc(e,t)}),function(t,e){t.b=e.b,t.a=e.a,t.c=e.c}(e.h,t.h),Ar(e,"refreshToken",e.h.a))}function bc(n){return n.F().then(function(t){var e=n.isAnonymous;return function(t,e){return rs(t.b,ja,{idToken:e}).then(g(t.xc,t))}(n,t).then(function(){return e||mc(n,"isAnonymous",!1),t})})}function wc(t,e){e[ua]&&t.ra!=e[ua]&&(Xu(t.h,e),t.dispatchEvent(new ec("tokenChanged")),cc(t,e[ua]),mc(t,"refreshToken",t.h.a))}function Ec(t,e){return bc(t).then(function(){if(L(vc(t),e))return hc(t).then(function(){throw new Br("provider-already-linked")})})}function Sc(t,e,n){return kr({user:t,credential:Xi(e),additionalUserInfo:e=vi(e),operationType:n})}function Tc(t,e){return wc(t,e),t.reload().then(function(){return t})}function Cc(n,r,t,e,i){if(!cr())return Et(new Br("operation-not-supported-in-this-environment"));if(n.i&&!i)return Et(n.i);var o=di(t.providerId),a=yr(n.uid+":::"),s=null;(!fr()||Jn())&&n.u&&t.isOAuthProvider&&(s=ms(n.u,n.m,n.o,r,t,null,a,Mh.a.SDK_VERSION||null));var u=Gn(s,o&&o.Ba,o&&o.Aa);return e=e().then(function(){if(xc(n),!i)return n.F().then(function(){})}).then(function(){return Du(n.a,u,r,t,a,!!s)}).then(function(){return new dt(function(t,e){n.ha(r,null,new Br("cancelled-popup-request"),n.g||null),n.f=t,n.v=e,n.g=a,n.c=n.a.Ea(n,r,u,a)})}).then(function(t){return u&&Kn(u),t?kr(t):null}).s(function(t){throw u&&Kn(u),t}),Ac(n,e,i)}function Ic(e,t,n,r,i){if(!cr())return Et(new Br("operation-not-supported-in-this-environment"));if(e.i&&!i)return Et(e.i);var o=null,a=yr(e.uid+":::");return r=r().then(function(){if(xc(e),!i)return e.F().then(function(){})}).then(function(){return e.aa=a,hc(e)}).then(function(t){return e.ba&&(t=(t=e.ba).b.set(Rc,e.C(),t.a)),t}).then(function(){return e.a.Ca(t,n,a)}).s(function(t){if(o=t,e.ba)return Oc(e.ba);throw o}).then(function(){if(o)throw o}),Ac(e,r,i)}function xc(t){if(!t.a||!t.I){if(t.a&&!t.I)throw new Br("internal-error");throw new Br("auth-domain-config-required")}}function Ac(t,e,n){var r=function(e,t,n){return e.i&&!n?(t.cancel(),Et(e.i)):t.s(function(t){throw!t||"auth/user-disabled"!=t.code&&"auth/user-token-expired"!=t.code||(e.i||e.dispatchEvent(new ec("userInvalidated")),e.i=t),t})}(t,e,n);return t.G.push(r),r.ia(function(){M(t.G,r)}),r}function Nc(t){if(!t.apiKey)return null;var e={apiKey:t.apiKey,authDomain:t.authDomain,appName:t.appName},n={};if(!(t.stsTokenManager&&t.stsTokenManager.accessToken&&t.stsTokenManager.expirationTime))return null;n[ua]=t.stsTokenManager.accessToken,n.refreshToken=t.stsTokenManager.refreshToken||null,n.expiresIn=(t.stsTokenManager.expirationTime-_())/1e3;var r=new nc(e,n,t);return t.providerData&&O(t.providerData,function(t){t&&yc(r,kr(t))}),t.redirectEventId&&(r.aa=t.redirectEventId),r}function kc(t){this.a=t,this.b=Zs()}ju.prototype.reset=function(){this.b=null,this.a&&(this.a.cancel(),this.a=null)},ju.prototype.h=function(t,e){if(t){this.reset(),this.g=!0;var n=t.b,r=t.c,i=t.a&&"auth/web-storage-unsupported"==t.a.code,o=t.a&&"auth/operation-not-supported-in-this-environment"==t.a.code;this.i=!(!i&&!o),"unknown"!=n||i||o?t.a?(Bu(this,!0,null,t.a),wt()):e.xa(n,r)?function(e,t,n){n=n.xa(t.b,t.c);var r=t.f,i=t.g,o=t.h,a=!!t.b.match(/Redirect$/);n(r,i,o).then(function(t){Bu(e,a,t,null)}).s(function(t){Bu(e,a,null,t)})}(this,t,e):Et(new Br("invalid-auth-event")):(Bu(this,!1,null,null),wt())}else Et(new Br("invalid-auth-event"))},ju.prototype.Ya=function(){this.g&&!this.i&&Bu(this,!1,null,null)},ju.prototype.fa=function(){var n=this;return new dt(function(t,e){n.b?n.b().then(t,e):(n.f.push(t),n.c.push(e),function(t){var e=new Br("timeout");t.a&&t.a.cancel(),t.a=De(Pu.get()).then(function(){t.b||(t.g=!0,Bu(t,!0,null,e))})}(n))})},Vu.prototype.h=function(t,e){if(t){var n=t.b,r=t.c;t.a?(e.ha(t.b,null,t.a,t.c),wt()):e.xa(n,r)?function(t,e){var n=t.c,r=t.b;e.xa(r,n)(t.f,t.g,t.h).then(function(t){e.ha(r,t,null,n)}).s(function(t){e.ha(r,null,t,n)})}(t,e):Et(new Br("invalid-auth-event"))}else Et(new Br("invalid-auth-event"))},Hu.prototype.confirm=function(t){return t=Yi(this.verificationId,t),this.a(t)},Qu.prototype.start=function(){this.a=this.c,function e(n,t){n.stop();n.b=De(zu(n,t)).then(function(){return wr()}).then(function(){return n.h()}).then(function(){e(n,!0)}).s(function(t){n.i(t)&&e(n,!1)})}(this,!0)},Qu.prototype.stop=function(){this.b&&(this.b.cancel(),this.b=null)},Yu.prototype.C=function(){return{apiKey:this.f.b,refreshToken:this.a,accessToken:this.b,expirationTime:this.c}},Yu.prototype.getToken=function(t){return t=!!t,this.b&&!this.a?Et(new Br("user-token-expired")):t||!this.b||_()>this.c-3e4?this.a?$u(this,{grant_type:"refresh_token",refresh_token:this.a}):wt(null):wt({accessToken:this.b,expirationTime:this.c,refreshToken:this.a})},Zu.prototype.C=function(){return{lastLoginAt:this.b,createdAt:this.a}},e(ec,oe),e(nc,Ne),nc.prototype.pa=function(t){this.ka=t,pa(this.b,t)},nc.prototype.ea=function(){return this.ka},nc.prototype.ya=function(){return U(this.O)},nc.prototype.Ha=function(){this.w.b&&(this.w.stop(),this.w.start())},Ar(nc.prototype,"providerId","firebase"),(t=nc.prototype).reload=function(){var t=this;return Ac(this,dc(this).then(function(){return bc(t).then(function(){return hc(t)}).then(pc)}))},t.dc=function(t){return this.F(t).then(function(t){return new Gu(t)})},t.F=function(t){var e=this;return Ac(this,dc(this).then(function(){return e.h.getToken(t)}).then(function(t){if(!t)throw new Br("internal-error");return t.accessToken!=e.ra&&(cc(e,t.accessToken),e.dispatchEvent(new ec("tokenChanged"))),mc(e,"refreshToken",t.refreshToken),t.accessToken}))},t.xc=function(t){if(!(t=t.users)||!t.length)throw new Br("internal-error");fc(this,{uid:(t=t[0]).localId,displayName:t.displayName,photoURL:t.photoUrl,email:t.email,emailVerified:!!t.emailVerified,phoneNumber:t.phoneNumber,lastLoginAt:t.lastLoginAt,createdAt:t.createdAt});for(var e=function(t){return(t=t.providerUserInfo)&&t.length?P(t,function(t){return new tc(t.rawId,t.providerId,t.email,t.displayName,t.photoUrl,t.phoneNumber)}):[]}(t),n=0;n<e.length;n++)yc(this,e[n]);mc(this,"isAnonymous",!(this.email&&t.passwordHash||this.providerData&&this.providerData.length))},t.gb=function(t){var e=this,n=null;return Ac(this,t.f(this.b,this.uid).then(function(t){return wc(e,t),n=Sc(e,t,"reauthenticate"),e.i=null,e.reload()}).then(function(){return n}),!0)},t.yc=function(t){return Ir("firebase.User.prototype.reauthenticateWithCredential is deprecated. Please use firebase.User.prototype.reauthenticateAndRetrieveDataWithCredential instead."),this.gb(t).then(function(){})},t.eb=function(e){var n=this,r=null;return Ac(this,Ec(this,e.providerId).then(function(){return n.F()}).then(function(t){return e.b(n.b,t)}).then(function(t){return r=Sc(n,t,"link"),Tc(n,t)}).then(function(){return r}))},t.pc=function(t){return Ir("firebase.User.prototype.linkWithCredential is deprecated. Please use firebase.User.prototype.linkAndRetrieveDataWithCredential instead."),this.eb(t).then(function(t){return t.user})},t.qc=function(t,e){var n=this;return Ac(this,Ec(this,"phone").then(function(){return Ku(ac(n),t,e,g(n.eb,n))}))},t.zc=function(t,e){var n=this;return Ac(this,wt().then(function(){return Ku(ac(n),t,e,g(n.gb,n))}),!0)},t.pb=function(e){var n=this;return Ac(this,this.F().then(function(t){return n.b.pb(t,e)}).then(function(t){return wc(n,t),n.reload()}))},t.Rc=function(e){var n=this;return Ac(this,this.F().then(function(t){return e.b(n.b,t)}).then(function(t){return wc(n,t),n.reload()}))},t.qb=function(e){var n=this;return Ac(this,this.F().then(function(t){return n.b.qb(t,e)}).then(function(t){return wc(n,t),n.reload()}))},t.rb=function(e){if(void 0===e.displayName&&void 0===e.photoURL)return dc(this);var n=this;return Ac(this,this.F().then(function(t){return n.b.rb(t,{displayName:e.displayName,photoUrl:e.photoURL})}).then(function(t){return wc(n,t),mc(n,"displayName",t.displayName||null),mc(n,"photoURL",t.photoUrl||null),O(n.providerData,function(t){"password"===t.providerId&&(Ar(t,"displayName",n.displayName),Ar(t,"photoURL",n.photoURL))}),hc(n)}).then(pc))},t.Pc=function(e){var n=this;return Ac(this,bc(this).then(function(t){return L(vc(n),e)?function(t,e,n){return rs(t,La,{idToken:e,deleteProvider:n})}(n.b,t,[e]).then(function(t){var e={};return O(t.providerUserInfo||[],function(t){e[t.providerId]=!0}),O(vc(n),function(t){e[t]||gc(n,t)}),e[zi.PROVIDER_ID]||Ar(n,"phoneNumber",null),hc(n)}):hc(n).then(function(){throw new Br("no-such-provider")})}))},t.delete=function(){var e=this;return Ac(this,this.F().then(function(t){return rs(e.b,Da,{idToken:t})}).then(function(){e.dispatchEvent(new ec("userDeleted"))})).then(function(){for(var t=0;t<e.G.length;t++)e.G[t].cancel("app-deleted");rc(e,null),oc(e,null),e.G=[],e.D=!0,uc(e),Ar(e,"refreshToken",null),e.a&&e.a.unsubscribe(e)})},t.vb=function(t,e){return!!("linkViaPopup"==t&&(this.g||null)==e&&this.f||"reauthViaPopup"==t&&(this.g||null)==e&&this.f||"linkViaRedirect"==t&&(this.aa||null)==e||"reauthViaRedirect"==t&&(this.aa||null)==e)},t.ha=function(t,e,n,r){"linkViaPopup"!=t&&"reauthViaPopup"!=t||r!=(this.g||null)||(n&&this.v?this.v(n):e&&!n&&this.f&&this.f(e),this.c&&(this.c.cancel(),this.c=null),delete this.f,delete this.v)},t.xa=function(t,e){return"linkViaPopup"==t&&e==(this.g||null)?g(this.Ab,this):"reauthViaPopup"==t&&e==(this.g||null)?g(this.Bb,this):"linkViaRedirect"==t&&(this.aa||null)==e?g(this.Ab,this):"reauthViaRedirect"==t&&(this.aa||null)==e?g(this.Bb,this):null},t.rc=function(t){var e=this;return Cc(this,"linkViaPopup",t,function(){return Ec(e,t.providerId).then(function(){return hc(e)})},!1)},t.Ac=function(t){return Cc(this,"reauthViaPopup",t,function(){return wt()},!0)},t.sc=function(t){var e=this;return Ic(this,"linkViaRedirect",t,function(){return Ec(e,t.providerId)},!1)},t.Bc=function(t){return Ic(this,"reauthViaRedirect",t,function(){return wt()},!0)},t.Ab=function(e,n,r){var i=this;this.c&&(this.c.cancel(),this.c=null);var o=null;return Ac(this,this.F().then(function(t){return xa(i.b,{requestUri:e,postBody:r,sessionId:n,idToken:t})}).then(function(t){return o=Sc(i,t,"link"),Tc(i,t)}).then(function(){return o}))},t.Bb=function(t,e,n){var r=this;this.c&&(this.c.cancel(),this.c=null);var i=null;return Ac(this,wt().then(function(){return Ii(Aa(r.b,{requestUri:t,sessionId:e,postBody:n}),r.uid)}).then(function(t){return i=Sc(r,t,"reauthenticate"),wc(r,t),r.i=null,r.reload()}).then(function(){return i}),!0)},t.jb=function(e){var n=this,r=null;return Ac(this,this.F().then(function(t){return r=t,void 0===e||rt(e)?{}:ei(new Kr(e))}).then(function(t){return n.b.jb(r,t)}).then(function(t){if(n.email!=t)return n.reload()}).then(function(){}))},t.toJSON=function(){return this.C()},t.C=function(){var e={uid:this.uid,displayName:this.displayName,photoURL:this.photoURL,email:this.email,emailVerified:this.emailVerified,phoneNumber:this.phoneNumber,isAnonymous:this.isAnonymous,providerData:[],apiKey:this.m,appName:this.o,authDomain:this.u,stsTokenManager:this.h.C(),redirectEventId:this.aa||null};return this.metadata&&ut(e,this.metadata.C()),O(this.providerData,function(t){e.providerData.push(function(t){var e,n={};for(e in t)t.hasOwnProperty(e)&&(n[e]=t[e]);return n}(t))}),e};var Rc={name:"redirectUser",A:"session"};function Oc(t){return nu(t.b,Rc,t.a)}function Pc(t){this.a=t,this.b=Zs(),this.c=null,this.f=function(e){var n=Mc("local"),r=Mc("session"),i=Mc("none");return function(n,r,i){var o=eu(r,i),a=tu(n,r.A);return n.get(r,i).then(function(t){var e=null;try{e=vr(h.localStorage.getItem(o))}catch(t){}if(e&&!t)return h.localStorage.removeItem(o),n.set(r,e,i);e&&t&&"localStorage"!=a.type&&h.localStorage.removeItem(o)})}(e.b,n,e.a).then(function(){return e.b.get(r,e.a)}).then(function(t){return t?r:e.b.get(i,e.a).then(function(t){return t?i:e.b.get(n,e.a).then(function(t){return t?n:e.b.get(Lc,e.a).then(function(t){return t?Mc(t):n})})})}).then(function(t){return e.c=t,Dc(e,t.A)}).s(function(){e.c||(e.c=n)})}(this),this.b.addListener(Mc("local"),this.a,g(this.g,this))}function Dc(t,e){var n,r=[];for(n in Js)Js[n]!==e&&r.push(nu(t.b,Mc(Js[n]),t.a));return r.push(nu(t.b,Lc,t.a)),function(s){return new dt(function(n,e){var r=s.length,i=[];if(r)for(var t=function(t,e){r--,i[t]=e,0==r&&n(i)},o=function(t){e(t)},a=0;a<s.length;a++)St(s[a],m(t,a),o);else n(i)})}(r)}Pc.prototype.g=function(){var e=this,n=Mc("local");Wc(this,function(){return wt().then(function(){return e.c&&"local"!=e.c.A?e.b.get(n,e.a):null}).then(function(t){if(t)return Dc(e,"local").then(function(){e.c=n})})})};var Lc={name:"persistence",A:"session"};function Mc(t){return{name:"authUser",A:t}}function Fc(t,e){return Wc(t,function(){return t.b.set(t.c,e.C(),t.a)})}function jc(t){return Wc(t,function(){return nu(t.b,t.c,t.a)})}function Uc(t,e){return Wc(t,function(){return t.b.get(t.c,t.a).then(function(t){return t&&e&&(t.authDomain=e),Nc(t||{})})})}function Wc(t,e){return t.f=t.f.then(e,e),t.f}function Bc(t){if(this.m=!1,Ar(this,"settings",new qu),Ar(this,"app",t),!zc(this).options||!zc(this).options.apiKey)throw new Br("invalid-api-key");t=Mh.a.SDK_VERSION?or(Mh.a.SDK_VERSION):null,this.b=new aa(zc(this).options&&zc(this).options.apiKey,hi(ui),t),this.N=[],this.o=[],this.I=[],this.Tb=Mh.a.INTERNAL.createSubscribe(g(this.mc,this)),this.O=void 0,this.Ub=Mh.a.INTERNAL.createSubscribe(g(this.nc,this)),Gc(this,null),this.h=new Pc(zc(this).options.apiKey+":"+zc(this).name),this.w=new kc(zc(this).options.apiKey+":"+zc(this).name),this.V=$c(this,function(n){var t=zc(n).options.authDomain,e=function(e){var t=function(t,e){return t.b.get(Rc,t.a).then(function(t){return t&&e&&(t.authDomain=e),Nc(t||{})})}(e.w,zc(e).options.authDomain).then(function(t){return(e.D=t)&&(t.ba=e.w),Oc(e.w)});return $c(e,t)}(n).then(function(){return Uc(n.h,t)}).then(function(e){return e?(e.ba=n.w,n.D&&(n.D.aa||null)==(e.aa||null)?e:e.reload().then(function(){return Fc(n.h,e).then(function(){return e})}).s(function(t){return"auth/network-request-failed"==t.code?e:jc(n.h)})):null}).then(function(t){Gc(n,t||null)});return $c(n,e)}(this)),this.i=$c(this,function(e){return e.V.then(function(){return e.fa()}).s(function(){}).then(function(){if(!e.m)return e.ka()}).s(function(){}).then(function(){if(!e.m){e.X=!0;var t=e.h;t.b.addListener(Mc("local"),t.a,e.ka)}})}(this)),this.X=!1,this.ka=g(this.Mc,this),this.Ha=g(this.Z,this),this.ra=g(this.bc,this),this.sa=g(this.jc,this),this.ta=g(this.kc,this),function(e){var n=zc(e).options.authDomain,r=zc(e).options.apiKey;n&&cr()&&(e.Sb=e.V.then(function(){if(!e.m){if(e.a=Fu(n,r,zc(e).name),e.a.subscribe(e),Yc(e)&&lc(Yc(e)),e.D){lc(e.D);var t=e.D;t.pa(e.ea()),rc(t,e),ic(t=e.D,e.G),oc(t,e),e.D=null}return e.a}}))}(this),this.INTERNAL={},this.INTERNAL.delete=g(this.delete,this),this.INTERNAL.logFramework=g(this.tc,this),this.u=0,Ne.call(this),function(t){Object.defineProperty(t,"lc",{get:function(){return this.ea()},set:function(t){this.pa(t)},enumerable:!1}),t.W=null}(this),this.G=[]}function Vc(t){oe.call(this,"languageCodeChanged"),this.g=t}function qc(t){oe.call(this,"frameworkChanged"),this.c=t}function Hc(t){return t.Sb||Et(new Br("auth-domain-config-required"))}function Kc(e,t){var n={};return n.apiKey=zc(e).options.apiKey,n.authDomain=zc(e).options.authDomain,n.appName=zc(e).name,e.V.then(function(){return function(t,e,n,r){var i=new nc(t,e);return n&&(i.ba=n),r&&ic(i,r),i.reload().then(function(){return i})}(n,t,e.w,e.ya())}).then(function(t){return Yc(e)&&t.uid==Yc(e).uid?_c(Yc(e),t):(Gc(e,t),lc(t)),e.Z(t)}).then(function(){Jc(e)})}function Gc(t,e){Yc(t)&&(function(t,e){F(t.N,function(t){return t==e})}(Yc(t),t.Ha),be(Yc(t),"tokenChanged",t.ra),be(Yc(t),"userDeleted",t.sa),be(Yc(t),"userInvalidated",t.ta),uc(Yc(t))),e&&(e.N.push(t.Ha),ge(e,"tokenChanged",t.ra),ge(e,"userDeleted",t.sa),ge(e,"userInvalidated",t.ta),0<t.u&&sc(e)),Ar(t,"currentUser",e),e&&(e.pa(t.ea()),rc(e,t),ic(e,t.G),oc(e,t))}function Qc(e,t){var n=null,r=null;return $c(e,t.then(function(t){return n=Xi(t),r=vi(t),Kc(e,t)}).then(function(){return kr({user:Yc(e),credential:n,additionalUserInfo:r,operationType:"signIn"})}))}function zc(t){return t.app}function Yc(t){return t.currentUser}function Xc(t){return Yc(t)&&Yc(t)._lat||null}function Jc(t){if(t.X){for(var e=0;e<t.o.length;e++)t.o[e]&&t.o[e](Xc(t));if(t.O!==t.getUid()&&t.I.length)for(t.O=t.getUid(),e=0;e<t.I.length;e++)t.I[e]&&t.I[e](Xc(t))}}function $c(t,e){return t.N.push(e),e.ia(function(){M(t.N,e)}),e}function Zc(){}function th(){this.a={},this.b=1e12}Pc.prototype.mb=function(e){var n=null,r=this;return function(t){var e=new Br("invalid-persistence-type"),n=new Br("unsupported-persistence-type");t:{for(r in Js)if(Js[r]==t){var r=!0;break t}r=!1}if(!r||"string"!=typeof t)throw e;switch(Zn()){case"ReactNative":if("session"===t)throw n;break;case"Node":if("none"!==t)throw n;break;default:if(!ur()&&"none"!==t)throw n}}(e),Wc(this,function(){return e!=r.c.A?r.b.get(r.c,r.a).then(function(t){return n=t,Dc(r,e)}).then(function(){if(r.c=Mc(e),n)return r.b.set(r.c,n,r.a)}):wt()})},e(Bc,Ne),e(Vc,oe),e(qc,oe),(t=Bc.prototype).mb=function(t){return $c(this,t=this.h.mb(t))},t.pa=function(t){this.W===t||this.m||(this.W=t,pa(this.b,this.W),this.dispatchEvent(new Vc(this.ea())))},t.ea=function(){return this.W},t.Sc=function(){var t=h.navigator;this.pa(t&&(t.languages&&t.languages[0]||t.language||t.userLanguage)||null)},t.tc=function(t){this.G.push(t),da(this.b,Mh.a.SDK_VERSION?or(Mh.a.SDK_VERSION,this.G):null),this.dispatchEvent(new qc(this.G))},t.ya=function(){return U(this.G)},t.toJSON=function(){return{apiKey:zc(this).options.apiKey,authDomain:zc(this).options.authDomain,appName:zc(this).name,currentUser:Yc(this)&&Yc(this).C()}},t.vb=function(t,e){switch(t){case"unknown":case"signInViaRedirect":return!0;case"signInViaPopup":return this.g==e&&!!this.f;default:return!1}},t.ha=function(t,e,n,r){"signInViaPopup"==t&&this.g==r&&(n&&this.v?this.v(n):e&&!n&&this.f&&this.f(e),this.c&&(this.c.cancel(),this.c=null),delete this.f,delete this.v)},t.xa=function(t,e){return"signInViaRedirect"==t||"signInViaPopup"==t&&this.g==e&&this.f?g(this.ac,this):null},t.ac=function(t,e,n){var r=this;t={requestUri:t,postBody:n,sessionId:e},this.c&&(this.c.cancel(),this.c=null);var i=null,o=null,a=Ia(r.b,t).then(function(t){return i=Xi(t),o=vi(t),t});return $c(this,t=r.V.then(function(){return a}).then(function(t){return Kc(r,t)}).then(function(){return kr({user:Yc(r),credential:i,additionalUserInfo:o,operationType:"signIn"})}))},t.Kc=function(e){if(!cr())return Et(new Br("operation-not-supported-in-this-environment"));var n=this,t=di(e.providerId),r=yr(),i=null;(!fr()||Jn())&&zc(this).options.authDomain&&e.isOAuthProvider&&(i=ms(zc(this).options.authDomain,zc(this).options.apiKey,zc(this).name,"signInViaPopup",e,null,r,Mh.a.SDK_VERSION||null));var o=Gn(i,t&&t.Ba,t&&t.Aa);return $c(this,t=Hc(this).then(function(t){return Du(t,o,"signInViaPopup",e,r,!!i)}).then(function(){return new dt(function(t,e){n.ha("signInViaPopup",null,new Br("cancelled-popup-request"),n.g),n.f=t,n.v=e,n.g=r,n.c=n.a.Ea(n,"signInViaPopup",o,r)})}).then(function(t){return o&&Kn(o),t?kr(t):null}).s(function(t){throw o&&Kn(o),t}))},t.Lc=function(t){if(!cr())return Et(new Br("operation-not-supported-in-this-environment"));var e=this;return $c(this,Hc(this).then(function(){return function(t){return Wc(t,function(){return t.b.set(Lc,t.c.A,t.a)})}(e.h)}).then(function(){return e.a.Ca("signInViaRedirect",t)}))},t.fa=function(){if(!cr())return Et(new Br("operation-not-supported-in-this-environment"));var t=this;return $c(this,Hc(this).then(function(){return t.a.fa()}).then(function(t){return t?kr(t):null}))},t.Qc=function(t){if(!t)return Et(new Br("null-user"));var e=this,n={};n.apiKey=zc(this).options.apiKey,n.authDomain=zc(this).options.authDomain,n.appName=zc(this).name;var r=function(t,e,n,r){e=e||{apiKey:t.m,authDomain:t.u,appName:t.o};var i=t.h,o={};return o[ua]=i.b,o.refreshToken=i.a,o.expiresIn=(i.c-_())/1e3,e=new nc(e,o),n&&(e.ba=n),r&&ic(e,r),_c(e,t),e}(t,n,e.w,e.ya());return $c(this,this.i.then(function(){if(zc(e).options.apiKey!=t.m)return r.reload()}).then(function(){return Yc(e)&&t.uid==Yc(e).uid?(_c(Yc(e),t),e.Z(t)):(Gc(e,r),lc(r),e.Z(r))}).then(function(){Jc(e)}))},t.nb=function(){var t=this;return $c(this,this.i.then(function(){return Yc(t)?(Gc(t,null),jc(t.h).then(function(){Jc(t)})):wt()}))},t.Mc=function(){var r=this;return Uc(this.h,zc(this).options.authDomain).then(function(t){if(!r.m){var e;if(e=Yc(r)&&t){e=Yc(r).uid;var n=t.uid;e=null!=e&&""!==e&&null!=n&&""!==n&&e==n}if(e)return _c(Yc(r),t),Yc(r).F();(Yc(r)||t)&&(Gc(r,t),t&&(lc(t),t.ba=r.w),r.a&&r.a.subscribe(r),Jc(r))}})},t.Z=function(t){return Fc(this.h,t)},t.bc=function(){Jc(this),this.Z(Yc(this))},t.jc=function(){this.nb()},t.kc=function(){this.nb()},t.mc=function(t){var e=this;this.addAuthTokenListener(function(){t.next(Yc(e))})},t.nc=function(t){var e=this;!function(t,e){t.I.push(e),$c(t,t.i.then(function(){!t.m&&L(t.I,e)&&t.O!==t.getUid()&&(t.O=t.getUid(),e(Xc(t)))}))}(this,function(){t.next(Yc(e))})},t.vc=function(t,e,n){var r=this;return this.X&&Mh.a.Promise.resolve().then(function(){a(t)?t(Yc(r)):a(t.next)&&t.next(Yc(r))}),this.Tb(t,e,n)},t.uc=function(t,e,n){var r=this;return this.X&&Mh.a.Promise.resolve().then(function(){r.O=r.getUid(),a(t)?t(Yc(r)):a(t.next)&&t.next(Yc(r))}),this.Ub(t,e,n)},t.cc=function(t){var e=this;return $c(this,this.i.then(function(){return Yc(e)?Yc(e).F(t).then(function(t){return{accessToken:t}}):null}))},t.Nb=function(t){var n=this;return this.i.then(function(){return Qc(n,rs(n.b,$a,{token:t}))}).then(function(t){var e=t.user;return mc(e,"isAnonymous",!1),n.Z(e),t})},t.Ec=function(t){return Ir("firebase.auth.Auth.prototype.signInAndRetrieveDataWithCustomToken is deprecated. Please use firebase.auth.Auth.prototype.signInWithCustomToken instead."),this.Nb(t)},t.Fc=function(t,e){return Ir("firebase.auth.Auth.prototype.signInAndRetrieveDataWithEmailAndPassword is deprecated. Please use firebase.auth.Auth.prototype.signInWithEmailAndPassword instead."),this.Ob(t,e)},t.Ob=function(t,e){var n=this;return this.i.then(function(){return Qc(n,rs(n.b,Za,{email:t,password:e}))})},t.xb=function(t,e){var n=this;return this.i.then(function(){return Qc(n,rs(n.b,Oa,{email:t,password:e}))})},t.Wb=function(t,e){return Ir("firebase.auth.Auth.prototype.createUserAndRetrieveDataWithEmailAndPassword is deprecated. Please use firebase.auth.Auth.prototype.createUserWithEmailAndPassword instead."),this.xb(t,e)},t.Hc=function(t){return Ir("firebase.auth.Auth.prototype.signInWithCredential is deprecated. Please use firebase.auth.Auth.prototype.signInAndRetrieveDataWithCredential instead."),this.Pa(t).then(function(t){return t.user})},t.Pa=function(t){var e=this;return this.i.then(function(){return Qc(e,t.la(e.b))})},t.Qa=function(){var n=this;return this.i.then(function(){var t=Yc(n);return t&&t.isAnonymous?kr({user:t,credential:null,additionalUserInfo:kr({providerId:null,isNewUser:!1}),operationType:"signIn"}):Qc(n,n.b.Qa()).then(function(t){var e=t.user;return mc(e,"isAnonymous",!0),n.Z(e),t})})},t.Gc=function(){return Ir("firebase.auth.Auth.prototype.signInAnonymouslyAndRetrieveData is deprecated. Please use firebase.auth.Auth.prototype.signInAnonymously instead."),this.Qa()},t.getUid=function(){return Yc(this)&&Yc(this).uid||null},t.Vb=function(t){this.addAuthTokenListener(t),this.u++,0<this.u&&Yc(this)&&sc(Yc(this))},t.Cc=function(e){var n=this;O(this.o,function(t){t==e&&n.u--}),this.u<0&&(this.u=0),0==this.u&&Yc(this)&&uc(Yc(this)),this.removeAuthTokenListener(e)},t.addAuthTokenListener=function(t){var e=this;this.o.push(t),$c(this,this.i.then(function(){e.m||L(e.o,t)&&t(Xc(e))}))},t.removeAuthTokenListener=function(e){F(this.o,function(t){return t==e})},t.delete=function(){this.m=!0;for(var t=0;t<this.N.length;t++)this.N[t].cancel("app-deleted");return this.N=[],this.h&&(t=this.h).b.removeListener(Mc("local"),t.a,this.ka),this.a&&(this.a.unsubscribe(this),this.a.Ya()),Mh.a.Promise.resolve()},t.Zb=function(t){return Ir("firebase.auth.Auth.prototype.fetchProvidersForEmail is deprecated. Please use firebase.auth.Auth.prototype.fetchSignInMethodsForEmail instead."),$c(this,function(t,e){return rs(t,Pa,{identifier:e,continueUri:hr()?Vn():"http://localhost"}).then(function(t){return t.allProviders||[]})}(this.b,t))},t.$b=function(t){return $c(this,function(t,e){return rs(t,Pa,{identifier:e,continueUri:hr()?Vn():"http://localhost"}).then(function(t){return t.signinMethods||[]})}(this.b,t))},t.oc=function(t){return!!Ki(t)},t.lb=function(e,n){var r=this;return $c(this,wt().then(function(){var t=new Kr(n);if(!t.c)throw new Br("argument-error",zr+" must be true when sending sign in link to email");return ei(t)}).then(function(t){return r.b.lb(e,t)}).then(function(){}))},t.Tc=function(t){return this.Ja(t).then(function(t){return t.data.email})},t.Za=function(t,e){return $c(this,this.b.Za(t,e).then(function(){}))},t.Ja=function(t){return $c(this,this.b.Ja(t).then(function(t){return new Or(t)}))},t.Wa=function(t){return $c(this,this.b.Wa(t).then(function(){}))},t.kb=function(e,t){var n=this;return $c(this,wt().then(function(){return void 0===t||rt(t)?{}:ei(new Kr(t))}).then(function(t){return n.b.kb(e,t)}).then(function(){}))},t.Jc=function(t,e){return $c(this,Ku(this,t,e,g(this.Pa,this)))},t.Ic=function(e,n){var r=this;return $c(this,wt().then(function(){var t=Hi(e,n||Vn());return r.Pa(t)}))},Zc.prototype.render=function(){},Zc.prototype.reset=function(){},Zc.prototype.getResponse=function(){},Zc.prototype.execute=function(){};var eh=null;function nh(t,e){return(e=rh(e))&&t.a[e]||null}function rh(t){return(t=void 0===t?1e12:t)?t.toString():null}function ih(t,e){this.g=!1,this.c=e,this.a=this.b=null,this.h="invisible"!==this.c.size,this.f=Rn(t);var n=this;this.i=function(){n.execute()},this.h?this.execute():ge(this.f,"click",this.i)}function oh(t){if(t.g)throw Error("reCAPTCHA mock was already deleted!")}function ah(){}th.prototype.render=function(t,e){return this.a[this.b.toString()]=new ih(t,e),this.b++},th.prototype.reset=function(t){var e=nh(this,t);t=rh(t),e&&t&&(e.delete(),delete this.a[t])},th.prototype.getResponse=function(t){return(t=nh(this,t))?t.getResponse():null},th.prototype.execute=function(t){(t=nh(this,t))&&t.execute()},ih.prototype.getResponse=function(){return oh(this),this.b},ih.prototype.execute=function(){oh(this);var n=this;this.a||(this.a=setTimeout(function(){n.b=function(){for(var t=50,e=[];0<t;)e.push("1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ".charAt(Math.floor(62*Math.random()))),t--;return e.join("")}();var t=n.c.callback,e=n.c["expired-callback"];if(t)try{t(n.b)}catch(t){}n.a=setTimeout(function(){if(n.a=null,n.b=null,e)try{e()}catch(t){}n.h&&n.execute()},6e4)},500))},ih.prototype.delete=function(){oh(this),this.g=!0,clearTimeout(this.a),this.a=null,be(this.f,"click",this.i)},ah.prototype.g=function(){return eh||(eh=new th),wt(eh)},ah.prototype.c=function(){};var sh=null;function uh(){this.b=h.grecaptcha?1/0:0,this.f=null,this.a="__rcb"+Math.floor(1e6*Math.random()).toString()}var ch=vn("https://www.google.com/recaptcha/api.js?onload=%{onload}&render=explicit&hl=%{hl}"),hh=new _r(3e4,6e4);uh.prototype.g=function(i){var o=this;return new dt(function(t,e){var r=setTimeout(function(){e(new Br("network-request-failed"))},hh.get());!h.grecaptcha||i!==o.f&&!o.b?(h[o.a]=function(){if(h.grecaptcha){o.f=i;var n=h.grecaptcha.render;h.grecaptcha.render=function(t,e){return t=n(t,e),o.b++,t},clearTimeout(r),t(h.grecaptcha)}else clearTimeout(r),e(new Br("internal-error"));delete h[o.a]},wt(Zo(mn(ch,{onload:o.a,hl:i||""}))).s(function(){clearTimeout(r),e(new Br("internal-error","Unable to load external reCAPTCHA dependencies!"))})):(clearTimeout(r),t(h.grecaptcha))})},uh.prototype.c=function(){this.b--};var lh=null;function fh(t,e,n,r,i,o,a){if(Ar(this,"type","recaptcha"),this.c=this.f=null,this.D=!1,this.m=e,this.g=null,a=a?(sh||(sh=new ah),sh):(lh||(lh=new uh),lh),this.o=a,this.a=n||{theme:"light",type:"image"},this.h=[],this.a[vh])throw new Br("argument-error","sitekey should not be provided for reCAPTCHA as one is automatically provisioned for the current project.");if(this.i="invisible"===this.a[yh],!h.document)throw new Br("operation-not-supported-in-this-environment","RecaptchaVerifier is only supported in a browser HTTP/HTTPS environment with DOM support.");if(!Rn(e)||!this.i&&Rn(e).hasChildNodes())throw new Br("argument-error","reCAPTCHA container is either not found or already contains inner elements!");this.u=new aa(t,o||null,i||null),this.v=r||function(){return null};var s=this;this.l=[];var u=this.a[ph];this.a[ph]=function(t){if(gh(s,t),"function"==typeof u)u(t);else if("string"==typeof u){var e=sr(u,h);"function"==typeof e&&e(t)}};var c=this.a[dh];this.a[dh]=function(){if(gh(s,null),"function"==typeof c)c();else if("string"==typeof c){var t=sr(c,h);"function"==typeof t&&t()}}}var ph="callback",dh="expired-callback",vh="sitekey",yh="size";function gh(t,e){for(var n=0;n<t.l.length;n++)try{t.l[n](e)}catch(t){}}function mh(t,e){return t.h.push(e),e.ia(function(){M(t.h,e)}),e}function _h(t){if(t.D)throw new Br("internal-error","RecaptchaVerifier instance has been destroyed.")}function bh(t,e,n){var r=!1;try{this.b=n||Mh.a.app()}catch(t){throw new Br("argument-error","No firebase.app.App instance is currently initialized.")}if(!this.b.options||!this.b.options.apiKey)throw new Br("invalid-api-key");n=this.b.options.apiKey;var i=this,o=null;try{o=this.b.auth().ya()}catch(t){}try{r=this.b.auth().settings.appVerificationDisabledForTesting}catch(t){}o=Mh.a.SDK_VERSION?or(Mh.a.SDK_VERSION,o):null,fh.call(this,n,t,e,function(){try{var e=i.b.auth().ea()}catch(t){e=null}return e},o,hi(ui),r)}function wh(t,e,n,r){t:{n=Array.prototype.slice.call(n);for(var i=0,o=!1,a=0;a<e.length;a++)if(e[a].optional)o=!0;else{if(o)throw new Br("internal-error","Argument validator encountered a required argument after an optional argument.");i++}if(o=e.length,n.length<i||o<n.length)r="Expected "+(i==o?1==i?"1 argument":i+" arguments":i+"-"+o+" arguments")+" but got "+n.length+".";else{for(i=0;i<n.length;i++)if(o=e[i].optional&&void 0===n[i],!e[i].M(n[i])&&!o){if(e=e[i],i<0||i>=Eh.length)throw new Br("internal-error","Argument validator received an unsupported number of arguments.");n=Eh[i],r=(r?"":n+" argument ")+(e.name?'"'+e.name+'" ':"")+"must be "+e.K+".";break t}r=null}}if(r)throw new Br("argument-error",t+" failed: "+r)}(t=fh.prototype).za=function(){var e=this;return this.f?this.f:this.f=mh(this,wt().then(function(){if(hr()&&!$n())return Yn();throw new Br("operation-not-supported-in-this-environment","RecaptchaVerifier is only supported in a browser HTTP/HTTPS environment.")}).then(function(){return e.o.g(e.v())}).then(function(t){return e.g=t,rs(e.u,qa,{})}).then(function(t){e.a[vh]=t.recaptchaSiteKey}).s(function(t){throw e.f=null,t}))},t.render=function(){_h(this);var n=this;return mh(this,this.za().then(function(){if(null===n.c){var t=n.m;if(!n.i){var e=Rn(t);t=Dn("DIV"),e.appendChild(t)}n.c=n.g.render(t,n.a)}return n.c}))},t.verify=function(){_h(this);var i=this;return mh(this,this.render().then(function(r){return new dt(function(e){var t=i.g.getResponse(r);if(t)e(t);else{var n=function(t){t&&(function(t,e){F(t.l,function(t){return t==e})}(i,n),e(t))};i.l.push(n),i.i&&i.g.execute(i.c)}})}))},t.reset=function(){_h(this),null!==this.c&&this.g.reset(this.c)},t.clear=function(){_h(this),this.D=!0,this.o.c();for(var t=0;t<this.h.length;t++)this.h[t].cancel("RecaptchaVerifier instance has been destroyed.");if(!this.i){t=Rn(this.m);for(var e;e=t.firstChild;)t.removeChild(e)}},e(bh,fh);var Eh="First Second Third Fourth Fifth Sixth Seventh Eighth Ninth".split(" ");function Sh(t,e){return{name:t||"",K:"a valid string",optional:!!e,M:c}}function Th(t,e){return{name:t||"",K:"a boolean",optional:!!e,M:n}}function Ch(t,e){return{name:t||"",K:"a valid object",optional:!!e,M:p}}function Ih(t,e){return{name:t||"",K:"a function",optional:!!e,M:a}}function xh(t,e){return{name:t||"",K:"null",optional:!!e,M:r}}function Ah(n){return{name:n?n+"Credential":"credential",K:n?"a valid "+n+" credential":"a valid credential",optional:!1,M:function(t){if(!t)return!1;var e=!n||t.providerId===n;return!(!t.la||!e)}}}function Nh(){return{name:"authProvider",K:"a valid Auth provider",optional:!1,M:function(t){return!!(t&&t.providerId&&t.hasOwnProperty&&t.hasOwnProperty("isOAuthProvider"))}}}function kh(){return{name:"applicationVerifier",K:"an implementation of firebase.auth.ApplicationVerifier",optional:!1,M:function(t){return!!(t&&c(t.type)&&a(t.verify))}}}function Rh(e,n,t,r){return{name:t||"",K:e.K+" or "+n.K,optional:!!r,M:function(t){return e.M(t)||n.M(t)}}}function Oh(t,e){for(var n in e){var r=e[n].name;t[r]=Lh(r,t[n],e[n].j)}}function Ph(t,e){for(var n in e){var r=e[n].name;r!==n&&Object.defineProperty(t,r,{get:m(function(t){return this[t]},n),set:m(function(t,e,n,r){wh(t,[n],[r],!0),this[e]=r},r,n,e[n].tb),enumerable:!0})}}function Dh(t,e,n,r){t[e]=Lh(e,n,r)}function Lh(t,e,n){function r(){var t=Array.prototype.slice.call(arguments);return wh(o,n,t),e.apply(this,t)}if(!n)return e;var i,o=function(t){return(t=t.split("."))[t.length-1]}(t);for(i in e)r[i]=e[i];for(i in e.prototype)r.prototype[i]=e.prototype[i];return r}Oh(Bc.prototype,{Wa:{name:"applyActionCode",j:[Sh("code")]},Ja:{name:"checkActionCode",j:[Sh("code")]},Za:{name:"confirmPasswordReset",j:[Sh("code"),Sh("newPassword")]},xb:{name:"createUserWithEmailAndPassword",j:[Sh("email"),Sh("password")]},Wb:{name:"createUserAndRetrieveDataWithEmailAndPassword",j:[Sh("email"),Sh("password")]},Zb:{name:"fetchProvidersForEmail",j:[Sh("email")]},$b:{name:"fetchSignInMethodsForEmail",j:[Sh("email")]},fa:{name:"getRedirectResult",j:[]},oc:{name:"isSignInWithEmailLink",j:[Sh("emailLink")]},uc:{name:"onAuthStateChanged",j:[Rh(Ch(),Ih(),"nextOrObserver"),Ih("opt_error",!0),Ih("opt_completed",!0)]},vc:{name:"onIdTokenChanged",j:[Rh(Ch(),Ih(),"nextOrObserver"),Ih("opt_error",!0),Ih("opt_completed",!0)]},kb:{name:"sendPasswordResetEmail",j:[Sh("email"),Rh(Ch("opt_actionCodeSettings",!0),xh(null,!0),"opt_actionCodeSettings",!0)]},lb:{name:"sendSignInLinkToEmail",j:[Sh("email"),Ch("actionCodeSettings")]},mb:{name:"setPersistence",j:[Sh("persistence")]},Pa:{name:"signInAndRetrieveDataWithCredential",j:[Ah()]},Qa:{name:"signInAnonymously",j:[]},Gc:{name:"signInAnonymouslyAndRetrieveData",j:[]},Hc:{name:"signInWithCredential",j:[Ah()]},Nb:{name:"signInWithCustomToken",j:[Sh("token")]},Ec:{name:"signInAndRetrieveDataWithCustomToken",j:[Sh("token")]},Ob:{name:"signInWithEmailAndPassword",j:[Sh("email"),Sh("password")]},Ic:{name:"signInWithEmailLink",j:[Sh("email"),Sh("emailLink",!0)]},Fc:{name:"signInAndRetrieveDataWithEmailAndPassword",j:[Sh("email"),Sh("password")]},Jc:{name:"signInWithPhoneNumber",j:[Sh("phoneNumber"),kh()]},Kc:{name:"signInWithPopup",j:[Nh()]},Lc:{name:"signInWithRedirect",j:[Nh()]},Qc:{name:"updateCurrentUser",j:[Rh(function(t){return{name:"user",K:"an instance of Firebase User",optional:!1,M:function(t){return!!(t&&t instanceof nc)}}}(),xh(),"user")]},nb:{name:"signOut",j:[]},toJSON:{name:"toJSON",j:[Sh(null,!0)]},Sc:{name:"useDeviceLanguage",j:[]},Tc:{name:"verifyPasswordResetCode",j:[Sh("code")]}}),Ph(Bc.prototype,{lc:{name:"languageCode",tb:Rh(Sh(),xh(),"languageCode")}}),(Bc.Persistence=Js).LOCAL="local",Bc.Persistence.SESSION="session",Bc.Persistence.NONE="none",Oh(nc.prototype,{delete:{name:"delete",j:[]},dc:{name:"getIdTokenResult",j:[Th("opt_forceRefresh",!0)]},F:{name:"getIdToken",j:[Th("opt_forceRefresh",!0)]},eb:{name:"linkAndRetrieveDataWithCredential",j:[Ah()]},pc:{name:"linkWithCredential",j:[Ah()]},qc:{name:"linkWithPhoneNumber",j:[Sh("phoneNumber"),kh()]},rc:{name:"linkWithPopup",j:[Nh()]},sc:{name:"linkWithRedirect",j:[Nh()]},gb:{name:"reauthenticateAndRetrieveDataWithCredential",j:[Ah()]},yc:{name:"reauthenticateWithCredential",j:[Ah()]},zc:{name:"reauthenticateWithPhoneNumber",j:[Sh("phoneNumber"),kh()]},Ac:{name:"reauthenticateWithPopup",j:[Nh()]},Bc:{name:"reauthenticateWithRedirect",j:[Nh()]},reload:{name:"reload",j:[]},jb:{name:"sendEmailVerification",j:[Rh(Ch("opt_actionCodeSettings",!0),xh(null,!0),"opt_actionCodeSettings",!0)]},toJSON:{name:"toJSON",j:[Sh(null,!0)]},Pc:{name:"unlink",j:[Sh("provider")]},pb:{name:"updateEmail",j:[Sh("email")]},qb:{name:"updatePassword",j:[Sh("password")]},Rc:{name:"updatePhoneNumber",j:[Ah("phone")]},rb:{name:"updateProfile",j:[Ch("profile")]}}),Oh(th.prototype,{execute:{name:"execute"},render:{name:"render"},reset:{name:"reset"},getResponse:{name:"getResponse"}}),Oh(Zc.prototype,{execute:{name:"execute"},render:{name:"render"},reset:{name:"reset"},getResponse:{name:"getResponse"}}),Oh(dt.prototype,{ia:{name:"finally"},s:{name:"catch"},then:{name:"then"}}),Ph(qu.prototype,{appVerificationDisabled:{name:"appVerificationDisabledForTesting",tb:Th("appVerificationDisabledForTesting")}}),Oh(Hu.prototype,{confirm:{name:"confirm",j:[Sh("verificationCode")]}}),Dh(qi,"credential",function(t,e){return new Vi(t,e)},[Sh("email"),Sh("password")]),Oh(Di.prototype,{ua:{name:"addScope",j:[Sh("scope")]},Da:{name:"setCustomParameters",j:[Ch("customOAuthParameters")]}}),Dh(Di,"credential",Li,[Rh(Sh(),Ch(),"token")]),Dh(qi,"credentialWithLink",Hi,[Sh("email"),Sh("emailLink")]),Oh(Mi.prototype,{ua:{name:"addScope",j:[Sh("scope")]},Da:{name:"setCustomParameters",j:[Ch("customOAuthParameters")]}}),Dh(Mi,"credential",Fi,[Rh(Sh(),Ch(),"token")]),Oh(ji.prototype,{ua:{name:"addScope",j:[Sh("scope")]},Da:{name:"setCustomParameters",j:[Ch("customOAuthParameters")]}}),Dh(ji,"credential",Ui,[Rh(Sh(),Rh(Ch(),xh()),"idToken"),Rh(Sh(),xh(),"accessToken",!0)]),Oh(Wi.prototype,{Da:{name:"setCustomParameters",j:[Ch("customOAuthParameters")]}}),Dh(Wi,"credential",Bi,[Rh(Sh(),Ch(),"token"),Sh("secret",!0)]),Oh(Pi.prototype,{ua:{name:"addScope",j:[Sh("scope")]},credential:{name:"credential",j:[Rh(Sh(),xh(),"idToken",!0),Rh(Sh(),xh(),"accessToken",!0),Rh(Sh(),xh(),"nonce",!0)]},Da:{name:"setCustomParameters",j:[Ch("customOAuthParameters")]}}),Dh(zi,"credential",Yi,[Sh("verificationId"),Sh("verificationCode")]),Oh(zi.prototype,{Ua:{name:"verifyPhoneNumber",j:[Sh("phoneNumber"),kh()]}}),Oh(Br.prototype,{toJSON:{name:"toJSON",j:[Sh(null,!0)]}}),Oh(io.prototype,{toJSON:{name:"toJSON",j:[Sh(null,!0)]}}),Oh(ro.prototype,{toJSON:{name:"toJSON",j:[Sh(null,!0)]}}),Oh(bh.prototype,{clear:{name:"clear",j:[]},render:{name:"render",j:[]},verify:{name:"verify",j:[]}}),function(){if(void 0===Mh.a||!Mh.a.INTERNAL||!Mh.a.INTERNAL.registerService)throw Error("Cannot find the firebase namespace; be sure to include firebase-app.js before this library.");var t={Auth:Bc,Error:Br};Dh(t,"EmailAuthProvider",qi,[]),Dh(t,"FacebookAuthProvider",Di,[]),Dh(t,"GithubAuthProvider",Mi,[]),Dh(t,"GoogleAuthProvider",ji,[]),Dh(t,"TwitterAuthProvider",Wi,[]),Dh(t,"OAuthProvider",Pi,[Sh("providerId")]),Dh(t,"SAMLAuthProvider",Oi,[Sh("providerId")]),Dh(t,"PhoneAuthProvider",zi,[function(){return{name:"auth",K:"an instance of Firebase Auth",optional:!0,M:function(t){return!!(t&&t instanceof Bc)}}}()]),Dh(t,"RecaptchaVerifier",bh,[Rh(Sh(),function(){return{name:"",K:"an HTML element",optional:!1,M:function(t){return!!(t&&t instanceof Element)}}}(),"recaptchaContainer"),Ch("recaptchaParameters",!0),function(){return{name:"app",K:"an instance of Firebase App",optional:!0,M:function(t){return!!(t&&t instanceof Mh.a.app.App)}}}()]),Mh.a.INTERNAL.registerService("auth",function(t,e){return e({INTERNAL:{getUid:g((t=new Bc(t)).getUid,t),getToken:g(t.cc,t),addAuthTokenListener:g(t.Vb,t),removeAuthTokenListener:g(t.Cc,t)}}),t},t,function(t,e){if("create"===t)try{e.auth()}catch(t){}}),Mh.a.INTERNAL.extendNamespace({User:nc})}()}).apply(void 0!==t?t:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})}).call(this,n(50))},function(t,e,n){},function(t,e,n){},,,function(t,e,n){"use strict";n.r(e);n(183);var r=n(178),i=n.n(r),o=n(59),a=n.n(o),s=(n(429),n(431),n(1)),u=n.n(s),c="https://firebasestorage.googleapis.com",h="https://firebasestorage.googleapis.com",l="/v0",f="/v0",g=function(){function t(t,e){this.code_=p(t),this.message_="Firebase Storage: "+e,this.serverResponse_=null,this.name_="FirebaseError"}return t.prototype.codeProp=function(){return this.code},t.prototype.codeEquals=function(t){return p(t)===this.codeProp()},t.prototype.serverResponseProp=function(){return this.serverResponse_},t.prototype.setServerResponseProp=function(t){this.serverResponse_=t},Object.defineProperty(t.prototype,"name",{get:function(){return this.name_},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"code",{get:function(){return this.code_},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"message",{get:function(){return this.message_},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"serverResponse",{get:function(){return this.serverResponse_},enumerable:!0,configurable:!0}),t}(),m={UNKNOWN:"unknown",OBJECT_NOT_FOUND:"object-not-found",BUCKET_NOT_FOUND:"bucket-not-found",PROJECT_NOT_FOUND:"project-not-found",QUOTA_EXCEEDED:"quota-exceeded",UNAUTHENTICATED:"unauthenticated",UNAUTHORIZED:"unauthorized",RETRY_LIMIT_EXCEEDED:"retry-limit-exceeded",INVALID_CHECKSUM:"invalid-checksum",CANCELED:"canceled",INVALID_EVENT_NAME:"invalid-event-name",INVALID_URL:"invalid-url",INVALID_DEFAULT_BUCKET:"invalid-default-bucket",NO_DEFAULT_BUCKET:"no-default-bucket",CANNOT_SLICE_BLOB:"cannot-slice-blob",SERVER_FILE_WRONG_SIZE:"server-file-wrong-size",NO_DOWNLOAD_URL:"no-download-url",INVALID_ARGUMENT:"invalid-argument",INVALID_ARGUMENT_COUNT:"invalid-argument-count",APP_DELETED:"app-deleted",INVALID_ROOT_OPERATION:"invalid-root-operation",INVALID_FORMAT:"invalid-format",INTERNAL_ERROR:"internal-error"};function p(t){return"storage/"+t}function d(){return new g(m.UNKNOWN,"An unknown error occurred, please check the error payload for server response.")}function v(){return new g(m.CANCELED,"User canceled the upload/download.")}function _(){return new g(m.CANNOT_SLICE_BLOB,"Cannot slice blob for upload. Please retry the upload.")}function y(t,e,n){return new g(m.INVALID_ARGUMENT,"Invalid argument in `"+e+"` at index "+t+": "+n)}function b(){return new g(m.APP_DELETED,"The Firebase app was deleted.")}function w(t,e){return new g(m.INVALID_FORMAT,"String does not match format '"+t+"': "+e)}function E(t){throw new g(m.INTERNAL_ERROR,"Internal error: "+t)}var S={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"};function T(t){switch(t){case S.RAW:case S.BASE64:case S.BASE64URL:case S.DATA_URL:return;default:throw"Expected one of the event types: ["+S.RAW+", "+S.BASE64+", "+S.BASE64URL+", "+S.DATA_URL+"]."}}var C=function(){return function(t,e){this.data=t,this.contentType=e||null}}();function I(t,e){switch(t){case S.RAW:return new C(x(e));case S.BASE64:case S.BASE64URL:return new C(A(t,e));case S.DATA_URL:return new C(function(t){var e=new N(t);return e.base64?A(S.BASE64,e.rest):function(t){var e;try{e=decodeURIComponent(t)}catch(t){throw w(S.DATA_URL,"Malformed data URL.")}return x(e)}(e.rest)}(e),function(t){return new N(t).contentType}(e))}throw d()}function x(t){for(var e=[],n=0;n<t.length;n++){var r=t.charCodeAt(n);if(r<=127)e.push(r);else if(r<=2047)e.push(192|r>>6,128|63&r);else if(55296==(64512&r))if(n<t.length-1&&56320==(64512&t.charCodeAt(n+1)))r=65536|(1023&r)<<10|1023&t.charCodeAt(++n),e.push(240|r>>18,128|r>>12&63,128|r>>6&63,128|63&r);else e.push(239,191,189);else 56320==(64512&r)?e.push(239,191,189):e.push(224|r>>12,128|r>>6&63,128|63&r)}return new Uint8Array(e)}function A(e,t){switch(e){case S.BASE64:var n=-1!==t.indexOf("-"),r=-1!==t.indexOf("_");if(n||r)throw w(e,"Invalid character '"+(n?"-":"_")+"' found: is it base64url encoded?");break;case S.BASE64URL:var i=-1!==t.indexOf("+"),o=-1!==t.indexOf("/");if(i||o)throw w(e,"Invalid character '"+(i?"+":"/")+"' found: is it base64 encoded?");t=t.replace(/-/g,"+").replace(/_/g,"/")}var a;try{a=atob(t)}catch(t){throw w(e,"Invalid character found")}for(var s=new Uint8Array(a.length),u=0;u<a.length;u++)s[u]=a.charCodeAt(u);return s}var N=function(){return function(t){this.base64=!1,this.contentType=null;var e=t.match(/^data:([^,]+)?,/);if(null===e)throw w(S.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");var n=e[1]||null;null!=n&&(this.base64=function(t,e){return t.length>=e.length&&t.substring(t.length-e.length)===e}(n,";base64"),this.contentType=this.base64?n.substring(0,n.length-";base64".length):n),this.rest=t.substring(t.indexOf(",")+1)}}();var k,R={STATE_CHANGED:"state_changed"},O="running",P="pausing",D="paused",L="success",M="canceling",F="canceled",j="error",U={RUNNING:"running",PAUSED:"paused",SUCCESS:"success",CANCELED:"canceled",ERROR:"error"};function W(t){switch(t){case O:case P:case M:return U.RUNNING;case D:return U.PAUSED;case L:return U.SUCCESS;case F:return U.CANCELED;case j:default:return U.ERROR}}function B(t,e){return Object.prototype.hasOwnProperty.call(t,e)}function V(t,e){for(var n in t)B(t,n)&&e(n,t[n])}function q(t){if(null==t)return{};var n={};return V(t,function(t,e){n[t]=e}),n}function H(t){return new Promise(t)}function K(t){return Promise.resolve(t)}function G(t){return null!=t}function Q(t){return void 0!==t}function z(t){return"function"==typeof t}function Y(t){return"object"==typeof t}function X(t){return Y(t)&&null!==t}function J(t){return"string"==typeof t||t instanceof String}function $(t){return Z()&&t instanceof Blob}function Z(){return"undefined"!=typeof Blob}!function(t){t[t.NO_ERROR=0]="NO_ERROR",t[t.NETWORK_ERROR=1]="NETWORK_ERROR",t[t.ABORT=2]="ABORT"}(k||(k={}));var tt=function(){function t(){var n=this;this.sent_=!1,this.xhr_=new XMLHttpRequest,this.errorCode_=k.NO_ERROR,this.sendPromise_=H(function(e,t){n.xhr_.addEventListener("abort",function(t){n.errorCode_=k.ABORT,e(n)}),n.xhr_.addEventListener("error",function(t){n.errorCode_=k.NETWORK_ERROR,e(n)}),n.xhr_.addEventListener("load",function(t){e(n)})})}return t.prototype.send=function(t,e,n,r){var i=this;if(this.sent_)throw E("cannot .send() more than once");(this.sent_=!0,this.xhr_.open(e,t,!0),G(r))&&V(r,function(t,e){i.xhr_.setRequestHeader(t,e.toString())});return G(n)?this.xhr_.send(n):this.xhr_.send(),this.sendPromise_},t.prototype.getErrorCode=function(){if(!this.sent_)throw E("cannot .getErrorCode() before sending");return this.errorCode_},t.prototype.getStatus=function(){if(!this.sent_)throw E("cannot .getStatus() before sending");try{return this.xhr_.status}catch(t){return-1}},t.prototype.getResponseText=function(){if(!this.sent_)throw E("cannot .getResponseText() before sending");return this.xhr_.responseText},t.prototype.abort=function(){this.xhr_.abort()},t.prototype.getResponseHeader=function(t){return this.xhr_.getResponseHeader(t)},t.prototype.addUploadProgressListener=function(t){G(this.xhr_.upload)&&this.xhr_.upload.addEventListener("progress",t)},t.prototype.removeUploadProgressListener=function(t){G(this.xhr_.upload)&&this.xhr_.upload.removeEventListener("progress",t)},t}(),et=function(){function t(){}return t.prototype.createXhrIo=function(){return new tt},t}();function nt(t){var e;try{e=JSON.parse(t)}catch(t){return null}return function(t){return Y(t)&&!Array.isArray(t)}(e)?e:null}var rt=function(){function c(t,e){this.bucket=t,this.path_=e}return Object.defineProperty(c.prototype,"path",{get:function(){return this.path_},enumerable:!0,configurable:!0}),c.prototype.fullServerUrl=function(){var t=encodeURIComponent;return"/b/"+t(this.bucket)+"/o/"+t(this.path)},c.prototype.bucketOnlyServerUrl=function(){return"/b/"+encodeURIComponent(this.bucket)+"/o"},c.makeFromBucketSpec=function(e){var t;try{t=c.makeFromUrl(e)}catch(t){return new c(e,"")}if(""===t.path)return t;throw function(t){return new g(m.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+t+"'.")}(e)},c.makeFromUrl=function(t){var e=null,n="([A-Za-z0-9.\\-_]+)";for(var r=[{regex:new RegExp("^gs://"+n+"(/(.*))?$","i"),indices:{bucket:1,path:3},postModify:function(t){"/"===t.path.charAt(t.path.length-1)&&(t.path_=t.path_.slice(0,-1))}},{regex:new RegExp("^https?://firebasestorage\\.googleapis\\.com/v[A-Za-z0-9_]+/b/"+n+"/o(/([^?#]*).*)?$","i"),indices:{bucket:1,path:3},postModify:function(t){t.path_=decodeURIComponent(t.path)}}],i=0;i<r.length;i++){var o=r[i],a=o.regex.exec(t);if(a){var s=a[o.indices.bucket],u=a[o.indices.path];u||(u=""),e=new c(s,u),o.postModify(e);break}}if(null==e)throw function(t){return new g(m.INVALID_URL,"Invalid URL '"+t+"'.")}(t);return e},c}();function it(t){var e=t.lastIndexOf("/",t.length-2);return-1===e?t:t.slice(e+1)}function ot(t){return c+l+t}function at(t){return c+f+t}function st(t){var r=encodeURIComponent,i="?";return V(t,function(t,e){var n=r(t)+"="+r(e);i=i+n+"&"}),i=i.slice(0,-1)}function ut(t,e){return e}var ct=function(){return function(t,e,n,r){this.server=t,this.local=e||t,this.writable=!!n,this.xform=r||ut}}(),ht=null;function lt(){if(ht)return ht;var t=[];t.push(new ct("bucket")),t.push(new ct("generation")),t.push(new ct("metageneration")),t.push(new ct("name","fullPath",!0));var e=new ct("name");e.xform=function(t,e){return function(t){return!J(t)||t.length<2?t:it(t=t)}(e)},t.push(e);var n=new ct("size");return n.xform=function(t,e){return G(e)?+e:e},t.push(n),t.push(new ct("timeCreated")),t.push(new ct("updated")),t.push(new ct("md5Hash",null,!0)),t.push(new ct("cacheControl",null,!0)),t.push(new ct("contentDisposition",null,!0)),t.push(new ct("contentEncoding",null,!0)),t.push(new ct("contentLanguage",null,!0)),t.push(new ct("contentType",null,!0)),t.push(new ct("metadata","customMetadata",!0)),ht=t}function ft(t,e,n){for(var r={type:"file"},i=n.length,o=0;o<i;o++){var a=n[o];r[a.local]=a.xform(r,e[a.server])}return function(r,i){Object.defineProperty(r,"ref",{get:function(){var t=r.bucket,e=r.fullPath,n=new rt(t,e);return i.makeStorageReference(n)}})}(r,t),r}function pt(t,e,n){var r=nt(e);return null===r?null:ft(t,r,n)}function dt(r,t){var e=nt(t);if(null===e)return null;if(!J(e.downloadTokens))return null;var n=e.downloadTokens;if(0===n.length)return null;var i=encodeURIComponent;return n.split(",").map(function(t){var e=r.bucket,n=r.fullPath;return function(t){return h+l+t}("/b/"+i(e)+"/o/"+i(n))+st({alt:"media",token:t})})[0]}function vt(t,e){for(var n={},r=e.length,i=0;i<r;i++){var o=e[i];o.writable&&(n[o.server]=t[o.local])}return JSON.stringify(n)}function yt(t){if(!(t&&Y(t)))throw"Expected Metadata object.";for(var e in t){var n=t[e];if("customMetadata"===e){if(!Y(n))throw"Expected object for 'customMetadata' mapping."}else if(X(n))throw"Mapping for '"+e+"' cannot be an object."}}function gt(e,t,n){for(var r=t.length,i=t.length,o=0;o<t.length;o++)if(t[o].optional){r=o;break}if(!(r<=n.length&&n.length<=i))throw function(t,e,n,r){var i,o;return o=t===e?1===(i=t)?"argument":"arguments":(i="between "+t+" and "+e,"arguments"),new g(m.INVALID_ARGUMENT_COUNT,"Invalid argument count in `"+n+"`: Expected "+i+" "+o+", received "+r+".")}(r,i,e,n.length);for(o=0;o<n.length;o++)try{t[o].validator(n[o])}catch(t){throw t instanceof Error?y(o,e,t.message):y(o,e,t)}}var mt=function(){return function(e,t){var n=this;this.validator=function(t){n.optional&&!Q(t)||e(t)},this.optional=!!t}}();function _t(t,e){function n(t){if(!J(t))throw"Expected string."}var r;return r=t?function(e,n){return function(t){e(t),n(t)}}(n,t):n,new mt(r,e)}function bt(t){return new mt(yt,t)}function wt(){return new mt(function(t){if(!(function(t){return"number"==typeof t||t instanceof Number}(t)&&0<=t))throw"Expected a number 0 or greater."})}function Et(e,t){return new mt(function(t){if(!(null===t||G(t)&&t instanceof Object))throw"Expected an Object.";null!=e&&e(t)},t)}function St(t){return new mt(function(t){if(null!==t&&!z(t))throw"Expected a Function."},t)}function Tt(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n=function(){return"undefined"!=typeof BlobBuilder?BlobBuilder:"undefined"!=typeof WebKitBlobBuilder?WebKitBlobBuilder:void 0}();if(void 0!==n){for(var r=new n,i=0;i<t.length;i++)r.append(t[i]);return r.getBlob()}if(Z())return new Blob(t);throw Error("This browser doesn't seem to support creating Blobs")}var Ct=function(){function s(t,e){var n=0,r="";$(t)?(n=(this.data_=t).size,r=t.type):t instanceof ArrayBuffer?(e?this.data_=new Uint8Array(t):(this.data_=new Uint8Array(t.byteLength),this.data_.set(new Uint8Array(t))),n=this.data_.length):t instanceof Uint8Array&&(e?this.data_=t:(this.data_=new Uint8Array(t.length),this.data_.set(t)),n=t.length),this.size_=n,this.type_=r}return s.prototype.size=function(){return this.size_},s.prototype.type=function(){return this.type_},s.prototype.slice=function(t,e){if($(this.data_)){var n=function(t,e,n){return t.webkitSlice?t.webkitSlice(e,n):t.mozSlice?t.mozSlice(e,n):t.slice?t.slice(e,n):null}(this.data_,t,e);return null===n?null:new s(n)}return new s(new Uint8Array(this.data_.buffer,t,e-t),!0)},s.getBlob=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];if(Z()){var n=t.map(function(t){return t instanceof s?t.data_:t});return new s(Tt.apply(null,n))}var r=t.map(function(t){return J(t)?I(S.RAW,t).data:t.data_}),i=0;r.forEach(function(t){i+=t.byteLength});var o=new Uint8Array(i),a=0;return r.forEach(function(t){for(var e=0;e<t.length;e++)o[a++]=t[e]}),new s(o,!0)},s.prototype.uploadData=function(){return this.data_},s}();function It(t,e){return-1!==t.indexOf(e)}var xt=function(){return function(t,e,n,r){this.url=t,this.method=e,this.handler=n,this.timeout=r,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}}();function At(t){if(!t)throw d()}function Nt(r,i){return function(t,e){var n=pt(r,e,i);return At(null!==n),n}}function kt(r){return function(t,e){var n;return(n=401===t.getStatus()?function(){return new g(m.UNAUTHENTICATED,"User is not authenticated, please authenticate using Firebase Authentication and try again.")}():402===t.getStatus()?function(t){return new g(m.QUOTA_EXCEEDED,"Quota for bucket '"+t+"' exceeded, please view quota on https://firebase.google.com/pricing/.")}(r.bucket):403===t.getStatus()?function(t){return new g(m.UNAUTHORIZED,"User does not have permission to access '"+t+"'.")}(r.path):e).setServerResponseProp(e.serverResponseProp()),n}}function Rt(r){var i=kt(r);return function(t,e){var n=i(t,e);return 404===t.getStatus()&&(n=function(t){return new g(m.OBJECT_NOT_FOUND,"Object '"+t+"' does not exist.")}(r.path)),n.setServerResponseProp(e.serverResponseProp()),n}}function Ot(t,e,n){var r=ot(e.fullServerUrl()),i=t.maxOperationRetryTime(),o=new xt(r,"GET",Nt(t,n),i);return o.errorHandler=Rt(e),o}function Pt(t,e,n){var r=ot(e.fullServerUrl()),i=t.maxOperationRetryTime(),o=new xt(r,"GET",function(r,i){return function(t,e){var n=pt(r,e,i);return At(null!==n),dt(n,e)}}(t,n),i);return o.errorHandler=Rt(e),o}function Dt(t,e,n){var r=q(n);return r.fullPath=t.path,r.size=e.size(),r.contentType||(r.contentType=function(t,e){return t&&t.contentType||e&&e.type()||"application/octet-stream"}(null,e)),r}var Lt=function(){return function(t,e,n,r){this.current=t,this.total=e,this.finalized=!!n,this.metadata=r||null}}();function Mt(t,e){var n;try{n=t.getResponseHeader("X-Goog-Upload-Status")}catch(t){At(!1)}return At(It(e||["active"],n)),n}function Ft(t,a,e,s,n,u,r,i){var c=new Lt(0,0);if(c.total=r?(c.current=r.current,r.total):(c.current=0,s.size()),s.size()!==c.total)throw function(){return new g(m.SERVER_FILE_WRONG_SIZE,"Server recorded incorrect upload file size, please retry the upload.")}();var o=c.total-c.current,h=o;0<n&&(h=Math.min(h,n));var l=c.current,f=l+h,p={"X-Goog-Upload-Command":h===o?"upload, finalize":"upload","X-Goog-Upload-Offset":c.current},d=s.slice(l,f);if(null===d)throw _();var v=a.maxUploadRetryTime(),y=new xt(e,"POST",function(t,e){var n,r=Mt(t,["active","final"]),i=c.current+h,o=s.size();return n="final"===r?Nt(a,u)(t,e):null,new Lt(i,o,"final"===r,n)},v);return y.headers=p,y.body=d.uploadData(),y.progressCallback=i||null,y.errorHandler=kt(t),y}var jt=function(){return function(t,e,n){if(z(t)||G(e)||G(n))this.next=t,this.error=e||null,this.complete=n||null;else{var r=t;this.next=r.next||null,this.error=r.error||null,this.complete=r.complete||null}}}(),Ut=function(){return function(t,e,n,r,i,o){this.bytesTransferred=t,this.totalBytes=e,this.state=n,this.metadata=r,this.task=i,this.ref=o}}();function Wt(n){return function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];K(!0).then(function(){n.apply(null,t)})}}var Bt=function(){function t(t,e,n,r,i,o){void 0===o&&(o=null);var a=this;this.transferred_=0,this.needToFetchStatus_=!1,this.needToFetchMetadata_=!1,this.observers_=[],this.error_=null,this.uploadUrl_=null,this.request_=null,this.chunkMultiplier_=1,this.resolve_=null,this.reject_=null,this.ref_=t,this.authWrapper_=e,this.location_=n,this.blob_=i,this.metadata_=o,this.mappings_=r,this.resumable_=this.shouldDoResumable_(this.blob_),this.state_=O,this.errorHandler_=function(t){a.request_=null,a.chunkMultiplier_=1,t.codeEquals(m.CANCELED)?(a.needToFetchStatus_=!0,a.completeTransitions_()):(a.error_=t,a.transition_(j))},this.metadataErrorHandler_=function(t){a.request_=null,t.codeEquals(m.CANCELED)?a.completeTransitions_():(a.error_=t,a.transition_(j))},this.promise_=H(function(t,e){a.resolve_=t,a.reject_=e,a.start_()}),this.promise_.then(null,function(){})}return t.prototype.makeProgressCallback_=function(){var n=this,r=this.transferred_;return function(t,e){n.updateProgress_(r+t)}},t.prototype.shouldDoResumable_=function(t){return 262144<t.size()},t.prototype.start_=function(){this.state_===O&&null===this.request_&&(this.resumable_?null===this.uploadUrl_?this.createResumable_():this.needToFetchStatus_?this.fetchStatus_():this.needToFetchMetadata_?this.fetchMetadata_():this.continueUpload_():this.oneShotUpload_())},t.prototype.resolveToken_=function(e){var n=this;this.authWrapper_.getAuthToken().then(function(t){switch(n.state_){case O:e(t);break;case M:n.transition_(F);break;case P:n.transition_(D)}})},t.prototype.createResumable_=function(){var r=this;this.resolveToken_(function(t){var e=function(t,e,n,r,i){var o=e.bucketOnlyServerUrl(),a=Dt(e,r,i),s={name:a.fullPath},u=at(o),c={"X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":r.size(),"X-Goog-Upload-Header-Content-Type":a.contentType,"Content-Type":"application/json; charset=utf-8"},h=vt(a,n),l=t.maxUploadRetryTime(),f=new xt(u,"POST",function(t,e){var n;Mt(t);try{n=t.getResponseHeader("X-Goog-Upload-URL")}catch(t){At(!1)}return At(J(n)),n},l);return f.urlParams=s,f.headers=c,f.body=h,f.errorHandler=kt(e),f}(r.authWrapper_,r.location_,r.mappings_,r.blob_,r.metadata_),n=r.authWrapper_.makeRequest(e,t);(r.request_=n).getPromise().then(function(t){r.request_=null,r.uploadUrl_=t,r.needToFetchStatus_=!1,r.completeTransitions_()},r.errorHandler_)})},t.prototype.fetchStatus_=function(){var r=this,i=this.uploadUrl_;this.resolveToken_(function(t){var e=function(t,e,n,o){var r=t.maxUploadRetryTime(),i=new xt(n,"POST",function(t,e){var n,r=Mt(t,["active","final"]);try{n=t.getResponseHeader("X-Goog-Upload-Size-Received")}catch(t){At(!1)}var i=parseInt(n,10);return At(!isNaN(i)),new Lt(i,o.size(),"final"===r)},r);return i.headers={"X-Goog-Upload-Command":"query"},i.errorHandler=kt(e),i}(r.authWrapper_,r.location_,i,r.blob_),n=r.authWrapper_.makeRequest(e,t);(r.request_=n).getPromise().then(function(t){t=t,r.request_=null,r.updateProgress_(t.current),r.needToFetchStatus_=!1,t.finalized&&(r.needToFetchMetadata_=!0),r.completeTransitions_()},r.errorHandler_)})},t.prototype.continueUpload_=function(){var r=this,i=262144*this.chunkMultiplier_,o=new Lt(this.transferred_,this.blob_.size()),a=this.uploadUrl_;this.resolveToken_(function(t){var e;try{e=Ft(r.location_,r.authWrapper_,a,r.blob_,i,r.mappings_,o,r.makeProgressCallback_())}catch(t){return r.error_=t,void r.transition_(j)}var n=r.authWrapper_.makeRequest(e,t);(r.request_=n).getPromise().then(function(t){r.increaseMultiplier_(),r.request_=null,r.updateProgress_(t.current),t.finalized?(r.metadata_=t.metadata,r.transition_(L)):r.completeTransitions_()},r.errorHandler_)})},t.prototype.increaseMultiplier_=function(){262144*this.chunkMultiplier_<33554432&&(this.chunkMultiplier_*=2)},t.prototype.fetchMetadata_=function(){var r=this;this.resolveToken_(function(t){var e=Ot(r.authWrapper_,r.location_,r.mappings_),n=r.authWrapper_.makeRequest(e,t);(r.request_=n).getPromise().then(function(t){r.request_=null,r.metadata_=t,r.transition_(L)},r.metadataErrorHandler_)})},t.prototype.oneShotUpload_=function(){var r=this;this.resolveToken_(function(t){var e=function(t,e,n,r,i){var o=e.bucketOnlyServerUrl(),a={"X-Goog-Upload-Protocol":"multipart"},s=function(){for(var t="",e=0;e<2;e++)t+=Math.random().toString().slice(2);return t}();a["Content-Type"]="multipart/related; boundary="+s;var u=Dt(e,r,i),c="--"+s+"\r\nContent-Type: application/json; charset=utf-8\r\n\r\n"+vt(u,n)+"\r\n--"+s+"\r\nContent-Type: "+u.contentType+"\r\n\r\n",h="\r\n--"+s+"--",l=Ct.getBlob(c,r,h);if(null===l)throw _();var f={name:u.fullPath},p=at(o),d=t.maxUploadRetryTime(),v=new xt(p,"POST",Nt(t,n),d);return v.urlParams=f,v.headers=a,v.body=l.uploadData(),v.errorHandler=kt(e),v}(r.authWrapper_,r.location_,r.mappings_,r.blob_,r.metadata_),n=r.authWrapper_.makeRequest(e,t);(r.request_=n).getPromise().then(function(t){r.request_=null,r.metadata_=t,r.updateProgress_(r.blob_.size()),r.transition_(L)},r.errorHandler_)})},t.prototype.updateProgress_=function(t){var e=this.transferred_;this.transferred_=t,this.transferred_!==e&&this.notifyObservers_()},t.prototype.transition_=function(t){if(this.state_!==t)switch(t){case M:case P:this.state_=t,null!==this.request_&&this.request_.cancel();break;case O:var e=this.state_===D;this.state_=t,e&&(this.notifyObservers_(),this.start_());break;case D:this.state_=t,this.notifyObservers_();break;case F:this.error_=v(),this.state_=t,this.notifyObservers_();break;case j:case L:this.state_=t,this.notifyObservers_()}},t.prototype.completeTransitions_=function(){switch(this.state_){case P:this.transition_(D);break;case M:this.transition_(F);break;case O:this.start_()}},Object.defineProperty(t.prototype,"snapshot",{get:function(){var t=W(this.state_);return new Ut(this.transferred_,this.blob_.size(),t,this.metadata_,this,this.ref_)},enumerable:!0,configurable:!0}),t.prototype.on=function(e,t,n,o){void 0===t&&(t=void 0),void 0===n&&(n=void 0),void 0===o&&(o=void 0);var r="Expected a function or an Object with one of `next`, `error`, `complete` properties.",i=St(!0).validator,a=Et(null,!0).validator;function s(t){try{return void i(t)}catch(t){}try{if(a(t),!(Q(t.next)||Q(t.error)||Q(t.complete)))throw"";return}catch(t){throw r}}gt("on",[_t(function(t){if(e!==R.STATE_CHANGED)throw"Expected one of the event types: ["+R.STATE_CHANGED+"]."}),Et(s,!0),St(!0),St(!0)],arguments);var u=this;function c(i){return function(t,e,n){null!==i&&gt("on",i,arguments);var r=new jt(t,e,o);return u.addObserver_(r),function(){u.removeObserver_(r)}}}var h=[Et(function(t){if(null===t)throw r;s(t)}),St(!0),St(!0)];return!(Q(t)||Q(n)||Q(o))?c(h):c(null)(t,n,o)},t.prototype.then=function(t,e){return this.promise_.then(t,e)},t.prototype.catch=function(t){return this.then(null,t)},t.prototype.addObserver_=function(t){this.observers_.push(t),this.notifyObserver_(t)},t.prototype.removeObserver_=function(t){!function(t,e){var n=t.indexOf(e);-1!==n&&t.splice(n,1)}(this.observers_,t)},t.prototype.notifyObservers_=function(){var e=this;this.finishPromise_(),function(t){return Array.prototype.slice.call(t)}(this.observers_).forEach(function(t){e.notifyObserver_(t)})},t.prototype.finishPromise_=function(){if(null!==this.resolve_){var t=!0;switch(W(this.state_)){case U.SUCCESS:Wt(this.resolve_.bind(null,this.snapshot))();break;case U.CANCELED:case U.ERROR:Wt(this.reject_.bind(null,this.error_))();break;default:t=!1}t&&(this.resolve_=null,this.reject_=null)}},t.prototype.notifyObserver_=function(t){switch(W(this.state_)){case U.RUNNING:case U.PAUSED:null!==t.next&&Wt(t.next.bind(t,this.snapshot))();break;case U.SUCCESS:null!==t.complete&&Wt(t.complete.bind(t))();break;case U.CANCELED:case U.ERROR:null!==t.error&&Wt(t.error.bind(t,this.error_))();break;default:null!==t.error&&Wt(t.error.bind(t,this.error_))()}},t.prototype.resume=function(){gt("resume",[],arguments);var t=this.state_===D||this.state_===P;return t&&this.transition_(O),t},t.prototype.pause=function(){gt("pause",[],arguments);var t=this.state_===O;return t&&this.transition_(P),t},t.prototype.cancel=function(){gt("cancel",[],arguments);var t=this.state_===O||this.state_===P;return t&&this.transition_(M),t},t}(),Vt=function(){function n(t,e){this.authWrapper=t,this.location=e instanceof rt?e:rt.makeFromUrl(e)}return n.prototype.toString=function(){return gt("toString",[],arguments),"gs://"+this.location.bucket+"/"+this.location.path},n.prototype.newRef=function(t,e){return new n(t,e)},n.prototype.mappings=function(){return lt()},n.prototype.child=function(t){gt("child",[_t()],arguments);var e=function(t,e){var n=e.split("/").filter(function(t){return 0<t.length}).join("/");return 0===t.length?n:t+"/"+n}(this.location.path,t),n=new rt(this.location.bucket,e);return this.newRef(this.authWrapper,n)},Object.defineProperty(n.prototype,"parent",{get:function(){var t=function(t){if(0==t.length)return null;var e=t.lastIndexOf("/");return-1===e?"":t.slice(0,e)}(this.location.path);if(null===t)return null;var e=new rt(this.location.bucket,t);return this.newRef(this.authWrapper,e)},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"root",{get:function(){var t=new rt(this.location.bucket,"");return this.newRef(this.authWrapper,t)},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"bucket",{get:function(){return this.location.bucket},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"fullPath",{get:function(){return this.location.path},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"name",{get:function(){return it(this.location.path)},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"storage",{get:function(){return this.authWrapper.service()},enumerable:!0,configurable:!0}),n.prototype.put=function(t,e){return void 0===e&&(e=null),gt("put",[function(){return new mt(function(t){if(!(t instanceof Uint8Array||t instanceof ArrayBuffer||Z()&&t instanceof Blob))throw"Expected Blob or File."})}(),bt(!0)],arguments),this.throwIfRoot_("put"),new Bt(this,this.authWrapper,this.location,this.mappings(),new Ct(t),e)},n.prototype.putString=function(t,e,n){void 0===e&&(e=S.RAW),gt("putString",[_t(),_t(T,!0),bt(!0)],arguments),this.throwIfRoot_("putString");var r=I(e,t),i=q(n);return!G(i.contentType)&&G(r.contentType)&&(i.contentType=r.contentType),new Bt(this,this.authWrapper,this.location,this.mappings(),new Ct(r.data,!0),i)},n.prototype.delete=function(){gt("delete",[],arguments),this.throwIfRoot_("delete");var n=this;return this.authWrapper.getAuthToken().then(function(t){var e=function(t,e){var n=ot(e.fullServerUrl()),r=t.maxOperationRetryTime(),i=new xt(n,"DELETE",function(t,e){},r);return i.successCodes=[200,204],i.errorHandler=Rt(e),i}(n.authWrapper,n.location);return n.authWrapper.makeRequest(e,t).getPromise()})},n.prototype.getMetadata=function(){gt("getMetadata",[],arguments),this.throwIfRoot_("getMetadata");var n=this;return this.authWrapper.getAuthToken().then(function(t){var e=Ot(n.authWrapper,n.location,n.mappings());return n.authWrapper.makeRequest(e,t).getPromise()})},n.prototype.updateMetadata=function(n){gt("updateMetadata",[bt()],arguments),this.throwIfRoot_("updateMetadata");var r=this;return this.authWrapper.getAuthToken().then(function(t){var e=function(t,e,n,r){var i=ot(e.fullServerUrl()),o=vt(n,r),a=t.maxOperationRetryTime(),s=new xt(i,"PATCH",Nt(t,r),a);return s.headers={"Content-Type":"application/json; charset=utf-8"},s.body=o,s.errorHandler=Rt(e),s}(r.authWrapper,r.location,n,r.mappings());return r.authWrapper.makeRequest(e,t).getPromise()})},n.prototype.getDownloadURL=function(){gt("getDownloadURL",[],arguments),this.throwIfRoot_("getDownloadURL");var n=this;return this.authWrapper.getAuthToken().then(function(t){var e=Pt(n.authWrapper,n.location,n.mappings());return n.authWrapper.makeRequest(e,t).getPromise().then(function(t){if(null===t)throw function(){return new g(m.NO_DOWNLOAD_URL,"The given file does not have any download URLs.")}();return t})})},n.prototype.throwIfRoot_=function(t){if(""===this.location.path)throw function(t){return new g(m.INVALID_ROOT_OPERATION,"The operation '"+t+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}(t)},n}(),qt=function(){function t(t){this.promise_=function(t){return Promise.reject(t)}(t)}return t.prototype.getPromise=function(){return this.promise_},t.prototype.cancel=function(t){void 0===t&&(t=!1)},t}(),Ht=function(){function t(){this.map_={},this.id_=-9007199254740991}return t.prototype.addRequest=function(t){var e=this.id_;this.id_++,this.map_[e]=t;var n=this;function r(){delete n.map_[e]}t.getPromise().then(r,r)},t.prototype.clear=function(){V(this.map_,function(t,e){e&&e.cancel(!0)}),this.map_={}},t}(),Kt=function(){function a(t,e,n,r,i){if(this.bucket_=null,this.deleted_=!1,this.app_=t,null!==this.app_){var o=this.app_.options;G(o)&&(this.bucket_=a.extractBucket_(o))}this.storageRefMaker_=e,this.requestMaker_=n,this.pool_=i,this.service_=r,this.maxOperationRetryTime_=12e4,this.maxUploadRetryTime_=6e4,this.requestMap_=new Ht}return a.extractBucket_=function(t){var e=t.storageBucket||null;return null==e?null:rt.makeFromBucketSpec(e).bucket},a.prototype.getAuthToken=function(){return null!==this.app_&&G(this.app_.INTERNAL)&&G(this.app_.INTERNAL.getToken)?this.app_.INTERNAL.getToken().then(function(t){return null!==t?t.accessToken:null},function(t){return null}):K(null)},a.prototype.bucket=function(){if(this.deleted_)throw b();return this.bucket_},a.prototype.service=function(){return this.service_},a.prototype.makeStorageReference=function(t){return this.storageRefMaker_(this,t)},a.prototype.makeRequest=function(t,e){if(this.deleted_)return new qt(b());var n=this.requestMaker_(t,e,this.pool_);return this.requestMap_.addRequest(n),n},a.prototype.deleteApp=function(){this.deleted_=!0,this.app_=null,this.requestMap_.clear()},a.prototype.maxUploadRetryTime=function(){return this.maxUploadRetryTime_},a.prototype.setMaxUploadRetryTime=function(t){this.maxUploadRetryTime_=t},a.prototype.maxOperationRetryTime=function(){return this.maxOperationRetryTime_},a.prototype.setMaxOperationRetryTime=function(t){this.maxOperationRetryTime_=t},a}();var Gt=function(){function t(t,e,n,r,i,o,a,s,u,c,h){this.pendingXhr_=null,this.backoffId_=null,this.resolve_=null,this.reject_=null,this.canceled_=!1,this.appDelete_=!1,this.url_=t,this.method_=e,this.headers_=n,this.body_=r,this.successCodes_=i.slice(),this.additionalRetryCodes_=o.slice(),this.callback_=a,this.errorCallback_=s,this.progressCallback_=c,this.timeout_=u,this.pool_=h;var l=this;this.promise_=H(function(t,e){l.resolve_=t,l.reject_=e,l.start_()})}return t.prototype.start_=function(){var s=this;function t(t,e){var n,r=s.resolve_,i=s.reject_,o=e.xhr;if(e.wasSuccessCode)try{var a=s.callback_(o,o.getResponseText());Q(a)?r(a):r()}catch(t){i(t)}else null!==o?((n=d()).setServerResponseProp(o.getResponseText()),s.errorCallback_?i(s.errorCallback_(o,n)):i(n)):e.canceled?i(n=s.appDelete_?b():v()):i(n=function(){return new g(m.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}())}this.canceled_?t(0,new Qt(!1,null,!0)):this.backoffId_=function(e,t,n){var r=1,i=null,o=!1,a=0;function s(){return 2===a}var u=!1;function c(){u||(u=!0,t.apply(null,arguments))}function h(t){i=setTimeout(function(){i=null,e(l,s())},t)}function l(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];u||(t?c.apply(null,arguments):s()||o?c.apply(null,arguments):(r<64&&(r*=2),h(1===a?(a=2,0):1e3*(r+Math.random()))))}var f=!1;function p(t){f||(f=!0,u||(null!==i?(t||(a=2),clearTimeout(i),h(0)):t||(a=1)))}return h(0),setTimeout(function(){p(o=!0)},n),p}(function(o,t){if(t)o(!1,new Qt(!1,null,!0));else{var e=s.pool_.createXhrIo();s.pendingXhr_=e,null!==s.progressCallback_&&e.addUploadProgressListener(a),e.send(s.url_,s.method_,s.body_,s.headers_).then(function(t){null!==s.progressCallback_&&t.removeUploadProgressListener(a),s.pendingXhr_=null;var e=(t=t).getErrorCode()===k.NO_ERROR,n=t.getStatus();if(e&&!s.isRetryStatusCode_(n)){var r=It(s.successCodes_,n);o(!0,new Qt(r,t))}else{var i=t.getErrorCode()===k.ABORT;o(!1,new Qt(!1,null,i))}})}function a(t){var e=t.loaded,n=t.lengthComputable?t.total:-1;null!==s.progressCallback_&&s.progressCallback_(e,n)}},t,this.timeout_)},t.prototype.getPromise=function(){return this.promise_},t.prototype.cancel=function(t){this.canceled_=!0,this.appDelete_=t||!1,null!==this.backoffId_&&function(t){t(!1)}(this.backoffId_),null!==this.pendingXhr_&&this.pendingXhr_.abort()},t.prototype.isRetryStatusCode_=function(t){var e=500<=t&&t<600,n=It([408,429],t),r=It(this.additionalRetryCodes_,t);return e||n||r},t}(),Qt=function(){return function(t,e,n){this.wasSuccessCode=t,this.xhr=e,this.canceled=!!n}}();function zt(t,e,n){var r=st(t.urlParams),i=t.url+r,o=q(t.headers);return function(t,e){null!==e&&0<e.length&&(t.Authorization="Firebase "+e)}(o,e),function(t){var e=void 0!==u.a?u.a.SDK_VERSION:"AppManager";t["X-Firebase-Storage-Version"]="webjs/"+e}(o),new Gt(i,t.method,o,t.body,t.successCodes,t.additionalRetryCodes,t.handler,t.errorHandler,t.timeout,t.progressCallback,n)}var Yt=function(){function t(t,e,n){if(this.bucket_=null,this.authWrapper_=new Kt(t,function(t,e){return new Vt(t,e)},zt,this,e),this.app_=t,null!=n)this.bucket_=rt.makeFromBucketSpec(n);else{var r=this.authWrapper_.bucket();null!=r&&(this.bucket_=new rt(r,""))}this.internals_=new Xt(this)}return t.prototype.ref=function(t){if(gt("ref",[_t(function(t){if(/^[A-Za-z]+:\/\//.test(t))throw"Expected child path but got a URL, use refFromURL instead."},!0)],arguments),null==this.bucket_)throw new Error("No Storage Bucket defined in Firebase Options.");var e=new Vt(this.authWrapper_,this.bucket_);return null!=t?e.child(t):e},t.prototype.refFromURL=function(t){return gt("refFromURL",[_t(function(t){if(!/^[A-Za-z]+:\/\//.test(t))throw"Expected full URL but got a child path, use ref instead.";try{rt.makeFromUrl(t)}catch(t){throw"Expected valid full URL but got an invalid one."}},!1)],arguments),new Vt(this.authWrapper_,t)},Object.defineProperty(t.prototype,"maxUploadRetryTime",{get:function(){return this.authWrapper_.maxUploadRetryTime()},enumerable:!0,configurable:!0}),t.prototype.setMaxUploadRetryTime=function(t){gt("setMaxUploadRetryTime",[wt()],arguments),this.authWrapper_.setMaxUploadRetryTime(t)},Object.defineProperty(t.prototype,"maxOperationRetryTime",{get:function(){return this.authWrapper_.maxOperationRetryTime()},enumerable:!0,configurable:!0}),t.prototype.setMaxOperationRetryTime=function(t){gt("setMaxOperationRetryTime",[wt()],arguments),this.authWrapper_.setMaxOperationRetryTime(t)},Object.defineProperty(t.prototype,"app",{get:function(){return this.app_},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"INTERNAL",{get:function(){return this.internals_},enumerable:!0,configurable:!0}),t}(),Xt=function(){function t(t){this.service_=t}return t.prototype.delete=function(){return this.service_.authWrapper_.deleteApp(),K(void 0)},t}();function Jt(t,e,n){return new Yt(t,new et,n)}!function(t){var e={TaskState:U,TaskEvent:R,StringFormat:S,Storage:Yt,Reference:Vt};t.INTERNAL.registerService("storage",Jt,e,void 0,!0)}(u.a);try{a.a.initializeApp({apiKey:"AIzaSyBLZVjzJzb0CYvMTQ-tAw2feCZIFGRfeFQ",authDomain:"textract-fe8e3.firebaseapp.com",databaseURL:"https://textract-fe8e3.firebaseio.com",projectId:"textract-fe8e3",storageBucket:"textract-fe8e3.appspot.com",messagingSenderId:"835413394534"});var $t=["auth","database","storage"].filter(function(t){return"function"==typeof a.a[t]});console.log("Firebase SDK loaded with ".concat($t.join(", ")))}catch(t){console.error(t),console.log("Error loading the Firebase SDK, check the console.")}var Zt=a.a.auth(),te=a.a.database(),ee=a.a.storage();function ne(t){return(ne="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function re(t,e,n,r,i,o,a){try{var s=t[o](a),u=s.value}catch(t){return void n(t)}s.done?e(u):Promise.resolve(u).then(r,i)}function ie(s){return function(){var t=this,a=arguments;return new Promise(function(e,n){var r=s.apply(t,a);function i(t){re(r,e,n,i,o,"next",t)}function o(t){re(r,e,n,i,o,"throw",t)}i(void 0)})}}!function(){var a={actions:document.querySelector(".actions"),background:document.querySelector(".background"),fileButton:document.getElementById("fileButton"),addToHomeScreenButton:document.getElementById("addToHomeScreen"),fileInput:document.querySelector("#file"),image:document.querySelector(".image"),displayCard:document.querySelector(".display"),scanner:document.querySelector(".scanner"),textCard:document.querySelector(".text"),text:document.querySelector("#text"),textTitle:document.querySelector("#textTitle"),uploader:document.querySelector(".uploader"),shareButton:document.getElementById("share"),snackBar:document.querySelector(".snackBar"),snackBarText:document.querySelector(".snackBar-text"),snackBarButton:document.querySelector(".snackBar-button"),isLoading:!0,isProcessing:!1,spinner:document.querySelector(".loader"),container:document.querySelector(".main")};a.getUser=ie(regeneratorRuntime.mark(function t(){return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Zt.signInAnonymously();case 2:return t.next=4,Zt.onAuthStateChanged(function(t){t?(a.uid=t.uid,console.log("User is signed in",t.uid)):console.log("User is signed out")});case 4:case"end":return t.stop()}},t,this)})),a.checkIndexedDB=function(){if(!("indexedDB"in window||"idb"in window))return console.log("This browser does not support IndexedDB"),null;console.log("indexedDB is supported"),a.dbPromise=i.a.open("files",1,function(t){if(!t.objectStoreNames.contains("data")){var e=t.createObjectStore("data");e.createIndex("src","src"),e.createIndex("text","text")}}),a.loadIndexedData("src"),a.loadIndexedData("text")},a.loadIndexedData=function(e){a.dbPromise.then(function(t){return t.transaction("data","readonly").objectStore("data").get(e)}).then(function(t){t&&"src"===e?(a.image.setAttribute("src",t),a.image.classList.add("fadeIn"),a.actions.classList.add("fadeIn")):a.displayCard.removeEventListener("click",function(){return a.fileInput.click()}),t&&"text"===e&&a.insertText(t)})},a.addData=function(n,r,i){a.dbPromise.then(function(t){var e=t.transaction(r,"readwrite");return e.objectStore(r).put(n,i),e.complete}).then(function(){a.loadIndexedData(i)})},a.listenToDB=function(){te.ref().child(a.uid).on("value",function(t){var e=t.val();e&&(a.insertText(e.text),a.addData(e.text,"data","text"),a.textCard.classList.add("text-enter"),a.isProcessing&&(a.addData(e.text,"data","text"),a.isProcessing=!1),t.ref.remove()),a.endScannerAnimation&&a.endScannerAnimation()})},a.animateScanner=function(){a.scanner.style.opacity=1;var t=document.getElementById("scanner1").animate([{transform:"translateX(0%)",opacity:1},{transform:"translateX(50%)"},{transform:"translateX(100%)"},{transform:"translateX(50%)"},{transform:"translateX(0%)",opacity:1}],{duration:3e3,iterations:1/0}),e=document.getElementById("scanner2").animate([{transform:"translateY(0%)",opacity:1},{transform:"translateY(40%)"},{transform:"translateY(35%)"},{transform:"translateY(100%)"},{transform:"translateY(60%)"},{transform:"translateY(75%)"},{transform:"translateY(50%)"},{transform:"translateY(0%)",opacity:1}],{duration:3e3,iterations:1/0});a.endScannerAnimation=function(){a.scanner.style.opacity=0,t.pause(),e.pause(),a.endScannerAnimation=null}},a.animateUploader=function(){var t=a.background;if(t.animate){var e=t.animate([{backgroundColor:"hsl(216, 20%, 34%, 0)"},{backgroundColor:"hsl(216, 90%, 34%, 1)"},{backgroundColor:"hsl(216, 20%, 34%, 0.5)"},{backgroundColor:"hsl(216, 90%, 34%, 1)"},{backgroundColor:"hsl(216, 20%, 34%, 0)"}],{duration:3e3,iterations:16});a.endUploaderAnimation=function(){e.finish(),a.endUploaderAnimation=null}}else console.log("Animate is not supported")},a.addToHomeScreen=function(){var t=a.deferredPrompt;t&&(t.prompt(),t.userChoice.then(function(t){"accepted"===t.outcome?console.log("User accepted"):console.log("User dismissed"),a.deferredPrompt=null}).catch(function(t){return console.log(t)}))},window.copyText=function(t){var e=t.innerText;if("clipboard"in navigator)navigator.clipboard.writeText(e).then(function(){a.showSnackBar("Text Copied To Clipboard","Dismiss",function(){return a.hideSnackbar()})}).catch(function(t){console.error(t)});else{var n=document.createRange();n.selectNode(e),window.getSelection().addRange(n);try{var r=document.execCommand("copy")?"successful":"unsuccessful";console.log("Copy email command was "+r)}catch(t){console.log("Oops, unable to copy")}}},window.uploadImage=function(t){var n=t.files[0],e=a.textCard,r=new FileReader;n&&(a.animateUploader(),e.classList.contains("text-enter")&&e.classList.remove("text-enter"),r.onload=function(t){var e=t.target.result;a.image.setAttribute("src",e),a.storageUpload(n.name,e),a.addData(e,"data","src")},r.readAsDataURL(n))},a.image.onload=function(t){var e=a.image,n=a.displayCard,r=e.clientHeight,i=n.clientHeight-5;if(r<i)for(;r<=i;)requestAnimationFrame(function(){return n.style.height="".concat(i,"px")}),i--;else for(;i<=r;)requestAnimationFrame(function(){return n.style.height="".concat(i,"px")}),i++;a.image.classList.add("fadeIn"),a.displayCard.classList.add("transparent")},a.showSnackBar=function(t,e,n,r){var i=a.snackBar,o=a.snackBarButton;a.snackBarText.innerText=t,e&&(o.addEventListener("click",n,{once:!0}),o.innerText=e,o.style.display="visible"),i.classList.add("snackBar-show"),a.fileButton.style.transform="translateY(-32px)",r&&setTimeout(function(){return i.classList.remove("snackBar-show")},r)},a.hideSnackbar=function(){a.snackBar.classList.remove("snackBar-show"),a.fileButton.style.transform="translateY(0px)"},a.storageUpload=function(t,e){var n=ee.ref().child(t),r={customMetadata:{uid:a.uid}},i=n.putString(e,"data_url");console.group("%cImage Upload","color: blue"),i.on("state_changed",function(t){var e=t.bytesTransferred/t.totalBytes*100;console.log("Upload is "+e+"% done")},function(t){console.log(t)},function(){n.updateMetadata(r).then(function(){a.endUploaderAnimation(),a.animateScanner()}).catch(function(t){return console.log(t)})}),console.groupEnd()},a.insertText=function(t){"object"===ne(t)&&(a.text.innerText=t.join(" "),a.textTitle.innerText="Click To Copy"),"string"==typeof t&&((a.text.innerText=t).startsWith("Oops! There doesn't appear to be any text in this image")?a.textTitle.innerText="Hmmm...":a.textTitle.innerText="Click To Copy"),a.textCard.clientHeight,a.textCard.classList.add("text-enter")},window.addEventListener("load",ie(regeneratorRuntime.mark(function t(){var e,n;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,a.checkIndexedDB();case 2:return t.next=4,a.getUser();case 4:return t.next=6,a.listenToDB();case 6:a.fileButton.addEventListener("click",function(){a.fileInput.click()}),a.addToHomeScreenButton.addEventListener("click",function(){a.addToHomeScreen()}),a.displayCard.addEventListener("click",function(){a.fileInput.click()}),window.addEventListener("beforeinstallprompt",function(t){t.preventDefault(),console.log(t),a.deferredPrompt=t,a.addToHomeScreenButton.style.display="visible",a.addToHomeScreenButton.style.opacity=1}),window.navigator.share&&(a.shareButton.style.display="visible",a.shareButton.style.opacity=1,a.shareButton.addEventListener("click",function(){window.navigator.share({title:"Textract",text:"A Progressive Web App that extracts text from images",url:"https://textract.chrisrohr.app/"}).then(function(){return console.log("Successful share")}).catch(function(t){return console.log("Error sharing",t)})})),"serviceWorker"in navigator&&(navigator.serviceWorker.register("./service-worker.js").then(function(e){console.log("Service Worker Registered"),e.onupdatefound=function(){var t=e.installing;t.onstatechange=function(){"installed"===t.state&&navigator.serviceWorker.controller&&a.showSnackBar("New Version Available!!","Refresh",function(){e.waiting.postMessage("skipWaiting")})}}}),navigator.serviceWorker.addEventListener("controllerchange",function(t){e||(window.location.reload(),e=!0)})),n=function(){return"standalone"in window.navigator&&window.navigator.standalone},function(){var t=window.navigator.userAgent.toLowerCase();return/iphone|ipad|ipod/.test(t)}()&&!n()&&console.log("is Ios"),a.isLoading&&(a.spinner.classList.add("fadeOut"),a.container.classList.add("fadeIn"),a.spinner.setAttribute("hidden",!0),a.isLoading=!1);case 16:case"end":return t.stop()}},t,this)})))}()}]);